import{s as Ae,g as Ee,C as B,D as U,b as P,d as E,M as Tn,K as Oe,i as H,N as qe,n as he,G as Er,j as ze,k as Xe,x as j,X as Yn,z as W,f as x,P as yt,o as fe,q as ci,u as ui,r as fi,v as hi,U as M0,O as C0,a0 as A0,a4 as Wu,W as fy,B as us,w as je,t as ne,l as re,m as se,e as M,L as nt,Y as Kn,a as $e,c as Te,h as rt,A as Je,Q as Gt,p as be,E as Se,a8 as I0,J as mt,S as cl,T as ul,a2 as D0,a6 as hy,H as L0,$ as Ni}from"./scheduler.ee52cacd.js";import{S as Pe,i as Ve,g as ye,a as L,c as we,t as A,b as Z,d as Q,m as X,e as K,f as et,j as R0,k as dy}from"./index.a2391391.js";import{g as qi}from"./navigation.4bf4851d.js";import{p as my}from"./stores.5de49fb7.js";import{P as Yu,C as py,g as gy,L as vy}from"./index.fc85f1f4.js";import{s as Lr,e as Ys,b as _y,g as by}from"./supabase.2c784bff.js";import{r as yy,Q as rn,s as wy,t as Ey,v as $y,w as co,x as Ty,y as Sy,z as xy,A as ky,B as Oy,C as rh}from"./index.523fac41.js";import{C as fl}from"./CheckmarkOutline.0b1688ef.js";import{C as hl}from"./CheckmarkFilled.f7226a63.js";import{g as Xr}from"./app.bd3189d3.js";import{a as My,D as Cy,S as Ay}from"./axios.49bc0800.js";import{C as Iy}from"./CourseIcon.145b149b.js";import{P as dt,V as gn,L as N0}from"./index.550ce75a.js";import{R as di}from"./index.f39bbea9.js";import{t as ih,C as Dy,B as Ly,P as Ry}from"./index.691cdcca.js";import{g as Ny}from"./globals.f8c38982.js";import{e as Fe,u as ua,d as P0,o as V0,f as Py}from"./each.4f9c2159.js";import{i as sh}from"./isEmpty.f6f5efd6.js";import{f as ah,a as Vy}from"./index.8c9a3a3e.js";import{u as B0,M as By,T as U0}from"./TextArea.af35e63e.js";import{T as mi}from"./TrashCan.b6b32865.js";import{I as cn}from"./index.e68f3ff9.js";import{L as Uy,f as uo}from"./formatYoutubeVideo.9b573f81.js";import{M as fa}from"./index.bf0b6763.js";import{g as vt,a as dl}from"./spread.5cc747ed.js";import{L as Hy}from"./List.e8fcc1c3.js";import{T as zy,a as ql}from"./index.79d3b1ae.js";import{B as Zu}from"./index.6649ce47.js";import{T as mr}from"./TextField.05bb724d.js";import{i as pt,j as Kr,u as Yr,k as H0,m as ji,c as Xu,l as fo,n as Fy,g as Gy,a as qy}from"./store.f203a796.js";import{t as Nt,l as Ku}from"./translations.f943b7b3.js";import{T as Qu}from"./Tag.87ac45b2.js";import{C as z0}from"./CopyButton.da956267.js";import{q as F0,h as jy}from"./org.1ee4885a.js";import{B as Wy}from"./Banner.a0824faa.js";import{E as Yy,C as Zy}from"./ErrorFilled.c75c44fe.js";import{F as Xy}from"./FlashFilled.60689fd0.js";import{T as G0}from"./index.846953bc.js";import{H as ml}from"./HTMLRender.93b52c11.js";import{i as Fa,g as Ky}from"./toHtml.5650e1c7.js";import{s as Dn}from"./store.21c1b842.js";import{S as Qy}from"./SkeletonPlaceholder.85251fa5.js";import{S as jl}from"./SkeletonText.4f748957.js";import{P as Jy}from"./Popover.d830a8b5.js";/* empty css                                              */import{M as ew}from"./Moon.7f4aad82.js";import{w as $r}from"./index.45ef5fca.js";import{S as Ai,b as q0,g as tw,P as j0,c as Rr,w as nw,T as rw,C as iw,R as sw,e as aw,h as ow}from"./index.4b0b47d9.js";import{d as oh,f as lw}from"./function.53788a56.js";import{p as W0}from"./user.9ccdc884.js";import{C as ms,L as cw,a as uw}from"./index.89e0ac82.js";import{d as fw,f as hw,c as dw,a as mw}from"./index.fb010e26.js";import{R as pw}from"./RadioButtonChecked.77d3c8da.js";import{S as gw,a as vw}from"./SelectItem.b7c50800.js";import{_ as Mn}from"./preload-helper.0639fc73.js";import{r as _w}from"./course.f6cde1df.js";import{O as bw,a as lh}from"./OverflowMenuItem.fb1aab9d.js";import{C as yw}from"./index.d1f5fa28.js";import{f as ch}from"./dashboard.fbd2f47f.js";import{A as ww}from"./ArrowLeft.eacc72f9.js";import{D as Ew}from"./Download.29bef1b0.js";import{a as tr,A as $w}from"./constants.35eea698.js";import{b as uh}from"./environment.987b3e32.js";import{L as Tw}from"./translation.efcfa9d6.js";import{C as Sw}from"./ChevronLeft.311fae7e.js";import{C as xw}from"./ChevronRight.109ff9f8.js";import{S as kw}from"./Save.1c35832a.js";import{D as Ow}from"./Dropdown.2e34ff7a.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="45474bc5-a3d0-46fa-8cbe-89231ceaa859",t._sentryDebugIdIdentifier="sentry-dbid-45474bc5-a3d0-46fa-8cbe-89231ceaa859")}catch{}})();function fh(t,e,n){const r=t.slice();return r[7]=e[n],r}function hh(t,e){let n,r,i="Â ",s;return{key:t,first:null,c(){n=B("div"),r=B("span"),r.textContent=i,s=j(),this.h()},l(a){n=U(a,"DIV",{});var o=P(n);r=U(o,"SPAN",{"data-svelte-h":!0}),Yn(r)!=="svelte-134o0jf"&&(r.textContent=i),s=W(o),o.forEach(E),this.h()},h(){Oe(r,"bx--link",!0),Oe(n,"bx--breadcrumb-item",!0),this.first=n},m(a,o){H(a,n,o),x(n,r),x(n,s)},p(a,o){},d(a){a&&E(n)}}}function Mw(t){let e,n=[],r=new Map,i,s,a=Fe(Array.from({length:t[1]},dh));const o=u=>u[7];for(let u=0;u<a.length;u+=1){let f=fh(t,a,u),h=o(f);r.set(h,n[u]=hh(h))}let l=[t[2]],c={};for(let u=0;u<l.length;u+=1)c=Ee(c,l[u]);return{c(){e=B("div");for(let u=0;u<n.length;u+=1)n[u].c();this.h()},l(u){e=U(u,"DIV",{});var f=P(e);for(let h=0;h<n.length;h+=1)n[h].l(f);f.forEach(E),this.h()},h(){Tn(e,c),Oe(e,"bx--skeleton",!0),Oe(e,"bx--breadcrumb",!0),Oe(e,"bx--breadcrumb--no-trailing-slash",t[0])},m(u,f){H(u,e,f);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(e,null);i||(s=[qe(e,"click",t[3]),qe(e,"mouseover",t[4]),qe(e,"mouseenter",t[5]),qe(e,"mouseleave",t[6])],i=!0)},p(u,[f]){f&2&&(a=Fe(Array.from({length:u[1]},dh)),n=ua(n,f,o,1,u,a,r,e,P0,hh,null,fh)),Tn(e,c=vt(l,[f&4&&u[2]])),Oe(e,"bx--skeleton",!0),Oe(e,"bx--breadcrumb",!0),Oe(e,"bx--breadcrumb--no-trailing-slash",u[0])},i:he,o:he,d(u){u&&E(e);for(let f=0;f<n.length;f+=1)n[f].d();i=!1,Er(s)}}}const dh=(t,e)=>e;function Cw(t,e,n){const r=["noTrailingSlash","count"];let i=ze(e,r),{noTrailingSlash:s=!1}=e,{count:a=3}=e;function o(f){yt.call(this,t,f)}function l(f){yt.call(this,t,f)}function c(f){yt.call(this,t,f)}function u(f){yt.call(this,t,f)}return t.$$set=f=>{e=Ee(Ee({},e),Xe(f)),n(2,i=ze(e,r)),"noTrailingSlash"in f&&n(0,s=f.noTrailingSlash),"count"in f&&n(1,a=f.count)},[s,a,i,o,l,c,u]}class Aw extends Pe{constructor(e){super(),Ve(this,e,Cw,Mw,Ae,{noTrailingSlash:0,count:1})}}const Iw=Aw;function Dw(t){let e,n,r,i,s;const a=t[4].default,o=ci(a,t,t[3],null);let l=[{"aria-label":"Breadcrumb"},t[2]],c={};for(let u=0;u<l.length;u+=1)c=Ee(c,l[u]);return{c(){e=B("nav"),n=B("ol"),o&&o.c(),this.h()},l(u){e=U(u,"NAV",{"aria-label":!0});var f=P(e);n=U(f,"OL",{});var h=P(n);o&&o.l(h),h.forEach(E),f.forEach(E),this.h()},h(){Oe(n,"bx--breadcrumb",!0),Oe(n,"bx--breadcrumb--no-trailing-slash",t[0]),Tn(e,c)},m(u,f){H(u,e,f),x(e,n),o&&o.m(n,null),r=!0,i||(s=[qe(e,"click",t[5]),qe(e,"mouseover",t[6]),qe(e,"mouseenter",t[7]),qe(e,"mouseleave",t[8])],i=!0)},p(u,f){o&&o.p&&(!r||f&8)&&ui(o,a,u,u[3],r?hi(a,u[3],f,null):fi(u[3]),null),(!r||f&1)&&Oe(n,"bx--breadcrumb--no-trailing-slash",u[0]),Tn(e,c=vt(l,[{"aria-label":"Breadcrumb"},f&4&&u[2]]))},i(u){r||(A(o,u),r=!0)},o(u){L(o,u),r=!1},d(u){u&&E(e),o&&o.d(u),i=!1,Er(s)}}}function Lw(t){let e,n;const r=[{noTrailingSlash:t[0]},t[2]];let i={};for(let s=0;s<r.length;s+=1)i=Ee(i,r[s]);return e=new Iw({props:i}),e.$on("click",t[9]),e.$on("mouseover",t[10]),e.$on("mouseenter",t[11]),e.$on("mouseleave",t[12]),{c(){Z(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,a){X(e,s,a),n=!0},p(s,a){const o=a&5?vt(r,[a&1&&{noTrailingSlash:s[0]},a&4&&dl(s[2])]):{};e.$set(o)},i(s){n||(A(e.$$.fragment,s),n=!0)},o(s){L(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function Rw(t){let e,n,r,i;const s=[Lw,Dw],a=[];function o(l,c){return l[1]?0:1}return e=o(t),n=a[e]=s[e](t),{c(){n.c(),r=fe()},l(l){n.l(l),r=fe()},m(l,c){a[e].m(l,c),H(l,r,c),i=!0},p(l,[c]){let u=e;e=o(l),e===u?a[e].p(l,c):(ye(),L(a[u],1,1,()=>{a[u]=null}),we(),n=a[e],n?n.p(l,c):(n=a[e]=s[e](l),n.c()),A(n,1),n.m(r.parentNode,r))},i(l){i||(A(n),i=!0)},o(l){L(n),i=!1},d(l){l&&E(r),a[e].d(l)}}}function Nw(t,e,n){const r=["noTrailingSlash","skeleton"];let i=ze(e,r),{$$slots:s={},$$scope:a}=e,{noTrailingSlash:o=!1}=e,{skeleton:l=!1}=e;function c(g){yt.call(this,t,g)}function u(g){yt.call(this,t,g)}function f(g){yt.call(this,t,g)}function h(g){yt.call(this,t,g)}function d(g){yt.call(this,t,g)}function m(g){yt.call(this,t,g)}function v(g){yt.call(this,t,g)}function p(g){yt.call(this,t,g)}return t.$$set=g=>{e=Ee(Ee({},e),Xe(g)),n(2,i=ze(e,r)),"noTrailingSlash"in g&&n(0,o=g.noTrailingSlash),"skeleton"in g&&n(1,l=g.skeleton),"$$scope"in g&&n(3,a=g.$$scope)},[o,l,i,a,s,c,u,f,h,d,m,v,p]}class Pw extends Pe{constructor(e){super(),Ve(this,e,Nw,Rw,Ae,{noTrailingSlash:0,skeleton:1})}}const Y0=Pw,Vw=t=>({props:t&4}),mh=t=>({props:{"aria-current":t[2]["aria-current"],class:"bx--link"}});function Bw(t){let e;const n=t[3].default,r=ci(n,t,t[8],mh);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,s){r&&r.m(i,s),e=!0},p(i,s){r&&r.p&&(!e||s&260)&&ui(r,n,i,i[8],e?hi(n,i[8],s,Vw):fi(i[8]),mh)},i(i){e||(A(r,i),e=!0)},o(i){L(r,i),e=!1},d(i){r&&r.d(i)}}}function Uw(t){let e,n;return e=new Uy({props:{href:t[0],"aria-current":t[2]["aria-current"],$$slots:{default:[Hw]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i&1&&(s.href=r[0]),i&4&&(s["aria-current"]=r[2]["aria-current"]),i&256&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function Hw(t){let e;const n=t[3].default,r=ci(n,t,t[8],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,s){r&&r.m(i,s),e=!0},p(i,s){r&&r.p&&(!e||s&256)&&ui(r,n,i,i[8],e?hi(n,i[8],s,null):fi(i[8]),null)},i(i){e||(A(r,i),e=!0)},o(i){L(r,i),e=!1},d(i){r&&r.d(i)}}}function zw(t){let e,n,r,i,s,a;const o=[Uw,Bw],l=[];function c(h,d){return h[0]?0:1}n=c(t),r=l[n]=o[n](t);let u=[t[2]],f={};for(let h=0;h<u.length;h+=1)f=Ee(f,u[h]);return{c(){e=B("li"),r.c(),this.h()},l(h){e=U(h,"LI",{});var d=P(e);r.l(d),d.forEach(E),this.h()},h(){Tn(e,f),Oe(e,"bx--breadcrumb-item",!0),Oe(e,"bx--breadcrumb-item--current",t[1]&&t[2]["aria-current"]!=="page")},m(h,d){H(h,e,d),l[n].m(e,null),i=!0,s||(a=[qe(e,"click",t[4]),qe(e,"mouseover",t[5]),qe(e,"mouseenter",t[6]),qe(e,"mouseleave",t[7])],s=!0)},p(h,[d]){let m=n;n=c(h),n===m?l[n].p(h,d):(ye(),L(l[m],1,1,()=>{l[m]=null}),we(),r=l[n],r?r.p(h,d):(r=l[n]=o[n](h),r.c()),A(r,1),r.m(e,null)),Tn(e,f=vt(u,[d&4&&h[2]])),Oe(e,"bx--breadcrumb-item",!0),Oe(e,"bx--breadcrumb-item--current",h[1]&&h[2]["aria-current"]!=="page")},i(h){i||(A(r),i=!0)},o(h){L(r),i=!1},d(h){h&&E(e),l[n].d(),s=!1,Er(a)}}}function Fw(t,e,n){const r=["href","isCurrentPage"];let i=ze(e,r),{$$slots:s={},$$scope:a}=e,{href:o=void 0}=e,{isCurrentPage:l=!1}=e;M0("BreadcrumbItem",{});function c(d){yt.call(this,t,d)}function u(d){yt.call(this,t,d)}function f(d){yt.call(this,t,d)}function h(d){yt.call(this,t,d)}return t.$$set=d=>{e=Ee(Ee({},e),Xe(d)),n(2,i=ze(e,r)),"href"in d&&n(0,o=d.href),"isCurrentPage"in d&&n(1,l=d.isCurrentPage),"$$scope"in d&&n(8,a=d.$$scope)},[o,l,i,s,c,u,f,h,a]}class Gw extends Pe{constructor(e){super(),Ve(this,e,Fw,zw,Ae,{href:0,isCurrentPage:1})}}const Ac=Gw;function qw(t){let e,n,r,i;const s=t[6].default,a=ci(s,t,t[5],null);let o=[{role:"tablist"},t[1]],l={};for(let c=0;c<o.length;c+=1)l=Ee(l,o[c]);return{c(){e=B("div"),a&&a.c(),this.h()},l(c){e=U(c,"DIV",{role:!0});var u=P(e);a&&a.l(u),u.forEach(E),this.h()},h(){Tn(e,l),Oe(e,"bx--content-switcher",!0),Oe(e,"bx--content-switcher--sm",t[0]==="sm"),Oe(e,"bx--content-switcher--xl",t[0]==="xl")},m(c,u){H(c,e,u),a&&a.m(e,null),n=!0,r||(i=[qe(e,"click",t[7]),qe(e,"mouseover",t[8]),qe(e,"mouseenter",t[9]),qe(e,"mouseleave",t[10])],r=!0)},p(c,[u]){a&&a.p&&(!n||u&32)&&ui(a,s,c,c[5],n?hi(s,c[5],u,null):fi(c[5]),null),Tn(e,l=vt(o,[{role:"tablist"},u&2&&c[1]])),Oe(e,"bx--content-switcher",!0),Oe(e,"bx--content-switcher--sm",c[0]==="sm"),Oe(e,"bx--content-switcher--xl",c[0]==="xl")},i(c){n||(A(a,c),n=!0)},o(c){L(a,c),n=!1},d(c){c&&E(e),a&&a.d(c),r=!1,Er(i)}}}function jw(t,e,n){let r,i;const s=["selectedIndex","size"];let a=ze(e,s),{$$slots:o={},$$scope:l}=e,{selectedIndex:c=0}=e,{size:u=void 0}=e;const f=C0(),h=$r(null);M0("ContentSwitcher",{currentId:h,add:({id:g,text:_,selected:b})=>{b&&n(2,c=i.length),n(4,i=[...i,{id:g,text:_,selected:b}])},update:g=>{n(2,c=i.map(({id:_})=>_).indexOf(g))},change:g=>{let _=r+g;_<0?_=i.length-1:_>=i.length&&(_=0),n(2,c=_)}}),A0(()=>{c!==r&&n(3,r=c)});function d(g){yt.call(this,t,g)}function m(g){yt.call(this,t,g)}function v(g){yt.call(this,t,g)}function p(g){yt.call(this,t,g)}return t.$$set=g=>{e=Ee(Ee({},e),Xe(g)),n(1,a=ze(e,s)),"selectedIndex"in g&&n(2,c=g.selectedIndex),"size"in g&&n(0,u=g.size),"$$scope"in g&&n(5,l=g.$$scope)},t.$$.update=()=>{t.$$.dirty&24&&i[r]&&(f("change",r),h.set(i[r].id))},n(3,r=-1),n(4,i=[]),[u,a,c,r,i,l,o,d,m,v,p]}class Ww extends Pe{constructor(e){super(),Ve(this,e,jw,qw,Ae,{selectedIndex:2,size:0})}}const Yw=Ww;function Zw(t){let e;return{c(){e=ne(t[2])},l(n){e=re(n,t[2])},m(n,r){H(n,e,r)},p(n,r){r&4&&se(e,n[2])},d(n){n&&E(e)}}}function Xw(t){let e,n,r,i,s,a;const o=t[8].default,l=ci(o,t,t[7],null),c=l||Zw(t);let u=[{type:"button"},{role:"tab"},{tabindex:r=t[0]?"0":"-1"},{"aria-selected":t[0]},{disabled:t[3]},{id:t[4]},t[6]],f={};for(let h=0;h<u.length;h+=1)f=Ee(f,u[h]);return{c(){e=B("button"),n=B("span"),c&&c.c(),this.h()},l(h){e=U(h,"BUTTON",{type:!0,role:!0,tabindex:!0,"aria-selected":!0,id:!0});var d=P(e);n=U(d,"SPAN",{});var m=P(n);c&&c.l(m),m.forEach(E),d.forEach(E),this.h()},h(){Oe(n,"bx--content-switcher__label",!0),Tn(e,f),Oe(e,"bx--content-switcher-btn",!0),Oe(e,"bx--content-switcher--selected",t[0])},m(h,d){H(h,e,d),x(e,n),c&&c.m(n,null),e.autofocus&&e.focus(),t[14](e),i=!0,s||(a=[qe(e,"click",t[9]),qe(e,"click",Wu(t[15])),qe(e,"mouseover",t[10]),qe(e,"mouseenter",t[11]),qe(e,"mouseleave",t[12]),qe(e,"keydown",t[13]),qe(e,"keydown",t[16])],s=!0)},p(h,[d]){l?l.p&&(!i||d&128)&&ui(l,o,h,h[7],i?hi(o,h[7],d,null):fi(h[7]),null):c&&c.p&&(!i||d&4)&&c.p(h,i?d:-1),Tn(e,f=vt(u,[{type:"button"},{role:"tab"},(!i||d&1&&r!==(r=h[0]?"0":"-1"))&&{tabindex:r},(!i||d&1)&&{"aria-selected":h[0]},(!i||d&8)&&{disabled:h[3]},(!i||d&16)&&{id:h[4]},d&64&&h[6]])),Oe(e,"bx--content-switcher-btn",!0),Oe(e,"bx--content-switcher--selected",h[0])},i(h){i||(A(c,h),i=!0)},o(h){L(c,h),i=!1},d(h){h&&E(e),c&&c.d(h),t[14](null),s=!1,Er(a)}}}function Kw(t,e,n){const r=["text","selected","disabled","id","ref"];let i=ze(e,r),{$$slots:s={},$$scope:a}=e,{text:o="Provide text"}=e,{selected:l=!1}=e,{disabled:c=!1}=e,{id:u="ccs-"+Math.random().toString(36)}=e,{ref:f=null}=e;const h=fy("ContentSwitcher");h.add({id:u,text:o,selected:l});const d=h.currentId.subscribe($=>{n(0,l=$===u)});A0(()=>{l&&f.focus()}),us(()=>()=>d());function m($){yt.call(this,t,$)}function v($){yt.call(this,t,$)}function p($){yt.call(this,t,$)}function g($){yt.call(this,t,$)}function _($){yt.call(this,t,$)}function b($){je[$?"unshift":"push"](()=>{f=$,n(1,f)})}const y=()=>{h.update(u)},w=({key:$})=>{$==="ArrowRight"?h.change(1):$==="ArrowLeft"&&h.change(-1)};return t.$$set=$=>{e=Ee(Ee({},e),Xe($)),n(6,i=ze(e,r)),"text"in $&&n(2,o=$.text),"selected"in $&&n(0,l=$.selected),"disabled"in $&&n(3,c=$.disabled),"id"in $&&n(4,u=$.id),"ref"in $&&n(1,f=$.ref),"$$scope"in $&&n(7,a=$.$$scope)},[l,f,o,c,u,h,i,a,s,m,v,p,g,_,b,y,w]}class Qw extends Pe{constructor(e){super(),Ve(this,e,Kw,Xw,Ae,{text:2,selected:0,disabled:3,id:4,ref:1})}}const ph=Qw,Jw=t=>({}),gh=t=>({});function e2(t){let e;return{c(){e=ne(t[4])},l(n){e=re(n,t[4])},m(n,r){H(n,e,r)},p(n,r){r&16&&se(e,n[4])},d(n){n&&E(e)}}}function vh(t){let e,n,r;var i=t[10][t[2]];function s(a,o){return{props:{class:"bx--progress-bar__status-icon"}}}return i&&(e=Kn(i,s())),{c(){e&&Z(e.$$.fragment),n=fe()},l(a){e&&Q(e.$$.fragment,a),n=fe()},m(a,o){e&&X(e,a,o),H(a,n,o),r=!0},p(a,o){if(o&4&&i!==(i=a[10][a[2]])){if(e){ye();const l=e;L(l.$$.fragment,1,0,()=>{K(l,1)}),we()}i?(e=Kn(i,s()),Z(e.$$.fragment),A(e.$$.fragment,1),X(e,n.parentNode,n)):e=null}},i(a){r||(e&&A(e.$$.fragment,a),r=!0)},o(a){e&&L(e.$$.fragment,a),r=!1},d(a){a&&E(n),e&&K(e,a)}}}function _h(t){let e,n;return{c(){e=B("div"),n=ne(t[6]),this.h()},l(r){e=U(r,"DIV",{id:!0});var i=P(e);n=re(i,t[6]),i.forEach(E),this.h()},h(){M(e,"id",t[11]),Oe(e,"bx--progress-bar__helper-text",!0)},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&64&&se(n,r[6])},d(r){r&&E(e)}}}function t2(t){let e,n,r,i,s,a,o,l,c,u,f,h,d;const m=t[15].labelText,v=ci(m,t,t[14],gh),p=v||e2(t);let g=(t[2]==="error"||t[2]==="finished")&&vh(t),_=t[6]&&_h(t),b=[t[12]],y={};for(let w=0;w<b.length;w+=1)y=Ee(y,b[w]);return{c(){e=B("div"),n=B("label"),p&&p.c(),r=j(),g&&g.c(),i=j(),s=B("div"),a=B("div"),h=j(),_&&_.c(),this.h()},l(w){e=U(w,"DIV",{});var $=P(e);n=U($,"LABEL",{for:!0});var k=P(n);p&&p.l(k),r=W(k),g&&g.l(k),k.forEach(E),i=W($),s=U($,"DIV",{role:!0,id:!0,"aria-busy":!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0,"aria-describedby":!0});var C=P(s);a=U(C,"DIV",{}),P(a).forEach(E),C.forEach(E),h=W($),_&&_.l($),$.forEach(E),this.h()},h(){M(n,"for",t[7]),Oe(n,"bx--progress-bar__label",!0),Oe(n,"bx--visually-hidden",t[5]),Oe(a,"bx--progress-bar__bar",!0),nt(a,"transform",t[2]==="active"&&`scaleX(${t[8]/t[0]})`),M(s,"role","progressbar"),M(s,"id",t[7]),M(s,"aria-busy",o=t[2]==="active"),M(s,"aria-valuemin",l=t[9]?void 0:0),M(s,"aria-valuemax",c=t[9]?void 0:t[0]),M(s,"aria-valuenow",u=t[9]?void 0:t[8]),M(s,"aria-describedby",f=t[6]?t[11]:null),Oe(s,"bx--progress-bar__track",!0),Tn(e,y),Oe(e,"bx--progress-bar",!0),Oe(e,"bx--progress-bar--indeterminate",t[9]),Oe(e,"bx--progress-bar--big",t[3]==="md"),Oe(e,"bx--progress-bar--small",t[3]==="sm"),Oe(e,"bx--progress-bar--inline",t[1]==="inline"),Oe(e,"bx--progress-bar--indented",t[1]==="indented"),Oe(e,"bx--progress-bar--error",t[2]==="error"),Oe(e,"bx--progress-bar--finished",t[2]==="finished")},m(w,$){H(w,e,$),x(e,n),p&&p.m(n,null),x(n,r),g&&g.m(n,null),x(e,i),x(e,s),x(s,a),x(e,h),_&&_.m(e,null),d=!0},p(w,[$]){v?v.p&&(!d||$&16384)&&ui(v,m,w,w[14],d?hi(m,w[14],$,Jw):fi(w[14]),gh):p&&p.p&&(!d||$&16)&&p.p(w,d?$:-1),w[2]==="error"||w[2]==="finished"?g?(g.p(w,$),$&4&&A(g,1)):(g=vh(w),g.c(),A(g,1),g.m(n,null)):g&&(ye(),L(g,1,1,()=>{g=null}),we()),(!d||$&128)&&M(n,"for",w[7]),(!d||$&32)&&Oe(n,"bx--visually-hidden",w[5]),$&261&&nt(a,"transform",w[2]==="active"&&`scaleX(${w[8]/w[0]})`),(!d||$&128)&&M(s,"id",w[7]),(!d||$&4&&o!==(o=w[2]==="active"))&&M(s,"aria-busy",o),(!d||$&512&&l!==(l=w[9]?void 0:0))&&M(s,"aria-valuemin",l),(!d||$&513&&c!==(c=w[9]?void 0:w[0]))&&M(s,"aria-valuemax",c),(!d||$&768&&u!==(u=w[9]?void 0:w[8]))&&M(s,"aria-valuenow",u),(!d||$&64&&f!==(f=w[6]?w[11]:null))&&M(s,"aria-describedby",f),w[6]?_?_.p(w,$):(_=_h(w),_.c(),_.m(e,null)):_&&(_.d(1),_=null),Tn(e,y=vt(b,[$&4096&&w[12]])),Oe(e,"bx--progress-bar",!0),Oe(e,"bx--progress-bar--indeterminate",w[9]),Oe(e,"bx--progress-bar--big",w[3]==="md"),Oe(e,"bx--progress-bar--small",w[3]==="sm"),Oe(e,"bx--progress-bar--inline",w[1]==="inline"),Oe(e,"bx--progress-bar--indented",w[1]==="indented"),Oe(e,"bx--progress-bar--error",w[2]==="error"),Oe(e,"bx--progress-bar--finished",w[2]==="finished")},i(w){d||(A(p,w),A(g),d=!0)},o(w){L(p,w),L(g),d=!1},d(w){w&&E(e),p&&p.d(w),g&&g.d(),_&&_.d()}}}function n2(t,e,n){let r;const i=["value","max","kind","status","size","labelText","hideLabel","helperText","id"];let s=ze(e,i),{$$slots:a={},$$scope:o}=e,{value:l=void 0}=e,{max:c=100}=e,{kind:u="default"}=e,{status:f="active"}=e,{size:h="md"}=e,{labelText:d=""}=e,{hideLabel:m=!1}=e,{helperText:v=""}=e,{id:p="ccs-"+Math.random().toString(36)}=e;const g={error:Yy,finished:Zy};let _="ccs-"+Math.random().toString(36),b;return t.$$set=y=>{e=Ee(Ee({},e),Xe(y)),n(12,s=ze(e,i)),"value"in y&&n(13,l=y.value),"max"in y&&n(0,c=y.max),"kind"in y&&n(1,u=y.kind),"status"in y&&n(2,f=y.status),"size"in y&&n(3,h=y.size),"labelText"in y&&n(4,d=y.labelText),"hideLabel"in y&&n(5,m=y.hideLabel),"helperText"in y&&n(6,v=y.helperText),"id"in y&&n(7,p=y.id),"$$scope"in y&&n(14,o=y.$$scope)},t.$$.update=()=>{t.$$.dirty&8196&&n(9,r=l===void 0&&f==="active"),t.$$.dirty&8197&&(f==="error"||l<0?n(8,b=0):l>c?n(8,b=c):n(8,b=l))},[c,u,f,h,d,m,v,p,b,r,g,_,s,l,o,a]}class r2 extends Pe{constructor(e){super(),Ve(this,e,n2,t2,Ae,{value:13,max:0,kind:1,status:2,size:3,labelText:4,hideLabel:5,helperText:6,id:7})}}const i2=r2;function bh(t){let e,n;return{c(){e=$e("title"),n=ne(t[1])},l(r){e=Te(r,"title",{});var i=P(e);n=re(i,t[1]),i.forEach(E)},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&2&&se(n,r[1])},d(r){r&&E(e)}}}function s2(t){let e,n,r,i=t[1]&&bh(t),s=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],a={};for(let o=0;o<s.length;o+=1)a=Ee(a,s[o]);return{c(){e=$e("svg"),i&&i.c(),n=$e("path"),r=$e("path"),this.h()},l(o){e=Te(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var l=P(e);i&&i.l(l),n=Te(l,"path",{d:!0}),P(n).forEach(E),r=Te(l,"path",{d:!0}),P(r).forEach(E),l.forEach(E),this.h()},h(){M(n,"d","M16,4c6.6,0,12,5.4,12,12s-5.4,12-12,12S4,22.6,4,16S9.4,4,16,4 M16,2C8.3,2,2,8.3,2,16s6.3,14,14,14s14-6.3,14-14	S23.7,2,16,2z"),M(r,"d","M24 15L17 15 17 8 15 8 15 15 8 15 8 17 15 17 15 24 17 24 17 17 24 17z"),rt(e,a)},m(o,l){H(o,e,l),i&&i.m(e,null),x(e,n),x(e,r)},p(o,[l]){o[1]?i?i.p(o,l):(i=bh(o),i.c(),i.m(e,n)):i&&(i.d(1),i=null),rt(e,a=vt(s,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},l&1&&{width:o[0]},l&1&&{height:o[0]},l&4&&o[2],l&8&&o[3]]))},i:he,o:he,d(o){o&&E(e),i&&i.d()}}}function a2(t,e,n){let r,i;const s=["size","title"];let a=ze(e,s),{size:o=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Ee(Ee({},e),Xe(c))),n(3,a=ze(e,s)),"size"in c&&n(0,o=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[o,l,i,a,r]}class o2 extends Pe{constructor(e){super(),Ve(this,e,a2,s2,Ae,{size:0,title:1})}}function yh(t){let e,n;return{c(){e=$e("title"),n=ne(t[1])},l(r){e=Te(r,"title",{});var i=P(e);n=re(i,t[1]),i.forEach(E)},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&2&&se(n,r[1])},d(r){r&&E(e)}}}function l2(t){let e,n,r,i=t[1]&&yh(t),s=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],a={};for(let o=0;o<s.length;o+=1)a=Ee(a,s[o]);return{c(){e=$e("svg"),i&&i.c(),n=$e("path"),r=$e("path"),this.h()},l(o){e=Te(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var l=P(e);i&&i.l(l),n=Te(l,"path",{d:!0}),P(n).forEach(E),r=Te(l,"path",{fill:!0,d:!0,"data-icon-path":!0}),P(r).forEach(E),l.forEach(E),this.h()},h(){M(n,"d","M16,2A14.1725,14.1725,0,0,0,2,16,14.1725,14.1725,0,0,0,16,30,14.1725,14.1725,0,0,0,30,16,14.1725,14.1725,0,0,0,16,2Zm8,15H17v7H15V17H8V15h7V8h2v7h7Z"),M(r,"fill","none"),M(r,"d","M24 17L17 17 17 24 15 24 15 17 8 17 8 15 15 15 15 8 17 8 17 15 24 15 24 17z"),M(r,"data-icon-path","inner-path"),rt(e,a)},m(o,l){H(o,e,l),i&&i.m(e,null),x(e,n),x(e,r)},p(o,[l]){o[1]?i?i.p(o,l):(i=yh(o),i.c(),i.m(e,n)):i&&(i.d(1),i=null),rt(e,a=vt(s,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},l&1&&{width:o[0]},l&1&&{height:o[0]},l&4&&o[2],l&8&&o[3]]))},i:he,o:he,d(o){o&&E(e),i&&i.d()}}}function c2(t,e,n){let r,i;const s=["size","title"];let a=ze(e,s),{size:o=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Ee(Ee({},e),Xe(c))),n(3,a=ze(e,s)),"size"in c&&n(0,o=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[o,l,i,a,r]}class u2 extends Pe{constructor(e){super(),Ve(this,e,c2,l2,Ae,{size:0,title:1})}}function wh(t){let e,n;return{c(){e=$e("title"),n=ne(t[1])},l(r){e=Te(r,"title",{});var i=P(e);n=re(i,t[1]),i.forEach(E)},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&2&&se(n,r[1])},d(r){r&&E(e)}}}function f2(t){let e,n,r,i=t[1]&&wh(t),s=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],a={};for(let o=0;o<s.length;o+=1)a=Ee(a,s[o]);return{c(){e=$e("svg"),i&&i.c(),n=$e("path"),r=$e("path"),this.h()},l(o){e=Te(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var l=P(e);i&&i.l(l),n=Te(l,"path",{d:!0}),P(n).forEach(E),r=Te(l,"path",{d:!0}),P(r).forEach(E),l.forEach(E),this.h()},h(){M(n,"d","M26,30H6a2.0023,2.0023,0,0,1-2-2V4A2.0023,2.0023,0,0,1,6,2H26a2.0023,2.0023,0,0,1,2,2V28A2.0023,2.0023,0,0,1,26,30ZM6,4V28H26V4Z"),M(r,"d","M9 7H20V9H9zM9 12H16V14H9z"),rt(e,a)},m(o,l){H(o,e,l),i&&i.m(e,null),x(e,n),x(e,r)},p(o,[l]){o[1]?i?i.p(o,l):(i=wh(o),i.c(),i.m(e,n)):i&&(i.d(1),i=null),rt(e,a=vt(s,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},l&1&&{width:o[0]},l&1&&{height:o[0]},l&4&&o[2],l&8&&o[3]]))},i:he,o:he,d(o){o&&E(e),i&&i.d()}}}function h2(t,e,n){let r,i;const s=["size","title"];let a=ze(e,s),{size:o=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Ee(Ee({},e),Xe(c))),n(3,a=ze(e,s)),"size"in c&&n(0,o=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[o,l,i,a,r]}class d2 extends Pe{constructor(e){super(),Ve(this,e,h2,f2,Ae,{size:0,title:1})}}function Eh(t){let e,n;return{c(){e=$e("title"),n=ne(t[1])},l(r){e=Te(r,"title",{});var i=P(e);n=re(i,t[1]),i.forEach(E)},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&2&&se(n,r[1])},d(r){r&&E(e)}}}function m2(t){let e,n,r=t[1]&&Eh(t),i=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],s={};for(let a=0;a<i.length;a+=1)s=Ee(s,i[a]);return{c(){e=$e("svg"),r&&r.c(),n=$e("path"),this.h()},l(a){e=Te(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var o=P(e);r&&r.l(o),n=Te(o,"path",{d:!0}),P(n).forEach(E),o.forEach(E),this.h()},h(){M(n,"d","M12 8L22 16 12 24z"),rt(e,s)},m(a,o){H(a,e,o),r&&r.m(e,null),x(e,n)},p(a,[o]){a[1]?r?r.p(a,o):(r=Eh(a),r.c(),r.m(e,n)):r&&(r.d(1),r=null),rt(e,s=vt(i,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},o&1&&{width:a[0]},o&1&&{height:a[0]},o&4&&a[2],o&8&&a[3]]))},i:he,o:he,d(a){a&&E(e),r&&r.d()}}}function p2(t,e,n){let r,i;const s=["size","title"];let a=ze(e,s),{size:o=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Ee(Ee({},e),Xe(c))),n(3,a=ze(e,s)),"size"in c&&n(0,o=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[o,l,i,a,r]}class g2 extends Pe{constructor(e){super(),Ve(this,e,p2,m2,Ae,{size:0,title:1})}}function $h(t){let e,n;return{c(){e=$e("title"),n=ne(t[1])},l(r){e=Te(r,"title",{});var i=P(e);n=re(i,t[1]),i.forEach(E)},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&2&&se(n,r[1])},d(r){r&&E(e)}}}function v2(t){let e,n,r,i=t[1]&&$h(t),s=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],a={};for(let o=0;o<s.length;o+=1)a=Ee(a,s[o]);return{c(){e=$e("svg"),i&&i.c(),n=$e("path"),r=$e("path"),this.h()},l(o){e=Te(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var l=P(e);i&&i.l(l),n=Te(l,"path",{d:!0}),P(n).forEach(E),r=Te(l,"path",{fill:!0,d:!0,"data-icon-path":!0}),P(r).forEach(E),l.forEach(E),this.h()},h(){M(n,"d","M26,4H6A2,2,0,0,0,4,6V26a2,2,0,0,0,2,2H26a2,2,0,0,0,2-2V6A2,2,0,0,0,26,4ZM14,21.5,9,16.5427,10.5908,15,14,18.3456,21.4087,11l1.5918,1.5772Z"),M(r,"fill","none"),M(r,"d","M14,21.5,9,16.5427,10.5908,15,14,18.3456,21.4087,11l1.5918,1.5772Z"),M(r,"data-icon-path","inner-path"),rt(e,a)},m(o,l){H(o,e,l),i&&i.m(e,null),x(e,n),x(e,r)},p(o,[l]){o[1]?i?i.p(o,l):(i=$h(o),i.c(),i.m(e,n)):i&&(i.d(1),i=null),rt(e,a=vt(s,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},l&1&&{width:o[0]},l&1&&{height:o[0]},l&4&&o[2],l&8&&o[3]]))},i:he,o:he,d(o){o&&E(e),i&&i.d()}}}function _2(t,e,n){let r,i;const s=["size","title"];let a=ze(e,s),{size:o=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Ee(Ee({},e),Xe(c))),n(3,a=ze(e,s)),"size"in c&&n(0,o=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[o,l,i,a,r]}class b2 extends Pe{constructor(e){super(),Ve(this,e,_2,v2,Ae,{size:0,title:1})}}function Th(t){let e,n;return{c(){e=$e("title"),n=ne(t[1])},l(r){e=Te(r,"title",{});var i=P(e);n=re(i,t[1]),i.forEach(E)},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&2&&se(n,r[1])},d(r){r&&E(e)}}}function y2(t){let e,n,r,i=t[1]&&Th(t),s=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],a={};for(let o=0;o<s.length;o+=1)a=Ee(a,s[o]);return{c(){e=$e("svg"),i&&i.c(),n=$e("path"),r=$e("path"),this.h()},l(o){e=Te(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var l=P(e);i&&i.l(l),n=Te(l,"path",{d:!0}),P(n).forEach(E),r=Te(l,"path",{d:!0}),P(r).forEach(E),l.forEach(E),this.h()},h(){M(n,"d","M20.4131,14.584,12.416,6.5869a2.0016,2.0016,0,0,0-2.832,0L1.5869,14.584a2.0016,2.0016,0,0,0,0,2.832l3.2915,3.2915L3,22.5859,4.4141,24l1.8784-1.8784L9.584,25.4131a2.0016,2.0016,0,0,0,2.832,0l2.2559-2.2559-1.4156-1.4155L10.998,23.999,3.001,16.002l7.997-8.001,8.001,8.001L17.5,17.5l1.4146,1.4146,1.4985-1.4986a2.0016,2.0016,0,0,0,0-2.832Z"),M(r,"d","M30.4131,14.584l-3.2915-3.2915L29,9.4141,27.5859,8,25.7075,9.8784,22.416,6.5869a2.0016,2.0016,0,0,0-2.832,0L17.3281,8.8428l1.4146,1.4145L20.998,8.001l8.001,8.001-8.001,7.997-7.997-7.997,1.5-1.501-1.4156-1.4156L11.5869,14.584a2.0016,2.0016,0,0,0,0,2.832l7.9971,7.9971a2.0016,2.0016,0,0,0,2.832,0l7.9971-7.9971a2.0016,2.0016,0,0,0,0-2.832Z"),rt(e,a)},m(o,l){H(o,e,l),i&&i.m(e,null),x(e,n),x(e,r)},p(o,[l]){o[1]?i?i.p(o,l):(i=Th(o),i.c(),i.m(e,n)):i&&(i.d(1),i=null),rt(e,a=vt(s,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},l&1&&{width:o[0]},l&1&&{height:o[0]},l&4&&o[2],l&8&&o[3]]))},i:he,o:he,d(o){o&&E(e),i&&i.d()}}}function w2(t,e,n){let r,i;const s=["size","title"];let a=ze(e,s),{size:o=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Ee(Ee({},e),Xe(c))),n(3,a=ze(e,s)),"size"in c&&n(0,o=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[o,l,i,a,r]}class E2 extends Pe{constructor(e){super(),Ve(this,e,w2,y2,Ae,{size:0,title:1})}}function Sh(t){let e,n;return{c(){e=$e("title"),n=ne(t[1])},l(r){e=Te(r,"title",{});var i=P(e);n=re(i,t[1]),i.forEach(E)},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&2&&se(n,r[1])},d(r){r&&E(e)}}}function $2(t){let e,n,r=t[1]&&Sh(t),i=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],s={};for(let a=0;a<i.length;a+=1)s=Ee(s,i[a]);return{c(){e=$e("svg"),r&&r.c(),n=$e("path"),this.h()},l(a){e=Te(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var o=P(e);r&&r.l(o),n=Te(o,"path",{d:!0}),P(n).forEach(E),o.forEach(E),this.h()},h(){M(n,"d","M2 26H30V28H2zM25.4 9c.8-.8.8-2 0-2.8 0 0 0 0 0 0l-3.6-3.6c-.8-.8-2-.8-2.8 0 0 0 0 0 0 0l-15 15V24h6.4L25.4 9zM20.4 4L24 7.6l-3 3L17.4 7 20.4 4zM6 22v-3.6l10-10 3.6 3.6-10 10H6z"),rt(e,s)},m(a,o){H(a,e,o),r&&r.m(e,null),x(e,n)},p(a,[o]){a[1]?r?r.p(a,o):(r=Sh(a),r.c(),r.m(e,n)):r&&(r.d(1),r=null),rt(e,s=vt(i,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},o&1&&{width:a[0]},o&1&&{height:a[0]},o&4&&a[2],o&8&&a[3]]))},i:he,o:he,d(a){a&&E(e),r&&r.d()}}}function T2(t,e,n){let r,i;const s=["size","title"];let a=ze(e,s),{size:o=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Ee(Ee({},e),Xe(c))),n(3,a=ze(e,s)),"size"in c&&n(0,o=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[o,l,i,a,r]}class S2 extends Pe{constructor(e){super(),Ve(this,e,T2,$2,Ae,{size:0,title:1})}}function xh(t){let e,n;return{c(){e=$e("title"),n=ne(t[1])},l(r){e=Te(r,"title",{});var i=P(e);n=re(i,t[1]),i.forEach(E)},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&2&&se(n,r[1])},d(r){r&&E(e)}}}function x2(t){let e,n,r,i,s,a,o,l,c,u=t[1]&&xh(t),f=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],h={};for(let d=0;d<f.length;d+=1)h=Ee(h,f[d]);return{c(){e=$e("svg"),u&&u.c(),n=$e("path"),r=$e("circle"),i=$e("path"),s=$e("circle"),a=$e("path"),o=$e("circle"),l=$e("path"),c=$e("path"),this.h()},l(d){e=Te(d,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var m=P(e);u&&u.l(m),n=Te(m,"path",{d:!0}),P(n).forEach(E),r=Te(m,"circle",{cx:!0,cy:!0,r:!0}),P(r).forEach(E),i=Te(m,"path",{d:!0}),P(i).forEach(E),s=Te(m,"circle",{cx:!0,cy:!0,r:!0}),P(s).forEach(E),a=Te(m,"path",{d:!0}),P(a).forEach(E),o=Te(m,"circle",{cx:!0,cy:!0,r:!0}),P(o).forEach(E),l=Te(m,"path",{d:!0}),P(l).forEach(E),c=Te(m,"path",{d:!0}),P(c).forEach(E),m.forEach(E),this.h()},h(){M(n,"d","M20 25H27V27H20zM22 29H25V31H22zM27 23h-2c0-1.1.4-2 1.2-2.8l.5-.5c.8-.8 1.3-2 1.3-3.2 0-2.5-2-4.5-4.5-4.5S19 14 19 16.5c0 1.2.5 2.3 1.3 3.2l.5.5C21.6 21 22 21.9 22 23h-2c0-.5-.2-1-.6-1.4l-.5-.5c-1.2-1.2-1.9-2.9-1.9-4.6 0-3.6 2.9-6.5 6.5-6.5s6.5 2.9 6.5 6.5c0 1.7-.7 3.4-1.9 4.6l-.5.5C27.2 22 27 22.5 27 23zM6 22H14V24H6z"),M(r,"cx","12"),M(r,"cy","19"),M(r,"r","1"),M(i,"d","M6 18H9V20H6zM6 14H13V16H6zM10 10H17V12H10z"),M(s,"cx","7"),M(s,"cy","11"),M(s,"r","1"),M(a,"d","M16 6H20V8H16z"),M(o,"cx","13"),M(o,"cy","7"),M(o,"r","1"),M(l,"d","M6 6H10V8H6z"),M(c,"d","M18,28H4V4l18,0v4h2V4c0-1.1-0.9-2-2-2H4C2.9,2,2,2.9,2,4v24c0,1.1,0.9,2,2,2h14V28z"),rt(e,h)},m(d,m){H(d,e,m),u&&u.m(e,null),x(e,n),x(e,r),x(e,i),x(e,s),x(e,a),x(e,o),x(e,l),x(e,c)},p(d,[m]){d[1]?u?u.p(d,m):(u=xh(d),u.c(),u.m(e,n)):u&&(u.d(1),u=null),rt(e,h=vt(f,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},m&1&&{width:d[0]},m&1&&{height:d[0]},m&4&&d[2],m&8&&d[3]]))},i:he,o:he,d(d){d&&E(e),u&&u.d()}}}function k2(t,e,n){let r,i;const s=["size","title"];let a=ze(e,s),{size:o=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Ee(Ee({},e),Xe(c))),n(3,a=ze(e,s)),"size"in c&&n(0,o=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[o,l,i,a,r]}class O2 extends Pe{constructor(e){super(),Ve(this,e,k2,x2,Ae,{size:0,title:1})}}function kh(t){let e,n;return{c(){e=$e("title"),n=ne(t[1])},l(r){e=Te(r,"title",{});var i=P(e);n=re(i,t[1]),i.forEach(E)},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&2&&se(n,r[1])},d(r){r&&E(e)}}}function M2(t){let e,n,r,i=t[1]&&kh(t),s=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],a={};for(let o=0;o<s.length;o+=1)a=Ee(a,s[o]);return{c(){e=$e("svg"),i&&i.c(),n=$e("path"),r=$e("path"),this.h()},l(o){e=Te(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var l=P(e);i&&i.l(l),n=Te(l,"path",{d:!0}),P(n).forEach(E),r=Te(l,"path",{d:!0}),P(r).forEach(E),l.forEach(E),this.h()},h(){M(n,"d","M29.25,6.76a6,6,0,0,0-8.5,0l1.42,1.42a4,4,0,1,1,5.67,5.67l-8,8a4,4,0,1,1-5.67-5.66l1.41-1.42-1.41-1.42-1.42,1.42a6,6,0,0,0,0,8.5A6,6,0,0,0,17,25a6,6,0,0,0,4.27-1.76l8-8A6,6,0,0,0,29.25,6.76Z"),M(r,"d","M4.19,24.82a4,4,0,0,1,0-5.67l8-8a4,4,0,0,1,5.67,0A3.94,3.94,0,0,1,19,14a4,4,0,0,1-1.17,2.85L15.71,19l1.42,1.42,2.12-2.12a6,6,0,0,0-8.51-8.51l-8,8a6,6,0,0,0,0,8.51A6,6,0,0,0,7,28a6.07,6.07,0,0,0,4.28-1.76L9.86,24.82A4,4,0,0,1,4.19,24.82Z"),rt(e,a)},m(o,l){H(o,e,l),i&&i.m(e,null),x(e,n),x(e,r)},p(o,[l]){o[1]?i?i.p(o,l):(i=kh(o),i.c(),i.m(e,n)):i&&(i.d(1),i=null),rt(e,a=vt(s,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},l&1&&{width:o[0]},l&1&&{height:o[0]},l&4&&o[2],l&8&&o[3]]))},i:he,o:he,d(o){o&&E(e),i&&i.d()}}}function C2(t,e,n){let r,i;const s=["size","title"];let a=ze(e,s),{size:o=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Ee(Ee({},e),Xe(c))),n(3,a=ze(e,s)),"size"in c&&n(0,o=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[o,l,i,a,r]}class A2 extends Pe{constructor(e){super(),Ve(this,e,C2,M2,Ae,{size:0,title:1})}}function Oh(t){let e,n;return{c(){e=$e("title"),n=ne(t[1])},l(r){e=Te(r,"title",{});var i=P(e);n=re(i,t[1]),i.forEach(E)},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&2&&se(n,r[1])},d(r){r&&E(e)}}}function I2(t){let e,n,r,i=t[1]&&Oh(t),s=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],a={};for(let o=0;o<s.length;o+=1)a=Ee(a,s[o]);return{c(){e=$e("svg"),i&&i.c(),n=$e("path"),r=$e("path"),this.h()},l(o){e=Te(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var l=P(e);i&&i.l(l),n=Te(l,"path",{d:!0}),P(n).forEach(E),r=Te(l,"path",{d:!0}),P(r).forEach(E),l.forEach(E),this.h()},h(){M(n,"d","M19 10H26V12H19zM19 15H26V17H19zM19 20H26V22H19z"),M(r,"d","M28,5H4A2.002,2.002,0,0,0,2,7V25a2.0023,2.0023,0,0,0,2,2H28a2.0027,2.0027,0,0,0,2-2V7A2.0023,2.0023,0,0,0,28,5ZM4,7H15V25H4ZM17,25V7H28l.002,18Z"),rt(e,a)},m(o,l){H(o,e,l),i&&i.m(e,null),x(e,n),x(e,r)},p(o,[l]){o[1]?i?i.p(o,l):(i=Oh(o),i.c(),i.m(e,n)):i&&(i.d(1),i=null),rt(e,a=vt(s,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},l&1&&{width:o[0]},l&1&&{height:o[0]},l&4&&o[2],l&8&&o[3]]))},i:he,o:he,d(o){o&&E(e),i&&i.d()}}}function D2(t,e,n){let r,i;const s=["size","title"];let a=ze(e,s),{size:o=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Ee(Ee({},e),Xe(c))),n(3,a=ze(e,s)),"size"in c&&n(0,o=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[o,l,i,a,r]}class L2 extends Pe{constructor(e){super(),Ve(this,e,D2,I2,Ae,{size:0,title:1})}}function Mh(t){let e,n;return{c(){e=$e("title"),n=ne(t[1])},l(r){e=Te(r,"title",{});var i=P(e);n=re(i,t[1]),i.forEach(E)},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&2&&se(n,r[1])},d(r){r&&E(e)}}}function R2(t){let e,n,r,i,s=t[1]&&Mh(t),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],o={};for(let l=0;l<a.length;l+=1)o=Ee(o,a[l]);return{c(){e=$e("svg"),s&&s.c(),n=$e("circle"),r=$e("circle"),i=$e("circle"),this.h()},l(l){e=Te(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var c=P(e);s&&s.l(c),n=Te(c,"circle",{cx:!0,cy:!0,r:!0}),P(n).forEach(E),r=Te(c,"circle",{cx:!0,cy:!0,r:!0}),P(r).forEach(E),i=Te(c,"circle",{cx:!0,cy:!0,r:!0}),P(i).forEach(E),c.forEach(E),this.h()},h(){M(n,"cx","16"),M(n,"cy","8"),M(n,"r","2"),M(r,"cx","16"),M(r,"cy","16"),M(r,"r","2"),M(i,"cx","16"),M(i,"cy","24"),M(i,"r","2"),rt(e,o)},m(l,c){H(l,e,c),s&&s.m(e,null),x(e,n),x(e,r),x(e,i)},p(l,[c]){l[1]?s?s.p(l,c):(s=Mh(l),s.c(),s.m(e,n)):s&&(s.d(1),s=null),rt(e,o=vt(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},c&1&&{width:l[0]},c&1&&{height:l[0]},c&4&&l[2],c&8&&l[3]]))},i:he,o:he,d(l){l&&E(e),s&&s.d()}}}function N2(t,e,n){let r,i;const s=["size","title"];let a=ze(e,s),{size:o=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Ee(Ee({},e),Xe(c))),n(3,a=ze(e,s)),"size"in c&&n(0,o=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[o,l,i,a,r]}class P2 extends Pe{constructor(e){super(),Ve(this,e,N2,R2,Ae,{size:0,title:1})}}function Ch(t){let e,n;return{c(){e=$e("title"),n=ne(t[1])},l(r){e=Te(r,"title",{});var i=P(e);n=re(i,t[1]),i.forEach(E)},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&2&&se(n,r[1])},d(r){r&&E(e)}}}function V2(t){let e,n,r,i=t[1]&&Ch(t),s=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],a={};for(let o=0;o<s.length;o+=1)a=Ee(a,s[o]);return{c(){e=$e("svg"),i&&i.c(),n=$e("path"),r=$e("path"),this.h()},l(o){e=Te(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var l=P(e);i&&i.l(l),n=Te(l,"path",{d:!0}),P(n).forEach(E),r=Te(l,"path",{d:!0}),P(r).forEach(E),l.forEach(E),this.h()},h(){M(n,"d","M15 10H17V18H15zM20 14H22V18H20zM10 12H12V18H10z"),M(r,"d","M25,4H17V2H15V4H7A2,2,0,0,0,5,6V20a2,2,0,0,0,2,2h8v6H11v2H21V28H17V22h8a2,2,0,0,0,2-2V6A2,2,0,0,0,25,4Zm0,16H7V6H25Z"),rt(e,a)},m(o,l){H(o,e,l),i&&i.m(e,null),x(e,n),x(e,r)},p(o,[l]){o[1]?i?i.p(o,l):(i=Ch(o),i.c(),i.m(e,n)):i&&(i.d(1),i=null),rt(e,a=vt(s,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},l&1&&{width:o[0]},l&1&&{height:o[0]},l&4&&o[2],l&8&&o[3]]))},i:he,o:he,d(o){o&&E(e),i&&i.d()}}}function B2(t,e,n){let r,i;const s=["size","title"];let a=ze(e,s),{size:o=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Ee(Ee({},e),Xe(c))),n(3,a=ze(e,s)),"size"in c&&n(0,o=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[o,l,i,a,r]}class U2 extends Pe{constructor(e){super(),Ve(this,e,B2,V2,Ae,{size:0,title:1})}}function Ah(t){let e,n;return{c(){e=$e("title"),n=ne(t[1])},l(r){e=Te(r,"title",{});var i=P(e);n=re(i,t[1]),i.forEach(E)},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&2&&se(n,r[1])},d(r){r&&E(e)}}}function H2(t){let e,n,r,i,s=t[1]&&Ah(t),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],o={};for(let l=0;l<a.length;l+=1)o=Ee(o,a[l]);return{c(){e=$e("svg"),s&&s.c(),n=$e("path"),r=$e("path"),i=$e("path"),this.h()},l(l){e=Te(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var c=P(e);s&&s.l(c),n=Te(c,"path",{d:!0}),P(n).forEach(E),r=Te(c,"path",{d:!0}),P(r).forEach(E),i=Te(c,"path",{d:!0}),P(i).forEach(E),c.forEach(E),this.h()},h(){M(n,"d","M10 13H12V15H10zM14 13H22V15H14zM10 18H12V20H10zM10 23H12V25H10z"),M(r,"d","M7,28V7h3v3H22V7h3v8h2V7a2,2,0,0,0-2-2H22V4a2,2,0,0,0-2-2H12a2,2,0,0,0-2,2V5H7A2,2,0,0,0,5,7V28a2,2,0,0,0,2,2h9V28ZM12,4h8V8H12Z"),M(i,"d","M18,19v2.4131A6.996,6.996,0,1,1,24,32V30a5,5,0,1,0-4.5762-7H22v2H16V19Z"),rt(e,o)},m(l,c){H(l,e,c),s&&s.m(e,null),x(e,n),x(e,r),x(e,i)},p(l,[c]){l[1]?s?s.p(l,c):(s=Ah(l),s.c(),s.m(e,n)):s&&(s.d(1),s=null),rt(e,o=vt(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},c&1&&{width:l[0]},c&1&&{height:l[0]},c&4&&l[2],c&8&&l[3]]))},i:he,o:he,d(l){l&&E(e),s&&s.d()}}}function z2(t,e,n){let r,i;const s=["size","title"];let a=ze(e,s),{size:o=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Ee(Ee({},e),Xe(c))),n(3,a=ze(e,s)),"size"in c&&n(0,o=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[o,l,i,a,r]}class F2 extends Pe{constructor(e){super(),Ve(this,e,z2,H2,Ae,{size:0,title:1})}}function Ih(t){let e,n;return{c(){e=$e("title"),n=ne(t[1])},l(r){e=Te(r,"title",{});var i=P(e);n=re(i,t[1]),i.forEach(E)},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&2&&se(n,r[1])},d(r){r&&E(e)}}}function G2(t){let e,n,r=t[1]&&Ih(t),i=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],s={};for(let a=0;a<i.length;a+=1)s=Ee(s,i[a]);return{c(){e=$e("svg"),r&&r.c(),n=$e("path"),this.h()},l(a){e=Te(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var o=P(e);r&&r.l(o),n=Te(o,"path",{d:!0}),P(n).forEach(E),o.forEach(E),this.h()},h(){M(n,"d","M6 6H26V8H6zM6 12H26V14H6zM6 18H26V20H6zM6 24H26V26H6z"),rt(e,s)},m(a,o){H(a,e,o),r&&r.m(e,null),x(e,n)},p(a,[o]){a[1]?r?r.p(a,o):(r=Ih(a),r.c(),r.m(e,n)):r&&(r.d(1),r=null),rt(e,s=vt(i,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},o&1&&{width:a[0]},o&1&&{height:a[0]},o&4&&a[2],o&8&&a[3]]))},i:he,o:he,d(a){a&&E(e),r&&r.d()}}}function q2(t,e,n){let r,i;const s=["size","title"];let a=ze(e,s),{size:o=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Ee(Ee({},e),Xe(c))),n(3,a=ze(e,s)),"size"in c&&n(0,o=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[o,l,i,a,r]}class j2 extends Pe{constructor(e){super(),Ve(this,e,q2,G2,Ae,{size:0,title:1})}}function Dh(t){let e,n;return{c(){e=$e("title"),n=ne(t[1])},l(r){e=Te(r,"title",{});var i=P(e);n=re(i,t[1]),i.forEach(E)},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&2&&se(n,r[1])},d(r){r&&E(e)}}}function W2(t){let e,n,r=t[1]&&Dh(t),i=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],s={};for(let a=0;a<i.length;a+=1)s=Ee(s,i[a]);return{c(){e=$e("svg"),r&&r.c(),n=$e("path"),this.h()},l(a){e=Te(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var o=P(e);r&&r.l(o),n=Te(o,"path",{d:!0}),P(n).forEach(E),o.forEach(E),this.h()},h(){M(n,"d","M21,26H4a2,2,0,0,1-2-2V8A2,2,0,0,1,4,6H21a2,2,0,0,1,2,2v4.06l5.42-3.87A1,1,0,0,1,30,9V23a1,1,0,0,1-1.58.81L23,19.94V24A2,2,0,0,1,21,26ZM4,8V24H21V18a1,1,0,0,1,1.58-.81L28,21.06V10.94l-5.42,3.87A1,1,0,0,1,21,14V8Z"),rt(e,s)},m(a,o){H(a,e,o),r&&r.m(e,null),x(e,n)},p(a,[o]){a[1]?r?r.p(a,o):(r=Dh(a),r.c(),r.m(e,n)):r&&(r.d(1),r=null),rt(e,s=vt(i,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},o&1&&{width:a[0]},o&1&&{height:a[0]},o&4&&a[2],o&8&&a[3]]))},i:he,o:he,d(a){a&&E(e),r&&r.d()}}}function Y2(t,e,n){let r,i;const s=["size","title"];let a=ze(e,s),{size:o=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Ee(Ee({},e),Xe(c))),n(3,a=ze(e,s)),"size"in c&&n(0,o=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[o,l,i,a,r]}class Z0 extends Pe{constructor(e){super(),Ve(this,e,Y2,W2,Ae,{size:0,title:1})}}function Lh(t){let e,n;return{c(){e=$e("title"),n=ne(t[1])},l(r){e=Te(r,"title",{});var i=P(e);n=re(i,t[1]),i.forEach(E)},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&2&&se(n,r[1])},d(r){r&&E(e)}}}function Z2(t){let e,n,r,i=t[1]&&Lh(t),s=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],a={};for(let o=0;o<s.length;o+=1)a=Ee(a,s[o]);return{c(){e=$e("svg"),i&&i.c(),n=$e("path"),r=$e("path"),this.h()},l(o){e=Te(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var l=P(e);i&&i.l(l),n=Te(l,"path",{d:!0}),P(n).forEach(E),r=Te(l,"path",{d:!0}),P(r).forEach(E),l.forEach(E),this.h()},h(){M(n,"d","M30.94,15.66A16.69,16.69,0,0,0,16,5,16.69,16.69,0,0,0,1.06,15.66a1,1,0,0,0,0,.68A16.69,16.69,0,0,0,16,27,16.69,16.69,0,0,0,30.94,16.34,1,1,0,0,0,30.94,15.66ZM16,25c-5.3,0-10.9-3.93-12.93-9C5.1,10.93,10.7,7,16,7s10.9,3.93,12.93,9C26.9,21.07,21.3,25,16,25Z"),M(r,"d","M16,10a6,6,0,1,0,6,6A6,6,0,0,0,16,10Zm0,10a4,4,0,1,1,4-4A4,4,0,0,1,16,20Z"),rt(e,a)},m(o,l){H(o,e,l),i&&i.m(e,null),x(e,n),x(e,r)},p(o,[l]){o[1]?i?i.p(o,l):(i=Lh(o),i.c(),i.m(e,n)):i&&(i.d(1),i=null),rt(e,a=vt(s,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},l&1&&{width:o[0]},l&1&&{height:o[0]},l&4&&o[2],l&8&&o[3]]))},i:he,o:he,d(o){o&&E(e),i&&i.d()}}}function X2(t,e,n){let r,i;const s=["size","title"];let a=ze(e,s),{size:o=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Ee(Ee({},e),Xe(c))),n(3,a=ze(e,s)),"size"in c&&n(0,o=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[o,l,i,a,r]}class K2 extends Pe{constructor(e){super(),Ve(this,e,X2,Z2,Ae,{size:0,title:1})}}function Rh(t){let e,n;return{c(){e=$e("title"),n=ne(t[1])},l(r){e=Te(r,"title",{});var i=P(e);n=re(i,t[1]),i.forEach(E)},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&2&&se(n,r[1])},d(r){r&&E(e)}}}function Q2(t){let e,n,r,i=t[1]&&Rh(t),s=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],a={};for(let o=0;o<s.length;o+=1)a=Ee(a,s[o]);return{c(){e=$e("svg"),i&&i.c(),n=$e("circle"),r=$e("path"),this.h()},l(o){e=Te(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var l=P(e);i&&i.l(l),n=Te(l,"circle",{cx:!0,cy:!0,r:!0}),P(n).forEach(E),r=Te(l,"path",{d:!0}),P(r).forEach(E),l.forEach(E),this.h()},h(){M(n,"cx","16"),M(n,"cy","16"),M(n,"r","4"),M(r,"d","M30.94,15.66A16.69,16.69,0,0,0,16,5,16.69,16.69,0,0,0,1.06,15.66a1,1,0,0,0,0,.68A16.69,16.69,0,0,0,16,27,16.69,16.69,0,0,0,30.94,16.34,1,1,0,0,0,30.94,15.66ZM16,22.5A6.5,6.5,0,1,1,22.5,16,6.51,6.51,0,0,1,16,22.5Z"),rt(e,a)},m(o,l){H(o,e,l),i&&i.m(e,null),x(e,n),x(e,r)},p(o,[l]){o[1]?i?i.p(o,l):(i=Rh(o),i.c(),i.m(e,n)):i&&(i.d(1),i=null),rt(e,a=vt(s,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},l&1&&{width:o[0]},l&1&&{height:o[0]},l&4&&o[2],l&8&&o[3]]))},i:he,o:he,d(o){o&&E(e),i&&i.d()}}}function J2(t,e,n){let r,i;const s=["size","title"];let a=ze(e,s),{size:o=16}=e,{title:l=void 0}=e;return t.$$set=c=>{n(5,e=Ee(Ee({},e),Xe(c))),n(3,a=ze(e,s)),"size"in c&&n(0,o=c.size),"title"in c&&n(1,l=c.title)},t.$$.update=()=>{n(4,r=e["aria-label"]||e["aria-labelledby"]||l),n(2,i={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[o,l,i,a,r]}class eE extends Pe{constructor(e){super(),Ve(this,e,J2,Q2,Ae,{size:0,title:1})}}function tE(t){let e,n,r,i,s,a="Â ",o,l,c,u="Â ",f,h,d,m="Â ",v,p,g,_="Â ";return{c(){e=B("div"),n=B("div"),r=B("div"),i=B("div"),s=B("div"),s.textContent=a,o=j(),l=B("div"),c=B("div"),c.textContent=u,f=j(),h=B("div"),d=B("div"),d.textContent=m,v=j(),p=B("div"),g=B("div"),g.textContent=_,this.h()},l(b){e=U(b,"DIV",{class:!0,style:!0});var y=P(e);n=U(y,"DIV",{class:!0});var w=P(n);r=U(w,"DIV",{class:!0});var $=P(r);i=U($,"DIV",{class:!0});var k=P(i);s=U(k,"DIV",{class:!0,"data-svelte-h":!0}),Yn(s)!=="svelte-srzctx"&&(s.textContent=a),k.forEach(E),o=W($),l=U($,"DIV",{class:!0});var C=P(l);c=U(C,"DIV",{class:!0,"data-svelte-h":!0}),Yn(c)!=="svelte-6iyjws"&&(c.textContent=u),C.forEach(E),f=W($),h=U($,"DIV",{class:!0});var V=P(h);d=U(V,"DIV",{class:!0,"data-svelte-h":!0}),Yn(d)!=="svelte-9h2qed"&&(d.textContent=m),V.forEach(E),v=W($),p=U($,"DIV",{class:!0});var I=P(p);g=U(I,"DIV",{class:!0,"data-svelte-h":!0}),Yn(g)!=="svelte-yk0z5u"&&(g.textContent=_),I.forEach(E),$.forEach(E),w.forEach(E),y.forEach(E),this.h()},h(){M(s,"class","ball ball-top-left svelte-7wj78d"),Oe(s,"pause-animation",t[2]),M(i,"class","single-ball svelte-7wj78d"),M(c,"class","ball ball-top-right svelte-7wj78d"),Oe(c,"pause-animation",t[2]),M(l,"class","contener_mixte"),M(d,"class","ball ball-bottom-left svelte-7wj78d"),Oe(d,"pause-animation",t[2]),M(h,"class","contener_mixte"),M(g,"class","ball ball-bottom-right svelte-7wj78d"),Oe(g,"pause-animation",t[2]),M(p,"class","contener_mixte"),M(r,"class","ball-container svelte-7wj78d"),Oe(r,"pause-animation",t[2]),M(n,"class","inner svelte-7wj78d"),M(e,"class","wrapper svelte-7wj78d"),nt(e,"--size",t[0]+t[1]),nt(e,"--floatSize",t[0]),nt(e,"--ballTopLeftColor",t[3]),nt(e,"--ballTopRightColor",t[4]),nt(e,"--ballBottomLeftColor",t[5]),nt(e,"--ballBottomRightColor",t[6]),nt(e,"--duration",t[7])},m(b,y){H(b,e,y),x(e,n),x(n,r),x(r,i),x(i,s),x(r,o),x(r,l),x(l,c),x(r,f),x(r,h),x(h,d),x(r,v),x(r,p),x(p,g)},p(b,[y]){y&4&&Oe(s,"pause-animation",b[2]),y&4&&Oe(c,"pause-animation",b[2]),y&4&&Oe(d,"pause-animation",b[2]),y&4&&Oe(g,"pause-animation",b[2]),y&4&&Oe(r,"pause-animation",b[2]),y&3&&nt(e,"--size",b[0]+b[1]),y&1&&nt(e,"--floatSize",b[0]),y&8&&nt(e,"--ballTopLeftColor",b[3]),y&16&&nt(e,"--ballTopRightColor",b[4]),y&32&&nt(e,"--ballBottomLeftColor",b[5]),y&64&&nt(e,"--ballBottomRightColor",b[6]),y&128&&nt(e,"--duration",b[7])},i:he,o:he,d(b){b&&E(e)}}}function nE(t,e,n){let{size:r="60"}=e,{unit:i="px"}=e,{pause:s=!1}=e,{ballTopLeft:a="#FF3E00"}=e,{ballTopRight:o="#F8B334"}=e,{ballBottomLeft:l="#40B3FF"}=e,{ballBottomRight:c="#676778"}=e,{duration:u="1.5s"}=e;return t.$$set=f=>{"size"in f&&n(0,r=f.size),"unit"in f&&n(1,i=f.unit),"pause"in f&&n(2,s=f.pause),"ballTopLeft"in f&&n(3,a=f.ballTopLeft),"ballTopRight"in f&&n(4,o=f.ballTopRight),"ballBottomLeft"in f&&n(5,l=f.ballBottomLeft),"ballBottomRight"in f&&n(6,c=f.ballBottomRight),"duration"in f&&n(7,u=f.duration)},[r,i,s,a,o,l,c,u]}class rE extends Pe{constructor(e){super(),Ve(this,e,nE,tE,Ae,{size:0,unit:1,pause:2,ballTopLeft:3,ballTopRight:4,ballBottomLeft:5,ballBottomRight:6,duration:7})}}const zt={edit:"edit",view:"view"};function Nh(t,e,n){const r=t.slice();return r[11]=e[n],r[13]=n,r}function Ph(t){let e,n,r,i,s,a,o,l;n=new Qu({props:{type:"blue",$$slots:{default:[iE]},$$scope:{ctx:t}}}),i=new z0({props:{text:t[11].link,feedback:"Copied to clipboard"}});function c(){return t[10](t[13])}return a=new cn({props:{value:"delete-video",onClick:c,$$slots:{default:[sE]},$$scope:{ctx:t}}}),{c(){e=B("div"),Z(n.$$.fragment),r=j(),Z(i.$$.fragment),s=j(),Z(a.$$.fragment),o=j(),this.h()},l(u){e=U(u,"DIV",{class:!0});var f=P(e);Q(n.$$.fragment,f),r=W(f),Q(i.$$.fragment,f),s=W(f),Q(a.$$.fragment,f),o=W(f),f.forEach(E),this.h()},h(){M(e,"class","flex items-center gap-1")},m(u,f){H(u,e,f),X(n,e,null),x(e,r),X(i,e,null),x(e,s),X(a,e,null),x(e,o),l=!0},p(u,f){t=u;const h={};f&16388&&(h.$$scope={dirty:f,ctx:t}),n.$set(h);const d={};f&4&&(d.text=t[11].link),i.$set(d);const m={};f&16384&&(m.$$scope={dirty:f,ctx:t}),a.$set(m)},i(u){l||(A(n.$$.fragment,u),A(i.$$.fragment,u),A(a.$$.fragment,u),l=!0)},o(u){L(n.$$.fragment,u),L(i.$$.fragment,u),L(a.$$.fragment,u),l=!1},d(u){u&&E(e),K(n),K(i),K(a)}}}function iE(t){let e=t[11].link+"",n;return{c(){n=ne(e)},l(r){n=re(r,e)},m(r,i){H(r,n,i)},p(r,i){i&4&&e!==(e=r[11].link+"")&&se(n,e)},d(r){r&&E(n)}}}function sE(t){let e,n;return e=new mi({props:{size:16,class:"carbon-icon dark:text-white"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function Vh(t){let e,n,r=t[11].type==="youtube"&&Ph(t);return{c(){r&&r.c(),e=fe()},l(i){r&&r.l(i),e=fe()},m(i,s){r&&r.m(i,s),H(i,e,s),n=!0},p(i,s){i[11].type==="youtube"?r?(r.p(i,s),s&4&&A(r,1)):(r=Ph(i),r.c(),A(r,1),r.m(e.parentNode,e)):r&&(ye(),L(r,1,1,()=>{r=null}),we())},i(i){n||(A(r),n=!0)},o(i){L(r),n=!1},d(i){i&&E(e),r&&r.d(i)}}}function aE(t){var k,C,V,I;let e,n,r,i,s,a,o,l,c=t[3]("course.navItem.lessons.materials.tabs.video.add_video.videos_added")+"",u,f,h,d=(((C=(k=t[2])==null?void 0:k.materials)==null?void 0:C.videos.filter(t[9]).length)||0)+"",m,v,p,g;function _(S){t[8](S)}let b={label:t[3]("course.navItem.lessons.materials.tabs.video.add_video.youtube_link"),className:"flex-1 text-left ",inputClassName:"text-sm",onChange:t[7],placeholder:"https://www.youtube.com/watch?v=",errorMessage:t[1]};t[0]!==void 0&&(b.value=t[0]),n=new mr({props:b}),je.push(()=>et(n,"value",_)),s=new dt({props:{label:t[3]("course.navItem.lessons.materials.tabs.video.add_video.add_video"),className:"rounded-md",onClick:t[5]}});let y=Fe((I=(V=t[2])==null?void 0:V.materials)==null?void 0:I.videos),w=[];for(let S=0;S<y.length;S+=1)w[S]=Vh(Nh(t,y,S));const $=S=>L(w[S],1,1,()=>{w[S]=null});return{c(){e=B("div"),Z(n.$$.fragment),i=j(),Z(s.$$.fragment),o=j(),l=B("p"),u=ne(c),f=ne(`:
  `),h=B("strong"),m=ne(d),v=j(),p=B("div");for(let S=0;S<w.length;S+=1)w[S].c();this.h()},l(S){e=U(S,"DIV",{class:!0});var N=P(e);Q(n.$$.fragment,N),i=W(N),Q(s.$$.fragment,N),N.forEach(E),o=W(S),l=U(S,"P",{class:!0});var O=P(l);u=re(O,c),f=re(O,`:
  `),h=U(O,"STRONG",{});var R=P(h);m=re(R,d),R.forEach(E),O.forEach(E),v=W(S),p=U(S,"DIV",{class:!0});var T=P(p);for(let F=0;F<w.length;F+=1)w[F].l(T);T.forEach(E),this.h()},h(){M(e,"class",a="w-full flex items-"+(t[1]?"center":"end")+" justify-between gap-5"),M(l,"class","mt-4 pl-2 text-sm"),M(p,"class","")},m(S,N){H(S,e,N),X(n,e,null),x(e,i),X(s,e,null),H(S,o,N),H(S,l,N),x(l,u),x(l,f),x(l,h),x(h,m),H(S,v,N),H(S,p,N);for(let O=0;O<w.length;O+=1)w[O]&&w[O].m(p,null);g=!0},p(S,[N]){var T,F,G,q;const O={};N&8&&(O.label=S[3]("course.navItem.lessons.materials.tabs.video.add_video.youtube_link")),N&16&&(O.onChange=S[7]),N&2&&(O.errorMessage=S[1]),!r&&N&1&&(r=!0,O.value=S[0],Je(()=>r=!1)),n.$set(O);const R={};if(N&8&&(R.label=S[3]("course.navItem.lessons.materials.tabs.video.add_video.add_video")),s.$set(R),(!g||N&2&&a!==(a="w-full flex items-"+(S[1]?"center":"end")+" justify-between gap-5"))&&M(e,"class",a),(!g||N&8)&&c!==(c=S[3]("course.navItem.lessons.materials.tabs.video.add_video.videos_added")+"")&&se(u,c),(!g||N&4)&&d!==(d=(((F=(T=S[2])==null?void 0:T.materials)==null?void 0:F.videos.filter(S[9]).length)||0)+"")&&se(m,d),N&68){y=Fe((q=(G=S[2])==null?void 0:G.materials)==null?void 0:q.videos);let Y;for(Y=0;Y<y.length;Y+=1){const te=Nh(S,y,Y);w[Y]?(w[Y].p(te,N),A(w[Y],1)):(w[Y]=Vh(te),w[Y].c(),A(w[Y],1),w[Y].m(p,null))}for(ye(),Y=y.length;Y<w.length;Y+=1)$(Y);we()}},i(S){if(!g){A(n.$$.fragment,S),A(s.$$.fragment,S);for(let N=0;N<y.length;N+=1)A(w[N]);g=!0}},o(S){L(n.$$.fragment,S),L(s.$$.fragment,S),w=w.filter(Boolean);for(let N=0;N<w.length;N+=1)L(w[N]);g=!1},d(S){S&&(E(e),E(o),E(l),E(v),E(p)),K(n),K(s),Gt(w,S)}}}function oE(t=""){return(t||"").split(",").filter(e=>!!e.trim())}function Bh(t=""){return/^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/.test(t.trim())}function lE(t,e,n){let r,i,s;be(t,pt,m=>n(2,r=m)),be(t,Nt,m=>n(3,i=m)),be(t,Kr,m=>n(4,s=m));let a="",o="";function l(){var p;const v=oE(a).filter(Bh);if(v.length===0)n(1,o=i("course.navItem.lessons.materials.tabs.video.add_video.invalid_youtube"));else{const g=((p=r==null?void 0:r.materials)==null?void 0:p.videos)||[];Se(pt,r.materials.videos=[...g,...v.map((_="")=>({type:"youtube",link:_,metadata:{}}))],r),n(0,a=""),n(1,o="")}}function c(m=0){Se(pt,r.materials.videos=r.materials.videos.filter((v,p)=>p!==m),r)}const u=()=>Se(Kr,s=!0,s);function f(m){a=m,n(0,a)}return[a,o,r,i,s,l,c,u,f,m=>m.type==="youtube"&&Bh(m.link),m=>c(m)]}class cE extends Pe{constructor(e){super(),Ve(this,e,lE,aE,Ae,{})}}function uE(t){let e=t[12]("course.navItem.lessons.materials.tabs.video.add_video.upgrade")+"",n;return{c(){n=ne(e)},l(r){n=re(r,e)},m(r,i){H(r,n,i)},p(r,i){i&4096&&e!==(e=r[12]("course.navItem.lessons.materials.tabs.video.add_video.upgrade")+"")&&se(n,e)},d(r){r&&E(n)}}}function fE(t){var $,k,C;let e,n,r,i,s,a,o,l,c,u,f,h=(((C=(k=($=t[7])==null?void 0:$.files)==null?void 0:k[0])==null?void 0:C.name)||t[9])+"",d,m,v,p='<img src="/delete-video.svg" alt="deletevideo" class="dark:invert"/>',g,_,b,y,w;return _=new dt({props:{label:t[12]("course.navItem.lessons.materials.button_done"),onClick:t[22]}}),{c(){e=B("div"),n=B("div"),r=B("div"),i=B("span"),s=B("div"),a=B("video"),o=B("source"),c=B("track"),u=j(),f=B("p"),d=ne(h),m=j(),v=B("button"),v.innerHTML=p,g=j(),Z(_.$$.fragment),this.h()},l(V){e=U(V,"DIV",{class:!0});var I=P(e);n=U(I,"DIV",{class:!0});var S=P(n);r=U(S,"DIV",{class:!0});var N=P(r);i=U(N,"SPAN",{class:!0});var O=P(i);s=U(O,"DIV",{class:!0});var R=P(s);a=U(R,"VIDEO",{class:!0});var T=P(a);o=U(T,"SOURCE",{src:!0,type:!0}),c=U(T,"TRACK",{kind:!0}),T.forEach(E),R.forEach(E),u=W(O),f=U(O,"P",{});var F=P(f);d=re(F,h),F.forEach(E),O.forEach(E),m=W(N),v=U(N,"BUTTON",{"data-svelte-h":!0}),Yn(v)!=="svelte-1xvzr68"&&(v.innerHTML=p),N.forEach(E),g=W(S),Q(_.$$.fragment,S),S.forEach(E),I.forEach(E),this.h()},h(){mt(o.src,l=t[9])||M(o,"src",l),M(o,"type","video/mp4"),M(c,"kind","captions"),M(a,"class","w-[200px]"),M(s,"class","overflow-hidden rounded-sm"),M(i,"class","flex items-center gap-2"),M(r,"class","flex items-center justify-between"),M(n,"class","h-auto w-full rounded-md border px-8 py-3"),M(e,"class","flex h-full w-full flex-col items-start justify-between")},m(V,I){H(V,e,I),x(e,n),x(n,r),x(r,i),x(i,s),x(s,a),x(a,o),x(a,c),x(i,u),x(i,f),x(f,d),x(r,m),x(r,v),x(n,g),X(_,n,null),b=!0,y||(w=qe(v,"click",H0),y=!0)},p(V,I){var N,O,R;(!b||I&512&&!mt(o.src,l=V[9]))&&M(o,"src",l),(!b||I&640)&&h!==(h=(((R=(O=(N=V[7])==null?void 0:N.files)==null?void 0:O[0])==null?void 0:R.name)||V[9])+"")&&se(d,h);const S={};I&4096&&(S.label=V[12]("course.navItem.lessons.materials.button_done")),I&2048&&(S.onClick=V[22]),_.$set(S)},i(V){b||(A(_.$$.fragment,V),b=!0)},o(V){L(_.$$.fragment,V),b=!1},d(V){V&&E(e),K(_),y=!1,w()}}}function hE(t){let e,n,r,i,s,a,o=t[12]("course.navItem.lessons.materials.tabs.video.add_video.oops")+"",l,c,u,f=t[12]("course.navItem.lessons.materials.tabs.video.add_video.unsupported_format")+"",h,d,m,v=t[12]("course.navItem.lessons.materials.tabs.video.add_video.format")+"",p,g,_,b;return _=new dt({props:{label:t[12]("course.navItem.lessons.materials.tabs.video.add_video.try_again"),onClick:t[14]}}),{c(){e=B("div"),n=B("img"),i=j(),s=B("span"),a=B("h3"),l=ne(o),c=j(),u=B("p"),h=ne(f),d=B("br"),m=j(),p=ne(v),g=j(),Z(_.$$.fragment),this.h()},l(y){e=U(y,"DIV",{class:!0});var w=P(e);n=U(w,"IMG",{src:!0,alt:!0}),i=W(w),s=U(w,"SPAN",{class:!0});var $=P(s);a=U($,"H3",{class:!0});var k=P(a);l=re(k,o),k.forEach(E),c=W($),u=U($,"P",{class:!0});var C=P(u);h=re(C,f),d=U(C,"BR",{}),m=W(C),p=re(C,v),C.forEach(E),$.forEach(E),g=W(w),Q(_.$$.fragment,w),w.forEach(E),this.h()},h(){mt(n.src,r="/video-upload-error.svg")||M(n,"src",r),M(n,"alt","upload error"),M(a,"class","text-center text-base font-normal dark:text-white"),M(u,"class","text-center text-xs font-normal text-[#ADADAD]"),M(s,"class","pb-2 pt-3"),M(e,"class","flex h-full w-full flex-col items-center justify-center rounded-xl")},m(y,w){H(y,e,w),x(e,n),x(e,i),x(e,s),x(s,a),x(a,l),x(s,c),x(s,u),x(u,h),x(u,d),x(u,m),x(u,p),x(e,g),X(_,e,null),b=!0},p(y,w){(!b||w&4096)&&o!==(o=y[12]("course.navItem.lessons.materials.tabs.video.add_video.oops")+"")&&se(l,o),(!b||w&4096)&&f!==(f=y[12]("course.navItem.lessons.materials.tabs.video.add_video.unsupported_format")+"")&&se(h,f),(!b||w&4096)&&v!==(v=y[12]("course.navItem.lessons.materials.tabs.video.add_video.format")+"")&&se(p,v);const $={};w&4096&&($.label=y[12]("course.navItem.lessons.materials.tabs.video.add_video.try_again")),_.$set($)},i(y){b||(A(_.$$.fragment,y),b=!0)},o(y){L(_.$$.fragment,y),b=!1},d(y){y&&E(e),K(_)}}}function dE(t){let e,n,r,i,s,a,o=t[12]("course.navItem.lessons.materials.tabs.video.add_video.oops")+"",l,c,u,f=t[12]("course.navItem.lessons.materials.tabs.video.add_video.big_file")+"",h,d,m,v=t[12]("course.navItem.lessons.materials.tabs.video.add_video.maximum_size")+"",p,g,_,b;return _=new dt({props:{label:t[12]("course.navItem.lessons.materials.tabs.video.add_video.button"),onClick:t[14]}}),{c(){e=B("div"),n=B("img"),i=j(),s=B("span"),a=B("h3"),l=ne(o),c=j(),u=B("p"),h=ne(f),d=B("br"),m=j(),p=ne(v),g=j(),Z(_.$$.fragment),this.h()},l(y){e=U(y,"DIV",{class:!0});var w=P(e);n=U(w,"IMG",{src:!0,alt:!0}),i=W(w),s=U(w,"SPAN",{class:!0});var $=P(s);a=U($,"H3",{class:!0});var k=P(a);l=re(k,o),k.forEach(E),c=W($),u=U($,"P",{class:!0});var C=P(u);h=re(C,f),d=U(C,"BR",{}),m=W(C),p=re(C,v),C.forEach(E),$.forEach(E),g=W(w),Q(_.$$.fragment,w),w.forEach(E),this.h()},h(){mt(n.src,r="/video-upload-error.svg")||M(n,"src",r),M(n,"alt","upload error"),M(a,"class","text-center text-base font-normal dark:text-white"),M(u,"class","text-center text-xs font-normal text-[#ADADAD]"),M(s,"class","pb-2 pt-3"),M(e,"class","flex h-full w-full flex-col items-center justify-center rounded-xl")},m(y,w){H(y,e,w),x(e,n),x(e,i),x(e,s),x(s,a),x(a,l),x(s,c),x(s,u),x(u,h),x(u,d),x(u,m),x(u,p),x(e,g),X(_,e,null),b=!0},p(y,w){(!b||w&4096)&&o!==(o=y[12]("course.navItem.lessons.materials.tabs.video.add_video.oops")+"")&&se(l,o),(!b||w&4096)&&f!==(f=y[12]("course.navItem.lessons.materials.tabs.video.add_video.big_file")+"")&&se(h,f),(!b||w&4096)&&v!==(v=y[12]("course.navItem.lessons.materials.tabs.video.add_video.maximum_size")+"")&&se(p,v);const $={};w&4096&&($.label=y[12]("course.navItem.lessons.materials.tabs.video.add_video.button")),_.$set($)},i(y){b||(A(_.$$.fragment,y),b=!0)},o(y){L(_.$$.fragment,y),b=!1},d(y){y&&E(e),K(_)}}}function mE(t){let e,n,r,i,s,a,o,l,c,u,f,h,d,m;const v=[gE,pE],p=[];function g(_,b){return _[3]?0:1}return r=g(t),i=p[r]=v[r](t),{c(){e=B("button"),n=B("form"),i.c(),s=j(),a=B("input"),o=j(),l=B("input"),c=j(),u=B("input"),this.h()},l(_){e=U(_,"BUTTON",{type:!0,class:!0});var b=P(e);n=U(b,"FORM",{class:!0});var y=P(n);i.l(y),s=W(y),a=U(y,"INPUT",{style:!0,type:!0,accept:!0,name:!0}),o=W(y),l=U(y,"INPUT",{type:!0,name:!0,style:!0}),c=W(y),u=U(y,"INPUT",{style:!0,type:!0}),y.forEach(E),b.forEach(E),this.h()},h(){nt(a,"display","none"),M(a,"type","file"),M(a,"accept","video/*"),M(a,"name","videoFile"),M(l,"type","text"),M(l,"name","lessonId"),l.value=t[0],nt(l,"display","none"),nt(u,"display","none"),M(u,"type","submit"),M(n,"class","border-primary-300 flex h-full w-full flex-col items-center justify-center rounded-xl border border-dashed"),M(e,"type","button"),M(e,"class",f="h-full w-full "+(t[5]&&"hover:cursor-not-allowed opacity-50")),e.disabled=t[5]},m(_,b){H(_,e,b),x(e,n),p[r].m(n,null),x(n,s),x(n,a),t[19](a),x(n,o),x(n,l),x(n,c),x(n,u),t[20](u),h=!0,d||(m=[qe(a,"change",t[18]),qe(n,"submit",Wu(t[13])),qe(e,"click",t[21])],d=!0)},p(_,b){let y=r;r=g(_),r===y?p[r].p(_,b):(ye(),L(p[y],1,1,()=>{p[y]=null}),we(),i=p[r],i?i.p(_,b):(i=p[r]=v[r](_),i.c()),A(i,1),i.m(n,s)),(!h||b&1&&l.value!==_[0])&&(l.value=_[0]),(!h||b&32&&f!==(f="h-full w-full "+(_[5]&&"hover:cursor-not-allowed opacity-50")))&&M(e,"class",f),(!h||b&32)&&(e.disabled=_[5])},i(_){h||(A(i),h=!0)},o(_){L(i),h=!1},d(_){_&&E(e),p[r].d(),t[19](null),t[20](null),d=!1,Er(m)}}}function pE(t){let e,n,r,i,s,a=t[12]("course.navItem.lessons.materials.tabs.video.add_video.upload_video")+"",o,l,c,u=t[12]("course.navItem.lessons.materials.tabs.video.add_video.select_file")+"",f,h,d,m=t[12]("course.navItem.lessons.materials.tabs.video.add_video.size")+"",v;return{c(){e=B("img"),r=j(),i=B("span"),s=B("h3"),o=ne(a),l=j(),c=B("p"),f=ne(u),h=j(),d=B("p"),v=ne(m),this.h()},l(p){e=U(p,"IMG",{src:!0,alt:!0}),r=W(p),i=U(p,"SPAN",{class:!0});var g=P(i);s=U(g,"H3",{class:!0});var _=P(s);o=re(_,a),_.forEach(E),l=W(g),c=U(g,"P",{class:!0});var b=P(c);f=re(b,u),b.forEach(E),h=W(g),d=U(g,"P",{});var y=P(d);v=re(y,m),y.forEach(E),g.forEach(E),this.h()},h(){mt(e.src,n="/upload-video.svg")||M(e,"src",n),M(e,"alt","upload"),M(s,"class","text-center text-xl font-normal dark:text-white"),M(c,"class","text-center text-sm font-normal"),M(i,"class","pt-3")},m(p,g){H(p,e,g),H(p,r,g),H(p,i,g),x(i,s),x(s,o),x(i,l),x(i,c),x(c,f),x(i,h),x(i,d),x(d,v)},p(p,g){g&4096&&a!==(a=p[12]("course.navItem.lessons.materials.tabs.video.add_video.upload_video")+"")&&se(o,a),g&4096&&u!==(u=p[12]("course.navItem.lessons.materials.tabs.video.add_video.select_file")+"")&&se(f,u),g&4096&&m!==(m=p[12]("course.navItem.lessons.materials.tabs.video.add_video.size")+"")&&se(v,m)},i:he,o:he,d(p){p&&(E(e),E(r),E(i))}}}function gE(t){let e,n,r=t[12]("course.navItem.lessons.materials.tabs.video.add_video.uploading")+"",i,s,a,o,l,c,u;return a=new i2({props:{class:"w-full",value:t[1],max:X0,status:t[4]}}),{c(){e=B("div"),n=B("p"),i=ne(r),s=j(),Z(a.$$.fragment),o=j(),l=B("p"),c=ne(t[10]),this.h()},l(f){e=U(f,"DIV",{class:!0});var h=P(e);n=U(h,"P",{class:!0});var d=P(n);i=re(d,r),d.forEach(E),s=W(h),Q(a.$$.fragment,h),o=W(h),l=U(h,"P",{class:!0});var m=P(l);c=re(m,t[10]),m.forEach(E),h.forEach(E),this.h()},h(){M(n,"class","mt-5 text-center"),M(l,"class","text-sm"),M(e,"class","flex flex-col gap-5 max-w-[500px] w-[60%] justify-center")},m(f,h){H(f,e,h),x(e,n),x(n,i),x(e,s),X(a,e,null),x(e,o),x(e,l),x(l,c),u=!0},p(f,h){(!u||h&4096)&&r!==(r=f[12]("course.navItem.lessons.materials.tabs.video.add_video.uploading")+"")&&se(i,r);const d={};h&2&&(d.value=f[1]),h&16&&(d.status=f[4]),a.$set(d),(!u||h&1024)&&se(c,f[10])},i(f){u||(A(a.$$.fragment,f),u=!0)},o(f){L(a.$$.fragment,f),u=!1},d(f){f&&E(e),K(a)}}}function vE(t){let e,n,r,i,s,a;e=new Wy({props:{className:"mb-3",onClick:t[17],$$slots:{default:[uE]},$$scope:{ctx:t}}});const o=[mE,dE,hE,fE],l=[];function c(u,f){var h,d;return u[6]?((h=u[2])==null?void 0:h.type)==="FILE_TOO_LARGE"?1:(d=u[2])!=null&&d.success?3:2:0}return r=c(t),i=l[r]=o[r](t),{c(){Z(e.$$.fragment),n=j(),i.c(),s=fe()},l(u){Q(e.$$.fragment,u),n=W(u),i.l(u),s=fe()},m(u,f){X(e,u,f),H(u,n,f),l[r].m(u,f),H(u,s,f),a=!0},p(u,[f]){const h={};f&2048&&(h.onClick=u[17]),f&268439552&&(h.$$scope={dirty:f,ctx:u}),e.$set(h);let d=r;r=c(u),r===d?l[r].p(u,f):(ye(),L(l[d],1,1,()=>{l[d]=null}),we(),i=l[r],i?i.p(u,f):(i=l[r]=o[r](u),i.c()),A(i,1),i.m(s.parentNode,s))},i(u){a||(A(e.$$.fragment,u),A(i),a=!0)},o(u){L(e.$$.fragment,u),L(i),a=!1},d(u){u&&(E(n),E(s)),K(e,u),l[r].d(u)}}}let X0=100;function _E(t,e,n){let r,i,s,a,o;be(t,F0,T=>n(16,i=T)),be(t,pt,T=>n(25,s=T)),be(t,Yr,T=>n(11,a=T)),be(t,Nt,T=>n(12,o=T));let l=0,c="active",u,f=!1,{lessonId:h=""}=e,d,m=!1,v,p,g="",_=!1,b=0,y;function w(T){var F,G;return(G=(F=s.materials)==null?void 0:F.videos)==null?void 0:G.find(q=>q.link===T)}async function $(T){if(n(3,_=!0),!v)return;const F=new FormData,G=v.files[0];F.append("videoFile",G),console.log({size:G==null?void 0:G.size}),n(15,u=(G==null?void 0:G.size)/(1024*1024));try{const q=await My({method:"POST",url:Ys.PUBLIC_SERVER_URL+"/uploadVideo?lessonId="+h,data:F,maxContentLength:1/0,maxBodyLength:1/0,headers:{"Content-Type":"multipart/form-data; boundary=MyBoundary"},onUploadProgress:Y=>{n(1,l=Math.round(Y.loaded*100/(Y==null?void 0:Y.total)/2))}});n(2,d=q.data),console.log("Upload res",d),n(3,_=!1),n(6,m=!1)}catch(q){console.error("Error uploading video",q,`

`,q.response),q.response&&(n(2,d=q.response.data),console.log("formRes",d))}n(6,m=!0)}async function k(T){n(9,g=(T==null?void 0:T.success)&&(T==null?void 0:T.url)),g&&!w(g)&&Se(pt,s.materials.videos=[...s.materials.videos,{type:"muse",link:g,metadata:(T==null?void 0:T.metadata)||{}}],s)}function C(){n(2,d=null),n(6,m=!1),n(3,_=!1)}us(async()=>{y=Lr.channel("upload-progress").on("broadcast",{event:h},T=>{console.log("The progress of the upload",T),n(1,l=l+(T==null?void 0:T.payload)-b),b=T.payload}).subscribe()}),I0(()=>{Lr.removeChannel(y)});const V=()=>Se(Yr,a.isModalOpen=!1,a),I=()=>p.click();function S(T){je[T?"unshift":"push"](()=>{v=T,n(7,v)})}function N(T){je[T?"unshift":"push"](()=>{p=T,n(8,p)})}const O=()=>v&&!_?v.click():null,R=()=>Se(Yr,a.isModalOpen=!1,a);return t.$$set=T=>{"lessonId"in T&&n(0,h=T.lessonId)},t.$$.update=()=>{t.$$.dirty&32770&&n(10,r=l+"%  of "+Math.round(u)+"MB"),t.$$.dirty&2&&l===X0&&(n(10,r="Done"),n(4,c="finished")),t.$$.dirty&4&&k(d),t.$$.dirty&65544&&n(5,f=_||!Ys.PUBLIC_SERVER_URL||i)},[h,l,d,_,c,f,m,v,p,g,r,a,o,$,C,u,i,V,I,S,N,O,R]}class bE extends Pe{constructor(e){super(),Ve(this,e,_E,vE,Ae,{lessonId:0})}}function Uh(t,e,n){const r=t.slice();return r[10]=e[n],r[12]=n,r}function Hh(t){let e,n,r,i,s,a,o,l;n=new Qu({props:{type:"blue",$$slots:{default:[yE]},$$scope:{ctx:t}}}),i=new z0({props:{text:t[10].link,feedback:"Copied to clipboard"}});function c(){return t[9](t[12])}return a=new cn({props:{value:"delete-video",onClick:c,$$slots:{default:[wE]},$$scope:{ctx:t}}}),{c(){e=B("div"),Z(n.$$.fragment),r=j(),Z(i.$$.fragment),s=j(),Z(a.$$.fragment),o=j(),this.h()},l(u){e=U(u,"DIV",{class:!0});var f=P(e);Q(n.$$.fragment,f),r=W(f),Q(i.$$.fragment,f),s=W(f),Q(a.$$.fragment,f),o=W(f),f.forEach(E),this.h()},h(){M(e,"class","flex items-center gap-1")},m(u,f){H(u,e,f),X(n,e,null),x(e,r),X(i,e,null),x(e,s),X(a,e,null),x(e,o),l=!0},p(u,f){t=u;const h={};f&8196&&(h.$$scope={dirty:f,ctx:t}),n.$set(h);const d={};f&4&&(d.text=t[10].link),i.$set(d);const m={};f&8192&&(m.$$scope={dirty:f,ctx:t}),a.$set(m)},i(u){l||(A(n.$$.fragment,u),A(i.$$.fragment,u),A(a.$$.fragment,u),l=!0)},o(u){L(n.$$.fragment,u),L(i.$$.fragment,u),L(a.$$.fragment,u),l=!1},d(u){u&&E(e),K(n),K(i),K(a)}}}function yE(t){let e=t[10].link+"",n;return{c(){n=ne(e)},l(r){n=re(r,e)},m(r,i){H(r,n,i)},p(r,i){i&4&&e!==(e=r[10].link+"")&&se(n,e)},d(r){r&&E(n)}}}function wE(t){let e,n;return e=new mi({props:{size:16,class:"carbon-icon dark:text-white"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function zh(t){let e,n,r=t[10].type==="generic"&&Hh(t);return{c(){r&&r.c(),e=fe()},l(i){r&&r.l(i),e=fe()},m(i,s){r&&r.m(i,s),H(i,e,s),n=!0},p(i,s){i[10].type==="generic"?r?(r.p(i,s),s&4&&A(r,1)):(r=Hh(i),r.c(),A(r,1),r.m(e.parentNode,e)):r&&(ye(),L(r,1,1,()=>{r=null}),we())},i(i){n||(A(r),n=!0)},o(i){L(r),n=!1},d(i){i&&E(e),r&&r.d(i)}}}function EE(t){var k,C,V,I;let e,n,r,i,s,a,o,l,c=t[3]("course.navItem.lessons.materials.tabs.video.add_video.videos_added")+"",u,f,h,d=(((C=(k=t[2])==null?void 0:k.materials)==null?void 0:C.videos.filter(Fh).length)||0)+"",m,v,p,g;function _(S){t[8](S)}let b={label:t[3]("course.navItem.lessons.materials.tabs.video.embed_link"),className:"flex-1 text-left ",inputClassName:"text-sm",onChange:t[7],placeholder:"https://www.videoplayer.com/",errorMessage:t[1]};t[0]!==void 0&&(b.value=t[0]),n=new mr({props:b}),je.push(()=>et(n,"value",_)),s=new dt({props:{label:t[3]("course.navItem.lessons.materials.tabs.video.add_video.add_video"),className:"rounded-md",onClick:t[5]}});let y=Fe((I=(V=t[2])==null?void 0:V.materials)==null?void 0:I.videos),w=[];for(let S=0;S<y.length;S+=1)w[S]=zh(Uh(t,y,S));const $=S=>L(w[S],1,1,()=>{w[S]=null});return{c(){e=B("div"),Z(n.$$.fragment),i=j(),Z(s.$$.fragment),o=j(),l=B("p"),u=ne(c),f=ne(`:
  `),h=B("strong"),m=ne(d),v=j(),p=B("div");for(let S=0;S<w.length;S+=1)w[S].c();this.h()},l(S){e=U(S,"DIV",{class:!0});var N=P(e);Q(n.$$.fragment,N),i=W(N),Q(s.$$.fragment,N),N.forEach(E),o=W(S),l=U(S,"P",{class:!0});var O=P(l);u=re(O,c),f=re(O,`:
  `),h=U(O,"STRONG",{});var R=P(h);m=re(R,d),R.forEach(E),O.forEach(E),v=W(S),p=U(S,"DIV",{class:!0});var T=P(p);for(let F=0;F<w.length;F+=1)w[F].l(T);T.forEach(E),this.h()},h(){M(e,"class",a="w-full flex items-"+(t[1]?"center":"end")+" justify-between gap-5"),M(l,"class","mt-4 pl-2 text-sm"),M(p,"class","")},m(S,N){H(S,e,N),X(n,e,null),x(e,i),X(s,e,null),H(S,o,N),H(S,l,N),x(l,u),x(l,f),x(l,h),x(h,m),H(S,v,N),H(S,p,N);for(let O=0;O<w.length;O+=1)w[O]&&w[O].m(p,null);g=!0},p(S,[N]){var T,F,G,q;const O={};N&8&&(O.label=S[3]("course.navItem.lessons.materials.tabs.video.embed_link")),N&16&&(O.onChange=S[7]),N&2&&(O.errorMessage=S[1]),!r&&N&1&&(r=!0,O.value=S[0],Je(()=>r=!1)),n.$set(O);const R={};if(N&8&&(R.label=S[3]("course.navItem.lessons.materials.tabs.video.add_video.add_video")),s.$set(R),(!g||N&2&&a!==(a="w-full flex items-"+(S[1]?"center":"end")+" justify-between gap-5"))&&M(e,"class",a),(!g||N&8)&&c!==(c=S[3]("course.navItem.lessons.materials.tabs.video.add_video.videos_added")+"")&&se(u,c),(!g||N&4)&&d!==(d=(((F=(T=S[2])==null?void 0:T.materials)==null?void 0:F.videos.filter(Fh).length)||0)+"")&&se(m,d),N&68){y=Fe((q=(G=S[2])==null?void 0:G.materials)==null?void 0:q.videos);let Y;for(Y=0;Y<y.length;Y+=1){const te=Uh(S,y,Y);w[Y]?(w[Y].p(te,N),A(w[Y],1)):(w[Y]=zh(te),w[Y].c(),A(w[Y],1),w[Y].m(p,null))}for(ye(),Y=y.length;Y<w.length;Y+=1)$(Y);we()}},i(S){if(!g){A(n.$$.fragment,S),A(s.$$.fragment,S);for(let N=0;N<y.length;N+=1)A(w[N]);g=!0}},o(S){L(n.$$.fragment,S),L(s.$$.fragment,S),w=w.filter(Boolean);for(let N=0;N<w.length;N+=1)L(w[N]);g=!1},d(S){S&&(E(e),E(o),E(l),E(v),E(p)),K(n),K(s),Gt(w,S)}}}function $E(t=""){return(t||"").split(",").filter(e=>!!e.trim())}function TE(t=""){return/^(https?:\/\/)?(www\.)?([a-zA-Z]+\.com\/)([a-zA-Z0-9_-]+)/.test(t.trim())}const Fh=t=>t.type==="generic";function SE(t,e,n){let r,i,s;be(t,pt,d=>n(2,r=d)),be(t,Nt,d=>n(3,i=d)),be(t,Kr,d=>n(4,s=d));let a="",o="";function l(){var v;const m=$E(a).filter(TE);if(m.length===0)n(1,o=i("course.navItem.lessons.materials.tabs.video.add_video.invalid_link"));else{const p=((v=r==null?void 0:r.materials)==null?void 0:v.videos)||[];Se(pt,r.materials.videos=[...p,...m.map((g="")=>({type:"generic",link:g,metadata:{}}))],r),n(0,a=""),n(1,o="")}}function c(d=0){Se(pt,r.materials.videos=r.materials.videos.filter((m,v)=>v!==d),r)}const u=()=>Se(Kr,s=!0,s);function f(d){a=d,n(0,a)}return[a,o,r,i,s,l,c,u,f,d=>c(d)]}class xE extends Pe{constructor(e){super(),Ve(this,e,SE,EE,Ae,{})}}const kE=[{value:1,title:"course.navItem.lessons.materials.tabs.video.add_video.youtube_link",icon:A2},{value:2,title:"course.navItem.lessons.materials.tabs.video.embed_link",icon:E2},{value:3,title:"course.navItem.lessons.materials.tabs.video.upload",icon:Z0}];function Gh(t,e,n){const r=t.slice();return r[6]=e[n],r}function OE(t){let e,n,r;var i=t[6].icon;function s(a,o){return{props:{size:20,color:`${a[1]===a[6].value?"dark:invert-0":"dark:invert"}`}}}return i&&(e=Kn(i,s(t))),{c(){e&&Z(e.$$.fragment),n=fe()},l(a){e&&Q(e.$$.fragment,a),n=fe()},m(a,o){e&&X(e,a,o),H(a,n,o),r=!0},p(a,o){if(i!==(i=a[6].icon)){if(e){ye();const l=e;L(l.$$.fragment,1,0,()=>{K(l,1)}),we()}i?(e=Kn(i,s(a)),Z(e.$$.fragment),A(e.$$.fragment,1),X(e,n.parentNode,n)):e=null}else if(i){const l={};o&2&&(l.color=`${a[1]===a[6].value?"dark:invert-0":"dark:invert"}`),e.$set(l)}},i(a){r||(e&&A(e.$$.fragment,a),r=!0)},o(a){e&&L(e.$$.fragment,a),r=!1},d(a){a&&E(n),e&&K(e,a)}}}function ME(t){let e,n;return e=new Xy({props:{size:20,class:"text-blue-700"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function qh(t,e){let n,r,i,s,a,o=e[2](e[6].title)+"",l,c,u,f,h,d;const m=[ME,OE],v=[];function p(g,_){return g[3]&&g[6].value===3?0:1}return r=p(e),i=v[r]=m[r](e),{key:t,first:null,c(){n=B("button"),i.c(),s=j(),a=B("p"),l=ne(o),c=j(),this.h()},l(g){n=U(g,"BUTTON",{class:!0});var _=P(n);i.l(_),s=W(_),a=U(_,"P",{});var b=P(a);l=re(b,o),b.forEach(E),c=W(_),_.forEach(E),this.h()},h(){M(n,"class",u=`w-full px-4 py-3 my-1 border ${e[1]===e[6].value?"border border-[#0233BD] bg-[#F5F8FE] dark:text-black":"border border-gray-200 dark:border-neutral-600"} rounded-md cursor-pointer flex flex-row items-center justify-start gap-2 whitespace-nowrap`),this.first=n},m(g,_){H(g,n,_),v[r].m(n,null),x(n,s),x(n,a),x(a,l),x(n,c),f=!0,h||(d=qe(n,"click",e[5](e[6].value)),h=!0)},p(g,_){e=g;let b=r;r=p(e),r===b?v[r].p(e,_):(ye(),L(v[b],1,1,()=>{v[b]=null}),we(),i=v[r],i?i.p(e,_):(i=v[r]=m[r](e),i.c()),A(i,1),i.m(n,s)),(!f||_&4)&&o!==(o=e[2](e[6].title)+"")&&se(l,o),(!f||_&2&&u!==(u=`w-full px-4 py-3 my-1 border ${e[1]===e[6].value?"border border-[#0233BD] bg-[#F5F8FE] dark:text-black":"border border-gray-200 dark:border-neutral-600"} rounded-md cursor-pointer flex flex-row items-center justify-start gap-2 whitespace-nowrap`))&&M(n,"class",u)},i(g){f||(A(i),f=!0)},o(g){L(i),f=!1},d(g){g&&E(n),v[r].d(),h=!1,d()}}}function CE(t){let e,n;return e=new bE({props:{lessonId:t[0]}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i&1&&(s.lessonId=r[0]),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function AE(t){let e,n;return e=new xE({}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function IE(t){let e,n;return e=new cE({}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function DE(t){let e,n,r,i=t[2]("course.navItem.lessons.materials.tabs.video.add_video.add_by")+"",s,a,o=[],l=new Map,c,u,f,h,d,m=Fe(t[4]);const v=b=>b[6].value;for(let b=0;b<m.length;b+=1){let y=Gh(t,m,b),w=v(y);l.set(w,o[b]=qh(w,y))}const p=[IE,AE,CE],g=[];function _(b,y){return b[1]===1?0:b[1]===2?1:2}return f=_(t),h=g[f]=p[f](t),{c(){e=B("section"),n=B("div"),r=B("p"),s=ne(i),a=j();for(let b=0;b<o.length;b+=1)o[b].c();c=j(),u=B("main"),h.c(),this.h()},l(b){e=U(b,"SECTION",{class:!0});var y=P(e);n=U(y,"DIV",{class:!0});var w=P(n);r=U(w,"P",{class:!0});var $=P(r);s=re($,i),$.forEach(E),a=W(w);for(let C=0;C<o.length;C+=1)o[C].l(w);w.forEach(E),c=W(y),u=U(y,"MAIN",{class:!0});var k=P(u);h.l(k),k.forEach(E),y.forEach(E),this.h()},h(){M(r,"class","text-sm font-normal text-start text-[#4F4B4B] dark:text-[#b0a9a9] mb-3 w-full"),M(n,"class","flex flex-row md:flex-col gap-2 items-center"),M(u,"class","w-full h-full"),M(e,"class","w-full h-full flex flex-col md:flex-row items-start gap-3")},m(b,y){H(b,e,y),x(e,n),x(n,r),x(r,s),x(n,a);for(let w=0;w<o.length;w+=1)o[w]&&o[w].m(n,null);x(e,c),x(e,u),g[f].m(u,null),d=!0},p(b,[y]){(!d||y&4)&&i!==(i=b[2]("course.navItem.lessons.materials.tabs.video.add_video.add_by")+"")&&se(s,i),y&62&&(m=Fe(b[4]),ye(),o=ua(o,y,v,1,b,m,l,n,V0,qh,null,Gh),we());let w=f;f=_(b),f===w?g[f].p(b,y):(ye(),L(g[w],1,1,()=>{g[w]=null}),we(),h=g[f],h?h.p(b,y):(h=g[f]=p[f](b),h.c()),A(h,1),h.m(u,null))},i(b){if(!d){for(let y=0;y<m.length;y+=1)A(o[y]);A(h),d=!0}},o(b){for(let y=0;y<o.length;y+=1)L(o[y]);L(h),d=!1},d(b){b&&E(e);for(let y=0;y<o.length;y+=1)o[y].d();g[f].d()}}}function LE(t,e,n){let r,i;be(t,Nt,c=>n(2,r=c)),be(t,F0,c=>n(3,i=c));let{lessonId:s=""}=e,a=kE,o=a[0].value;const l=c=>()=>n(1,o=c);return t.$$set=c=>{"lessonId"in c&&n(0,s=c.lessonId)},[s,o,r,i,a,l]}class RE extends Pe{constructor(e){super(),Ve(this,e,LE,DE,Ae,{lessonId:0})}}let jh=[{label:"course.navItem.lessons.materials.tabs.note.title",icon:L2,value:1,badgeValue:0},{label:"course.navItem.lessons.materials.tabs.slide.title",icon:U2,value:2,badgeValue:0},{label:"course.navItem.lessons.materials.tabs.video.title",icon:Z0,value:3,badgeValue:0}];function NE(t,e){if(!Array.isArray(e))return t;const n=[],r=new Map(t.map(s=>[s.value,s]));return e.forEach((s,a)=>{const o=r.get(s.id);o&&(n[a]=o)}),n.filter(s=>s!==void 0)}function PE(t){let e,n,r=t[2]("course.navItem.lessons.materials.no_translation")+"",i;return{c(){e=B("div"),n=B("h3"),i=ne(r),this.h()},l(s){e=U(s,"DIV",{class:!0});var a=P(e);n=U(a,"H3",{class:!0});var o=P(n);i=re(o,r),o.forEach(E),a.forEach(E),this.h()},h(){M(n,"class","text-lg font-normal italic dark:text-white py-2"),M(e,"class","flex items-center justify-center flex-col text-center")},m(s,a){H(s,e,a),x(e,n),x(n,i)},p(s,a){a&4&&r!==(r=s[2]("course.navItem.lessons.materials.no_translation")+"")&&se(i,r)},i:he,o:he,d(s){s&&E(e)}}}function VE(t){let e,n;return e=new ml({props:{className:"m-auto",$$slots:{content:[BE]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i&66&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function BE(t){let e,n;return{c(){e=B("div"),n=new cl(!1),this.h()},l(r){e=U(r,"DIV",{});var i=P(e);n=ul(i,!1),i.forEach(E),this.h()},h(){n.a=null},m(r,i){H(r,e,i),n.m(t[1],e)},p(r,i){i&2&&n.p(r[1])},d(r){r&&E(e)}}}function UE(t){let e,n,r,i,s;const a=[VE,PE],o=[];function l(c,u){return u&2&&(e=null),e==null&&(e=!Fa(c[1])),e?0:c[0]?1:-1}return~(n=l(t,-1))&&(r=o[n]=a[n](t)),{c(){r&&r.c(),i=fe()},l(c){r&&r.l(c),i=fe()},m(c,u){~n&&o[n].m(c,u),H(c,i,u),s=!0},p(c,[u]){let f=n;n=l(c,u),n===f?~n&&o[n].p(c,u):(r&&(ye(),L(o[f],1,1,()=>{o[f]=null}),we()),~n?(r=o[n],r?r.p(c,u):(r=o[n]=a[n](c),r.c()),A(r,1),r.m(i.parentNode,i)):r=null)},i(c){s||(A(r),s=!0)},o(c){L(r),s=!1},d(c){c&&E(i),~n&&o[n].d(c)}}}function HE(t,e,n){let r,i,s,a,o;be(t,ji,c=>n(4,s=c)),be(t,pt,c=>n(5,a=c)),be(t,Nt,c=>n(2,o=c));let{lessonId:l}=e;return t.$$set=c=>{"lessonId"in c&&n(3,l=c.lessonId)},t.$$.update=()=>{t.$$.dirty&56&&n(1,r=Ku(a.materials.note,s[l],a.locale)),t.$$.dirty&24&&n(0,i=Object.values(s[l]||{}).some(c=>!!c.length))},[i,r,o,l,s,a]}class zE extends Pe{constructor(e){super(),Ve(this,e,HE,UE,Ae,{lessonId:3})}}function Wh(t){let e,n;return{c(){e=B("iframe"),this.h()},l(r){e=U(r,"IFRAME",{title:!0,src:!0,frameborder:!0,width:!0,height:!0,class:!0,mozallowfullscreen:!0,webkitallowfullscreen:!0}),P(e).forEach(E),this.h()},h(){M(e,"title","Embeded Slides"),mt(e.src,n=t[0])||M(e,"src",n),M(e,"frameborder","0"),M(e,"width","100%"),M(e,"height","569"),M(e,"class","iframe my-3"),e.allowFullscreen="true",M(e,"mozallowfullscreen","true"),M(e,"webkitallowfullscreen","true")},m(r,i){H(r,e,i)},p(r,i){i&1&&!mt(e.src,n=r[0])&&M(e,"src",n)},d(r){r&&E(e)}}}function FE(t){let e,n=t[0]&&Wh(t);return{c(){n&&n.c(),e=fe()},l(r){n&&n.l(r),e=fe()},m(r,i){n&&n.m(r,i),H(r,e,i)},p(r,[i]){r[0]?n?n.p(r,i):(n=Wh(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:he,o:he,d(r){r&&E(e),n&&n.d(r)}}}function GE(t){return t.includes("?embed")?t:`${t}?embed`}function qE(t){if(t)return console.log({_url:t}),t.includes("www.canva.com")?GE(t):t}function jE(t,e,n){let r;be(t,pt,s=>n(1,r=s));let i="";return t.$$.update=()=>{t.$$.dirty&2&&n(0,i=qE(r.materials.slide_url))},[i,r]}class WE extends Pe{constructor(e){super(),Ve(this,e,jE,FE,Ae,{})}}function Yh(t,e,n){const r=t.slice();return r[4]=e[n],r}function Zh(t){let e,n=Fe(t[1].materials.videos),r=[];for(let i=0;i<n.length;i+=1)r[i]=Kh(Yh(t,n,i));return{c(){e=B("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=U(i,"DIV",{class:!0});var s=P(e);for(let a=0;a<r.length;a+=1)r[a].l(s);s.forEach(E),this.h()},h(){M(e,"class","w-full")},m(i,s){H(i,e,s);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null)},p(i,s){if(s&7){n=Fe(i[1].materials.videos);let a;for(a=0;a<n.length;a+=1){const o=Yh(i,n,a);r[a]?r[a].p(o,s):(r[a]=Kh(o),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(i){i&&E(e),Gt(r,i)}}}function YE(t){let e,n,r,i;return{c(){e=B("video"),n=B("source"),i=B("track"),this.h()},l(s){e=U(s,"VIDEO",{class:!0});var a=P(e);n=U(a,"SOURCE",{src:!0,type:!0}),i=U(a,"TRACK",{kind:!0}),a.forEach(E),this.h()},h(){mt(n.src,r=t[4].link)||M(n,"src",r),M(n,"type","video/mp4"),M(i,"kind","captions"),M(e,"class","plyr-video-trigger"),e.playsInline=!0,e.controls=!0},m(s,a){H(s,e,a),x(e,n),x(e,i),t[3](e)},p(s,a){a&2&&!mt(n.src,r=s[4].link)&&M(n,"src",r)},d(s){s&&E(e),t[3](null)}}}function ZE(t){let e,n,r;return{c(){e=B("div"),n=B("iframe"),this.h()},l(i){e=U(i,"DIV",{style:!0});var s=P(e);n=U(s,"IFRAME",{src:!0,style:!0,frameborder:!0,title:!0}),P(n).forEach(E),s.forEach(E),this.h()},h(){var i;mt(n.src,r="https://muse.ai/embed/"+((i=t[4].metadata)==null?void 0:i.svid)+"?logo=https://app.classroomio.com/logo-512.png&subtitles=auto&cover_play_position=center")||M(n,"src",r),nt(n,"width","100%"),nt(n,"height","100%"),nt(n,"position","absolute"),nt(n,"left","0"),nt(n,"top","0"),M(n,"frameborder","0"),n.allowFullscreen=!0,M(n,"title","Muse AI Video Embed"),nt(e,"position","relative"),nt(e,"padding-bottom","51.416579%")},m(i,s){H(i,e,s),x(e,n)},p(i,s){var a;s&2&&!mt(n.src,r="https://muse.ai/embed/"+((a=i[4].metadata)==null?void 0:a.svid)+"?logo=https://app.classroomio.com/logo-512.png&subtitles=auto&cover_play_position=center")&&M(n,"src",r)},d(i){i&&E(e)}}}function XE(t){let e,n;return{c(){e=B("iframe"),this.h()},l(r){e=U(r,"IFRAME",{width:!0,height:!0,class:!0,src:!0,title:!0,frameborder:!0,allow:!0}),P(e).forEach(E),this.h()},h(){M(e,"width","100%"),M(e,"height","569"),M(e,"class","iframe"),mt(e.src,n=t[4].link)||M(e,"src",n),M(e,"title","Embeded Video player"),M(e,"frameborder","0"),M(e,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),e.allowFullscreen=!0},m(r,i){H(r,e,i)},p(r,i){i&2&&!mt(e.src,n=r[4].link)&&M(e,"src",n)},d(r){r&&E(e)}}}function KE(t){let e,n;return{c(){e=B("iframe"),this.h()},l(r){e=U(r,"IFRAME",{class:!0,src:!0,title:!0,frameborder:!0,allow:!0}),P(e).forEach(E),this.h()},h(){M(e,"class","iframe"),mt(e.src,n=uo(t[4].link,t[2]))||M(e,"src",n),M(e,"title","YouTube video player"),M(e,"frameborder","0"),M(e,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),e.allowFullscreen=!0},m(r,i){H(r,e,i)},p(r,i){i&2&&!mt(e.src,n=uo(r[4].link,r[2]))&&M(e,"src",n)},d(r){r&&E(e)}}}function Xh(t){let e;function n(s,a){var o;return s[4].type==="youtube"?KE:s[4].type==="generic"?XE:(o=s[4].metadata)!=null&&o.svid?ZE:YE}let r=n(t),i=r(t);return{c(){e=B("div"),i.c(),this.h()},l(s){e=U(s,"DIV",{class:!0});var a=P(e);i.l(a),a.forEach(E),this.h()},h(){M(e,"class","mb-5")},m(s,a){H(s,e,a),i.m(e,null)},p(s,a){r===(r=n(s))&&i?i.p(s,a):(i.d(1),i=r(s),i&&(i.c(),i.m(e,null)))},d(s){s&&E(e),i.d()}}}function Kh(t){let e,n=t[4].link,r,i=Xh(t);return{c(){e=B("div"),i.c(),r=j(),this.h()},l(s){e=U(s,"DIV",{class:!0});var a=P(e);i.l(a),r=W(a),a.forEach(E),this.h()},h(){M(e,"class","w-full overflow-hidden mb-5")},m(s,a){H(s,e,a),i.m(e,null),x(e,r)},p(s,a){a&2&&Ae(n,n=s[4].link)?(i.d(1),i=Xh(s),i.c(),i.m(e,r)):i.p(s,a)},d(s){s&&E(e),i.d(s)}}}function QE(t){let e,n=t[1].materials.videos.length&&Zh(t);return{c(){n&&n.c(),e=fe()},l(r){n&&n.l(r),e=fe()},m(r,i){n&&n.m(r,i),H(r,e,i)},p(r,[i]){r[1].materials.videos.length?n?n.p(r,i):(n=Zh(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:he,o:he,d(r){r&&E(e),n&&n.d(r)}}}function JE(t,e){if(!t)return;const n=Array.from(document.querySelectorAll(".plyr-video-trigger")).map(r=>new Plyr(r));window.players=n}function e$(t,e,n){let r;be(t,pt,o=>n(1,r=o));let i={},s=null;function a(o){je[o?"unshift":"push"](()=>{s=o,n(0,s)})}return t.$$.update=()=>{t.$$.dirty&3&&JE(s,r.materials.videos)},[s,r,i,a]}class t$ extends Pe{constructor(e){super(),Ve(this,e,e$,QE,Ae,{})}}function n$(t){let e,n,r,i,s,a,o,l,c,u;return n=new Qy({props:{style:"width: 100%; height: 10rem;"}}),s=new jl({props:{style:"width: 100%;"}}),o=new jl({props:{style:"width: 100%;"}}),c=new jl({props:{style:"width: 100%;"}}),{c(){e=B("div"),Z(n.$$.fragment),r=j(),i=B("div"),Z(s.$$.fragment),a=j(),Z(o.$$.fragment),l=j(),Z(c.$$.fragment),this.h()},l(f){e=U(f,"DIV",{class:!0});var h=P(e);Q(n.$$.fragment,h),r=W(h),i=U(h,"DIV",{class:!0});var d=P(i);Q(s.$$.fragment,d),a=W(d),Q(o.$$.fragment,d),l=W(d),Q(c.$$.fragment,d),d.forEach(E),h.forEach(E),this.h()},h(){M(i,"class","my-3"),M(e,"class","w-full")},m(f,h){H(f,e,h),X(n,e,null),x(e,r),x(e,i),X(s,i,null),x(i,a),X(o,i,null),x(i,l),X(c,i,null),u=!0},p:he,i(f){u||(A(n.$$.fragment,f),A(s.$$.fragment,f),A(o.$$.fragment,f),A(c.$$.fragment,f),u=!0)},o(f){L(n.$$.fragment,f),L(s.$$.fragment,f),L(o.$$.fragment,f),L(c.$$.fragment,f),u=!1},d(f){f&&E(e),K(n),K(s),K(o),K(c)}}}class r$ extends Pe{constructor(e){super(),Ve(this,e,null,n$,Ae,{})}}const{Boolean:K0}=Ny;function Qh(t,e,n){const r=t.slice();return r[65]=e[n],r}function Jh(t,e,n){const r=t.slice();return r[62]=e[n],r[64]=n,r}function i$(t){let e,n;return e=new RE({props:{lessonId:t[1]}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i[0]&2&&(s.lessonId=r[1]),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function s$(t){let e,n;return{c(){e=B("h1"),n=ne(t[8]),this.h()},l(r){e=U(r,"H1",{class:!0});var i=P(e);n=re(i,t[8]),i.forEach(E),this.h()},h(){M(e,"class","text-2xl md:text-4xl mt-0 capitalize")},m(r,i){H(r,e,i),x(e,n)},p(r,i){i[0]&256&&se(n,r[8])},d(r){r&&E(e)}}}function a$(t){let e,n;return e=new Zu({props:{className:"text-center",$$slots:{default:[u$]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i[0]&131084|i[2]&64&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function o$(t){let e=t[1],n,r,i=nd(t);return{c(){i.c(),n=fe()},l(s){i.l(s),n=fe()},m(s,a){i.m(s,a),H(s,n,a),r=!0},p(s,a){a[0]&2&&Ae(e,e=s[1])?(ye(),L(i,1,1,he),we(),i=nd(s),i.c(),A(i,1),i.m(n.parentNode,n)):i.p(s,a)},i(s){r||(A(i),r=!0)},o(s){L(i),r=!1},d(s){s&&E(n),i.d(s)}}}function l$(t){let e,n;return e=new zy({props:{tabs:t[9],currentTab:t[10],onChange:t[20],$$slots:{content:[w$]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i[0]&512&&(s.tabs=r[9]),i[0]&1024&&(s.currentTab=r[10]),i[0]&441587|i[2]&64&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function c$(t){let e,n;return e=new r$({}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function ed(t){let e,n=t[17]("course.navItem.lessons.materials.body_content")+"",r,i,s,a=t[17]("course.navItem.lessons.materials.get_started")+"",o,l,c=t[17]("course.navItem.lessons.materials.button")+"",u,f,h,d,m;return d=new dt({props:{label:t[17]("course.navItem.lessons.materials.get_started"),className:"rounded-md",onClick:t[3]}}),{c(){e=B("p"),r=ne(n),i=j(),s=B("strong"),o=ne(a),l=j(),u=ne(c),f=ne("."),h=j(),Z(d.$$.fragment),this.h()},l(v){e=U(v,"P",{class:!0});var p=P(e);r=re(p,n),i=W(p),s=U(p,"STRONG",{});var g=P(s);o=re(g,a),g.forEach(E),l=W(p),u=re(p,c),f=re(p,"."),p.forEach(E),h=W(v),Q(d.$$.fragment,v),this.h()},h(){M(e,"class","text-sm text-center font-normal py-2")},m(v,p){H(v,e,p),x(e,r),x(e,i),x(e,s),x(s,o),x(e,l),x(e,u),x(e,f),H(v,h,p),X(d,v,p),m=!0},p(v,p){(!m||p[0]&131072)&&n!==(n=v[17]("course.navItem.lessons.materials.body_content")+"")&&se(r,n),(!m||p[0]&131072)&&a!==(a=v[17]("course.navItem.lessons.materials.get_started")+"")&&se(o,a),(!m||p[0]&131072)&&c!==(c=v[17]("course.navItem.lessons.materials.button")+"")&&se(u,c);const g={};p[0]&131072&&(g.label=v[17]("course.navItem.lessons.materials.get_started")),p[0]&8&&(g.onClick=v[3]),d.$set(g)},i(v){m||(A(d.$$.fragment,v),m=!0)},o(v){L(d.$$.fragment,v),m=!1},d(v){v&&(E(e),E(h)),K(d,v)}}}function u$(t){let e,n,r,i,s=t[17]("course.navItem.lessons.materials.body_heading")+"",a,o,l,c,u=!t[2]&&ed(t);return{c(){e=B("img"),r=j(),i=B("h3"),a=ne(s),o=j(),u&&u.c(),l=fe(),this.h()},l(f){e=U(f,"IMG",{src:!0,alt:!0}),r=W(f),i=U(f,"H3",{class:!0});var h=P(i);a=re(h,s),h.forEach(E),o=W(f),u&&u.l(f),l=fe(),this.h()},h(){mt(e.src,n="/no-video.svg")||M(e,"src",n),M(e,"alt","Video not found"),M(i,"class","text-xl font-normal dark:text-white py-2")},m(f,h){H(f,e,h),H(f,r,h),H(f,i,h),x(i,a),H(f,o,h),u&&u.m(f,h),H(f,l,h),c=!0},p(f,h){(!c||h[0]&131072)&&s!==(s=f[17]("course.navItem.lessons.materials.body_heading")+"")&&se(a,s),f[2]?u&&(ye(),L(u,1,1,()=>{u=null}),we()):u?(u.p(f,h),h[0]&4&&A(u,1)):(u=ed(f),u.c(),A(u,1),u.m(l.parentNode,l))},i(f){c||(A(u),c=!0)},o(f){L(u),c=!1},d(f){f&&(E(e),E(r),E(i),E(o),E(l)),u&&u.d(f)}}}function td(t){let e,n,r;var i=t[65];function s(a,o){return{props:{lessonId:a[1]}}}return i&&(e=Kn(i,s(t))),{c(){e&&Z(e.$$.fragment),n=fe()},l(a){e&&Q(e.$$.fragment,a),n=fe()},m(a,o){e&&X(e,a,o),H(a,n,o),r=!0},p(a,o){if(o[0]&16384&&i!==(i=a[65])){if(e){ye();const l=e;L(l.$$.fragment,1,0,()=>{K(l,1)}),we()}i?(e=Kn(i,s(a)),Z(e.$$.fragment),A(e.$$.fragment,1),X(e,n.parentNode,n)):e=null}else if(i){const l={};o[0]&2&&(l.lessonId=a[1]),e.$set(l)}},i(a){r||(e&&A(e.$$.fragment,a),r=!0)},o(a){e&&L(e.$$.fragment,a),r=!1},d(a){a&&E(n),e&&K(e,a)}}}function nd(t){let e,n,r,i,s=Fe(t[14]),a=[];for(let l=0;l<s.length;l+=1)a[l]=td(Qh(t,s,l));const o=l=>L(a[l],1,1,()=>{a[l]=null});return{c(){e=B("div");for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){e=U(l,"DIV",{class:!0});var c=P(e);for(let u=0;u<a.length;u+=1)a[u].l(c);c.forEach(E),this.h()},h(){M(e,"class","w-full mb-20")},m(l,c){H(l,e,c);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(e,null);i=!0},p(l,c){if(c[0]&16386){s=Fe(l[14]);let u;for(u=0;u<s.length;u+=1){const f=Qh(l,s,u);a[u]?(a[u].p(f,c),A(a[u],1)):(a[u]=td(f),a[u].c(),A(a[u],1),a[u].m(e,null))}for(ye(),u=s.length;u<a.length;u+=1)o(u);we()}},i(l){if(!i){for(let c=0;c<s.length;c+=1)A(a[c]);l&&D0(()=>{i&&(r&&r.end(1),n=R0(e,ah,{delay:500}),n.start())}),i=!0}},o(l){a=a.filter(K0);for(let c=0;c<a.length;c+=1)L(a[c]);n&&n.invalidate(),l&&(r=dy(e,ah,{})),i=!1},d(l){l&&E(e),Gt(a,l),l&&r&&r.end()}}}function f$(t){let e,n,r,i,s=t[17]("course.navItem.lessons.materials.tabs.note.ai.outline")+"",a,o,l,c,u,f=t[17]("course.navItem.lessons.materials.tabs.note.ai.note")+"",h,d,m,v,p,g=t[17]("course.navItem.lessons.materials.tabs.note.ai.activities")+"",_,b,y,w;return r=new Hy({props:{class:"carbon-icon mr-2"}}),c=new d2({props:{class:"carbon-icon mr-2"}}),v=new O2({props:{class:"carbon-icon mr-2"}}),{c(){e=B("div"),n=B("button"),Z(r.$$.fragment),i=j(),a=ne(s),o=j(),l=B("button"),Z(c.$$.fragment),u=j(),h=ne(f),d=j(),m=B("button"),Z(v.$$.fragment),p=j(),_=ne(g),this.h()},l($){e=U($,"DIV",{class:!0});var k=P(e);n=U(k,"BUTTON",{class:!0});var C=P(n);Q(r.$$.fragment,C),i=W(C),a=re(C,s),C.forEach(E),o=W(k),l=U(k,"BUTTON",{class:!0});var V=P(l);Q(c.$$.fragment,V),u=W(V),h=re(V,f),V.forEach(E),d=W(k),m=U(k,"BUTTON",{class:!0});var I=P(m);Q(v.$$.fragment,I),p=W(I),_=re(I,g),I.forEach(E),k.forEach(E),this.h()},h(){M(n,"class",Wl),M(l,"class",Wl),M(m,"class",Wl),M(e,"class","p-2")},m($,k){H($,e,k),x(e,n),X(r,n,null),x(n,i),x(n,a),x(e,o),x(e,l),X(c,l,null),x(l,u),x(l,h),x(e,d),x(e,m),X(v,m,null),x(m,p),x(m,_),b=!0,y||(w=[qe(n,"click",t[33]),qe(l,"click",t[34]),qe(m,"click",t[35])],y=!0)},p($,k){(!b||k[0]&131072)&&s!==(s=$[17]("course.navItem.lessons.materials.tabs.note.ai.outline")+"")&&se(a,s),(!b||k[0]&131072)&&f!==(f=$[17]("course.navItem.lessons.materials.tabs.note.ai.note")+"")&&se(h,f),(!b||k[0]&131072)&&g!==(g=$[17]("course.navItem.lessons.materials.tabs.note.ai.activities")+"")&&se(_,g)},i($){b||(A(r.$$.fragment,$),A(c.$$.fragment,$),A(v.$$.fragment,$),b=!0)},o($){L(r.$$.fragment,$),L(c.$$.fragment,$),L(v.$$.fragment,$),b=!1},d($){$&&E(e),K(r),K(c),K(v),y=!1,Er(w)}}}function h$(t){let e,n,r,i,s;e=new By({props:{size:20,class:"carbon-icon mr-3"}});function a(l){t[36](l)}let o={caret:!0,align:"left",$$slots:{default:[f$]},$$scope:{ctx:t}};return t[13]!==void 0&&(o.open=t[13]),r=new Jy({props:o}),je.push(()=>et(r,"open",a)),r.$on("click:outside",t[37]),{c(){Z(e.$$.fragment),n=ne(`
              AI
              `),Z(r.$$.fragment)},l(l){Q(e.$$.fragment,l),n=re(l,`
              AI
              `),Q(r.$$.fragment,l)},m(l,c){X(e,l,c),H(l,n,c),X(r,l,c),s=!0},p(l,c){const u={};c[0]&131072|c[2]&64&&(u.$$scope={dirty:c,ctx:l}),!i&&c[0]&8192&&(i=!0,u.open=l[13],Je(()=>i=!1)),r.$set(u)},i(l){s||(A(e.$$.fragment,l),A(r.$$.fragment,l),s=!0)},o(l){L(e.$$.fragment,l),L(r.$$.fragment,l),s=!1},d(l){l&&E(n),K(e,l),K(r,l)}}}function d$(t){let e,n,r,i,s,a,o,l;r=new dt({props:{className:"flex items-center relative",onClick:t[38],isLoading:t[7],isDisabled:t[7],variant:gn.OUTLINED,disableScale:!0,$$slots:{default:[h$]},$$scope:{ctx:t}}});function c(f){t[41](f)}let u={id:t[1],value:t[15],onChange:t[40],placeholder:t[17]("course.navItem.lessons.materials.tabs.note.placeholder")};return t[11]!==void 0&&(u.editorWindowRef=t[11]),a=new G0({props:u}),je.push(()=>et(a,"editorWindowRef",c)),{c(){e=B("div"),n=B("div"),Z(r.$$.fragment),i=j(),s=B("div"),Z(a.$$.fragment),this.h()},l(f){e=U(f,"DIV",{class:!0});var h=P(e);n=U(h,"DIV",{class:!0});var d=P(n);Q(r.$$.fragment,d),d.forEach(E),h.forEach(E),i=W(f),s=U(f,"DIV",{class:!0});var m=P(s);Q(a.$$.fragment,m),m.forEach(E),this.h()},h(){M(n,"class","flex flex-row-reverse"),M(e,"class","flex gap-1 justify-end"),M(s,"class","h-[60vh] mt-5")},m(f,h){H(f,e,h),x(e,n),X(r,n,null),t[39](n),H(f,i,h),H(f,s,h),X(a,s,null),l=!0},p(f,h){const d={};h[0]&8192&&(d.onClick=f[38]),h[0]&128&&(d.isLoading=f[7]),h[0]&128&&(d.isDisabled=f[7]),h[0]&143360|h[2]&64&&(d.$$scope={dirty:h,ctx:f}),r.$set(d);const m={};h[0]&2&&(m.id=f[1]),h[0]&32768&&(m.value=f[15]),h[0]&262243&&(m.onChange=f[40]),h[0]&131072&&(m.placeholder=f[17]("course.navItem.lessons.materials.tabs.note.placeholder")),!o&&h[0]&2048&&(o=!0,m.editorWindowRef=f[11],Je(()=>o=!1)),a.$set(m)},i(f){l||(A(r.$$.fragment,f),A(a.$$.fragment,f),l=!0)},o(f){L(r.$$.fragment,f),L(a.$$.fragment,f),l=!1},d(f){f&&(E(e),E(i),E(s)),K(r),t[39](null),K(a)}}}function rd(t){let e,n,r;function i(a){t[43](a)}let s={label:t[17]("course.navItem.lessons.materials.tabs.slide.slide_link"),onInputChange:t[42],helperMessage:t[17]("course.navItem.lessons.materials.tabs.slide.helper_message")};return t[5].materials.slide_url!==void 0&&(s.value=t[5].materials.slide_url),e=new mr({props:s}),je.push(()=>et(e,"value",i)),{c(){Z(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,o){X(e,a,o),r=!0},p(a,o){const l={};o[0]&131072&&(l.label=a[17]("course.navItem.lessons.materials.tabs.slide.slide_link")),o[0]&262144&&(l.onInputChange=a[42]),o[0]&131072&&(l.helperMessage=a[17]("course.navItem.lessons.materials.tabs.slide.helper_message")),!n&&o[0]&32&&(n=!0,l.value=a[5].materials.slide_url,Je(()=>n=!1)),e.$set(l)},i(a){r||(A(e.$$.fragment,a),r=!0)},o(a){L(e.$$.fragment,a),r=!1},d(a){K(e,a)}}}function m$(t){let e,n,r=t[0]===zt.edit&&rd(t);return{c(){r&&r.c(),e=fe()},l(i){r&&r.l(i),e=fe()},m(i,s){r&&r.m(i,s),H(i,e,s),n=!0},p(i,s){i[0]===zt.edit?r?(r.p(i,s),s[0]&1&&A(r,1)):(r=rd(i),r.c(),A(r,1),r.m(e.parentNode,e)):r&&(ye(),L(r,1,1,()=>{r=null}),we())},i(i){n||(A(r),n=!0)},o(i){L(r),n=!1},d(i){i&&E(e),r&&r.d(i)}}}function id(t){let e,n,r=Fe(t[5].materials.videos),i=[];for(let a=0;a<r.length;a+=1)i[a]=od(Jh(t,r,a));const s=a=>L(i[a],1,1,()=>{i[a]=null});return{c(){e=B("div");for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=U(a,"DIV",{class:!0});var o=P(e);for(let l=0;l<i.length;l+=1)i[l].l(o);o.forEach(E),this.h()},h(){M(e,"class","flex flex-col items-start w-full h-full")},m(a,o){H(a,e,o);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(e,null);n=!0},p(a,o){if(o[0]&524337){r=Fe(a[5].materials.videos);let l;for(l=0;l<r.length;l+=1){const c=Jh(a,r,l);i[l]?(i[l].p(c,o),A(i[l],1)):(i[l]=od(c),i[l].c(),A(i[l],1),i[l].m(e,null))}for(ye(),l=r.length;l<i.length;l+=1)s(l);we()}},i(a){if(!n){for(let o=0;o<r.length;o+=1)A(i[o]);n=!0}},o(a){i=i.filter(K0);for(let o=0;o<i.length;o+=1)L(i[o]);n=!1},d(a){a&&E(e),Gt(i,a)}}}function sd(t){let e,n,r;function i(){return t[44](t[64])}return n=new cn({props:{value:"delete-video",contained:!0,onClick:i,$$slots:{default:[p$]},$$scope:{ctx:t}}}),{c(){e=B("div"),Z(n.$$.fragment),this.h()},l(s){e=U(s,"DIV",{class:!0});var a=P(e);Q(n.$$.fragment,a),a.forEach(E),this.h()},h(){M(e,"class","ml-auto")},m(s,a){H(s,e,a),X(n,e,null),r=!0},p(s,a){t=s;const o={};a[2]&64&&(o.$$scope={dirty:a,ctx:t}),n.$set(o)},i(s){r||(A(n.$$.fragment,s),r=!0)},o(s){L(n.$$.fragment,s),r=!1},d(s){s&&E(e),K(n)}}}function p$(t){let e,n;return e=new mi({props:{size:20,class:"carbon-icon dark:text-white"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function g$(t){let e,n,r,i;return{c(){e=B("video"),n=B("source"),i=B("track"),this.h()},l(s){e=U(s,"VIDEO",{class:!0});var a=P(e);n=U(a,"SOURCE",{src:!0,type:!0}),i=U(a,"TRACK",{kind:!0}),a.forEach(E),this.h()},h(){mt(n.src,r=t[62].link)||M(n,"src",r),M(n,"type","video/mp4"),M(i,"kind","captions"),M(e,"class","plyr-video-trigger"),e.playsInline=!0,e.controls=!0},m(s,a){H(s,e,a),x(e,n),x(e,i),t[45](e)},p(s,a){a[0]&32&&!mt(n.src,r=s[62].link)&&M(n,"src",r)},d(s){s&&E(e),t[45](null)}}}function v$(t){let e,n,r;return{c(){e=B("div"),n=B("iframe"),this.h()},l(i){e=U(i,"DIV",{style:!0});var s=P(e);n=U(s,"IFRAME",{src:!0,style:!0,frameborder:!0,title:!0}),P(n).forEach(E),s.forEach(E),this.h()},h(){var i;mt(n.src,r="https://muse.ai/embed/"+((i=t[62].metadata)==null?void 0:i.svid)+"?logo=https://app.classroomio.com/logo-512.png&subtitles=auto&cover_play_position=center")||M(n,"src",r),nt(n,"width","100%"),nt(n,"height","100%"),nt(n,"position","absolute"),nt(n,"left","0"),nt(n,"top","0"),M(n,"frameborder","0"),n.allowFullscreen=!0,M(n,"title","Muse AI Video Embed"),nt(e,"position","relative"),nt(e,"padding-bottom","51.416579%")},m(i,s){H(i,e,s),x(e,n)},p(i,s){var a;s[0]&32&&!mt(n.src,r="https://muse.ai/embed/"+((a=i[62].metadata)==null?void 0:a.svid)+"?logo=https://app.classroomio.com/logo-512.png&subtitles=auto&cover_play_position=center")&&M(n,"src",r)},d(i){i&&E(e)}}}function _$(t){let e,n;return{c(){e=B("iframe"),this.h()},l(r){e=U(r,"IFRAME",{width:!0,height:!0,class:!0,src:!0,title:!0,frameborder:!0,allow:!0}),P(e).forEach(E),this.h()},h(){M(e,"width","100%"),M(e,"height","569"),M(e,"class","iframe"),mt(e.src,n=t[62].link)||M(e,"src",n),M(e,"title","Embeded Video player"),M(e,"frameborder","0"),M(e,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),e.allowFullscreen=!0},m(r,i){H(r,e,i)},p(r,i){i[0]&32&&!mt(e.src,n=r[62].link)&&M(e,"src",n)},d(r){r&&E(e)}}}function b$(t){let e,n;return{c(){e=B("iframe"),this.h()},l(r){e=U(r,"IFRAME",{width:!0,height:!0,class:!0,src:!0,title:!0,frameborder:!0,allow:!0}),P(e).forEach(E),this.h()},h(){M(e,"width","100%"),M(e,"height","569"),M(e,"class","iframe"),mt(e.src,n=uo(t[62].link,t[19]))||M(e,"src",n),M(e,"title","YouTube video player"),M(e,"frameborder","0"),M(e,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),e.allowFullscreen=!0},m(r,i){H(r,e,i)},p(r,i){i[0]&32&&!mt(e.src,n=uo(r[62].link,r[19]))&&M(e,"src",n)},d(r){r&&E(e)}}}function ad(t){let e;function n(s,a){var o;return s[62].type==="youtube"?b$:s[62].type==="generic"?_$:(o=s[62].metadata)!=null&&o.svid?v$:g$}let r=n(t),i=r(t);return{c(){e=B("div"),i.c(),this.h()},l(s){e=U(s,"DIV",{class:!0});var a=P(e);i.l(a),a.forEach(E),this.h()},h(){M(e,"class","mb-5")},m(s,a){H(s,e,a),i.m(e,null)},p(s,a){r===(r=n(s))&&i?i.p(s,a):(i.d(1),i=r(s),i&&(i.c(),i.m(e,null)))},d(s){s&&E(e),i.d()}}}function od(t){let e,n,r=t[62].link,i,s,a=t[0]===zt.edit&&sd(t),o=ad(t);return{c(){a&&a.c(),e=j(),n=B("div"),o.c(),i=j(),this.h()},l(l){a&&a.l(l),e=W(l),n=U(l,"DIV",{class:!0});var c=P(n);o.l(c),i=W(c),c.forEach(E),this.h()},h(){M(n,"class","w-full h-full flex flex-col gap-2 overflow-hidden")},m(l,c){a&&a.m(l,c),H(l,e,c),H(l,n,c),o.m(n,null),x(n,i),s=!0},p(l,c){l[0]===zt.edit?a?c[0]&1&&A(a,1):(a=sd(l),a.c(),A(a,1),a.m(e.parentNode,e)):a&&(ye(),L(a,1,1,()=>{a=null}),we()),c[0]&32&&Ae(r,r=l[62].link)?(o.d(1),o=ad(l),o.c(),o.m(n,i)):o.p(l,c)},i(l){s||(A(a),s=!0)},o(l){L(a),s=!1},d(l){l&&(E(e),E(n)),a&&a.d(l),o.d(l)}}}function y$(t){let e,n,r,i;e=new dt({props:{label:t[17]("course.navItem.lessons.materials.tabs.video.button"),onClick:t[23],className:"mb-2"}});let s=t[5].materials.videos.length&&id(t);return{c(){Z(e.$$.fragment),n=j(),s&&s.c(),r=fe()},l(a){Q(e.$$.fragment,a),n=W(a),s&&s.l(a),r=fe()},m(a,o){X(e,a,o),H(a,n,o),s&&s.m(a,o),H(a,r,o),i=!0},p(a,o){const l={};o[0]&131072&&(l.label=a[17]("course.navItem.lessons.materials.tabs.video.button")),e.$set(l),a[5].materials.videos.length?s?(s.p(a,o),o[0]&32&&A(s,1)):(s=id(a),s.c(),A(s,1),s.m(r.parentNode,r)):s&&(ye(),L(s,1,1,()=>{s=null}),we())},i(a){i||(A(e.$$.fragment,a),A(s),i=!0)},o(a){L(e.$$.fragment,a),L(s),i=!1},d(a){a&&(E(n),E(r)),K(e,a),s&&s.d(a)}}}function w$(t){let e,n,r,i,s,a,o;return n=new ql({props:{value:t[21]("course.navItem.lessons.materials.tabs.note.title"),index:t[10],$$slots:{default:[d$]},$$scope:{ctx:t}}}),i=new ql({props:{value:t[21]("course.navItem.lessons.materials.tabs.slide.title"),index:t[10],$$slots:{default:[m$]},$$scope:{ctx:t}}}),a=new ql({props:{value:t[21]("course.navItem.lessons.materials.tabs.video.title"),index:t[10],$$slots:{default:[y$]},$$scope:{ctx:t}}}),{c(){e=B("slot:fragment"),Z(n.$$.fragment),r=j(),Z(i.$$.fragment),s=j(),Z(a.$$.fragment),this.h()},l(l){e=U(l,"SLOT:FRAGMENT",{slot:!0});var c=P(e);Q(n.$$.fragment,c),r=W(c),Q(i.$$.fragment,c),s=W(c),Q(a.$$.fragment,c),c.forEach(E),this.h()},h(){M(e,"slot","content")},m(l,c){H(l,e,c),X(n,e,null),x(e,r),X(i,e,null),x(e,s),X(a,e,null),o=!0},p(l,c){const u={};c[0]&1024&&(u.index=l[10]),c[0]&440547|c[2]&64&&(u.$$scope={dirty:c,ctx:l}),n.$set(u);const f={};c[0]&1024&&(f.index=l[10]),c[0]&393249|c[2]&64&&(f.$$scope={dirty:c,ctx:l}),i.$set(f);const h={};c[0]&1024&&(h.index=l[10]),c[0]&131121|c[2]&64&&(h.$$scope={dirty:c,ctx:l}),a.$set(h)},i(l){o||(A(n.$$.fragment,l),A(i.$$.fragment,l),A(a.$$.fragment,l),o=!0)},o(l){L(n.$$.fragment,l),L(i.$$.fragment,l),L(a.$$.fragment,l),o=!1},d(l){l&&E(e),K(n),K(i),K(a)}}}function E$(t){let e,n,r,i,s,a,o,l,c,u;function f(p){t[32](p)}let h={onClose:t[28],width:"w-4/5 w-[90%] h-[80%] md:h-[566px]",modalHeading:t[17]("course.navItem.lessons.materials.tabs.video.add_video.title"),$$slots:{default:[i$]},$$scope:{ctx:t}};t[16].isModalOpen!==void 0&&(h.open=t[16].isModalOpen),e=new fa({props:h}),je.push(()=>et(e,"open",f)),i=new ml({props:{className:"m-auto text-center",$$slots:{content:[s$]},$$scope:{ctx:t}}});const d=[c$,l$,o$,a$],m=[];function v(p,g){return g[0]&98&&(a=null),p[5].isFetching?0:p[0]===zt.edit?1:(a==null&&(a=!p[22](p[5].materials,p[6][p[1]])),a?2:3)}return o=v(t,[-1,-1,-1]),l=m[o]=d[o](t),{c(){Z(e.$$.fragment),r=j(),Z(i.$$.fragment),s=j(),l.c(),c=fe()},l(p){Q(e.$$.fragment,p),r=W(p),Q(i.$$.fragment,p),s=W(p),l.l(p),c=fe()},m(p,g){X(e,p,g),H(p,r,g),X(i,p,g),H(p,s,g),m[o].m(p,g),H(p,c,g),u=!0},p(p,g){const _={};g[0]&131072&&(_.modalHeading=p[17]("course.navItem.lessons.materials.tabs.video.add_video.title")),g[0]&2|g[2]&64&&(_.$$scope={dirty:g,ctx:p}),!n&&g[0]&65536&&(n=!0,_.open=p[16].isModalOpen,Je(()=>n=!1)),e.$set(_);const b={};g[0]&256|g[2]&64&&(b.$$scope={dirty:g,ctx:p}),i.$set(b);let y=o;o=v(p,g),o===y?m[o].p(p,g):(ye(),L(m[y],1,1,()=>{m[y]=null}),we(),l=m[o],l?l.p(p,g):(l=m[o]=d[o](p),l.c()),A(l,1),l.m(c.parentNode,c))},i(p){u||(A(e.$$.fragment,p),A(i.$$.fragment,p),A(l),u=!0)},o(p){L(e.$$.fragment,p),L(i.$$.fragment,p),L(l),u=!1},d(p){p&&(E(r),E(s),E(c)),K(e,p),K(i,p),m[o].d(p)}}}let Wl="flex items-center px-5 py-2 border border-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md w-full mb-2";function $$(t,e){if(!t)return;const n=Array.from(document.querySelectorAll(".plyr-video-trigger")).map(r=>new Plyr(r));window.players=n}function T$(t,e,n){let r,i,s,a,o,l,c,u,f,h,d;be(t,pt,me=>n(5,i=me)),be(t,ji,me=>n(6,s=me)),be(t,Yr,me=>n(16,l=me)),be(t,Xu,me=>n(50,c=me)),be(t,fo,me=>n(52,f=me)),be(t,Nt,me=>n(17,h=me)),be(t,Kr,me=>n(18,d=me));let{mode:m=zt.view}=e,{prevMode:v=""}=e,{lessonId:p=""}=e,{isSaving:g=!1}=e,{isStudent:_=!1}=e,{toggleMode:b=()=>{}}=e,y={},w="",$="",k=!1,C,V=jh,I=V[0].value,S,N,O,R=!1,T,F=We(V);const G=me=>()=>{n(10,I=me)},q=me=>{var Lt;return(Lt=V.find(Rt=>Rt.label===me))==null?void 0:Lt.value};async function Y(me,$t){const Lt=s[$t][me];if(typeof y[me]>"u"){const{data:Rt}=await Lr.from("lesson_language").select("id").eq("lesson_id",$t).eq("locale",me).maybeSingle();y[me]=!!(Rt&&(Rt!=null&&Rt.id))}if(y[me]){const{error:Rt}=await Lr.from("lesson_language").update({content:Lt}).eq("lesson_id",$t).eq("locale",me);Rt&&(console.error("Error updating translation:",Rt.message),Dn.error("snackbar.materials.update_translations"))}else{const{error:Rt}=await Lr.from("lesson_language").insert({locale:me,lesson_id:$t,content:Lt});if(Rt){console.error("Error inserting translation:",Rt.message),Dn.error("snackbar.materials.creating_new");return}y[me]=!0}}async function te(me){const $t=me?{...i,materials:me}:i;console.log("updating lesson");const[Lt]=await Promise.all([Fy($t,p),Y(i.locale,p)]);return Lt}function ie(me,$t){const{slide_url:Lt,videos:Rt,note:kn}=me;return Fa(kn)&&!Lt&&sh(Rt)&&Object.values($t||{}).every($i=>Fa($i))}function pe(me){me===zt.edit&&te()}function Re(me){const{slide_url:$t,videos:Lt,note:Rt}=me;n(9,V=V.map(kn=>{let $i=0;return(kn.value===1&&!Fa(Rt)||kn.value===2&&$t||kn.value===3&&!sh(Lt))&&($i=1),kn.badgeValue=$i,kn}))}const ce=()=>{Se(Yr,l.isModalOpen=!0,l)},{input:ge,handleSubmit:Ue,completion:oe,isLoading:it}=B0({api:"/api/completion"});be(t,ge,me=>n(51,u=me)),be(t,oe,me=>n(31,a=me)),be(t,it,me=>n(7,o=me));function ve(me){var $t;if(me&&(s[p]&&Se(ji,s[p][i.locale]=`${$}${me}`,s),Ie(i.materials,s[p]),N)){const Lt=($t=N==null?void 0:N.document)==null?void 0:$t.querySelector("body");typeof(Lt==null?void 0:Lt.scrollHeight)=="number"&&(N==null||N.scrollTo(0,Lt.scrollHeight))}}function ke(me=""){var Lt;$=((Lt=s[p])==null?void 0:Lt[i.locale])||"";const $t=f.find(Rt=>Rt.id===i.id);Se(ge,u=JSON.stringify({type:me,lessonTitle:($t==null?void 0:$t.title)||"",courseTitle:c.title,locale:i.locale}),u),setTimeout(()=>{Ue({preventDefault:()=>{}})},500)}function Ie(me,$t,Lt,Rt){if(m!==zt.view){if(C&&clearTimeout(C),!k){k=!0;return}n(29,g=!0),C=setTimeout(async()=>{const{error:kn}=await te(me);kn&&(console.error("error saving lesson",kn),Dn.error("snackbar.materials.apology")),n(29,g=!1)},1e3)}}async function le(me){var $t;k=!1,n(29,g=!1),n(9,V=NE(V,($t=c.metadata)==null?void 0:$t.lessonTabsOrder)),n(10,I=V[0].value),n(14,F=We(V))}const lt=()=>{Se(Yr,l.isModalOpen=!1,l)};function We(me=jh){const $t={1:zE,2:WE,3:t$};return me.map(Rt=>$t[Rt.value]||null).filter(Boolean)}function de(me){t.$$.not_equal(l.isModalOpen,me)&&(l.isModalOpen=me,Yr.set(l))}const Be=()=>ke("outline"),_e=()=>ke("note"),De=()=>ke("activities");function Ce(me){R=me,n(13,R)}const ue=({detail:me})=>{n(13,R=O==null?void 0:O.contains(me.target))},He=()=>{n(13,R=!R)};function St(me){je[me?"unshift":"push"](()=>{O=me,n(12,O)})}const Pt=me=>{if(m!==zt.view){Se(ji,s[p][i.locale]=me,s);try{localStorage.setItem(`lesson-${p}-${i.locale}`,me)}catch{}Se(Kr,d=!0,d)}};function zn(me){N=me,n(11,N)}const Fn=()=>Se(Kr,d=!0,d);function xa(me){t.$$.not_equal(i.materials.slide_url,me)&&(i.materials.slide_url=me,pt.set(i))}const ka=me=>H0(me);function Ei(me){je[me?"unshift":"push"](()=>{T=me,n(4,T)})}return t.$$set=me=>{"mode"in me&&n(0,m=me.mode),"prevMode"in me&&n(30,v=me.prevMode),"lessonId"in me&&n(1,p=me.lessonId),"isSaving"in me&&n(29,g=me.isSaving),"isStudent"in me&&n(2,_=me.isStudent),"toggleMode"in me&&n(3,b=me.toggleMode)},t.$$.update=()=>{t.$$.dirty[0]&226&&Ie(i.materials,s[p]),t.$$.dirty[0]&2&&le(),t.$$.dirty[0]&1073741824&&pe(v),t.$$.dirty[0]&32&&Re(i.materials),t.$$.dirty[1]&1&&ve(a),t.$$.dirty[0]&48&&$$(T,i.materials.videos),t.$$.dirty[0]&32&&n(8,w=i.title),t.$$.dirty[0]&98&&n(15,r=Ku(i.materials.note,s[p],i.locale))},[m,p,_,b,T,i,s,o,w,V,I,N,O,R,F,r,l,h,d,S,G,q,ie,ce,ge,oe,it,ke,lt,g,v,a,de,Be,_e,De,Ce,ue,He,St,Pt,zn,Fn,xa,ka,Ei]}class S$ extends Pe{constructor(e){super(),Ve(this,e,T$,E$,Ae,{mode:0,prevMode:30,lessonId:1,isSaving:29,isStudent:2,toggleMode:3},null,[-1,-1,-1])}}const x$={answers:{},scores:{},grades:{},totalPossibleGrade:0,finalTotalGrade:0,currentQuestionIndex:0,isFinished:!1,progressValue:100,status:Ai.PENDING,comment:""},It=$r(x$),ld=$r(!1),jr=$r({open:!1}),Ps=$r({open:!1}),Q0=$r({}),Mt=$r({title:"",due_by:"",is_due_by_dirty:!1,is_title_dirty:!1,description:"",is_description_dirty:!1,questions:[],totalSubmissions:0});function cd(){It.update(t=>(t.answers={},t.currentQuestionIndex=0,t.isFinished=!1,t))}function k$(t){const e={};for(const n of t){if(n.question_type.id===rn.TEXTAREA||n.deleted_at)continue;const r=e[n.id]||{};n.question_type.id!==rn.TEXTAREA&&n.options.filter(a=>!a.deleted_at).some(a=>a.label.trim()==="")&&(r.option="Please enter a label for all options",e[n.id]={...r}),n.options.filter(s=>!s.deleted_at).some(s=>s.is_correct)||(r.option="Please mark an option as the correct answer",e[n.id]={...r})}return Q0.set(e),e}function ud(){Mt.update(t=>{const{questions:e}=t;return{...t,questions:[...e,{...yy,id:`${e.length+1}-form`,name:`${e.length+1}-form`,value:"",points:0,order:e.length,question_type:{id:rn.RADIO},options:[{id:"1-form",label:"",value:null,is_correct:!1}]}]}})}function fd(t){return()=>{Mt.update(e=>{const{questions:n}=e;return{...e,questions:n.map(r=>r.id===t?{...r,options:[...r.options,{id:`${r.options.length+1}-form`,label:"",value:"",is_correct:!1}]}:r)}})}}function ho(t,e){return()=>{Mt.update(n=>{const{questions:r}=n;return{...n,questions:r.map(i=>i.id===t?{...i,options:i.options.map(s=>(s.id===e&&(s.deleted_at=new Date),s))}:i)}})}}function O$(t){return()=>{Mt.update(e=>{const{questions:n}=e;return{...e,questions:n.map(r=>(r.id===t&&(r.deleted_at=new Date),r))}})}}function M$(t,e=!0){Mt.update(n=>{const{questions:r}=n;return{...n,questions:r.map(i=>i.id===t?{...i,code:e?i.code||"":void 0}:i)}})}function mo(t,e){return()=>{Mt.update(n=>{const{questions:r}=n;return{...n,questions:r.map(i=>i.id===t?{...i,options:i.options.map(s=>(s.id===e&&(s.is_correct=!s.is_correct,s.is_dirty=!0),s))}:i)}})}}function po(t,e){return n=>{Mt.update(r=>{const{questions:i}=r;return{...r,questions:i.map(s=>s.id===t?{...s,options:s.options.map(a=>{if(a.id===e){const o=n.target.value;wy(a.value)||(a.value=o.split(" ").join("-")),a.label=o,a.is_dirty=!0}return a})}:s)}})}}function C$(t){let e,n;return{c(){e=B("div"),n=B("span"),this.h()},l(r){e=U(r,"DIV",{class:!0});var i=P(e);n=U(i,"SPAN",{class:!0,style:!0}),P(n).forEach(E),i.forEach(E),this.h()},h(){M(n,"class","progress absolute top-0 left-0 rounded-md bg-primary-700 h-full svelte-1cr3xt1"),nt(n,"width",t[0]+"%"),M(e,"class","w-full h-3 rounded-md bg-gray-300 relative")},m(r,i){H(r,e,i),x(e,n)},p(r,[i]){i&1&&nt(n,"width",r[0]+"%")},i:he,o:he,d(r){r&&E(e)}}}function A$(t,e,n){let{value:r=0}=e;return t.$$set=i=>{"value"in i&&n(0,r=i.value)},[r]}class I$ extends Pe{constructor(e){super(),Ve(this,e,A$,C$,Ae,{value:0})}}function D$(t){let n=new Set(t).values();return Array.from(n)}function hd(t){let e,n;return e=new I$({props:{value:t[3].progressValue}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i&8&&(s.value=r[3].progressValue),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function L$(t){let e=t[1].id,n,r,i=dd(t);return{c(){i.c(),n=fe()},l(s){i.l(s),n=fe()},m(s,a){i.m(s,a),H(s,n,a),r=!0},p(s,a){a&2&&Ae(e,e=s[1].id)?(ye(),L(i,1,1,he),we(),i=dd(s),i.c(),A(i,1),i.m(n.parentNode,n)):i.p(s,a)},i(s){r||(A(i),r=!0)},o(s){L(i),r=!1},d(s){s&&E(n),i.d(s)}}}function R$(t){let e,n,r=!t[6]&&md(t);return{c(){r&&r.c(),e=fe()},l(i){r&&r.l(i),e=fe()},m(i,s){r&&r.m(i,s),H(i,e,s),n=!0},p(i,s){i[6]?r&&(ye(),L(r,1,1,()=>{r=null}),we()):r?(r.p(i,s),s&64&&A(r,1)):(r=md(i),r.c(),A(r,1),r.m(e.parentNode,e))},i(i){n||(A(r),n=!0)},o(i){L(r),n=!1},d(i){i&&E(e),r&&r.d(i)}}}function N$(t){let e,n;return e=new di({props:{allowedRoles:[3],$$slots:{default:[q$]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i&33554448&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function P$(t){let e,n;return e=new Zu({props:{$$slots:{default:[W$]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i&33554432&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function V$(t){let e,n;return e=new di({props:{allowedRoles:[1,2],$$slots:{default:[Y$]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i&33554456&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function B$(t){let e,n;const r=[t[5],{key:t[1].id},{hideGrading:!0}];let i={};for(let s=0;s<r.length;s+=1)i=Ee(i,r[s]);return e=new rw({props:i}),{c(){Z(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,a){X(e,s,a),n=!0},p(s,a){const o=a&34?vt(r,[a&32&&dl(s[5]),a&2&&{key:s[1].id},r[2]]):{};e.$set(o)},i(s){n||(A(e.$$.fragment,s),n=!0)},o(s){L(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function U$(t){let e,n;const r=[t[5],{key:t[1].id},{hideGrading:!0}];let i={};for(let s=0;s<r.length;s+=1)i=Ee(i,r[s]);return e=new iw({props:i}),{c(){Z(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,a){X(e,s,a),n=!0},p(s,a){const o=a&34?vt(r,[a&32&&dl(s[5]),a&2&&{key:s[1].id},r[2]]):{};e.$set(o)},i(s){n||(A(e.$$.fragment,s),n=!0)},o(s){L(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function H$(t){let e,n;const r=[t[5],{key:t[1].id},{hideGrading:!0}];let i={};for(let s=0;s<r.length;s+=1)i=Ee(i,r[s]);return e=new sw({props:i}),{c(){Z(e.$$.fragment)},l(s){Q(e.$$.fragment,s)},m(s,a){X(e,s,a),n=!0},p(s,a){const o=a&34?vt(r,[a&32&&dl(s[5]),a&2&&{key:s[1].id},r[2]]):{};e.$set(o)},i(s){n||(A(e.$$.fragment,s),n=!0)},o(s){L(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function dd(t){let e,n,r,i,s;const a=[H$,U$,B$],o=[];function l(c,u){return rn.RADIO===c[1].question_type.id?0:rn.CHECKBOX===c[1].question_type.id?1:rn.TEXTAREA===c[1].question_type.id?2:-1}return~(n=l(t))&&(r=o[n]=a[n](t)),{c(){e=B("div"),r&&r.c(),this.h()},l(c){e=U(c,"DIV",{id:!0});var u=P(e);r&&r.l(u),u.forEach(E),this.h()},h(){M(e,"id","question")},m(c,u){H(c,e,u),~n&&o[n].m(e,null),s=!0},p(c,u){let f=n;n=l(c),n===f?~n&&o[n].p(c,u):(r&&(ye(),L(o[f],1,1,()=>{o[f]=null}),we()),~n?(r=o[n],r?r.p(c,u):(r=o[n]=a[n](c),r.c()),A(r,1),r.m(e,null)):r=null)},i(c){s||(A(r),c&&(i||D0(()=>{i=R0(e,Vy,{x:500,duration:1e3}),i.start()})),s=!0)},o(c){L(r),s=!1},d(c){c&&E(e),~n&&o[n].d()}}}function md(t){let e,n,r,i=t[4].title+"",s,a,o,l,c,u,f;function h(g,_){return Ai.GRADED===g[3].status?G$:g[2].type===ms.SELF_PACED?F$:z$}let d=h(t),m=d(t),v=Ai.GRADED===t[3].status&&t[2].type!==ms.SELF_PACED&&pd(t),p=t[3].status===Ai.GRADED&&t[3].comment&&t[2].type!==ms.SELF_PACED&&gd(t);return u=new j0({props:{questions:t[4].questions.sort(_d),questionnaireMetaData:t[3],grades:t[3].grades,disableGrading:!0}}),{c(){e=B("div"),n=B("div"),r=B("h2"),s=ne(i),a=j(),m.c(),o=j(),v&&v.c(),l=j(),p&&p.c(),c=j(),Z(u.$$.fragment),this.h()},l(g){e=U(g,"DIV",{class:!0});var _=P(e);n=U(_,"DIV",{class:!0});var b=P(n);r=U(b,"H2",{class:!0});var y=P(r);s=re(y,i),y.forEach(E),a=W(b),m.l(b),b.forEach(E),o=W(_),v&&v.l(_),_.forEach(E),l=W(g),p&&p.l(g),c=W(g),Q(u.$$.fragment,g),this.h()},h(){M(r,"class","text-xl font-normal"),M(n,"class","flex flex-col lg:flex-row items-start lg:items-center lg:space-x-4 w-full"),M(e,"class","flex items-center justify-between")},m(g,_){H(g,e,_),x(e,n),x(n,r),x(r,s),x(n,a),m.m(n,null),x(e,o),v&&v.m(e,null),H(g,l,_),p&&p.m(g,_),H(g,c,_),X(u,g,_),f=!0},p(g,_){(!f||_&16)&&i!==(i=g[4].title+"")&&se(s,i),d===(d=h(g))&&m?m.p(g,_):(m.d(1),m=d(g),m&&(m.c(),m.m(n,null))),Ai.GRADED===g[3].status&&g[2].type!==ms.SELF_PACED?v?v.p(g,_):(v=pd(g),v.c(),v.m(e,null)):v&&(v.d(1),v=null),g[3].status===Ai.GRADED&&g[3].comment&&g[2].type!==ms.SELF_PACED?p?p.p(g,_):(p=gd(g),p.c(),p.m(c.parentNode,c)):p&&(p.d(1),p=null);const b={};_&16&&(b.questions=g[4].questions.sort(_d)),_&8&&(b.questionnaireMetaData=g[3]),_&8&&(b.grades=g[3].grades),u.$set(b)},i(g){f||(A(u.$$.fragment,g),f=!0)},o(g){L(u.$$.fragment,g),f=!1},d(g){g&&(E(e),E(l),E(c)),m.d(),v&&v.d(),p&&p.d(g),K(u,g)}}}function z$(t){let e,n=t[7]("course.navItem.lessons.exercises.all_exercises.view_mode.pending")+"",r,i;return{c(){e=B("span"),r=ne(n),this.h()},l(s){e=U(s,"SPAN",{class:!0,title:!0});var a=P(e);r=re(a,n),a.forEach(E),this.h()},h(){M(e,"class","status-text bg-yellow-600 text-white py-1 px-2 text-center svelte-1po5nv9"),M(e,"title",i=t[7]("course.navItem.lessons.exercises.all_exercises.view_mode.status_pending"))},m(s,a){H(s,e,a),x(e,r)},p(s,a){a&128&&n!==(n=s[7]("course.navItem.lessons.exercises.all_exercises.view_mode.pending")+"")&&se(r,n),a&128&&i!==(i=s[7]("course.navItem.lessons.exercises.all_exercises.view_mode.status_pending"))&&M(e,"title",i)},d(s){s&&E(e)}}}function F$(t){let e,n=t[7]("course.navItem.lessons.exercises.all_exercises.view_mode.submitted")+"",r,i;return{c(){e=B("span"),r=ne(n),this.h()},l(s){e=U(s,"SPAN",{class:!0,title:!0});var a=P(e);r=re(a,n),a.forEach(E),this.h()},h(){M(e,"class","status-text bg-green-700 text-white py-1 px-2 text-center svelte-1po5nv9"),M(e,"title",i=t[7]("course.navItem.lessons.exercises.all_exercises.view_mode.status_submitted"))},m(s,a){H(s,e,a),x(e,r)},p(s,a){a&128&&n!==(n=s[7]("course.navItem.lessons.exercises.all_exercises.view_mode.submitted")+"")&&se(r,n),a&128&&i!==(i=s[7]("course.navItem.lessons.exercises.all_exercises.view_mode.status_submitted"))&&M(e,"title",i)},d(s){s&&E(e)}}}function G$(t){let e,n=t[7]("course.navItem.lessons.exercises.all_exercises.view_mode.graded")+"",r,i;return{c(){e=B("span"),r=ne(n),this.h()},l(s){e=U(s,"SPAN",{class:!0,title:!0});var a=P(e);r=re(a,n),a.forEach(E),this.h()},h(){M(e,"class","status-text bg-green-700 text-white py-1 px-2 text-center svelte-1po5nv9"),M(e,"title",i=t[7]("course.navItem.lessons.exercises.all_exercises.view_mode.status_graded"))},m(s,a){H(s,e,a),x(e,r)},p(s,a){a&128&&n!==(n=s[7]("course.navItem.lessons.exercises.all_exercises.view_mode.graded")+"")&&se(r,n),a&128&&i!==(i=s[7]("course.navItem.lessons.exercises.all_exercises.view_mode.status_graded"))&&M(e,"title",i)},d(s){s&&E(e)}}}function pd(t){let e,n=t[3].finalTotalGrade+"",r,i,s=t[3].totalPossibleGrade+"",a,o;return{c(){e=B("span"),r=ne(n),i=ne("/"),a=ne(s),this.h()},l(l){e=U(l,"SPAN",{class:!0,title:!0});var c=P(e);r=re(c,n),i=re(c,"/"),a=re(c,s),c.forEach(E),this.h()},h(){M(e,"class","p-6 border-2 border-gray-300 bg-[#F5F8FE] rounded-full h-10 w-10 flex items-center justify-center text-[#2751DA] text-sm font-semibold"),M(e,"title",o=t[7]("course.navItem.lessons.exercises.all_exercises.view_mode.status_graded"))},m(l,c){H(l,e,c),x(e,r),x(e,i),x(e,a)},p(l,c){c&8&&n!==(n=l[3].finalTotalGrade+"")&&se(r,n),c&8&&s!==(s=l[3].totalPossibleGrade+"")&&se(a,s),c&128&&o!==(o=l[7]("course.navItem.lessons.exercises.all_exercises.view_mode.status_graded"))&&M(e,"title",o)},d(l){l&&E(e)}}}function gd(t){let e,n,r=t[3].comment+"",i;return{c(){e=B("div"),n=B("span"),i=ne(r),this.h()},l(s){e=U(s,"DIV",{class:!0});var a=P(e);n=U(a,"SPAN",{});var o=P(n);i=re(o,r),o.forEach(E),a.forEach(E),this.h()},h(){M(e,"class","flex items-center justify-between bg-primary-700 p-4 text-white rounded-sm mt-3")},m(s,a){H(s,e,a),x(e,n),x(n,i)},p(s,a){a&8&&r!==(r=s[3].comment+"")&&se(i,r)},d(s){s&&E(e)}}}function vd(t){let e,n,r,i="Due by:",s,a=new Date(t[4].due_by).toLocaleString()+"",o;return{c(){e=ne(`|
          `),n=B("p"),r=B("strong"),r.textContent=i,s=j(),o=ne(a),this.h()},l(l){e=re(l,`|
          `),n=U(l,"P",{class:!0});var c=P(n);r=U(c,"STRONG",{"data-svelte-h":!0}),Yn(r)!=="svelte-7l4k2j"&&(r.textContent=i),s=W(c),o=re(c,a),c.forEach(E),this.h()},h(){M(n,"class","dark:text-white mx-2")},m(l,c){H(l,e,c),H(l,n,c),x(n,r),x(n,s),x(n,o)},p(l,c){c&16&&a!==(a=new Date(l[4].due_by).toLocaleString()+"")&&se(o,a)},d(l){l&&(E(e),E(n))}}}function q$(t){let e,n,r=t[4].title+"",i,s,a,o,l,c=t[4].questions.length+"",u,f,h,d,m,v=go(t[4].questions)+"",p,g,_,b,y="All required",w,$,k,C,V=(t[4].description||"No desription")+"",I,S,N,O=t[4].due_by&&vd(t);return S=new dt({props:{onClick:t[8],label:"Start",className:"my-5 float-right",type:"button"}}),{c(){e=B("div"),n=B("h2"),i=ne(r),s=j(),a=B("div"),o=B("p"),l=B("strong"),u=ne(c),f=ne(" questions"),h=ne(`
        |
        `),d=B("p"),m=B("strong"),p=ne(v),g=ne(" points."),_=ne(`
        |
        `),b=B("p"),b.textContent=y,w=j(),O&&O.c(),$=j(),k=B("article"),C=new cl(!1),I=j(),Z(S.$$.fragment),this.h()},l(R){e=U(R,"DIV",{});var T=P(e);n=U(T,"H2",{class:!0});var F=P(n);i=re(F,r),F.forEach(E),s=W(T),a=U(T,"DIV",{class:!0});var G=P(a);o=U(G,"P",{class:!0});var q=P(o);l=U(q,"STRONG",{});var Y=P(l);u=re(Y,c),Y.forEach(E),f=re(q," questions"),q.forEach(E),h=re(G,`
        |
        `),d=U(G,"P",{class:!0});var te=P(d);m=U(te,"STRONG",{});var ie=P(m);p=re(ie,v),ie.forEach(E),g=re(te," points."),te.forEach(E),_=re(G,`
        |
        `),b=U(G,"P",{class:!0,"data-svelte-h":!0}),Yn(b)!=="svelte-1wtuhq4"&&(b.textContent=y),w=W(G),O&&O.l(G),G.forEach(E),$=W(T),k=U(T,"ARTICLE",{class:!0});var pe=P(k);C=ul(pe,!1),pe.forEach(E),I=W(T),Q(S.$$.fragment,T),T.forEach(E),this.h()},h(){M(n,"class","my-1"),M(o,"class","dark:text-white mx-2"),M(d,"class","dark:text-white mx-2"),M(b,"class","dark:text-white mx-2"),M(a,"class","flex items-center"),C.a=null,M(k,"class","mt-3 preview prose prose-sm sm:prose p-2")},m(R,T){H(R,e,T),x(e,n),x(n,i),x(e,s),x(e,a),x(a,o),x(o,l),x(l,u),x(o,f),x(a,h),x(a,d),x(d,m),x(m,p),x(d,g),x(a,_),x(a,b),x(a,w),O&&O.m(a,null),x(e,$),x(e,k),C.m(V,k),x(e,I),X(S,e,null),N=!0},p(R,T){(!N||T&16)&&r!==(r=R[4].title+"")&&se(i,r),(!N||T&16)&&c!==(c=R[4].questions.length+"")&&se(u,c),(!N||T&16)&&v!==(v=go(R[4].questions)+"")&&se(p,v),R[4].due_by?O?O.p(R,T):(O=vd(R),O.c(),O.m(a,null)):O&&(O.d(1),O=null),(!N||T&16)&&V!==(V=(R[4].description||"No desription")+"")&&C.p(V)},i(R){N||(A(S.$$.fragment,R),N=!0)},o(R){L(S.$$.fragment,R),N=!1},d(R){R&&E(e),O&&O.d(),K(S)}}}function j$(t){let e,n,r="Edit",i;return{c(){e=ne("Click the "),n=B("span"),n.textContent=r,i=ne(" button to add."),this.h()},l(s){e=re(s,"Click the "),n=U(s,"SPAN",{class:!0,"data-svelte-h":!0}),Yn(n)!=="svelte-1qm82lx"&&(n.textContent=r),i=re(s," button to add."),this.h()},h(){M(n,"class","text-primary-700")},m(s,a){H(s,e,a),H(s,n,a),H(s,i,a)},p:he,d(s){s&&(E(e),E(n),E(i))}}}function W$(t){let e,n,r,i,s="No question added for this exercise",a,o,l,c;return l=new di({props:{allowedRoles:[1,2],$$slots:{default:[j$]},$$scope:{ctx:t}}}),{c(){e=B("img"),r=j(),i=B("h2"),i.textContent=s,a=j(),o=B("p"),Z(l.$$.fragment),this.h()},l(u){e=U(u,"IMG",{src:!0,alt:!0,class:!0}),r=W(u),i=U(u,"H2",{class:!0,"data-svelte-h":!0}),Yn(i)!=="svelte-k7f5cm"&&(i.textContent=s),a=W(u),o=U(u,"P",{class:!0});var f=P(o);Q(l.$$.fragment,f),f.forEach(E),this.h()},h(){mt(e.src,n="/images/empty-exercise-icon.svg")||M(e,"src",n),M(e,"alt","Exercise svg"),M(e,"class","my-2.5"),M(i,"class","text-xl my-1.5"),M(o,"class","text-sm text-center px-44")},m(u,f){H(u,e,f),H(u,r,f),H(u,i,f),H(u,a,f),H(u,o,f),X(l,o,null),c=!0},p(u,f){const h={};f&33554432&&(h.$$scope={dirty:f,ctx:u}),l.$set(h)},i(u){c||(A(l.$$.fragment,u),c=!0)},o(u){L(l.$$.fragment,u),c=!1},d(u){u&&(E(e),E(r),E(i),E(a),E(o)),K(l)}}}function Y$(t){let e,n;return e=new j0({props:{questions:Rr(t[4].questions),questionnaireMetaData:t[3]}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i&16&&(s.questions=Rr(r[4].questions)),i&8&&(s.questionnaireMetaData=r[3]),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function Z$(t){let e,n,r,i,s,a=!t[0]&&t[4].questions.length&&!t[3].isFinished&&hd(t);const o=[V$,P$,N$,R$,L$],l=[];function c(u,f){var h;return u[0]?0:u[4].questions.length?u[3].currentQuestionIndex===0?2:u[3].isFinished?3:u[1]&&((h=u[1])!=null&&h.id)?4:-1:1}return~(n=c(t))&&(r=l[n]=o[n](t)),{c(){a&&a.c(),e=j(),r&&r.c(),i=fe()},l(u){a&&a.l(u),e=W(u),r&&r.l(u),i=fe()},m(u,f){a&&a.m(u,f),H(u,e,f),~n&&l[n].m(u,f),H(u,i,f),s=!0},p(u,[f]){!u[0]&&u[4].questions.length&&!u[3].isFinished?a?(a.p(u,f),f&25&&A(a,1)):(a=hd(u),a.c(),A(a,1),a.m(e.parentNode,e)):a&&(ye(),L(a,1,1,()=>{a=null}),we());let h=n;n=c(u),n===h?~n&&l[n].p(u,f):(r&&(ye(),L(l[h],1,1,()=>{l[h]=null}),we()),~n?(r=l[n],r?r.p(u,f):(r=l[n]=o[n](u),r.c()),A(r,1),r.m(i.parentNode,i)):r=null)},i(u){s||(A(a),A(r),s=!0)},o(u){L(a),L(r),s=!1},d(u){u&&(E(e),E(i)),a&&a.d(u),~n&&l[n].d(u)}}}function go(t){return t.reduce((e,n)=>(e+=parseFloat(n.points,10),e),0)}const _d=(t,e)=>t.order-e.order;function X$(t,e,n){let r,i,s,a,o,l,c;be(t,Xu,S=>n(2,r=S)),be(t,W0,S=>n(12,i=S)),be(t,Gy,S=>n(13,s=S)),be(t,It,S=>n(3,a=S)),be(t,Mt,S=>n(4,o=S)),be(t,pt,S=>n(17,l=S)),be(t,Nt,S=>n(7,c=S));let{preview:u=!1}=e,{exerciseId:f=""}=e,{isFetchingExercise:h=!1}=e,d={},m={},v,p=!1,g=!1,_=!1;function b(){Se(It,a.currentQuestionIndex+=1,a)}const y=(S,N)=>S.find(O=>O.profile_id===N),w=()=>{var G,q;const S=y(s.students,i.id),N=(G=s.tutors[0])==null?void 0:G.fullname,O=(q=s.tutors[0])==null?void 0:q.email;if(console.log({student:S,teacherFullname:N,teacherEmail:O}),!S||!N||!O)return;const R=`${window.location.origin}/courses/${r.id}`,T=`${R}/lessons/${l.id}/exercises/${f}`,F=`${R}/submissions`;`${N}${S.profile.fullname}${T}${o.title}${F}`};async function $(S,N){const{answers:O}=a,{questions:R}=o,T=O[S]||[],F=typeof N=="string"?N:D$([...T,...N||[]]);Se(It,a.answers={...O,[S]:F},a);const G=nw(d,a.answers);console.log({isCorrect:G});const q=!R[a.currentQuestionIndex];console.log("isFinished",q),console.log("$questionnaireMetaData.currentQuestionIndex",a.currentQuestionIndex),G&&setTimeout(async()=>{Se(It,a.currentQuestionIndex+=1,a),localStorage.setItem(`autosave-exercise-${f}`,JSON.stringify(a)),q&&(localStorage.removeItem(`autosave-exercise-${f}`),Se(It,a.status=1,a),Se(It,a.totalPossibleGrade=go(o.questions),a),Se(It,a.grades={},a),Se(It,a.comment="",a),await Ey(a.answers,R,f,r.id,oh(s.people,i.id)),w())},1e3)}function k(){Se(It,a.currentQuestionIndex-=1,a)}function C(S){return a.isFinished?100:Math.round((S-1)/o.questions.length*100)||0}async function V(S,N,O){if(!Array.isArray(S)||!N||!O||v||p)return;const R={exerciseId:f,courseId:O,submittedBy:oh(S,N)},{data:T}=await q0(R);p=!0,Array.isArray(T)&&T.length&&(v=T[0],Se(It,a.answers=lw({questions:o.questions,answers:v.answers}),a),Se(It,a.totalPossibleGrade=go(o.questions),a),Se(It,a.currentQuestionIndex=o.questions.length,a),Se(It,a.isFinished=!0,a),Se(It,a.status=v.status_id,a),Se(It,a.finalTotalGrade=0,a),Se(It,a.comment=v.feedback,a),Se(It,a.grades=v.answers.reduce((F,G)=>(F[G.question_id]=G.point,Se(It,a.finalTotalGrade+=G.point,a),F),{}),a))}function I(){n(6,g=!0);const S=localStorage.getItem(`autosave-exercise-${f}`);if(S){const N=JSON.parse(S);N&&Se(It,a=N,a)}n(6,g=!1),n(11,_=!0)}return t.$$set=S=>{"preview"in S&&n(0,u=S.preview),"exerciseId"in S&&n(9,f=S.exerciseId),"isFetchingExercise"in S&&n(10,h=S.isFetchingExercise)},t.$$.update=()=>{t.$$.dirty&2048&&!_&&I(),t.$$.dirty&2075&&_&&o.questions.length>0&&(n(1,d=o.questions[a.currentQuestionIndex-1]),a.currentQuestionIndex>0&&!d&&Se(It,a.isFinished=!0,a),d&&n(5,m=tw(o.questions,d,a,a.currentQuestionIndex,$,k,u)),Se(It,a.progressValue=C(a.currentQuestionIndex),a)),t.$$.dirty&13316&&!h&&V(s.people,i.id,r.id)},[u,d,r,a,o,m,g,c,b,f,h,_,i,s]}class K$ extends Pe{constructor(e){super(),Ve(this,e,X$,Z$,Ae,{preview:0,exerciseId:9,isFetchingExercise:10})}}function Q$(t){let e,n;return{c(){e=B("p"),n=ne(t[0]),this.h()},l(r){e=U(r,"P",{class:!0});var i=P(e);n=re(i,t[0]),i.forEach(E),this.h()},h(){M(e,"class","text-sm text-red-500")},m(r,i){H(r,e,i),x(e,n)},p(r,[i]){i&1&&se(n,r[0])},i:he,o:he,d(r){r&&E(e)}}}function J$(t,e,n){let{message:r}=e;return t.$$set=i=>{"message"in i&&n(0,r=i.message)},[r]}class J0 extends Pe{constructor(e){super(),Ve(this,e,J$,Q$,Ae,{message:0})}}function bd(t){let e;return{c(){e=B("div"),this.h()},l(n){e=U(n,"DIV",{class:!0}),P(e).forEach(E),this.h()},h(){M(e,"class","title absolute bg-primary-700 svelte-dnehjd")},m(n,r){H(n,e,r)},d(n){n&&E(e)}}}function yd(t){let e,n,r,i=t[6]("course.navItem.lessons.exercises.new_exercise_modal.points")+"",s,a,o,l,c,u,f;function h(v){t[9](v)}let d={placeholder:t[6]("course.navItem.lessons.exercises.new_exercise_modal.points"),type:"number",onChange:t[4]};t[0]!==void 0&&(d.value=t[0]),l=new mr({props:d}),je.push(()=>et(l,"value",h));let m=t[2]&&!t[1]&&wd(t);return{c(){e=B("div"),n=B("div"),r=B("p"),s=ne(i),a=ne(":"),o=j(),Z(l.$$.fragment),u=j(),m&&m.c(),this.h()},l(v){e=U(v,"DIV",{class:!0});var p=P(e);n=U(p,"DIV",{class:!0});var g=P(n);r=U(g,"P",{class:!0});var _=P(r);s=re(_,i),a=re(_,":"),_.forEach(E),o=W(g),Q(l.$$.fragment,g),g.forEach(E),u=W(p),m&&m.l(p),p.forEach(E),this.h()},h(){M(r,"class","dark:text-white text-sm mr-2"),M(n,"class","flex items-center w-40"),M(e,"class","flex justify-between items-center border-gray border-t-2 border-r-0 border-b-0 border-l-0 p-2")},m(v,p){H(v,e,p),x(e,n),x(n,r),x(r,s),x(r,a),x(n,o),X(l,n,null),x(e,u),m&&m.m(e,null),f=!0},p(v,p){(!f||p&64)&&i!==(i=v[6]("course.navItem.lessons.exercises.new_exercise_modal.points")+"")&&se(s,i);const g={};p&64&&(g.placeholder=v[6]("course.navItem.lessons.exercises.new_exercise_modal.points")),p&16&&(g.onChange=v[4]),!c&&p&1&&(c=!0,g.value=v[0],Je(()=>c=!1)),l.$set(g),v[2]&&!v[1]?m?(m.p(v,p),p&6&&A(m,1)):(m=wd(v),m.c(),A(m,1),m.m(e,null)):m&&(ye(),L(m,1,1,()=>{m=null}),we())},i(v){f||(A(l.$$.fragment,v),A(m),f=!0)},o(v){L(l.$$.fragment,v),L(m),f=!1},d(v){v&&E(e),K(l),m&&m.d()}}}function wd(t){let e,n;return e=new cn({props:{onClick:t[2],$$slots:{default:[eT]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i&4&&(s.onClick=r[2]),i&2048&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function eT(t){let e,n;return e=new mi({props:{size:24}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function tT(t){let e,n,r,i,s,a,o,l=t[1]&&bd();const c=t[8].default,u=ci(c,t,t[11],null);let f=typeof t[0]<"u"&&yd(t);return{c(){e=B("div"),l&&l.c(),n=j(),r=B("div"),u&&u.c(),s=j(),f&&f.c(),this.h()},l(h){e=U(h,"DIV",{class:!0});var d=P(e);l&&l.l(d),n=W(d),r=U(d,"DIV",{class:!0});var m=P(r);u&&u.l(m),m.forEach(E),s=W(d),f&&f.l(d),d.forEach(E),this.h()},h(){M(r,"class",i="px-4 "+(t[1]?"pt-4":"pt-2")+" pb-3"),M(e,"class",a="bg-white dark:bg-black border-2 "+(t[3]?"border-red-700":"border-gray hover:border-primary-700")+" rounded-md mb-6 relative root")},m(h,d){H(h,e,d),l&&l.m(e,null),x(e,n),x(e,r),u&&u.m(r,null),x(e,s),f&&f.m(e,null),t[10](e),o=!0},p(h,[d]){h[1]?l||(l=bd(),l.c(),l.m(e,n)):l&&(l.d(1),l=null),u&&u.p&&(!o||d&2048)&&ui(u,c,h,h[11],o?hi(c,h[11],d,null):fi(h[11]),null),(!o||d&2&&i!==(i="px-4 "+(h[1]?"pt-4":"pt-2")+" pb-3"))&&M(r,"class",i),typeof h[0]<"u"?f?(f.p(h,d),d&1&&A(f,1)):(f=yd(h),f.c(),A(f,1),f.m(e,null)):f&&(ye(),L(f,1,1,()=>{f=null}),we()),(!o||d&8&&a!==(a="bg-white dark:bg-black border-2 "+(h[3]?"border-red-700":"border-gray hover:border-primary-700")+" rounded-md mb-6 relative root"))&&M(e,"class",a)},i(h){o||(A(u,h),A(f),o=!0)},o(h){L(u,h),L(f),o=!1},d(h){h&&E(e),l&&l.d(),u&&u.d(h),f&&f.d(),t[10](null)}}}function nT(t,e,n){let r;be(t,Nt,v=>n(6,r=v));let{$$slots:i={},$$scope:s}=e,{isTitle:a=!1}=e,{onClose:o=()=>{}}=e,{scrollToQuestion:l=!1}=e,{points:c=void 0}=e,{hasError:u=!1}=e,{onPointsChange:f=()=>{}}=e,h;function d(v){c=v,n(0,c)}function m(v){je[v?"unshift":"push"](()=>{h=v,n(5,h)})}return t.$$set=v=>{"isTitle"in v&&n(1,a=v.isTitle),"onClose"in v&&n(2,o=v.onClose),"scrollToQuestion"in v&&n(7,l=v.scrollToQuestion),"points"in v&&n(0,c=v.points),"hasError"in v&&n(3,u=v.hasError),"onPointsChange"in v&&n(4,f=v.onPointsChange),"$$scope"in v&&n(11,s=v.$$scope)},t.$$.update=()=>{t.$$.dirty&160&&h&&l&&h.scrollIntoView({block:"start",behavior:"smooth",inline:"nearest"})},[c,a,o,u,f,h,r,l,i,d,m,s]}class ev extends Pe{constructor(e){super(),Ve(this,e,nT,tT,Ae,{isTitle:1,onClose:2,scrollToQuestion:7,points:0,hasError:3,onPointsChange:4})}}function rT(t){let e,n,r=t[3]("course.navItem.lessons.exercises.all_exercises.delete_confirmation.sure")+"",i,s,a,o,l,c,u;return o=new dt({props:{className:"px-6 py-3",variant:gn.OUTLINED,label:t[3]("course.navItem.lessons.exercises.all_exercises.delete_confirmation.no"),onClick:t[4]}}),c=new dt({props:{className:"px-6 py-3",variant:gn.CONTAINED,label:t[3]("course.navItem.lessons.exercises.all_exercises.delete_confirmation.yes"),onClick:t[5]}}),{c(){e=B("div"),n=B("h1"),i=ne(r),s=j(),a=B("div"),Z(o.$$.fragment),l=j(),Z(c.$$.fragment),this.h()},l(f){e=U(f,"DIV",{});var h=P(e);n=U(h,"H1",{class:!0});var d=P(n);i=re(d,r),d.forEach(E),s=W(h),a=U(h,"DIV",{class:!0});var m=P(a);Q(o.$$.fragment,m),l=W(m),Q(c.$$.fragment,m),m.forEach(E),h.forEach(E),this.h()},h(){M(n,"class","dark:text-white text-lg"),M(a,"class","mt-5 flex items-center justify-between")},m(f,h){H(f,e,h),x(e,n),x(n,i),x(e,s),x(e,a),X(o,a,null),x(a,l),X(c,a,null),u=!0},p(f,h){(!u||h&8)&&r!==(r=f[3]("course.navItem.lessons.exercises.all_exercises.delete_confirmation.sure")+"")&&se(i,r);const d={};h&8&&(d.label=f[3]("course.navItem.lessons.exercises.all_exercises.delete_confirmation.no")),h&6&&(d.onClick=f[4]),o.$set(d);const m={};h&8&&(m.label=f[3]("course.navItem.lessons.exercises.all_exercises.delete_confirmation.yes")),h&5&&(m.onClick=f[5]),c.$set(m)},i(f){u||(A(o.$$.fragment,f),A(c.$$.fragment,f),u=!0)},o(f){L(o.$$.fragment,f),L(c.$$.fragment,f),u=!1},d(f){f&&E(e),K(o),K(c)}}}function iT(t){let e,n,r;function i(a){t[7](a)}let s={onClose:t[6],width:"w-96",modalHeading:t[3]("course.navItem.lessons.exercises.all_exercises.delete_confirmation.title"),$$slots:{default:[rT]},$$scope:{ctx:t}};return t[2].open!==void 0&&(s.open=t[2].open),e=new fa({props:s}),je.push(()=>et(e,"open",i)),{c(){Z(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,o){X(e,a,o),r=!0},p(a,[o]){const l={};o&4&&(l.onClose=a[6]),o&8&&(l.modalHeading=a[3]("course.navItem.lessons.exercises.all_exercises.delete_confirmation.title")),o&527&&(l.$$scope={dirty:o,ctx:a}),!n&&o&4&&(n=!0,l.open=a[2].open,Je(()=>n=!1)),e.$set(l)},i(a){r||(A(e.$$.fragment,a),r=!0)},o(a){L(e.$$.fragment,a),r=!1},d(a){K(e,a)}}}function sT(t,e,n){let r,i;be(t,jr,f=>n(2,r=f)),be(t,Nt,f=>n(3,i=f));let{onDelete:s=()=>{}}=e,{onCancel:a=()=>{}}=e;const o=()=>{Se(jr,r.open=!1,r),a()},l=()=>{s(),Se(jr,r.open=!1,r)},c=()=>Se(jr,r.open=!1,r);function u(f){t.$$.not_equal(r.open,f)&&(r.open=f,jr.set(r))}return t.$$set=f=>{"onDelete"in f&&n(0,s=f.onDelete),"onCancel"in f&&n(1,a=f.onCancel)},[s,a,r,i,o,l,c,u]}class aT extends Pe{constructor(e){super(),Ve(this,e,sT,iT,Ae,{onDelete:0,onCancel:1})}}function Ed(t,e,n){const r=t.slice();return r[8]=e[n],r}function oT(t){let e,n;return e=new j2({props:{size:16,class:"carbon-icon active"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function lT(t){let e,n;return e=new b2({props:{size:16,class:"carbon-icon active"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function cT(t){let e,n;return e=new pw({props:{size:16,class:"carbon-icon active"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function $d(t,e){let n,r,i,s,a=` ${e[8].name}`,o,l,c,u=he,f;const h=[cT,lT,oT],d=[];function m(v,p){return v[8].type===1?0:v[8].type===2?1:2}return r=m(e),i=d[r]=h[r](e),{key:t,first:null,c(){n=B("div"),i.c(),s=j(),o=ne(a),l=j(),this.h()},l(v){n=U(v,"DIV",{class:!0});var p=P(n);i.l(p),s=W(p),o=re(p,a),l=W(p),p.forEach(E),this.h()},h(){M(n,"class","flex items-center rounded-md p-4 border border-primary-600 svelte-695hv2"),this.first=n},m(v,p){H(v,n,p),d[r].m(n,null),x(n,s),x(n,o),x(n,l),f=!0},p(v,p){e=v;let g=r;r=m(e),r!==g&&(ye(),L(d[g],1,1,()=>{d[g]=null}),we(),i=d[r],i||(i=d[r]=h[r](e),i.c()),A(i,1),i.m(n,s)),(!f||p&1)&&a!==(a=` ${e[8].name}`)&&se(o,a)},r(){c=n.getBoundingClientRect()},f(){hw(n),u()},a(){u(),u=dw(n,c,mw,{duration:Ic})},i(v){f||(A(i),f=!0)},o(v){L(i),f=!1},d(v){v&&E(n),d[r].d()}}}function uT(t){let e,n=[],r=new Map,i,s,a,o,l=Fe(t[0]);const c=u=>u[8].id;for(let u=0;u<l.length;u+=1){let f=Ed(t,l,u),h=c(f);r.set(h,n[u]=$d(h,f))}return{c(){e=B("section");for(let u=0;u<n.length;u+=1)n[u].c();this.h()},l(u){e=U(u,"SECTION",{class:!0});var f=P(e);for(let h=0;h<n.length;h+=1)n[h].l(f);f.forEach(E),this.h()},h(){M(e,"class","w-full svelte-695hv2")},m(u,f){H(u,e,f);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(e,null);s=!0,a||(o=[hy(i=fw.call(null,e,{items:t[0],flipDurationMs:Ic,dropTargetStyle:{border:"2px #1d4ed8 solid","border-style":"dashed"}})),qe(e,"consider",t[3]),qe(e,"finalize",t[4])],a=!0)},p(u,f){if(f&1){l=Fe(u[0]),ye();for(let h=0;h<n.length;h+=1)n[h].r();n=ua(n,f,c,1,u,l,r,e,Py,$d,null,Ed);for(let h=0;h<n.length;h+=1)n[h].a();we()}i&&L0(i.update)&&f&1&&i.update.call(null,{items:u[0],flipDurationMs:Ic,dropTargetStyle:{border:"2px #1d4ed8 solid","border-style":"dashed"}})},i(u){if(!s){for(let f=0;f<l.length;f+=1)A(n[f]);s=!0}},o(u){for(let f=0;f<n.length;f+=1)L(n[f]);s=!1},d(u){u&&E(e);for(let f=0;f<n.length;f+=1)n[f].d();a=!1,Er(o)}}}function fT(t){let e,n,r;function i(a){t[7](a)}let s={onClose:t[5],width:"w-96",modalHeading:t[2]("course.navItem.lessons.exercises.all_exercises.order_questions"),$$slots:{default:[uT]},$$scope:{ctx:t}};return t[1].open!==void 0&&(s.open=t[1].open),e=new fa({props:s}),je.push(()=>et(e,"open",i)),{c(){Z(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,o){X(e,a,o),r=!0},p(a,[o]){const l={};o&4&&(l.modalHeading=a[2]("course.navItem.lessons.exercises.all_exercises.order_questions")),o&2049&&(l.$$scope={dirty:o,ctx:a}),!n&&o&2&&(n=!0,l.open=a[1].open,Je(()=>n=!1)),e.$set(l)},i(a){r||(A(e.$$.fragment,a),r=!0)},o(a){L(e.$$.fragment,a),r=!1},d(a){K(e,a)}}}const Ic=300;function hT(t,e,n){let r,i,s;be(t,Mt,f=>n(6,r=f)),be(t,Ps,f=>n(1,i=f)),be(t,Nt,f=>n(2,s=f));let a=[];function o(f){n(0,a=f.detail.items)}function l(f){n(0,a=f.detail.items)}function c(){a.forEach((f,h)=>{const d=h+1;r.questions.some(m=>{if(m.id===f.id)return m.is_dirty=!0,m.order=d,!0})}),Se(Mt,r.questions=r.questions.sort((f,h)=>f.order-h.order),r),Se(Ps,i.open=!1,i)}function u(f){t.$$.not_equal(i.open,f)&&(i.open=f,Ps.set(i))}return t.$$.update=()=>{t.$$.dirty&64&&n(0,a=Rr(r.questions).map(f=>({id:f.id,name:f.title,type:f.question_type.id})))},[a,i,s,o,l,c,r,u]}class dT extends Pe{constructor(e){super(),Ve(this,e,hT,fT,Ae,{})}}function Td(t,e,n){const r=t.slice();return r[33]=e[n],r[34]=e,r[35]=n,r}function Sd(t,e,n){const r=t.slice();return r[36]=e[n],r[37]=e,r[38]=n,r}function xd(t,e,n){const r=t.slice();return r[36]=e[n],r[39]=e,r[40]=n,r}function kd(t,e,n){const r=t.slice();return r[41]=e[n],r}function mT(t){let e,n,r=t[6]("course.navItem.lessons.exercises.all_exercises.edit_mode.sure")+"",i,s,a,o,l,c,u,f,h;return o=new dt({props:{className:"px-6 py-3",variant:gn.OUTLINED,label:t[6]("course.navItem.lessons.exercises.all_exercises.edit_mode.no"),type:"submit",onClick:t[17]}}),c=new dt({props:{className:"px-6 py-3",variant:gn.CONTAINED,label:t[5]?t[6]("course.navItem.lessons.exercises.all_exercises.edit_mode.deleting"):t[6]("course.navItem.lessons.exercises.all_exercises.edit_mode.yes"),isDisabled:t[5],onClick:t[11]}}),{c(){e=B("form"),n=B("h1"),i=ne(r),s=j(),a=B("div"),Z(o.$$.fragment),l=j(),Z(c.$$.fragment),this.h()},l(d){e=U(d,"FORM",{});var m=P(e);n=U(m,"H1",{class:!0});var v=P(n);i=re(v,r),v.forEach(E),s=W(m),a=U(m,"DIV",{class:!0});var p=P(a);Q(o.$$.fragment,p),l=W(p),Q(c.$$.fragment,p),p.forEach(E),m.forEach(E),this.h()},h(){M(n,"class","dark:text-white text-xl"),M(a,"class","mt-5 flex items-center justify-between")},m(d,m){H(d,e,m),x(e,n),x(n,i),x(e,s),x(e,a),X(o,a,null),x(a,l),X(c,a,null),u=!0,f||(h=qe(e,"submit",Wu(t[15])),f=!0)},p(d,m){(!u||m[0]&64)&&r!==(r=d[6]("course.navItem.lessons.exercises.all_exercises.edit_mode.sure")+"")&&se(i,r);const v={};m[0]&64&&(v.label=d[6]("course.navItem.lessons.exercises.all_exercises.edit_mode.no")),m[0]&1&&(v.onClick=d[17]),o.$set(v);const p={};m[0]&96&&(p.label=d[5]?d[6]("course.navItem.lessons.exercises.all_exercises.edit_mode.deleting"):d[6]("course.navItem.lessons.exercises.all_exercises.edit_mode.yes")),m[0]&32&&(p.isDisabled=d[5]),c.$set(p)},i(d){u||(A(o.$$.fragment,d),A(c.$$.fragment,d),u=!0)},o(d){L(o.$$.fragment,d),L(c.$$.fragment,d),u=!1},d(d){d&&E(e),K(o),K(c),f=!1,h()}}}function Od(t){let e,n,r;return n=new J0({props:{message:t[6]("course.navItem.lessons.exercises.all_exercises.edit_mode.error")}}),{c(){e=B("div"),Z(n.$$.fragment),this.h()},l(i){e=U(i,"DIV",{class:!0});var s=P(e);Q(n.$$.fragment,s),s.forEach(E),this.h()},h(){M(e,"class","w-full flex justify-center mb-4")},m(i,s){H(i,e,s),X(n,e,null),r=!0},p(i,s){const a={};s[0]&64&&(a.message=i[6]("course.navItem.lessons.exercises.all_exercises.edit_mode.error")),n.$set(a)},i(i){r||(A(n.$$.fragment,i),r=!0)},o(i){L(n.$$.fragment,i),r=!1},d(i){i&&E(e),K(n)}}}function Md(t){let e,n;return e=new vw({props:{value:t[41].id,text:t[6](t[41].label)}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i[0]&64&&(s.text=r[6](r[41].label)),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function pT(t){let e,n,r=Fe(co),i=[];for(let a=0;a<r.length;a+=1)i[a]=Md(kd(t,r,a));const s=a=>L(i[a],1,1,()=>{i[a]=null});return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=fe()},l(a){for(let o=0;o<i.length;o+=1)i[o].l(a);e=fe()},m(a,o){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(a,o);H(a,e,o),n=!0},p(a,o){if(o[0]&64){r=Fe(co);let l;for(l=0;l<r.length;l+=1){const c=kd(a,r,l);i[l]?(i[l].p(c,o),A(i[l],1)):(i[l]=Md(c),i[l].c(),A(i[l],1),i[l].m(e.parentNode,e))}for(ye(),l=r.length;l<i.length;l+=1)s(l);we()}},i(a){if(!n){for(let o=0;o<r.length;o+=1)A(i[o]);n=!0}},o(a){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)L(i[o]);n=!1},d(a){a&&E(e),Gt(i,a)}}}function Cd(t){let e,n,r,i,s,a;function o(u){t[24](u,t[33])}let l={rows:2,placeholder:t[6]("course.navItem.lessons.exercises.all_exercises.edit_mode.write")};t[33].code!==void 0&&(l.value=t[33].code),n=new U0({props:l}),je.push(()=>et(n,"value",o));function c(){return t[25](t[33])}return s=new cn({props:{value:"write-code",onClick:c,$$slots:{default:[gT]},$$scope:{ctx:t}}}),{c(){e=B("div"),Z(n.$$.fragment),i=j(),Z(s.$$.fragment),this.h()},l(u){e=U(u,"DIV",{class:!0});var f=P(e);Q(n.$$.fragment,f),i=W(f),Q(s.$$.fragment,f),f.forEach(E),this.h()},h(){M(e,"class","flex justify-between items-center my-3 w-3/5")},m(u,f){H(u,e,f),X(n,e,null),x(e,i),X(s,e,null),a=!0},p(u,f){t=u;const h={};f[0]&64&&(h.placeholder=t[6]("course.navItem.lessons.exercises.all_exercises.edit_mode.write")),!r&&f[0]&16&&(r=!0,h.value=t[33].code,Je(()=>r=!1)),n.$set(h);const d={};f[0]&16&&(d.onClick=c),f[1]&8192&&(d.$$scope={dirty:f,ctx:t}),s.$set(d)},i(u){a||(A(n.$$.fragment,u),A(s.$$.fragment,u),a=!0)},o(u){L(n.$$.fragment,u),L(s.$$.fragment,u),a=!1},d(u){u&&E(e),K(n),K(s)}}}function gT(t){let e,n;return e=new mi({props:{size:24,class:"carbon-icon dark:text-white"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function Ad(t){let e,n,r=Fe(Rr(t[33].options)),i=[];for(let a=0;a<r.length;a+=1)i[a]=Id(xd(t,r,a));const s=a=>L(i[a],1,1,()=>{i[a]=null});return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=fe()},l(a){for(let o=0;o<i.length;o+=1)i[o].l(a);e=fe()},m(a,o){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(a,o);H(a,e,o),n=!0},p(a,o){if(o[0]&16){r=Fe(Rr(a[33].options));let l;for(l=0;l<r.length;l+=1){const c=xd(a,r,l);i[l]?(i[l].p(c,o),A(i[l],1)):(i[l]=Id(c),i[l].c(),A(i[l],1),i[l].m(e.parentNode,e))}for(ye(),l=r.length;l<i.length;l+=1)s(l);we()}},i(a){if(!n){for(let o=0;o<r.length;o+=1)A(i[o]);n=!0}},o(a){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)L(i[o]);n=!1},d(a){a&&E(e),Gt(i,a)}}}function vT(t){let e,n;return e=new mi({props:{size:24,class:"carbon-icon dark:text-white"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function _T(t){let e,n;return e=new fl({props:{size:24,class:"carbon-icon dark:text-white"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function bT(t){let e,n;return e=new hl({props:{size:24,class:"carbon-icon dark:text-white"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function yT(t){let e,n,r,i;const s=[bT,_T],a=[];function o(l,c){return l[36].is_correct?0:1}return e=o(t),n=a[e]=s[e](t),{c(){n.c(),r=fe()},l(l){n.l(l),r=fe()},m(l,c){a[e].m(l,c),H(l,r,c),i=!0},p(l,c){let u=e;e=o(l),e!==u&&(ye(),L(a[u],1,1,()=>{a[u]=null}),we(),n=a[e],n||(n=a[e]=s[e](l),n.c()),A(n,1),n.m(r.parentNode,r))},i(l){i||(A(n),i=!0)},o(l){L(n),i=!1},d(l){l&&E(r),a[e].d(l)}}}function wT(t){let e,n,r,i,s,a;return n=new cn({props:{value:t[36].id,onClick:ho(t[33].id,t[36].id),$$slots:{default:[vT]},$$scope:{ctx:t}}}),i=new cn({props:{value:t[36].id,onClick:mo(t[33].id,t[36].id),buttonClassName:t[36].is_correct&&"success",$$slots:{default:[yT]},$$scope:{ctx:t}}}),{c(){e=B("div"),Z(n.$$.fragment),r=j(),Z(i.$$.fragment),s=j(),this.h()},l(o){e=U(o,"DIV",{slot:!0,class:!0});var l=P(e);Q(n.$$.fragment,l),r=W(l),Q(i.$$.fragment,l),s=W(l),l.forEach(E),this.h()},h(){M(e,"slot","iconbutton"),M(e,"class","flex items-center")},m(o,l){H(o,e,l),X(n,e,null),x(e,r),X(i,e,null),x(e,s),a=!0},p(o,l){const c={};l[0]&16&&(c.value=o[36].id),l[0]&16&&(c.onClick=ho(o[33].id,o[36].id)),l[1]&8192&&(c.$$scope={dirty:l,ctx:o}),n.$set(c);const u={};l[0]&16&&(u.value=o[36].id),l[0]&16&&(u.onClick=mo(o[33].id,o[36].id)),l[0]&16&&(u.buttonClassName=o[36].is_correct&&"success"),l[0]&16|l[1]&8192&&(u.$$scope={dirty:l,ctx:o}),i.$set(u)},i(o){a||(A(n.$$.fragment,o),A(i.$$.fragment,o),a=!0)},o(o){L(n.$$.fragment,o),L(i.$$.fragment,o),a=!1},d(o){o&&E(e),K(n),K(i)}}}function Id(t){let e,n,r;function i(a){t[26](a,t[36])}let s={isEditable:!0,name:t[33].title||"radio-name",onChange:po(t[33].id,t[36].id),$$slots:{iconbutton:[wT]},$$scope:{ctx:t}};return t[36].label!==void 0&&(s.label=t[36].label),e=new aw({props:s}),je.push(()=>et(e,"label",i)),{c(){Z(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,o){X(e,a,o),r=!0},p(a,o){t=a;const l={};o[0]&16&&(l.name=t[33].title||"radio-name"),o[0]&16&&(l.onChange=po(t[33].id,t[36].id)),o[0]&16|o[1]&8192&&(l.$$scope={dirty:o,ctx:t}),!n&&o[0]&16&&(n=!0,l.label=t[36].label,Je(()=>n=!1)),e.$set(l)},i(a){r||(A(e.$$.fragment,a),r=!0)},o(a){L(e.$$.fragment,a),r=!1},d(a){K(e,a)}}}function Dd(t){let e,n,r=Fe(Rr(t[33].options)),i=[];for(let a=0;a<r.length;a+=1)i[a]=Ld(Sd(t,r,a));const s=a=>L(i[a],1,1,()=>{i[a]=null});return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=fe()},l(a){for(let o=0;o<i.length;o+=1)i[o].l(a);e=fe()},m(a,o){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(a,o);H(a,e,o),n=!0},p(a,o){if(o[0]&16){r=Fe(Rr(a[33].options));let l;for(l=0;l<r.length;l+=1){const c=Sd(a,r,l);i[l]?(i[l].p(c,o),A(i[l],1)):(i[l]=Ld(c),i[l].c(),A(i[l],1),i[l].m(e.parentNode,e))}for(ye(),l=r.length;l<i.length;l+=1)s(l);we()}},i(a){if(!n){for(let o=0;o<r.length;o+=1)A(i[o]);n=!0}},o(a){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)L(i[o]);n=!1},d(a){a&&E(e),Gt(i,a)}}}function ET(t){let e,n;return e=new mi({props:{size:24,class:"carbon-icon dark:text-white"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function $T(t){let e,n;return e=new fl({props:{size:24,class:"carbon-icon dark:text-white"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function TT(t){let e,n;return e=new hl({props:{size:24,class:"carbon-icon dark:text-white"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function ST(t){let e,n,r,i;const s=[TT,$T],a=[];function o(l,c){return l[36].is_correct?0:1}return e=o(t),n=a[e]=s[e](t),{c(){n.c(),r=fe()},l(l){n.l(l),r=fe()},m(l,c){a[e].m(l,c),H(l,r,c),i=!0},p(l,c){let u=e;e=o(l),e!==u&&(ye(),L(a[u],1,1,()=>{a[u]=null}),we(),n=a[e],n||(n=a[e]=s[e](l),n.c()),A(n,1),n.m(r.parentNode,r))},i(l){i||(A(n),i=!0)},o(l){L(n),i=!1},d(l){l&&E(r),a[e].d(l)}}}function xT(t){let e,n,r,i,s,a;return n=new cn({props:{value:t[36].id,onClick:ho(t[33].id,t[36].id),$$slots:{default:[ET]},$$scope:{ctx:t}}}),i=new cn({props:{value:t[36].id,onClick:mo(t[33].id,t[36].id),buttonClassName:t[36].is_correct&&"success",$$slots:{default:[ST]},$$scope:{ctx:t}}}),{c(){e=B("div"),Z(n.$$.fragment),r=j(),Z(i.$$.fragment),s=j(),this.h()},l(o){e=U(o,"DIV",{slot:!0,class:!0});var l=P(e);Q(n.$$.fragment,l),r=W(l),Q(i.$$.fragment,l),s=W(l),l.forEach(E),this.h()},h(){M(e,"slot","iconbutton"),M(e,"class","flex items-center")},m(o,l){H(o,e,l),X(n,e,null),x(e,r),X(i,e,null),x(e,s),a=!0},p(o,l){const c={};l[0]&16&&(c.value=o[36].id),l[0]&16&&(c.onClick=ho(o[33].id,o[36].id)),l[1]&8192&&(c.$$scope={dirty:l,ctx:o}),n.$set(c);const u={};l[0]&16&&(u.value=o[36].id),l[0]&16&&(u.onClick=mo(o[33].id,o[36].id)),l[0]&16&&(u.buttonClassName=o[36].is_correct&&"success"),l[0]&16|l[1]&8192&&(u.$$scope={dirty:l,ctx:o}),i.$set(u)},i(o){a||(A(n.$$.fragment,o),A(i.$$.fragment,o),a=!0)},o(o){L(n.$$.fragment,o),L(i.$$.fragment,o),a=!1},d(o){o&&E(e),K(n),K(i)}}}function Ld(t){let e,n,r;function i(a){t[27](a,t[36])}let s={isEditable:!0,name:t[33]||"checkbox-name",onChange:po(t[33].id,t[36].id),$$slots:{iconbutton:[xT]},$$scope:{ctx:t}};return t[36].label!==void 0&&(s.label=t[36].label),e=new ow({props:s}),je.push(()=>et(e,"label",i)),{c(){Z(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,o){X(e,a,o),r=!0},p(a,o){t=a;const l={};o[0]&16&&(l.name=t[33]||"checkbox-name"),o[0]&16&&(l.onChange=po(t[33].id,t[36].id)),o[0]&16|o[1]&8192&&(l.$$scope={dirty:o,ctx:t}),!n&&o[0]&16&&(n=!0,l.label=t[36].label,Je(()=>n=!1)),e.$set(l)},i(a){r||(A(e.$$.fragment,a),r=!0)},o(a){L(e.$$.fragment,a),r=!1},d(a){K(e,a)}}}function Rd(t){let e,n,r;function i(a){t[28](a,t[33])}let s={disabled:!0};return t[33].value!==void 0&&(s.value=t[33].value),e=new U0({props:s}),je.push(()=>et(e,"value",i)),{c(){Z(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,o){X(e,a,o),r=!0},p(a,o){t=a;const l={};!n&&o[0]&16&&(n=!0,l.value=t[33].value,Je(()=>n=!1)),e.$set(l)},i(a){r||(A(e.$$.fragment,a),r=!0)},o(a){L(e.$$.fragment,a),r=!1},d(a){K(e,a)}}}function Nd(t){let e,n;return e=new J0({props:{message:t[10](t[2],t[33],"option")}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i[0]&20&&(s.message=r[10](r[2],r[33],"option")),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function Pd(t){let e,n,r;return n=new dt({props:{disablePadding:!0,className:"p-2",variant:gn.OUTLINED,onClick:fd(t[33].id),$$slots:{default:[kT]},$$scope:{ctx:t}}}),{c(){e=B("div"),Z(n.$$.fragment),this.h()},l(i){e=U(i,"DIV",{class:!0});var s=P(e);Q(n.$$.fragment,s),s.forEach(E),this.h()},h(){M(e,"class","flex items-center mt-3")},m(i,s){H(i,e,s),X(n,e,null),r=!0},p(i,s){const a={};s[0]&16&&(a.onClick=fd(i[33].id)),s[0]&64|s[1]&8192&&(a.$$scope={dirty:s,ctx:i}),n.$set(a)},i(i){r||(A(n.$$.fragment,i),r=!0)},o(i){L(n.$$.fragment,i),r=!1},d(i){i&&E(e),K(n)}}}function kT(t){let e,n,r,i=t[6]("course.navItem.lessons.exercises.all_exercises.edit_mode.option")+"",s,a;return e=new u2({props:{size:24,class:"carbon-icon dark:text-white"}}),{c(){Z(e.$$.fragment),n=j(),r=B("p"),s=ne(i),this.h()},l(o){Q(e.$$.fragment,o),n=W(o),r=U(o,"P",{class:!0});var l=P(r);s=re(l,i),l.forEach(E),this.h()},h(){M(r,"class","dark:text-white ml-2")},m(o,l){X(e,o,l),H(o,n,l),H(o,r,l),x(r,s),a=!0},p(o,l){(!a||l[0]&64)&&i!==(i=o[6]("course.navItem.lessons.exercises.all_exercises.edit_mode.option")+"")&&se(s,i)},i(o){a||(A(e.$$.fragment,o),a=!0)},o(o){L(e.$$.fragment,o),a=!1},d(o){o&&(E(n),E(r)),K(e,o)}}}function OT(t){let e,n,r,i,s,a,o,l,c,u,f,h,d,m=t[10](t[2],t[33],"option"),v,p,g;function _(){return t[20](t[33],t[34],t[35])}function b(R){t[21](R,t[33])}let y={placeholder:t[6]("course.navItem.lessons.exercises.all_exercises.edit_mode.question"),isRequired:!0,onChange:_};t[33].title!==void 0&&(y.value=t[33].title),r=new mr({props:y}),je.push(()=>et(r,"value",b));function w(R){t[22](R,t[33])}function $(...R){return t[23](t[33],t[34],t[35],...R)}let k={size:"xl",class:"w-[50px]",$$slots:{default:[pT]},$$scope:{ctx:t}};t[33].question_type.id!==void 0&&(k.selected=t[33].question_type.id),a=new gw({props:k}),je.push(()=>et(a,"selected",w)),a.$on("change",$);let C=typeof t[33].code=="string"&&Cd(t),V=rn.RADIO===t[33].question_type.id&&Ad(t),I=rn.CHECKBOX===t[33].question_type.id&&Dd(t),S=rn.TEXTAREA===t[33].question_type.id&&Rd(t),N=m&&Nd(t),O=rn.TEXTAREA!==t[33].question_type.id&&Pd(t);return{c(){e=B("div"),n=B("div"),Z(r.$$.fragment),s=j(),Z(a.$$.fragment),l=j(),C&&C.c(),c=j(),u=B("div"),V&&V.c(),f=j(),I&&I.c(),h=j(),S&&S.c(),d=j(),N&&N.c(),v=j(),O&&O.c(),p=fe(),this.h()},l(R){e=U(R,"DIV",{class:!0});var T=P(e);n=U(T,"DIV",{class:!0});var F=P(n);Q(r.$$.fragment,F),F.forEach(E),s=W(T),Q(a.$$.fragment,T),T.forEach(E),l=W(R),C&&C.l(R),c=W(R),u=U(R,"DIV",{class:!0});var G=P(u);V&&V.l(G),f=W(G),I&&I.l(G),h=W(G),S&&S.l(G),d=W(G),N&&N.l(G),G.forEach(E),v=W(R),O&&O.l(R),p=fe(),this.h()},h(){M(n,"class","mr-5 w-3/5"),M(e,"class","flex justify-between items-center"),M(u,"class","flex flex-col mt-2")},m(R,T){H(R,e,T),x(e,n),X(r,n,null),x(e,s),X(a,e,null),H(R,l,T),C&&C.m(R,T),H(R,c,T),H(R,u,T),V&&V.m(u,null),x(u,f),I&&I.m(u,null),x(u,h),S&&S.m(u,null),x(u,d),N&&N.m(u,null),H(R,v,T),O&&O.m(R,T),H(R,p,T),g=!0},p(R,T){t=R;const F={};T[0]&64&&(F.placeholder=t[6]("course.navItem.lessons.exercises.all_exercises.edit_mode.question")),T[0]&16&&(F.onChange=_),!i&&T[0]&16&&(i=!0,F.value=t[33].title,Je(()=>i=!1)),r.$set(F);const G={};T[0]&64|T[1]&8192&&(G.$$scope={dirty:T,ctx:t}),!o&&T[0]&16&&(o=!0,G.selected=t[33].question_type.id,Je(()=>o=!1)),a.$set(G),typeof t[33].code=="string"?C?(C.p(t,T),T[0]&16&&A(C,1)):(C=Cd(t),C.c(),A(C,1),C.m(c.parentNode,c)):C&&(ye(),L(C,1,1,()=>{C=null}),we()),rn.RADIO===t[33].question_type.id?V?(V.p(t,T),T[0]&16&&A(V,1)):(V=Ad(t),V.c(),A(V,1),V.m(u,f)):V&&(ye(),L(V,1,1,()=>{V=null}),we()),rn.CHECKBOX===t[33].question_type.id?I?(I.p(t,T),T[0]&16&&A(I,1)):(I=Dd(t),I.c(),A(I,1),I.m(u,h)):I&&(ye(),L(I,1,1,()=>{I=null}),we()),rn.TEXTAREA===t[33].question_type.id?S?(S.p(t,T),T[0]&16&&A(S,1)):(S=Rd(t),S.c(),A(S,1),S.m(u,d)):S&&(ye(),L(S,1,1,()=>{S=null}),we()),T[0]&20&&(m=t[10](t[2],t[33],"option")),m?N?(N.p(t,T),T[0]&20&&A(N,1)):(N=Nd(t),N.c(),A(N,1),N.m(u,null)):N&&(ye(),L(N,1,1,()=>{N=null}),we()),rn.TEXTAREA!==t[33].question_type.id?O?(O.p(t,T),T[0]&16&&A(O,1)):(O=Pd(t),O.c(),A(O,1),O.m(p.parentNode,p)):O&&(ye(),L(O,1,1,()=>{O=null}),we())},i(R){g||(A(r.$$.fragment,R),A(a.$$.fragment,R),A(C),A(V),A(I),A(S),A(N),A(O),g=!0)},o(R){L(r.$$.fragment,R),L(a.$$.fragment,R),L(C),L(V),L(I),L(S),L(N),L(O),g=!1},d(R){R&&(E(e),E(l),E(c),E(u),E(v),E(p)),K(r),K(a),C&&C.d(R),V&&V.d(),I&&I.d(),S&&S.d(),N&&N.d(),O&&O.d(R)}}}function Vd(t,e){let n,r,i,s,a;function o(){return e[29](e[33],e[34],e[35])}function l(u){e[30](u,e[33])}let c={onClose:e[8](e[33].id),scrollToQuestion:e[7](e[33].id,e[1].questions),hasError:!!e[2][e[33].id],onPointsChange:o,$$slots:{default:[OT]},$$scope:{ctx:e}};return e[33].points!==void 0&&(c.points=e[33].points),r=new ev({props:c}),je.push(()=>et(r,"points",l)),{key:t,first:null,c(){n=fe(),Z(r.$$.fragment),s=j(),this.h()},l(u){n=fe(),Q(r.$$.fragment,u),s=W(u),this.h()},h(){this.first=n},m(u,f){H(u,n,f),X(r,u,f),H(u,s,f),a=!0},p(u,f){e=u;const h={};f[0]&16&&(h.onClose=e[8](e[33].id)),f[0]&18&&(h.scrollToQuestion=e[7](e[33].id,e[1].questions)),f[0]&20&&(h.hasError=!!e[2][e[33].id]),f[0]&16&&(h.onPointsChange=o),f[0]&84|f[1]&8192&&(h.$$scope={dirty:f,ctx:e}),!i&&f[0]&16&&(i=!0,h.points=e[33].points,Je(()=>i=!1)),r.$set(h)},i(u){a||(A(r.$$.fragment,u),a=!0)},o(u){L(r.$$.fragment,u),a=!1},d(u){u&&(E(n),E(s)),K(r,u)}}}function MT(t){let e,n,r,i,s,a,o,l,c=Object.values(t[2]).length,u,f,h=[],d=new Map,m;e=new aT({props:{onCancel:t[16],onDelete:t[9]}}),r=new dT({});function v(y){t[19](y)}let p={onClose:t[18],width:"w-2/4",modalHeading:t[6]("course.navItem.lessons.exercises.all_exercises.edit_mode.delete_modal"),$$slots:{default:[mT]},$$scope:{ctx:t}};t[0]!==void 0&&(p.open=t[0]),s=new fa({props:p}),je.push(()=>et(s,"open",v));let g=c&&Od(t),_=Fe(t[4]);const b=y=>y[33].id;for(let y=0;y<_.length;y+=1){let w=Td(t,_,y),$=b(w);d.set($,h[y]=Vd($,w))}return{c(){Z(e.$$.fragment),n=j(),Z(r.$$.fragment),i=j(),Z(s.$$.fragment),o=j(),l=B("div"),g&&g.c(),u=j(),f=B("div");for(let y=0;y<h.length;y+=1)h[y].c();this.h()},l(y){Q(e.$$.fragment,y),n=W(y),Q(r.$$.fragment,y),i=W(y),Q(s.$$.fragment,y),o=W(y),l=U(y,"DIV",{class:!0});var w=P(l);g&&g.l(w),u=W(w),f=U(w,"DIV",{class:!0});var $=P(f);for(let k=0;k<h.length;k+=1)h[k].l($);$.forEach(E),w.forEach(E),this.h()},h(){M(f,"class","questions pt-6 px-6"),M(l,"class","w-full mb-20")},m(y,w){X(e,y,w),H(y,n,w),X(r,y,w),H(y,i,w),X(s,y,w),H(y,o,w),H(y,l,w),g&&g.m(l,null),x(l,u),x(l,f);for(let $=0;$<h.length;$+=1)h[$]&&h[$].m(f,null);m=!0},p(y,w){const $={};w[0]&8&&($.onCancel=y[16]),e.$set($);const k={};w[0]&1&&(k.onClose=y[18]),w[0]&64&&(k.modalHeading=y[6]("course.navItem.lessons.exercises.all_exercises.edit_mode.delete_modal")),w[0]&97|w[1]&8192&&(k.$$scope={dirty:w,ctx:y}),!a&&w[0]&1&&(a=!0,k.open=y[0],Je(()=>a=!1)),s.$set(k),w[0]&4&&(c=Object.values(y[2]).length),c?g?(g.p(y,w),w[0]&4&&A(g,1)):(g=Od(y),g.c(),A(g,1),g.m(l,u)):g&&(ye(),L(g,1,1,()=>{g=null}),we()),w[0]&1494&&(_=Fe(y[4]),ye(),h=ua(h,w,b,1,y,_,d,f,V0,Vd,null,Td),we())},i(y){if(!m){A(e.$$.fragment,y),A(r.$$.fragment,y),A(s.$$.fragment,y),A(g);for(let w=0;w<_.length;w+=1)A(h[w]);m=!0}},o(y){L(e.$$.fragment,y),L(r.$$.fragment,y),L(s.$$.fragment,y),L(g);for(let w=0;w<h.length;w+=1)L(h[w]);m=!1},d(y){y&&(E(n),E(i),E(o),E(l)),K(e,y),K(r,y),K(s,y),g&&g.d();for(let w=0;w<h.length;w+=1)h[w].d()}}}function CT(t,e,n){let r,i,s,a;be(t,Mt,te=>n(1,r=te)),be(t,Q0,te=>n(14,i=te)),be(t,jr,te=>n(31,s=te)),be(t,Nt,te=>n(6,a=te));const o=r.questions.length;let{shouldDeleteExercise:l=!1}=e,{exerciseId:c}=e,{goBack:u=()=>{}}=e,f={},h=null,d=[],m=!1;function v(te,ie){const[pe]=ie.slice(-1),Re=ie.length;return pe.id===te&&o!==Re}function p(te){return()=>{n(3,h=te),Se(jr,s.open=!0,s)}}function g(){O$(h)()}function _(te,ie,pe){return te[ie.id]?te[ie.id][pe]:null}async function b(){console.log("delete"),n(5,m=!0),await $y(d,c),pt.update(te=>({...te,exercises:te.exercises.filter(ie=>ie.id!==c)})),u()}function y(te){yt.call(this,t,te)}const w=()=>n(3,h=null),$=()=>n(0,l=!1),k=()=>n(0,l=!1);function C(te){l=te,n(0,l)}const V=(te,ie,pe)=>{n(4,ie[pe].is_dirty=!0,d)};function I(te,ie){t.$$.not_equal(ie.title,te)&&(ie.title=te,n(4,d),n(1,r))}function S(te,ie){t.$$.not_equal(ie.question_type.id,te)&&(ie.question_type.id=te,n(4,d),n(1,r))}const N=(te,ie,pe,Re)=>{var ge;const ce=parseInt((ge=Re.target)==null?void 0:ge.value);n(4,ie[pe].question_type=co.find(Ue=>Ue.id===ce),d),n(4,ie[pe].is_dirty=!0,d)};function O(te,ie){t.$$.not_equal(ie.code,te)&&(ie.code=te,n(4,d),n(1,r))}const R=te=>M$(te.id,!1);function T(te,ie){t.$$.not_equal(ie.label,te)&&(ie.label=te,n(4,d),n(1,r))}function F(te,ie){t.$$.not_equal(ie.label,te)&&(ie.label=te,n(4,d),n(1,r))}function G(te,ie){t.$$.not_equal(ie.value,te)&&(ie.value=te,n(4,d),n(1,r))}const q=(te,ie,pe)=>{n(4,ie[pe].is_dirty=!0,d)};function Y(te,ie){t.$$.not_equal(ie.points,te)&&(ie.points=te,n(4,d),n(1,r))}return t.$$set=te=>{"shouldDeleteExercise"in te&&n(0,l=te.shouldDeleteExercise),"exerciseId"in te&&n(12,c=te.exerciseId),"goBack"in te&&n(13,u=te.goBack)},t.$$.update=()=>{t.$$.dirty[0]&16384&&n(2,f=i),t.$$.dirty[0]&2&&n(4,d=Rr(r.questions))},[l,r,f,h,d,m,a,v,p,g,_,b,c,u,i,y,w,$,k,C,V,I,S,N,O,R,T,F,G,q,Y]}class AT extends Pe{constructor(e){super(),Ve(this,e,CT,MT,Ae,{shouldDeleteExercise:0,exerciseId:12,goBack:13},null,[-1,-1])}}function IT(t){let e,n=t[2].title+"",r,i,s,a,o,l=t[2].questions.length+"",c,u,f=t[1]("course.navItem.lessons.exercises.all_exercises.view_mode.questions")+"",h,d,m,v,p=Ud(t[2].questions)+"",g,_,b=t[1]("course.navItem.lessons.exercises.all_exercises.view_mode.points")+"",y,w,$,k,C=t[1]("course.navItem.lessons.exercises.all_exercises.view_mode.all")+"",V,I,S,N,O,R=(t[2].description||t[1]("course.navItem.lessons.exercises.all_exercises.description.no"))+"",T=t[2].due_by&&Bd(t);return{c(){e=B("h2"),r=ne(n),i=j(),s=B("div"),a=B("p"),o=B("strong"),c=ne(l),u=j(),h=ne(f),d=ne(`
        |
        `),m=B("p"),v=B("strong"),g=ne(p),_=j(),y=ne(b),w=ne("."),$=ne(`
        |
        `),k=B("p"),V=ne(C),I=j(),T&&T.c(),S=j(),N=B("article"),O=new cl(!1),this.h()},l(F){e=U(F,"H2",{class:!0});var G=P(e);r=re(G,n),G.forEach(E),i=W(F),s=U(F,"DIV",{class:!0});var q=P(s);a=U(q,"P",{class:!0});var Y=P(a);o=U(Y,"STRONG",{});var te=P(o);c=re(te,l),te.forEach(E),u=W(Y),h=re(Y,f),Y.forEach(E),d=re(q,`
        |
        `),m=U(q,"P",{class:!0});var ie=P(m);v=U(ie,"STRONG",{});var pe=P(v);g=re(pe,p),pe.forEach(E),_=W(ie),y=re(ie,b),w=re(ie,"."),ie.forEach(E),$=re(q,`
        |
        `),k=U(q,"P",{class:!0});var Re=P(k);V=re(Re,C),Re.forEach(E),I=W(q),T&&T.l(q),q.forEach(E),S=W(F),N=U(F,"ARTICLE",{class:!0});var ce=P(N);O=ul(ce,!1),ce.forEach(E),this.h()},h(){M(e,"class","my-1"),M(a,"class","dark:text-white mx-2"),M(m,"class","dark:text-white mx-2"),M(k,"class","dark:text-white mx-2"),M(s,"class","flex items-center"),O.a=null,M(N,"class","mt-3 preview prose prose-sm sm:prose p-2")},m(F,G){H(F,e,G),x(e,r),H(F,i,G),H(F,s,G),x(s,a),x(a,o),x(o,c),x(a,u),x(a,h),x(s,d),x(s,m),x(m,v),x(v,g),x(m,_),x(m,y),x(m,w),x(s,$),x(s,k),x(k,V),x(s,I),T&&T.m(s,null),H(F,S,G),H(F,N,G),O.m(R,N)},p(F,G){G&4&&n!==(n=F[2].title+"")&&se(r,n),G&4&&l!==(l=F[2].questions.length+"")&&se(c,l),G&2&&f!==(f=F[1]("course.navItem.lessons.exercises.all_exercises.view_mode.questions")+"")&&se(h,f),G&4&&p!==(p=Ud(F[2].questions)+"")&&se(g,p),G&2&&b!==(b=F[1]("course.navItem.lessons.exercises.all_exercises.view_mode.points")+"")&&se(y,b),G&2&&C!==(C=F[1]("course.navItem.lessons.exercises.all_exercises.view_mode.all")+"")&&se(V,C),F[2].due_by?T?T.p(F,G):(T=Bd(F),T.c(),T.m(s,null)):T&&(T.d(1),T=null),G&6&&R!==(R=(F[2].description||F[1]("course.navItem.lessons.exercises.all_exercises.description.no"))+"")&&O.p(R)},i:he,o:he,d(F){F&&(E(e),E(i),E(s),E(S),E(N)),T&&T.d()}}}function DT(t){let e,n,r,i,s,a,o,l=t[1]("course.navItem.lessons.exercises.all_exercises.description.heading")+"",c,u,f,h;function d(v){t[4](v)}let m={placeholder:t[1]("course.navItem.lessons.exercises.all_exercises.description.title"),className:"mb-2",onChange:t[3]};return t[2].title!==void 0&&(m.value=t[2].title),e=new mr({props:m}),je.push(()=>et(e,"value",d)),i=new Cy({props:{label:t[1]("course.navItem.lessons.exercises.all_exercises.view_mode.due"),className:"w-50",value:t[2].due_by,onInput:t[5]}}),f=new G0({props:{value:t[2].description,onChange:t[6],placeholder:t[1]("course.navItem.lessons.exercises.all_exercises.description.describe"),maxHeight:300}}),{c(){Z(e.$$.fragment),r=j(),Z(i.$$.fragment),s=j(),a=B("div"),o=B("p"),c=ne(l),u=j(),Z(f.$$.fragment),this.h()},l(v){Q(e.$$.fragment,v),r=W(v),Q(i.$$.fragment,v),s=W(v),a=U(v,"DIV",{class:!0});var p=P(a);o=U(p,"P",{class:!0});var g=P(o);c=re(g,l),g.forEach(E),u=W(p),Q(f.$$.fragment,p),p.forEach(E),this.h()},h(){M(o,"class","mb-1"),M(a,"class","mt-3")},m(v,p){X(e,v,p),H(v,r,p),X(i,v,p),H(v,s,p),H(v,a,p),x(a,o),x(o,c),x(a,u),X(f,a,null),h=!0},p(v,p){const g={};p&2&&(g.placeholder=v[1]("course.navItem.lessons.exercises.all_exercises.description.title")),p&4&&(g.onChange=v[3]),!n&&p&4&&(n=!0,g.value=v[2].title,Je(()=>n=!1)),e.$set(g);const _={};p&2&&(_.label=v[1]("course.navItem.lessons.exercises.all_exercises.view_mode.due")),p&4&&(_.value=v[2].due_by),p&4&&(_.onInput=v[5]),i.$set(_),(!h||p&2)&&l!==(l=v[1]("course.navItem.lessons.exercises.all_exercises.description.heading")+"")&&se(c,l);const b={};p&4&&(b.value=v[2].description),p&4&&(b.onChange=v[6]),p&2&&(b.placeholder=v[1]("course.navItem.lessons.exercises.all_exercises.description.describe")),f.$set(b)},i(v){h||(A(e.$$.fragment,v),A(i.$$.fragment,v),A(f.$$.fragment,v),h=!0)},o(v){L(e.$$.fragment,v),L(i.$$.fragment,v),L(f.$$.fragment,v),h=!1},d(v){v&&(E(r),E(s),E(a)),K(e,v),K(i,v),K(f)}}}function Bd(t){let e,n,r,i=t[1]("course.navItem.lessons.exercises.all_exercises.view_mode.due")+"",s,a,o,l=new Date(t[2].due_by).toLocaleString()+"",c;return{c(){e=ne(`|
          `),n=B("p"),r=B("strong"),s=ne(i),a=ne(":"),o=j(),c=ne(l),this.h()},l(u){e=re(u,`|
          `),n=U(u,"P",{class:!0});var f=P(n);r=U(f,"STRONG",{});var h=P(r);s=re(h,i),a=re(h,":"),h.forEach(E),o=W(f),c=re(f,l),f.forEach(E),this.h()},h(){M(n,"class","dark:text-white mx-2")},m(u,f){H(u,e,f),H(u,n,f),x(n,r),x(r,s),x(r,a),x(n,o),x(n,c)},p(u,f){f&2&&i!==(i=u[1]("course.navItem.lessons.exercises.all_exercises.view_mode.due")+"")&&se(s,i),f&4&&l!==(l=new Date(u[2].due_by).toLocaleString()+"")&&se(c,l)},d(u){u&&(E(e),E(n))}}}function LT(t){let e,n,r,i;const s=[DT,IT],a=[];function o(l,c){return l[0]?l[0]?1:-1:0}return~(e=o(t))&&(n=a[e]=s[e](t)),{c(){n&&n.c(),r=fe()},l(l){n&&n.l(l),r=fe()},m(l,c){~e&&a[e].m(l,c),H(l,r,c),i=!0},p(l,c){let u=e;e=o(l),e===u?~e&&a[e].p(l,c):(n&&(ye(),L(a[u],1,1,()=>{a[u]=null}),we()),~e?(n=a[e],n?n.p(l,c):(n=a[e]=s[e](l),n.c()),A(n,1),n.m(r.parentNode,r)):n=null)},i(l){i||(A(n),i=!0)},o(l){L(n),i=!1},d(l){l&&E(r),~e&&a[e].d(l)}}}function RT(t){let e,n,r,i;return n=new ev({props:{isTitle:!0,$$slots:{default:[LT]},$$scope:{ctx:t}}}),{c(){e=B("div"),Z(n.$$.fragment),this.h()},l(s){e=U(s,"DIV",{class:!0});var a=P(e);Q(n.$$.fragment,a),a.forEach(E),this.h()},h(){M(e,"class",r="mb-5 "+(t[0]?"px-2":"px-6"))},m(s,a){H(s,e,a),X(n,e,null),i=!0},p(s,[a]){const o={};a&135&&(o.$$scope={dirty:a,ctx:s}),n.$set(o),(!i||a&1&&r!==(r="mb-5 "+(s[0]?"px-2":"px-6")))&&M(e,"class",r)},i(s){i||(A(n.$$.fragment,s),i=!0)},o(s){L(n.$$.fragment,s),i=!1},d(s){s&&E(e),K(n)}}}function Ud(t){return t.reduce((e,n)=>(e+=parseFloat(n.points,10),e),0)}function NT(t,e,n){let r,i;be(t,Nt,u=>n(1,r=u)),be(t,Mt,u=>n(2,i=u));let{preview:s}=e;const a=()=>Se(Mt,i.is_title_dirty=!0,i);function o(u){t.$$.not_equal(i.title,u)&&(i.title=u,Mt.set(i))}const l=u=>{Se(Mt,i.due_by=u.target.value,i),Se(Mt,i.is_due_by_dirty=!0,i)},c=u=>{Se(Mt,i.is_description_dirty=!0,i),Se(Mt,i.description=u,i)};return t.$$set=u=>{"preview"in u&&n(0,s=u.preview)},[s,r,i,a,o,l,c]}class PT extends Pe{constructor(e){super(),Ve(this,e,NT,RT,Ae,{preview:0})}}var tv=(t=>(t.RENDER_FINISHED="render-finished",t.RESIZE="chart-resize",t.MOUSEOVER="chart-mouseover",t.MOUSEOUT="chart-mouseout",t))(tv||{}),nv=(t=>(t.SHOW="show-modal",t.HIDE="hide-modal",t))(nv||{}),rv=(t=>(t.UPDATE="model-update",t))(rv||{}),iv=(t=>(t.SHOW_OVERFLOW_MENU="show-toolbar-overflow-menu",t.HIDE_OVERFLOW_MENU="hide-toolbar-overflow-menu",t.BUTTON_CLICK="toolbar-button-click",t))(iv||{}),sv=(t=>(t.UPDATE="zoom-bar-update",t.SELECTION_START="zoom-bar-selection-start",t.SELECTION_IN_PROGRESS="zoom-bar-selection-in-progress",t.SELECTION_END="zoom-bar-selection-end",t))(sv||{}),av=(t=>(t.CHANGE="zoom-domain-change",t))(av||{}),ov=(t=>(t.CANVAS_ZOOM_IN="canvas-zoom-in",t.CANVAS_ZOOM_OUT="canvas-zoom-out",t))(ov||{}),lv=(t=>(t.LABEL_MOUSEOVER="axis-label-mouseover",t.LABEL_MOUSEMOVE="axis-label-mousemove",t.LABEL_CLICK="axis-label-click",t.LABEL_MOUSEOUT="axis-label-mouseout",t.LABEL_FOCUS="axis-label-focus",t.LABEL_BLUR="axis-label-blur",t.RENDER_COMPLETE="axis-render-complete",t))(lv||{}),cv=(t=>(t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout",t))(cv||{}),uv=(t=>(t.WORD_MOUSEOVER="wordcloud-word-mouseover",t.WORD_MOUSEMOVE="wordcloud-word-mousemove",t.WORD_CLICK="wordcloud-word-click",t.WORD_MOUSEOUT="wordcloud-word-mouseout",t))(uv||{}),fv=(t=>(t.SLICE_MOUSEOVER="pie-slice-mouseover",t.SLICE_MOUSEMOVE="pie-slice-mousemove",t.SLICE_CLICK="pie-slice-click",t.SLICE_MOUSEOUT="pie-slice-mouseout",t))(fv||{}),hv=(t=>(t.ARC_MOUSEOVER="gauge-arc-mouseover",t.ARC_MOUSEMOVE="gauge-arc-mousemove",t.ARC_CLICK="gauge-arc-click",t.ARC_MOUSEOUT="gauge-arc-mouseout",t))(hv||{}),dv=(t=>(t.BAR_MOUSEOVER="bar-mouseover",t.BAR_MOUSEMOVE="bar-mousemove",t.BAR_CLICK="bar-click",t.BAR_MOUSEOUT="bar-mouseout",t))(dv||{}),mv=(t=>(t.BOX_MOUSEOVER="box-mouseover",t.BOX_MOUSEMOVE="box-mousemove",t.BOX_CLICK="box-click",t.BOX_MOUSEOUT="box-mouseout",t.OUTLIER_MOUSEOVER="outlier-mouseover",t.OUTLIER_MOUSEMOVE="outlier-mousemove",t.OUTLIER_CLICK="outlier-click",t.OUTLIER_MOUSEOUT="outlier-mouseout",t))(mv||{}),pv=(t=>(t.SCATTER_MOUSEOVER="scatter-mouseover",t.SCATTER_MOUSEMOVE="scatter-mousemove",t.SCATTER_CLICK="scatter-click",t.SCATTER_MOUSEOUT="scatter-mouseout",t))(pv||{}),gv=(t=>(t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout",t))(gv||{}),vv=(t=>(t.X_AXIS_MOUSEOVER="radar-x-axis-mouseover",t.X_AXIS_MOUSEMOVE="radar-x-axis-mousemove",t.X_AXIS_CLICK="radar-x-axis-click",t.X_AXIS_MOUSEOUT="radar-x-axis-mouseout",t))(vv||{}),_v=(t=>(t.NODE_MOUSEOVER="tree-node-mouseover",t.NODE_CLICK="tree-node-click",t.NODE_MOUSEOUT="tree-node-mouseout",t))(_v||{}),bv=(t=>(t.LEAF_MOUSEOVER="leaf-mouseover",t.LEAF_MOUSEMOVE="leaf-mousemove",t.LEAF_CLICK="leaf-click",t.LEAF_MOUSEOUT="leaf-mouseout",t))(bv||{}),Vs=(t=>(t.SHOW="show-tooltip",t.MOVE="move-tooltip",t.HIDE="hide-tooltip",t))(Vs||{}),yv=(t=>(t.SHOW="show-threshold",t.HIDE="hide-threshold",t))(yv||{}),wv=(t=>(t.ITEM_HOVER="legend-item-onhover",t.ITEM_CLICK="legend-item-onclick",t.ITEM_MOUSEOUT="legend-item-onmouseout",t.ITEMS_UPDATE="legend-items-update",t))(wv||{}),Ev=(t=>(t.CIRCLE_MOUSEOVER="circle-leaf-mouseover",t.CIRCLE_CLICK="circle-leaf-click",t.CIRCLE_MOUSEOUT="circle-leaf-mouseout",t.CIRCLE_MOUSEMOVE="circle-leaf-mousemove",t))(Ev||{}),$v=(t=>(t.NODE_MOUSEOVER="alluvial-node-mouseover",t.NODE_CLICK="alluvial-node-click",t.NODE_MOUSEOUT="alluvial-node-mouseout",t.NODE_MOUSEMOVE="alluvial-node-mousemove",t.LINE_MOUSEOVER="alluvial-line-mouseover",t.LINE_CLICK="alluvial-line-click",t.LINE_MOUSEOUT="alluvial-line-mouseout",t.LINE_MOUSEMOVE="alluvial-line-mousemove",t))($v||{}),Tv=(t=>(t.METER_MOUSEOVER="meter-mouseover",t.METER_CLICK="meter-click",t.METER_MOUSEOUT="meter-mouseout",t.METER_MOUSEMOVE="meter-mousemove",t))(Tv||{}),Sv=(t=>(t.HEATMAP_MOUSEOVER="heatmap-mouseover",t.HEATMAP_CLICK="heatmap-click",t.HEATMAP_MOUSEOUT="heatmap-mouseout",t.HEATMAP_MOUSEMOVE="hetmap-mousemove",t))(Sv||{}),Pi=(t=>(t.CHOROPLETH_MOUSEOVER="choropleth-mouseover",t.CHOROPLETH_CLICK="choropleth-click",t.CHOROPLETH_MOUSEOUT="choropleth-mouseout",t.CHOROPLETH_MOUSEMOVE="choropleth-mousemove",t))(Pi||{});const VT=Object.freeze(Object.defineProperty({__proto__:null,Alluvial:$v,Area:cv,Axis:lv,Bar:dv,Boxplot:mv,CanvasZoom:ov,Chart:tv,Choropleth:Pi,CirclePack:Ev,Gauge:hv,Heatmap:Sv,Legend:wv,Line:gv,Meter:Tv,Modal:nv,Model:rv,Pie:fv,Radar:vv,Scatter:pv,Threshold:yv,Toolbar:iv,Tooltip:Vs,Tree:_v,Treemap:bv,WordCloud:uv,ZoomBar:sv,ZoomDomain:av},Symbol.toStringTag,{value:"Module"})),z=VT;var Me=(t=>(t.HTML="html",t.SVG="svg",t))(Me||{}),xv=(t=>(t.WHITE="white",t.G100="g100",t.G90="g90",t.G10="g10",t))(xv||{}),Le=(t=>(t.BACKGROUND="background",t.FILL="fill",t.STROKE="stroke",t.TOOLTIP="tooltip",t))(Le||{}),ae=(t=>(t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom",t))(ae||{}),qn=(t=>(t.GRAPH_VIEW="graph_view",t.SLIDER_VIEW="slider_view",t))(qn||{}),Ln=(t=>(t.END_LINE="end_line",t.MID_LINE="mid_line",t.FRONT_LINE="front_line",t.NONE="none",t))(Ln||{}),Ft=(t=>(t.VERTICAL="vertical",t.HORIZONTAL="horizontal",t))(Ft||{}),xe=(t=>(t.TIME="time",t.LINEAR="linear",t.LOG="log",t.LABELS="labels",t.LABELS_RATIO="labels-ratio",t))(xe||{}),Bs=(t=>(t.RIGHT="right",t.LEFT="left",t.TOP="top",t.BOTTOM="bottom",t))(Bs||{}),Ct=(t=>(t.LEFT="left",t.CENTER="center",t.RIGHT="right",t))(Ct||{}),Zs=(t=>(t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t))(Zs||{}),Ju=(t=>(t.TREE="tree",t.DENDROGRAM="dendrogram",t))(Ju||{}),Et=(t=>(t.ROW="row",t.COLUMN="column",t.ROW_REVERSE="row-reverse",t.COLUMN_REVERSE="column-reverse",t))(Et||{}),Ge=(t=>(t.FIXED="fixed",t.PREFERRED="preferred",t.STRETCH="stretch",t))(Ge||{}),fs=(t=>(t.CENTER="center",t))(fs||{}),Ga=(t=>(t.LEFT="left",t.RIGHT="right",t))(Ga||{}),Bt=(t=>(t.GRID="grid",t.VERT_OR_HORIZ="vertOrHoriz",t.PIE="pie",t.DONUT="donut",t))(Bt||{}),ir=(t=>(t.START="start",t.MIDDLE="middle",t.END="end",t))(ir||{}),sr=(t=>(t.BASELINE="baseline",t.MIDDLE="middle",t.HANGING="hanging",t))(sr||{}),Vi=(t=>(t.SEMI="semi",t.FULL="full",t))(Vi||{}),Dc=(t=>(t.UP="up",t.DOWN="down",t))(Dc||{}),qa=(t=>(t.SUCCESS="success",t.WARNING="warning",t.DANGER="danger",t))(qa||{}),ja=(t=>(t.ALWAYS="always",t.AUTO="auto",t.NEVER="never",t))(ja||{}),wn=(t=>(t.SCATTER="scatter",t.LINE="line",t.SIMPLE_BAR="simple-bar",t.STACKED_BAR="stacked-bar",t.GROUPED_BAR="grouped-bar",t.AREA="area",t.STACKED_AREA="stacked-area",t))(wn||{}),kt=(t=>(t.EXPORT_CSV="Export as CSV",t.EXPORT_PNG="Export as PNG",t.EXPORT_JPG="Export as JPG",t.ZOOM_IN="Zoom in",t.ZOOM_OUT="Zoom out",t.RESET_ZOOM="Reset zoom",t.MAKE_FULLSCREEN="Make fullscreen",t.SHOW_AS_DATATABLE="Show as data-table",t.CUSTOM="Custom",t))(kt||{}),Lc=(t=>(t.LEFT="left",t.RIGHT="right",t))(Lc||{}),Vt=(t=>(t.CHECKBOX="checkbox",t.RADIUS="radius",t.AREA="area",t.SIZE="size",t.LINE="line",t.QUARTILE="quartile",t.ZOOM="zoom",t))(Vt||{}),Wa=(t=>(t.LINEAR="linear",t.QUANTIZE="quantize",t))(Wa||{}),Us=(t=>(t.ON="on",t.AUTO="auto",t.OFF="off",t))(Us||{}),pl=(t=>(t.DEFAULT="default",t.HOVERABLE="hoverable",t))(pl||{}),or=(t=>(t.geoEqualEarth="geoEqualEarth",t.geoAlbers="geoAlbers",t.geoConicEqualArea="geoConicEqualArea",t.geoConicEquidistant="geoConicEquidistant",t.geoEquirectangular="geoEquirectangular",t.geoMercator="geoMercator",t.geoNaturalEarth1="geoNaturalEarth1",t))(or||{});function Qr(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function BT(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ef(t){let e,n,r;t.length!==2?(e=Qr,n=(o,l)=>Qr(t(o),l),r=(o,l)=>t(o)-l):(e=t===Qr||t===BT?t:UT,n=t,r=t);function i(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(o[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(o[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function a(o,l,c=0,u=o.length){const f=i(o,l,c,u-1);return f>c&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:i,center:a,right:s}}function UT(){return 0}function HT(t){return t===null?NaN:+t}function*zT(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const FT=ef(Qr),GT=FT.right;ef(HT).center;const tf=GT;function qT(t,e){let n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(i=+i)>=i&&++n}return n}function Rn(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class ei{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],a=e+s,o=Math.abs(e)<Math.abs(s)?e-(a-s):s-(a-e);o&&(n[r++]=o),e=a}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,s,a=0;if(n>0){for(a=e[--n];n>0&&(r=a,i=e[--n],a=r+i,s=i-(a-r),!s););n>0&&(s<0&&e[n-1]<0||s>0&&e[n-1]>0)&&(i=s*2,r=a+i,i==r-a&&(a=r))}return a}}class Hd extends Map{constructor(e,n=YT){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(zd(this,e))}has(e){return super.has(zd(this,e))}set(e,n){return super.set(jT(this,e),n)}delete(e){return super.delete(WT(this,e))}}function zd({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function jT({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function WT({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function YT(t){return t!==null&&typeof t=="object"?t.valueOf():t}function ZT(t){return t}function XT(t=Qr){if(t===Qr)return kv;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function kv(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}var KT=Array.prototype,QT=KT.slice;function Yl(t){return()=>t}const JT=Math.sqrt(50),eS=Math.sqrt(10),tS=Math.sqrt(2);function vo(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=JT?10:s>=eS?5:s>=tS?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?vo(t,e,n*2):[o,l,c]}function _o(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?vo(e,t,n):vo(t,e,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function Xi(t,e,n){return e=+e,t=+t,n=+n,vo(t,e,n)[2]}function Rc(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Xi(e,t,n):Xi(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function nS(t,e,n){let r;for(;;){const i=Xi(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function rS(t){return Math.max(1,Math.ceil(Math.log(qT(t))/Math.LN2)+1)}function iS(){var t=ZT,e=Rn,n=rS;function r(i){Array.isArray(i)||(i=Array.from(i));var s,a=i.length,o,l,c=new Array(a);for(s=0;s<a;++s)c[s]=t(i[s],s,i);var u=e(c),f=u[0],h=u[1],d=n(c,f,h);if(!Array.isArray(d)){const b=h,y=+d;if(e===Rn&&([f,h]=nS(f,h,y)),d=_o(f,h,y),d[0]<=f&&(l=Xi(f,h,y)),d[d.length-1]>=h)if(b>=h&&e===Rn){const w=Xi(f,h,y);isFinite(w)&&(w>0?h=(Math.floor(h/w)+1)*w:w<0&&(h=(Math.ceil(h*-w)+1)/-w))}else d.pop()}for(var m=d.length,v=0,p=m;d[v]<=f;)++v;for(;d[p-1]>h;)--p;(v||p<m)&&(d=d.slice(v,p),m=p-v);var g=new Array(m+1),_;for(s=0;s<=m;++s)_=g[s]=[],_.x0=s>0?d[s-1]:f,_.x1=s<m?d[s]:h;if(isFinite(l)){if(l>0)for(s=0;s<a;++s)(o=c[s])!=null&&f<=o&&o<=h&&g[Math.min(m,Math.floor((o-f)/l))].push(i[s]);else if(l<0){for(s=0;s<a;++s)if((o=c[s])!=null&&f<=o&&o<=h){const b=Math.floor((f-o)*l);g[Math.min(m,b+(d[b]<=o))].push(i[s])}}}else for(s=0;s<a;++s)(o=c[s])!=null&&f<=o&&o<=h&&g[tf(d,o,0,m)].push(i[s]);return g}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:Yl(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:Yl([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Yl(Array.isArray(i)?QT.call(i):i),r):n},r}function ti(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Nr(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Ov(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?kv:XT(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),d=Math.max(n,Math.floor(e-c*f/l+h)),m=Math.min(r,Math.floor(e+(l-c)*f/l+h));Ov(t,e,d,m,i)}const s=t[e];let a=n,o=r;for(ps(t,n,e),i(t[r],s)>0&&ps(t,n,r);a<o;){for(ps(t,a,o),++a,--o;i(t[a],s)<0;)++a;for(;i(t[o],s)>0;)--o}i(t[n],s)===0?ps(t,n,o):(++o,ps(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function ps(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Zl(t,e,n){if(t=Float64Array.from(zT(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Nr(t);if(e>=1)return ti(t);var r,i=(r-1)*e,s=Math.floor(i),a=ti(Ov(t,s).subarray(0,s+1)),o=Nr(t.subarray(s+1));return a+(o-a)*(i-s)}}function*sS(t){for(const e of t)yield*e}function Mv(t){return Array.from(sS(t))}function aS(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function oS(t){return t}var Ya=1,Za=2,Nc=3,Ts=4,Fd=1e-6;function lS(t){return"translate("+t+",0)"}function cS(t){return"translate(0,"+t+")"}function uS(t){return e=>+t(e)}function fS(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function hS(){return!this.__axis}function gl(t,e){var n=[],r=null,i=null,s=6,a=6,o=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===Ya||t===Ts?-1:1,u=t===Ts||t===Za?"x":"y",f=t===Ya||t===Nc?lS:cS;function h(d){var m=r??(e.ticks?e.ticks.apply(e,n):e.domain()),v=i??(e.tickFormat?e.tickFormat.apply(e,n):oS),p=Math.max(s,0)+o,g=e.range(),_=+g[0]+l,b=+g[g.length-1]+l,y=(e.bandwidth?fS:uS)(e.copy(),l),w=d.selection?d.selection():d,$=w.selectAll(".domain").data([null]),k=w.selectAll(".tick").data(m,e).order(),C=k.exit(),V=k.enter().append("g").attr("class","tick"),I=k.select("line"),S=k.select("text");$=$.merge($.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),k=k.merge(V),I=I.merge(V.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),S=S.merge(V.append("text").attr("fill","currentColor").attr(u,c*p).attr("dy",t===Ya?"0em":t===Nc?"0.71em":"0.32em")),d!==w&&($=$.transition(d),k=k.transition(d),I=I.transition(d),S=S.transition(d),C=C.transition(d).attr("opacity",Fd).attr("transform",function(N){return isFinite(N=y(N))?f(N+l):this.getAttribute("transform")}),V.attr("opacity",Fd).attr("transform",function(N){var O=this.parentNode.__axis;return f((O&&isFinite(O=O(N))?O:y(N))+l)})),C.remove(),$.attr("d",t===Ts||t===Za?a?"M"+c*a+","+_+"H"+l+"V"+b+"H"+c*a:"M"+l+","+_+"V"+b:a?"M"+_+","+c*a+"V"+l+"H"+b+"V"+c*a:"M"+_+","+l+"H"+b),k.attr("opacity",1).attr("transform",function(N){return f(y(N)+l)}),I.attr(u+"2",c*s),S.attr(u,c*p).text(v),w.filter(hS).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Za?"start":t===Ts?"end":"middle"),w.each(function(){this.__axis=y})}return h.scale=function(d){return arguments.length?(e=d,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(s=a=+d,h):s},h.tickSizeInner=function(d){return arguments.length?(s=+d,h):s},h.tickSizeOuter=function(d){return arguments.length?(a=+d,h):a},h.tickPadding=function(d){return arguments.length?(o=+d,h):o},h.offset=function(d){return arguments.length?(l=+d,h):l},h}function dS(t){return gl(Ya,t)}function mS(t){return gl(Za,t)}function nf(t){return gl(Nc,t)}function Cv(t){return gl(Ts,t)}var pS={value:()=>{}};function rf(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Xa(n)}function Xa(t){this._=t}function gS(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Xa.prototype=rf.prototype={constructor:Xa,on:function(t,e){var n=this._,r=gS(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=vS(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=Gd(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Gd(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Xa(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function vS(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Gd(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=pS,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Pc="http://www.w3.org/1999/xhtml";const qd={svg:"http://www.w3.org/2000/svg",xhtml:Pc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function vl(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),qd.hasOwnProperty(e)?{space:qd[e],local:t}:t}function _S(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Pc&&e.documentElement.namespaceURI===Pc?e.createElement(t):e.createElementNS(n,t)}}function bS(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Av(t){var e=vl(t);return(e.local?bS:_S)(e)}function yS(){}function sf(t){return t==null?yS:function(){return this.querySelector(t)}}function wS(t){typeof t!="function"&&(t=sf(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=new Array(a),l,c,u=0;u<a;++u)(l=s[u])&&(c=t.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),o[u]=c);return new vn(r,this._parents)}function ES(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function $S(){return[]}function Iv(t){return t==null?$S:function(){return this.querySelectorAll(t)}}function TS(t){return function(){return ES(t.apply(this,arguments))}}function SS(t){typeof t=="function"?t=TS(t):t=Iv(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&(r.push(t.call(l,l.__data__,c,a)),i.push(l));return new vn(r,i)}function Dv(t){return function(){return this.matches(t)}}function Lv(t){return function(e){return e.matches(t)}}var xS=Array.prototype.find;function kS(t){return function(){return xS.call(this.children,t)}}function OS(){return this.firstElementChild}function MS(t){return this.select(t==null?OS:kS(typeof t=="function"?t:Lv(t)))}var CS=Array.prototype.filter;function AS(){return Array.from(this.children)}function IS(t){return function(){return CS.call(this.children,t)}}function DS(t){return this.selectAll(t==null?AS:IS(typeof t=="function"?t:Lv(t)))}function LS(t){typeof t!="function"&&(t=Dv(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&o.push(l);return new vn(r,this._parents)}function Rv(t){return new Array(t.length)}function RS(){return new vn(this._enter||this._groups.map(Rv),this._parents)}function bo(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}bo.prototype={constructor:bo,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function NS(t){return function(){return t}}function PS(t,e,n,r,i,s){for(var a=0,o,l=e.length,c=s.length;a<c;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new bo(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function VS(t,e,n,r,i,s,a){var o,l,c=new Map,u=e.length,f=s.length,h=new Array(u),d;for(o=0;o<u;++o)(l=e[o])&&(h[o]=d=a.call(l,l.__data__,o,e)+"",c.has(d)?i[o]=l:c.set(d,l));for(o=0;o<f;++o)d=a.call(t,s[o],o,s)+"",(l=c.get(d))?(r[o]=l,l.__data__=s[o],c.delete(d)):n[o]=new bo(t,s[o]);for(o=0;o<u;++o)(l=e[o])&&c.get(h[o])===l&&(i[o]=l)}function BS(t){return t.__data__}function US(t,e){if(!arguments.length)return Array.from(this,BS);var n=e?VS:PS,r=this._parents,i=this._groups;typeof t!="function"&&(t=NS(t));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],f=i[c],h=f.length,d=HS(t.call(u,u&&u.__data__,c,r)),m=d.length,v=o[c]=new Array(m),p=a[c]=new Array(m),g=l[c]=new Array(h);n(u,f,v,p,g,d,e);for(var _=0,b=0,y,w;_<m;++_)if(y=v[_]){for(_>=b&&(b=_+1);!(w=p[b])&&++b<m;);y._next=w||null}}return a=new vn(a,r),a._enter=o,a._exit=l,a}function HS(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function zS(){return new vn(this._exit||this._groups.map(Rv),this._parents)}function FS(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function GS(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var c=n[l],u=r[l],f=c.length,h=o[l]=new Array(f),d,m=0;m<f;++m)(d=c[m]||u[m])&&(h[m]=d);for(;l<i;++l)o[l]=n[l];return new vn(o,this._parents)}function qS(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function jS(t){t||(t=WS);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),c,u=0;u<o;++u)(c=a[u])&&(l[u]=c);l.sort(e)}return new vn(i,this._parents).order()}function WS(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function YS(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ZS(){return Array.from(this)}function XS(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function KS(){let t=0;for(const e of this)++t;return t}function QS(){return!this.node()}function JS(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function ex(t){return function(){this.removeAttribute(t)}}function tx(t){return function(){this.removeAttributeNS(t.space,t.local)}}function nx(t,e){return function(){this.setAttribute(t,e)}}function rx(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ix(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function sx(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ax(t,e){var n=vl(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?tx:ex:typeof e=="function"?n.local?sx:ix:n.local?rx:nx)(n,e))}function Nv(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ox(t){return function(){this.style.removeProperty(t)}}function lx(t,e,n){return function(){this.style.setProperty(t,e,n)}}function cx(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ux(t,e,n){return arguments.length>1?this.each((e==null?ox:typeof e=="function"?cx:lx)(t,e,n??"")):Ki(this.node(),t)}function Ki(t,e){return t.style.getPropertyValue(e)||Nv(t).getComputedStyle(t,null).getPropertyValue(e)}function fx(t){return function(){delete this[t]}}function hx(t,e){return function(){this[t]=e}}function dx(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function mx(t,e){return arguments.length>1?this.each((e==null?fx:typeof e=="function"?dx:hx)(t,e)):this.node()[t]}function Pv(t){return t.trim().split(/^|\s+/)}function af(t){return t.classList||new Vv(t)}function Vv(t){this._node=t,this._names=Pv(t.getAttribute("class")||"")}Vv.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Bv(t,e){for(var n=af(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Uv(t,e){for(var n=af(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function px(t){return function(){Bv(this,t)}}function gx(t){return function(){Uv(this,t)}}function vx(t,e){return function(){(e.apply(this,arguments)?Bv:Uv)(this,t)}}function _x(t,e){var n=Pv(t+"");if(arguments.length<2){for(var r=af(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?vx:e?px:gx)(n,e))}function bx(){this.textContent=""}function yx(t){return function(){this.textContent=t}}function wx(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ex(t){return arguments.length?this.each(t==null?bx:(typeof t=="function"?wx:yx)(t)):this.node().textContent}function $x(){this.innerHTML=""}function Tx(t){return function(){this.innerHTML=t}}function Sx(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function xx(t){return arguments.length?this.each(t==null?$x:(typeof t=="function"?Sx:Tx)(t)):this.node().innerHTML}function kx(){this.nextSibling&&this.parentNode.appendChild(this)}function Ox(){return this.each(kx)}function Mx(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Cx(){return this.each(Mx)}function Ax(t){var e=typeof t=="function"?t:Av(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ix(){return null}function Dx(t,e){var n=typeof t=="function"?t:Av(t),r=e==null?Ix:typeof e=="function"?e:sf(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Lx(){var t=this.parentNode;t&&t.removeChild(this)}function Rx(){return this.each(Lx)}function Nx(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Px(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Vx(t){return this.select(t?Px:Nx)}function Bx(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ux(t){return function(e){t.call(this,e,this.__data__)}}function Hx(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function zx(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function Fx(t,e,n){return function(){var r=this.__on,i,s=Ux(e);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Gx(t,e,n){var r=Hx(t+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,u;l<c;++l)for(i=0,u=o[l];i<s;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(o=e?Fx:zx,i=0;i<s;++i)this.each(o(r[i],e,n));return this}function Hv(t,e,n){var r=Nv(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function qx(t,e){return function(){return Hv(this,t,e)}}function jx(t,e){return function(){return Hv(this,t,e.apply(this,arguments))}}function Wx(t,e){return this.each((typeof e=="function"?jx:qx)(t,e))}function*Yx(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var zv=[null];function vn(t,e){this._groups=t,this._parents=e}function ha(){return new vn([[document.documentElement]],zv)}function Zx(){return this}vn.prototype=ha.prototype={constructor:vn,select:wS,selectAll:SS,selectChild:MS,selectChildren:DS,filter:LS,data:US,enter:RS,exit:zS,join:FS,merge:GS,selection:Zx,order:qS,sort:jS,call:YS,nodes:ZS,node:XS,size:KS,empty:QS,each:JS,attr:ax,style:ux,property:mx,classed:_x,text:Ex,html:xx,raise:Ox,lower:Cx,append:Ax,insert:Dx,remove:Rx,clone:Vx,datum:Bx,on:Gx,dispatch:Wx,[Symbol.iterator]:Yx};function ee(t){return typeof t=="string"?new vn([[document.querySelector(t)]],[document.documentElement]):new vn([[t]],zv)}function Xx(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ni(t,e){if(t=Xx(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Vc={capture:!0,passive:!1};function Bc(t){t.preventDefault(),t.stopImmediatePropagation()}function Kx(t){var e=t.document.documentElement,n=ee(t).on("dragstart.drag",Bc,Vc);"onselectstart"in e?n.on("selectstart.drag",Bc,Vc):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Qx(t,e){var n=t.document.documentElement,r=ee(t).on("dragstart.drag",null);e&&(r.on("click.drag",Bc,Vc),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function of(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Fv(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function da(){}var Xs=.7,yo=1/Xs,Wi="\\s*([+-]?\\d+)\\s*",Ks="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jx=/^#([0-9a-f]{3,8})$/,ek=new RegExp(`^rgb\\(${Wi},${Wi},${Wi}\\)$`),tk=new RegExp(`^rgb\\(${Zn},${Zn},${Zn}\\)$`),nk=new RegExp(`^rgba\\(${Wi},${Wi},${Wi},${Ks}\\)$`),rk=new RegExp(`^rgba\\(${Zn},${Zn},${Zn},${Ks}\\)$`),ik=new RegExp(`^hsl\\(${Ks},${Zn},${Zn}\\)$`),sk=new RegExp(`^hsla\\(${Ks},${Zn},${Zn},${Ks}\\)$`),jd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};of(da,pr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Wd,formatHex:Wd,formatHex8:ak,formatHsl:ok,formatRgb:Yd,toString:Yd});function Wd(){return this.rgb().formatHex()}function ak(){return this.rgb().formatHex8()}function ok(){return Gv(this).formatHsl()}function Yd(){return this.rgb().formatRgb()}function pr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Jx.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Zd(e):n===3?new an(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Oa(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Oa(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ek.exec(t))?new an(e[1],e[2],e[3],1):(e=tk.exec(t))?new an(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=nk.exec(t))?Oa(e[1],e[2],e[3],e[4]):(e=rk.exec(t))?Oa(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ik.exec(t))?Qd(e[1],e[2]/100,e[3]/100,1):(e=sk.exec(t))?Qd(e[1],e[2]/100,e[3]/100,e[4]):jd.hasOwnProperty(t)?Zd(jd[t]):t==="transparent"?new an(NaN,NaN,NaN,0):null}function Zd(t){return new an(t>>16&255,t>>8&255,t&255,1)}function Oa(t,e,n,r){return r<=0&&(t=e=n=NaN),new an(t,e,n,r)}function lk(t){return t instanceof da||(t=pr(t)),t?(t=t.rgb(),new an(t.r,t.g,t.b,t.opacity)):new an}function Uc(t,e,n,r){return arguments.length===1?lk(t):new an(t,e,n,r??1)}function an(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}of(an,Uc,Fv(da,{brighter(t){return t=t==null?yo:Math.pow(yo,t),new an(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Xs:Math.pow(Xs,t),new an(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new an(Jr(this.r),Jr(this.g),Jr(this.b),wo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xd,formatHex:Xd,formatHex8:ck,formatRgb:Kd,toString:Kd}));function Xd(){return`#${Zr(this.r)}${Zr(this.g)}${Zr(this.b)}`}function ck(){return`#${Zr(this.r)}${Zr(this.g)}${Zr(this.b)}${Zr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kd(){const t=wo(this.opacity);return`${t===1?"rgb(":"rgba("}${Jr(this.r)}, ${Jr(this.g)}, ${Jr(this.b)}${t===1?")":`, ${t})`}`}function wo(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Jr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Zr(t){return t=Jr(t),(t<16?"0":"")+t.toString(16)}function Qd(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Cn(t,e,n,r)}function Gv(t){if(t instanceof Cn)return new Cn(t.h,t.s,t.l,t.opacity);if(t instanceof da||(t=pr(t)),!t)return new Cn;if(t instanceof Cn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new Cn(a,o,l,t.opacity)}function lf(t,e,n,r){return arguments.length===1?Gv(t):new Cn(t,e,n,r??1)}function Cn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}of(Cn,lf,Fv(da,{brighter(t){return t=t==null?yo:Math.pow(yo,t),new Cn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Xs:Math.pow(Xs,t),new Cn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new an(Xl(t>=240?t-240:t+120,i,r),Xl(t,i,r),Xl(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Cn(Jd(this.h),Ma(this.s),Ma(this.l),wo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=wo(this.opacity);return`${t===1?"hsl(":"hsla("}${Jd(this.h)}, ${Ma(this.s)*100}%, ${Ma(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Jd(t){return t=(t||0)%360,t<0?t+360:t}function Ma(t){return Math.max(0,Math.min(1,t||0))}function Xl(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const cf=t=>()=>t;function uk(t,e){return function(n){return t+n*e}}function fk(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function hk(t){return(t=+t)==1?qv:function(e,n){return n-e?fk(e,n,t):cf(isNaN(e)?n:e)}}function qv(t,e){var n=e-t;return n?uk(t,n):cf(isNaN(t)?e:t)}const Eo=function t(e){var n=hk(e);function r(i,s){var a=n((i=Uc(i)).r,(s=Uc(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=qv(i.opacity,s.opacity);return function(u){return i.r=a(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function dk(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function mk(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function pk(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=ma(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function gk(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function mn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function vk(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=ma(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Hc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kl=new RegExp(Hc.source,"g");function _k(t){return function(){return t}}function bk(t){return function(e){return t(e)+""}}function jv(t,e){var n=Hc.lastIndex=Kl.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=Hc.exec(t))&&(i=Kl.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:mn(r,i)})),n=Kl.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?bk(l[0].x):_k(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)o[(f=l[u]).i]=f.x(c);return o.join("")})}function ma(t,e){var n=typeof e,r;return e==null||n==="boolean"?cf(e):(n==="number"?mn:n==="string"?(r=pr(e))?(e=r,Eo):jv:e instanceof pr?Eo:e instanceof Date?gk:mk(e)?dk:Array.isArray(e)?pk:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?vk:mn)(t,e)}function Wv(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var em=180/Math.PI,zc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Yv(t,e,n,r,i,s){var a,o,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*em,skewX:Math.atan(l)*em,scaleX:a,scaleY:o}}var Ca;function yk(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?zc:Yv(e.a,e.b,e.c,e.d,e.e,e.f)}function wk(t){return t==null||(Ca||(Ca=document.createElementNS("http://www.w3.org/2000/svg","g")),Ca.setAttribute("transform",t),!(t=Ca.transform.baseVal.consolidate()))?zc:(t=t.matrix,Yv(t.a,t.b,t.c,t.d,t.e,t.f))}function Zv(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,f,h,d,m){if(c!==f||u!==h){var v=d.push("translate(",null,e,null,n);m.push({i:v-4,x:mn(c,f)},{i:v-2,x:mn(u,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function a(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:mn(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function o(c,u,f,h){c!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:mn(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,h,d,m){if(c!==f||u!==h){var v=d.push(i(d)+"scale(",null,",",null,")");m.push({i:v-4,x:mn(c,f)},{i:v-2,x:mn(u,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=t(c),u=t(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,h),a(c.rotate,u.rotate,f,h),o(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(d){for(var m=-1,v=h.length,p;++m<v;)f[(p=h[m]).i]=p.x(d);return f.join("")}}}var Ek=Zv(yk,"px, ","px)","deg)"),$k=Zv(wk,", ",")",")");function Tk(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}var Qi=0,Ss=0,gs=0,Xv=1e3,$o,xs,To=0,ri=0,_l=0,Qs=typeof performance=="object"&&performance.now?performance:Date,Kv=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function uf(){return ri||(Kv(Sk),ri=Qs.now()+_l)}function Sk(){ri=0}function So(){this._call=this._time=this._next=null}So.prototype=Qv.prototype={constructor:So,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?uf():+n)+(e==null?0:+e),!this._next&&xs!==this&&(xs?xs._next=this:$o=this,xs=this),this._call=t,this._time=n,Fc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fc())}};function Qv(t,e,n){var r=new So;return r.restart(t,e,n),r}function xk(){uf(),++Qi;for(var t=$o,e;t;)(e=ri-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Qi}function tm(){ri=(To=Qs.now())+_l,Qi=Ss=0;try{xk()}finally{Qi=0,Ok(),ri=0}}function kk(){var t=Qs.now(),e=t-To;e>Xv&&(_l-=e,To=t)}function Ok(){for(var t,e=$o,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:$o=n);xs=t,Fc(r)}function Fc(t){if(!Qi){Ss&&(Ss=clearTimeout(Ss));var e=t-ri;e>24?(t<1/0&&(Ss=setTimeout(tm,t-Qs.now()-_l)),gs&&(gs=clearInterval(gs))):(gs||(To=Qs.now(),gs=setInterval(kk,Xv)),Qi=1,Kv(tm))}}function nm(t,e,n){var r=new So;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Mk=rf("start","end","cancel","interrupt"),Ck=[],Jv=0,rm=1,Gc=2,Ka=3,im=4,qc=5,Qa=6;function bl(t,e,n,r,i,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Ak(t,n,{name:e,index:r,group:i,on:Mk,tween:Ck,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Jv})}function ff(t,e){var n=Bn(t,e);if(n.state>Jv)throw new Error("too late; already scheduled");return n}function Jn(t,e){var n=Bn(t,e);if(n.state>Ka)throw new Error("too late; already running");return n}function Bn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ak(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Qv(s,0,n.time);function s(c){n.state=rm,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var u,f,h,d;if(n.state!==rm)return l();for(u in r)if(d=r[u],d.name===n.name){if(d.state===Ka)return nm(a);d.state===im?(d.state=Qa,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<e&&(d.state=Qa,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[u])}if(nm(function(){n.state===Ka&&(n.state=im,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=Gc,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Gc){for(n.state=Ka,i=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function o(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=qc,1),f=-1,h=i.length;++f<h;)i[f].call(t,u);n.state===qc&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Qa,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function jc(t,e){var n=t.__transition,r,i,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){s=!1;continue}i=r.state>Gc&&r.state<qc,r.state=Qa,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}s&&delete t.__transition}}function Ik(t){return this.each(function(){jc(this,t)})}function Dk(t,e){var n,r;return function(){var i=Jn(this,t),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Lk(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Jn(this,t),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=o;break}l===c&&i.push(o)}s.tween=i}}function Rk(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Bn(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Dk:Lk)(n,t,e))}function hf(t,e,n){var r=t._id;return t.each(function(){var i=Jn(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Bn(i,r).value[e]}}function e1(t,e){var n;return(typeof e=="number"?mn:e instanceof pr?Eo:(n=pr(e))?(e=n,Eo):jv)(t,e)}function Nk(t){return function(){this.removeAttribute(t)}}function Pk(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Vk(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===r?s:s=e(r=a,n)}}function Bk(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?s:s=e(r=a,n)}}function Uk(t,e,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o)))}}function Hk(t,e,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o)))}}function zk(t,e){var n=vl(t),r=n==="transform"?$k:e1;return this.attrTween(t,typeof e=="function"?(n.local?Hk:Uk)(n,r,hf(this,"attr."+t,e)):e==null?(n.local?Pk:Nk)(n):(n.local?Bk:Vk)(n,r,e))}function Fk(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Gk(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function qk(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Gk(t,s)),n}return i._value=e,i}function jk(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Fk(t,s)),n}return i._value=e,i}function Wk(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=vl(t);return this.tween(n,(r.local?qk:jk)(r,e))}function Yk(t,e){return function(){ff(this,t).delay=+e.apply(this,arguments)}}function Zk(t,e){return e=+e,function(){ff(this,t).delay=e}}function Xk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Yk:Zk)(e,t)):Bn(this.node(),e).delay}function Kk(t,e){return function(){Jn(this,t).duration=+e.apply(this,arguments)}}function Qk(t,e){return e=+e,function(){Jn(this,t).duration=e}}function Jk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Kk:Qk)(e,t)):Bn(this.node(),e).duration}function eO(t,e){if(typeof e!="function")throw new Error;return function(){Jn(this,t).ease=e}}function tO(t){var e=this._id;return arguments.length?this.each(eO(e,t)):Bn(this.node(),e).ease}function nO(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Jn(this,t).ease=n}}function rO(t){if(typeof t!="function")throw new Error;return this.each(nO(this._id,t))}function iO(t){typeof t!="function"&&(t=Dv(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&o.push(l);return new gr(r,this._parents,this._name,this._id)}function sO(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=e[o],c=n[o],u=l.length,f=a[o]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;o<r;++o)a[o]=e[o];return new gr(a,this._parents,this._name,this._id)}function aO(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function oO(t,e,n){var r,i,s=aO(e)?ff:Jn;return function(){var a=s(this,t),o=a.on;o!==r&&(i=(r=o).copy()).on(e,n),a.on=i}}function lO(t,e){var n=this._id;return arguments.length<2?Bn(this.node(),n).on.on(t):this.each(oO(n,t,e))}function cO(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function uO(){return this.on("end.remove",cO(this._id))}function fO(t){var e=this._name,n=this._id;typeof t!="function"&&(t=sf(t));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],l=o.length,c=s[a]=new Array(l),u,f,h=0;h<l;++h)(u=o[h])&&(f=t.call(u,u.__data__,h,o))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,bl(c[h],e,n,h,c,Bn(u,n)));return new gr(s,this._parents,e,n)}function hO(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Iv(t));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var l=r[o],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=t.call(u,u.__data__,f,l),d,m=Bn(u,n),v=0,p=h.length;v<p;++v)(d=h[v])&&bl(d,e,n,v,h,m);s.push(h),a.push(u)}return new gr(s,a,e,n)}var dO=ha.prototype.constructor;function mO(){return new dO(this._groups,this._parents)}function pO(t,e){var n,r,i;return function(){var s=Ki(this,t),a=(this.style.removeProperty(t),Ki(this,t));return s===a?null:s===n&&a===r?i:i=e(n=s,r=a)}}function t1(t){return function(){this.style.removeProperty(t)}}function gO(t,e,n){var r,i=n+"",s;return function(){var a=Ki(this,t);return a===i?null:a===r?s:s=e(r=a,n)}}function vO(t,e,n){var r,i,s;return function(){var a=Ki(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),Ki(this,t))),a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o))}}function _O(t,e){var n,r,i,s="style."+e,a="end."+s,o;return function(){var l=Jn(this,t),c=l.on,u=l.value[s]==null?o||(o=t1(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(a,i=u),l.on=r}}function bO(t,e,n){var r=(t+="")=="transform"?Ek:e1;return e==null?this.styleTween(t,pO(t,r)).on("end.style."+t,t1(t)):typeof e=="function"?this.styleTween(t,vO(t,r,hf(this,"style."+t,e))).each(_O(this._id,t)):this.styleTween(t,gO(t,r,e),n).on("end.style."+t,null)}function yO(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function wO(t,e,n){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&yO(t,a,n)),r}return s._value=e,s}function EO(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,wO(t,e,n??""))}function $O(t){return function(){this.textContent=t}}function TO(t){return function(){var e=t(this);this.textContent=e??""}}function SO(t){return this.tween("text",typeof t=="function"?TO(hf(this,"text",t)):$O(t==null?"":t+""))}function xO(t){return function(e){this.textContent=t.call(this,e)}}function kO(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&xO(i)),e}return r._value=t,r}function OO(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,kO(t))}function MO(){for(var t=this._name,e=this._id,n=n1(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)if(l=a[c]){var u=Bn(l,e);bl(l,t,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new gr(r,this._parents,t,n)}function CO(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--i===0&&s()}};n.each(function(){var c=Jn(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),c.on=e}),i===0&&s()})}var AO=0;function gr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function n1(){return++AO}var nr=ha.prototype;gr.prototype={constructor:gr,select:fO,selectAll:hO,selectChild:nr.selectChild,selectChildren:nr.selectChildren,filter:iO,merge:sO,selection:mO,transition:MO,call:nr.call,nodes:nr.nodes,node:nr.node,size:nr.size,empty:nr.empty,each:nr.each,on:lO,attr:zk,attrTween:Wk,style:bO,styleTween:EO,text:SO,textTween:OO,remove:uO,tween:Rk,delay:Xk,duration:Jk,ease:tO,easeVarying:rO,end:CO,[Symbol.iterator]:nr[Symbol.iterator]};const IO=t=>+t;function r1(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var DO={time:null,delay:0,duration:250,ease:r1};function LO(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function RO(t){var e,n;t instanceof gr?(e=t._id,t=t._name):(e=n1(),(n=DO).time=uf(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&bl(l,t,e,c,a,n||LO(l,e));return new gr(r,this._parents,t,e)}ha.prototype.interrupt=Ik;ha.prototype.transition=RO;const Ql=t=>()=>t;function NO(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function PO(t){t.stopImmediatePropagation()}function Jl(t){t.preventDefault(),t.stopImmediatePropagation()}var sm={name:"drag"},ec={name:"space"},Ti={name:"handle"},Si={name:"center"};const{abs:am,max:Zt,min:Xt}=Math;function om(t){return[+t[0],+t[1]]}function lm(t){return[om(t[0]),om(t[1])]}var Ja={name:"x",handles:["w","e"].map(xo),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},tc={name:"y",handles:["n","s"].map(xo),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},rr={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},cm={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},um={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},VO={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},BO={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function xo(t){return{type:t}}function UO(t){return!t.ctrlKey&&!t.button}function HO(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function zO(){return navigator.maxTouchPoints||"ontouchstart"in this}function nc(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function FO(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function i1(){return GO(Ja)}function GO(t){var e=HO,n=UO,r=zO,i=!0,s=rf("start","brush","end"),a=6,o;function l(p){var g=p.property("__brush",v).selectAll(".overlay").data([xo("overlay")]);g.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",rr.overlay).merge(g).each(function(){var b=nc(this).extent;ee(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),p.selectAll(".selection").data([xo("selection")]).enter().append("rect").attr("class","selection").attr("cursor",rr.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var _=p.selectAll(".handle").data(t.handles,function(b){return b.type});_.exit().remove(),_.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return rr[b.type]}),p.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(p,g,_){p.tween?p.on("start.brush",function(b){u(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){u(this,arguments).end(b)}).tween("brush",function(){var b=this,y=b.__brush,w=u(b,arguments),$=y.selection,k=t.input(typeof g=="function"?g.apply(this,arguments):g,y.extent),C=ma($,k);function V(I){y.selection=I===1&&k===null?null:C(I),c.call(b),w.brush()}return $!==null&&k!==null?V:V(1)}):p.each(function(){var b=this,y=arguments,w=b.__brush,$=t.input(typeof g=="function"?g.apply(b,y):g,w.extent),k=u(b,y).beforestart();jc(b),w.selection=$===null?null:$,c.call(b),k.start(_).brush(_).end(_)})},l.clear=function(p,g){l.move(p,null,g)};function c(){var p=ee(this),g=nc(this).selection;g?(p.selectAll(".selection").style("display",null).attr("x",g[0][0]).attr("y",g[0][1]).attr("width",g[1][0]-g[0][0]).attr("height",g[1][1]-g[0][1]),p.selectAll(".handle").style("display",null).attr("x",function(_){return _.type[_.type.length-1]==="e"?g[1][0]-a/2:g[0][0]-a/2}).attr("y",function(_){return _.type[0]==="s"?g[1][1]-a/2:g[0][1]-a/2}).attr("width",function(_){return _.type==="n"||_.type==="s"?g[1][0]-g[0][0]+a:a}).attr("height",function(_){return _.type==="e"||_.type==="w"?g[1][1]-g[0][1]+a:a})):p.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(p,g,_){var b=p.__brush.emitter;return b&&(!_||!b.clean)?b:new f(p,g,_)}function f(p,g,_){this.that=p,this.args=g,this.state=p.__brush,this.active=0,this.clean=_}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(p,g){return this.starting?(this.starting=!1,this.emit("start",p,g)):this.emit("brush",p),this},brush:function(p,g){return this.emit("brush",p,g),this},end:function(p,g){return--this.active===0&&(delete this.state.emitter,this.emit("end",p,g)),this},emit:function(p,g,_){var b=ee(this.that).datum();s.call(p,this.that,new NO(p,{sourceEvent:g,target:l,selection:t.output(this.state.selection),mode:_,dispatch:s}),b)}};function h(p){if(o&&!p.touches||!n.apply(this,arguments))return;var g=this,_=p.target.__data__.type,b=(i&&p.metaKey?_="overlay":_)==="selection"?sm:i&&p.altKey?Si:Ti,y=t===tc?null:VO[_],w=t===Ja?null:BO[_],$=nc(g),k=$.extent,C=$.selection,V=k[0][0],I,S,N=k[0][1],O,R,T=k[1][0],F,G,q=k[1][1],Y,te,ie=0,pe=0,Re,ce=y&&w&&i&&p.shiftKey,ge,Ue,oe=Array.from(p.touches||[p],_e=>{const De=_e.identifier;return _e=ni(_e,g),_e.point0=_e.slice(),_e.identifier=De,_e});jc(g);var it=u(g,arguments,!0).beforestart();if(_==="overlay"){C&&(Re=!0);const _e=[oe[0],oe[1]||oe[0]];$.selection=C=[[I=t===tc?V:Xt(_e[0][0],_e[1][0]),O=t===Ja?N:Xt(_e[0][1],_e[1][1])],[F=t===tc?T:Zt(_e[0][0],_e[1][0]),Y=t===Ja?q:Zt(_e[0][1],_e[1][1])]],oe.length>1&&lt(p)}else I=C[0][0],O=C[0][1],F=C[1][0],Y=C[1][1];S=I,R=O,G=F,te=Y;var ve=ee(g).attr("pointer-events","none"),ke=ve.selectAll(".overlay").attr("cursor",rr[_]);if(p.touches)it.moved=le,it.ended=We;else{var Ie=ee(p.view).on("mousemove.brush",le,!0).on("mouseup.brush",We,!0);i&&Ie.on("keydown.brush",de,!0).on("keyup.brush",Be,!0),Kx(p.view)}c.call(g),it.start(p,b.name);function le(_e){for(const De of _e.changedTouches||[_e])for(const Ce of oe)Ce.identifier===De.identifier&&(Ce.cur=ni(De,g));if(ce&&!ge&&!Ue&&oe.length===1){const De=oe[0];am(De.cur[0]-De[0])>am(De.cur[1]-De[1])?Ue=!0:ge=!0}for(const De of oe)De.cur&&(De[0]=De.cur[0],De[1]=De.cur[1]);Re=!0,Jl(_e),lt(_e)}function lt(_e){const De=oe[0],Ce=De.point0;var ue;switch(ie=De[0]-Ce[0],pe=De[1]-Ce[1],b){case ec:case sm:{y&&(ie=Zt(V-I,Xt(T-F,ie)),S=I+ie,G=F+ie),w&&(pe=Zt(N-O,Xt(q-Y,pe)),R=O+pe,te=Y+pe);break}case Ti:{oe[1]?(y&&(S=Zt(V,Xt(T,oe[0][0])),G=Zt(V,Xt(T,oe[1][0])),y=1),w&&(R=Zt(N,Xt(q,oe[0][1])),te=Zt(N,Xt(q,oe[1][1])),w=1)):(y<0?(ie=Zt(V-I,Xt(T-I,ie)),S=I+ie,G=F):y>0&&(ie=Zt(V-F,Xt(T-F,ie)),S=I,G=F+ie),w<0?(pe=Zt(N-O,Xt(q-O,pe)),R=O+pe,te=Y):w>0&&(pe=Zt(N-Y,Xt(q-Y,pe)),R=O,te=Y+pe));break}case Si:{y&&(S=Zt(V,Xt(T,I-ie*y)),G=Zt(V,Xt(T,F+ie*y))),w&&(R=Zt(N,Xt(q,O-pe*w)),te=Zt(N,Xt(q,Y+pe*w)));break}}G<S&&(y*=-1,ue=I,I=F,F=ue,ue=S,S=G,G=ue,_ in cm&&ke.attr("cursor",rr[_=cm[_]])),te<R&&(w*=-1,ue=O,O=Y,Y=ue,ue=R,R=te,te=ue,_ in um&&ke.attr("cursor",rr[_=um[_]])),$.selection&&(C=$.selection),ge&&(S=C[0][0],G=C[1][0]),Ue&&(R=C[0][1],te=C[1][1]),(C[0][0]!==S||C[0][1]!==R||C[1][0]!==G||C[1][1]!==te)&&($.selection=[[S,R],[G,te]],c.call(g),it.brush(_e,b.name))}function We(_e){if(PO(_e),_e.touches){if(_e.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else Qx(_e.view,Re),Ie.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ve.attr("pointer-events","all"),ke.attr("cursor",rr.overlay),$.selection&&(C=$.selection),FO(C)&&($.selection=null,c.call(g)),it.end(_e,b.name)}function de(_e){switch(_e.keyCode){case 16:{ce=y&&w;break}case 18:{b===Ti&&(y&&(F=G-ie*y,I=S+ie*y),w&&(Y=te-pe*w,O=R+pe*w),b=Si,lt(_e));break}case 32:{(b===Ti||b===Si)&&(y<0?F=G-ie:y>0&&(I=S-ie),w<0?Y=te-pe:w>0&&(O=R-pe),b=ec,ke.attr("cursor",rr.selection),lt(_e));break}default:return}Jl(_e)}function Be(_e){switch(_e.keyCode){case 16:{ce&&(ge=Ue=ce=!1,lt(_e));break}case 18:{b===Si&&(y<0?F=G:y>0&&(I=S),w<0?Y=te:w>0&&(O=R),b=Ti,lt(_e));break}case 32:{b===ec&&(_e.altKey?(y&&(F=G-ie*y,I=S+ie*y),w&&(Y=te-pe*w,O=R+pe*w),b=Si):(y<0?F=G:y>0&&(I=S),w<0?Y=te:w>0&&(O=R),b=Ti),ke.attr("cursor",rr[_]),lt(_e));break}default:return}Jl(_e)}}function d(p){u(this,arguments).moved(p)}function m(p){u(this,arguments).ended(p)}function v(){var p=this.__brush||{selection:null};return p.extent=lm(e.apply(this,arguments)),p.dim=t,p}return l.extent=function(p){return arguments.length?(e=typeof p=="function"?p:Ql(lm(p)),l):e},l.filter=function(p){return arguments.length?(n=typeof p=="function"?p:Ql(!!p),l):n},l.touchable=function(p){return arguments.length?(r=typeof p=="function"?p:Ql(!!p),l):r},l.handleSize=function(p){return arguments.length?(a=+p,l):a},l.keyModifiers=function(p){return arguments.length?(i=!!p,l):i},l.on=function(){var p=s.on.apply(s,arguments);return p===s?l:p},l}const Wc=Math.PI,Yc=2*Wc,zr=1e-6,qO=Yc-zr;function s1(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function jO(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return s1;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let WO=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?s1:jO(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-e,c=i-n,u=a-e,f=o-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>zr)if(!(Math.abs(f*l-c*u)>zr)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-a,m=i-o,v=l*l+c*c,p=d*d+m*m,g=Math.sqrt(v),_=Math.sqrt(h),b=s*Math.tan((Wc-Math.acos((v+h-p)/(2*g*_)))/2),y=b/_,w=b/g;Math.abs(y-1)>zr&&this._append`L${e+y*u},${n+y*f}`,this._append`A${s},${s},0,0,${+(f*d>u*m)},${this._x1=e+w*l},${this._y1=n+w*c}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=e+o,u=n+l,f=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>zr||Math.abs(this._y1-u)>zr)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%Yc+Yc),h>qO?this._append`A${r},${r},0,1,${f},${e-o},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:h>zr&&this._append`A${r},${r},0,${+(h>=Wc)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function YO(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ko(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ji(t){return t=ko(Math.abs(t)),t?t[1]:NaN}function ZO(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function XO(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var KO=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Js(t){if(!(e=KO.exec(t)))throw new Error("invalid format: "+t);var e;return new df({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Js.prototype=df.prototype;function df(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}df.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function QO(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var a1;function JO(t,e){var n=ko(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(a1=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+ko(t,Math.max(0,e+s-1))[0]}function fm(t,e){var n=ko(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const hm={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:YO,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>fm(t*100,e),r:fm,s:JO,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function dm(t){return t}var mm=Array.prototype.map,pm=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function eM(t){var e=t.grouping===void 0||t.thousands===void 0?dm:ZO(mm.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?dm:XO(mm.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"â":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=Js(f);var h=f.fill,d=f.align,m=f.sign,v=f.symbol,p=f.zero,g=f.width,_=f.comma,b=f.precision,y=f.trim,w=f.type;w==="n"?(_=!0,w="g"):hm[w]||(b===void 0&&(b=12),y=!0,w="g"),(p||h==="0"&&d==="=")&&(p=!0,h="0",d="=");var $=v==="$"?n:v==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",k=v==="$"?r:/[%p]/.test(w)?a:"",C=hm[w],V=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function I(S){var N=$,O=k,R,T,F;if(w==="c")O=C(S)+O,S="";else{S=+S;var G=S<0||1/S<0;if(S=isNaN(S)?l:C(Math.abs(S),b),y&&(S=QO(S)),G&&+S==0&&m!=="+"&&(G=!1),N=(G?m==="("?m:o:m==="-"||m==="("?"":m)+N,O=(w==="s"?pm[8+a1/3]:"")+O+(G&&m==="("?")":""),V){for(R=-1,T=S.length;++R<T;)if(F=S.charCodeAt(R),48>F||F>57){O=(F===46?i+S.slice(R+1):S.slice(R))+O,S=S.slice(0,R);break}}}_&&!p&&(S=e(S,1/0));var q=N.length+S.length+O.length,Y=q<g?new Array(g-q+1).join(h):"";switch(_&&p&&(S=e(Y+S,Y.length?g-O.length:1/0),Y=""),d){case"<":S=N+S+O+Y;break;case"=":S=N+Y+S+O;break;case"^":S=Y.slice(0,q=Y.length>>1)+N+S+O+Y.slice(q);break;default:S=Y+N+S+O;break}return s(S)}return I.toString=function(){return f+""},I}function u(f,h){var d=c((f=Js(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(Ji(h)/3)))*3,v=Math.pow(10,-m),p=pm[8+m/3];return function(g){return d(v*g)+p}}return{format:c,formatPrefix:u}}var Aa,mf,o1;tM({thousands:",",grouping:[3],currency:["$",""]});function tM(t){return Aa=eM(t),mf=Aa.format,o1=Aa.formatPrefix,Aa}function nM(t){return Math.max(0,-Ji(Math.abs(t)))}function rM(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ji(e)/3)))*3-Ji(Math.abs(t)))}function iM(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ji(e)-Ji(t))+1}var ut=1e-6,l1=1e-12,Qe=Math.PI,on=Qe/2,gm=Qe/4,_n=Qe*2,en=180/Qe,Dt=Qe/180,ft=Math.abs,c1=Math.atan,ii=Math.atan2,ht=Math.cos,sM=Math.exp,aM=Math.log,ot=Math.sin,Ir=Math.sign||function(t){return t>0?1:t<0?-1:0},Pn=Math.sqrt,oM=Math.tan;function lM(t){return t>1?0:t<-1?Qe:Math.acos(t)}function vr(t){return t>1?on:t<-1?-on:Math.asin(t)}function En(){}function Oo(t,e){t&&_m.hasOwnProperty(t.type)&&_m[t.type](t,e)}var vm={Feature:function(t,e){Oo(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Oo(n[r].geometry,e)}},_m={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Zc(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Zc(n[r],e,0)},Polygon:function(t,e){bm(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)bm(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Oo(n[r],e)}};function Zc(t,e,n){var r=-1,i=t.length-n,s;for(e.lineStart();++r<i;)s=t[r],e.point(s[0],s[1],s[2]);e.lineEnd()}function bm(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Zc(t[n],e,1);e.polygonEnd()}function Ii(t,e){t&&vm.hasOwnProperty(t.type)?vm[t.type](t,e):Oo(t,e)}function Xc(t){return[ii(t[1],t[0]),vr(t[2])]}function es(t){var e=t[0],n=t[1],r=ht(n);return[r*ht(e),r*ot(e),ot(n)]}function Ia(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Mo(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function rc(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Da(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Kc(t){var e=Pn(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Qc(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function Jc(t,e){return ft(t)>Qe&&(t-=Math.round(t/_n)*_n),[t,e]}Jc.invert=Jc;function u1(t,e,n){return(t%=_n)?e||n?Qc(wm(t),Em(e,n)):wm(t):e||n?Em(e,n):Jc}function ym(t){return function(e,n){return e+=t,ft(e)>Qe&&(e-=Math.round(e/_n)*_n),[e,n]}}function wm(t){var e=ym(t);return e.invert=ym(-t),e}function Em(t,e){var n=ht(t),r=ot(t),i=ht(e),s=ot(e);function a(o,l){var c=ht(l),u=ht(o)*c,f=ot(o)*c,h=ot(l),d=h*n+u*r;return[ii(f*i-d*s,u*n-h*r),vr(d*i+f*s)]}return a.invert=function(o,l){var c=ht(l),u=ht(o)*c,f=ot(o)*c,h=ot(l),d=h*i-f*s;return[ii(f*i+h*s,u*n+d*r),vr(d*n-u*r)]},a}function cM(t){t=u1(t[0]*Dt,t[1]*Dt,t.length>2?t[2]*Dt:0);function e(n){return n=t(n[0]*Dt,n[1]*Dt),n[0]*=en,n[1]*=en,n}return e.invert=function(n){return n=t.invert(n[0]*Dt,n[1]*Dt),n[0]*=en,n[1]*=en,n},e}function uM(t,e,n,r,i,s){if(n){var a=ht(e),o=ot(e),l=r*n;i==null?(i=e+r*_n,s=e-l/2):(i=$m(a,i),s=$m(a,s),(r>0?i<s:i>s)&&(i+=r*_n));for(var c,u=i;r>0?u>s:u<s;u-=l)c=Xc([a,-o*ht(u),-o*ot(u)]),t.point(c[0],c[1])}}function $m(t,e){e=es(e),e[0]-=t,Kc(e);var n=lM(-e[1]);return((-e[2]<0?-n:n)+_n-ut)%_n}function f1(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:En,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function eo(t,e){return ft(t[0]-e[0])<ut&&ft(t[1]-e[1])<ut}function La(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function h1(t,e,n,r,i){var s=[],a=[],o,l;if(t.forEach(function(m){if(!((v=m.length-1)<=0)){var v,p=m[0],g=m[v],_;if(eo(p,g)){if(!p[2]&&!g[2]){for(i.lineStart(),o=0;o<v;++o)i.point((p=m[o])[0],p[1]);i.lineEnd();return}g[0]+=2*ut}s.push(_=new La(p,m,null,!0)),a.push(_.o=new La(p,null,_,!1)),s.push(_=new La(g,m,null,!1)),a.push(_.o=new La(g,null,_,!0))}}),!!s.length){for(a.sort(e),Tm(s),Tm(a),o=0,l=a.length;o<l;++o)a[o].e=n=!n;for(var c=s[0],u,f;;){for(var h=c,d=!0;h.v;)if((h=h.n)===c)return;u=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,l=u.length;o<l;++o)i.point((f=u[o])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(u=h.p.z,o=u.length-1;o>=0;--o)i.point((f=u[o])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,u=h.z,d=!d}while(!h.v);i.lineEnd()}}}function Tm(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function ic(t){return ft(t[0])<=Qe?t[0]:Ir(t[0])*((ft(t[0])+Qe)%_n-Qe)}function fM(t,e){var n=ic(e),r=e[1],i=ot(r),s=[ot(n),-ht(n),0],a=0,o=0,l=new ei;i===1?r=on+ut:i===-1&&(r=-on-ut);for(var c=0,u=t.length;c<u;++c)if(h=(f=t[c]).length)for(var f,h,d=f[h-1],m=ic(d),v=d[1]/2+gm,p=ot(v),g=ht(v),_=0;_<h;++_,m=y,p=$,g=k,d=b){var b=f[_],y=ic(b),w=b[1]/2+gm,$=ot(w),k=ht(w),C=y-m,V=C>=0?1:-1,I=V*C,S=I>Qe,N=p*$;if(l.add(ii(N*V*ot(I),g*k+N*ht(I))),a+=S?C+V*_n:C,S^m>=n^y>=n){var O=Mo(es(d),es(b));Kc(O);var R=Mo(s,O);Kc(R);var T=(S^C>=0?-1:1)*vr(R[2]);(r>T||r===T&&(O[0]||O[1]))&&(o+=S^C>=0?1:-1)}}return(a<-ut||a<ut&&l<-l1)^o&1}function d1(t,e,n,r){return function(i){var s=e(i),a=f1(),o=e(a),l=!1,c,u,f,h={point:d,lineStart:v,lineEnd:p,polygonStart:function(){h.point=g,h.lineStart=_,h.lineEnd=b,u=[],c=[]},polygonEnd:function(){h.point=d,h.lineStart=v,h.lineEnd=p,u=Mv(u);var y=fM(c,r);u.length?(l||(i.polygonStart(),l=!0),h1(u,dM,y,n,i)):y&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),u=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(y,w){t(y,w)&&i.point(y,w)}function m(y,w){s.point(y,w)}function v(){h.point=m,s.lineStart()}function p(){h.point=d,s.lineEnd()}function g(y,w){f.push([y,w]),o.point(y,w)}function _(){o.lineStart(),f=[]}function b(){g(f[0][0],f[0][1]),o.lineEnd();var y=o.clean(),w=a.result(),$,k=w.length,C,V,I;if(f.pop(),c.push(f),f=null,!!k){if(y&1){if(V=w[0],(C=V.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),$=0;$<C;++$)i.point((I=V[$])[0],I[1]);i.lineEnd()}return}k>1&&y&2&&w.push(w.pop().concat(w.shift())),u.push(w.filter(hM))}}return h}}function hM(t){return t.length>1}function dM(t,e){return((t=t.x)[0]<0?t[1]-on-ut:on-t[1])-((e=e.x)[0]<0?e[1]-on-ut:on-e[1])}const Sm=d1(function(){return!0},mM,gM,[-Qe,-on]);function mM(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(s,a){var o=s>0?Qe:-Qe,l=ft(s-e);ft(l-Qe)<ut?(t.point(e,n=(n+a)/2>0?on:-on),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(o,n),t.point(s,n),i=0):r!==o&&l>=Qe&&(ft(e-r)<ut&&(e-=r*ut),ft(s-o)<ut&&(s-=o*ut),n=pM(e,n,s,a),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(o,n),i=0),t.point(e=s,n=a),r=o},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function pM(t,e,n,r){var i,s,a=ot(t-n);return ft(a)>ut?c1((ot(e)*(s=ht(r))*ot(n)-ot(r)*(i=ht(e))*ot(t))/(i*s*a)):(e+r)/2}function gM(t,e,n,r){var i;if(t==null)i=n*on,r.point(-Qe,i),r.point(0,i),r.point(Qe,i),r.point(Qe,0),r.point(Qe,-i),r.point(0,-i),r.point(-Qe,-i),r.point(-Qe,0),r.point(-Qe,i);else if(ft(t[0]-e[0])>ut){var s=t[0]<e[0]?Qe:-Qe;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(e[0],e[1])}function vM(t){var e=ht(t),n=2*Dt,r=e>0,i=ft(e)>ut;function s(u,f,h,d){uM(d,t,n,h,u,f)}function a(u,f){return ht(u)*ht(f)>e}function o(u){var f,h,d,m,v;return{lineStart:function(){m=d=!1,v=1},point:function(p,g){var _=[p,g],b,y=a(p,g),w=r?y?0:c(p,g):y?c(p+(p<0?Qe:-Qe),g):0;if(!f&&(m=d=y)&&u.lineStart(),y!==d&&(b=l(f,_),(!b||eo(f,b)||eo(_,b))&&(_[2]=1)),y!==d)v=0,y?(u.lineStart(),b=l(_,f),u.point(b[0],b[1])):(b=l(f,_),u.point(b[0],b[1],2),u.lineEnd()),f=b;else if(i&&f&&r^y){var $;!(w&h)&&($=l(_,f,!0))&&(v=0,r?(u.lineStart(),u.point($[0][0],$[0][1]),u.point($[1][0],$[1][1]),u.lineEnd()):(u.point($[1][0],$[1][1]),u.lineEnd(),u.lineStart(),u.point($[0][0],$[0][1],3)))}y&&(!f||!eo(f,_))&&u.point(_[0],_[1]),f=_,d=y,h=w},lineEnd:function(){d&&u.lineEnd(),f=null},clean:function(){return v|(m&&d)<<1}}}function l(u,f,h){var d=es(u),m=es(f),v=[1,0,0],p=Mo(d,m),g=Ia(p,p),_=p[0],b=g-_*_;if(!b)return!h&&u;var y=e*g/b,w=-e*_/b,$=Mo(v,p),k=Da(v,y),C=Da(p,w);rc(k,C);var V=$,I=Ia(k,V),S=Ia(V,V),N=I*I-S*(Ia(k,k)-1);if(!(N<0)){var O=Pn(N),R=Da(V,(-I-O)/S);if(rc(R,k),R=Xc(R),!h)return R;var T=u[0],F=f[0],G=u[1],q=f[1],Y;F<T&&(Y=T,T=F,F=Y);var te=F-T,ie=ft(te-Qe)<ut,pe=ie||te<ut;if(!ie&&q<G&&(Y=G,G=q,q=Y),pe?ie?G+q>0^R[1]<(ft(R[0]-T)<ut?G:q):G<=R[1]&&R[1]<=q:te>Qe^(T<=R[0]&&R[0]<=F)){var Re=Da(V,(-I+O)/S);return rc(Re,k),[R,Xc(Re)]}}}function c(u,f){var h=r?t:Qe-t,d=0;return u<-h?d|=1:u>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return d1(a,o,s,r?[0,-t]:[-Qe,t-Qe])}function _M(t,e,n,r,i,s){var a=t[0],o=t[1],l=e[0],c=e[1],u=0,f=1,h=l-a,d=c-o,m;if(m=n-a,!(!h&&m>0)){if(m/=h,h<0){if(m<u)return;m<f&&(f=m)}else if(h>0){if(m>f)return;m>u&&(u=m)}if(m=i-a,!(!h&&m<0)){if(m/=h,h<0){if(m>f)return;m>u&&(u=m)}else if(h>0){if(m<u)return;m<f&&(f=m)}if(m=r-o,!(!d&&m>0)){if(m/=d,d<0){if(m<u)return;m<f&&(f=m)}else if(d>0){if(m>f)return;m>u&&(u=m)}if(m=s-o,!(!d&&m<0)){if(m/=d,d<0){if(m>f)return;m>u&&(u=m)}else if(d>0){if(m<u)return;m<f&&(f=m)}return u>0&&(t[0]=a+u*h,t[1]=o+u*d),f<1&&(e[0]=a+f*h,e[1]=o+f*d),!0}}}}}var ks=1e9,Ra=-ks;function bM(t,e,n,r){function i(c,u){return t<=c&&c<=n&&e<=u&&u<=r}function s(c,u,f,h){var d=0,m=0;if(c==null||(d=a(c,f))!==(m=a(u,f))||l(c,u)<0^f>0)do h.point(d===0||d===3?t:n,d>1?r:e);while((d=(d+f+4)%4)!==m);else h.point(u[0],u[1])}function a(c,u){return ft(c[0]-t)<ut?u>0?0:3:ft(c[0]-n)<ut?u>0?2:1:ft(c[1]-e)<ut?u>0?1:0:u>0?3:2}function o(c,u){return l(c.x,u.x)}function l(c,u){var f=a(c,1),h=a(u,1);return f!==h?f-h:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=f1(),h,d,m,v,p,g,_,b,y,w,$,k={point:C,lineStart:N,lineEnd:O,polygonStart:I,polygonEnd:S};function C(T,F){i(T,F)&&u.point(T,F)}function V(){for(var T=0,F=0,G=d.length;F<G;++F)for(var q=d[F],Y=1,te=q.length,ie=q[0],pe,Re,ce=ie[0],ge=ie[1];Y<te;++Y)pe=ce,Re=ge,ie=q[Y],ce=ie[0],ge=ie[1],Re<=r?ge>r&&(ce-pe)*(r-Re)>(ge-Re)*(t-pe)&&++T:ge<=r&&(ce-pe)*(r-Re)<(ge-Re)*(t-pe)&&--T;return T}function I(){u=f,h=[],d=[],$=!0}function S(){var T=V(),F=$&&T,G=(h=Mv(h)).length;(F||G)&&(c.polygonStart(),F&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),G&&h1(h,o,T,s,c),c.polygonEnd()),u=c,h=d=m=null}function N(){k.point=R,d&&d.push(m=[]),w=!0,y=!1,_=b=NaN}function O(){h&&(R(v,p),g&&y&&f.rejoin(),h.push(f.result())),k.point=C,y&&u.lineEnd()}function R(T,F){var G=i(T,F);if(d&&m.push([T,F]),w)v=T,p=F,g=G,w=!1,G&&(u.lineStart(),u.point(T,F));else if(G&&y)u.point(T,F);else{var q=[_=Math.max(Ra,Math.min(ks,_)),b=Math.max(Ra,Math.min(ks,b))],Y=[T=Math.max(Ra,Math.min(ks,T)),F=Math.max(Ra,Math.min(ks,F))];_M(q,Y,t,e,n,r)?(y||(u.lineStart(),u.point(q[0],q[1])),u.point(Y[0],Y[1]),G||u.lineEnd(),$=!1):G&&(u.lineStart(),u.point(T,F),$=!1)}_=T,b=F,y=G}return k}}const eu=t=>t;var sc=new ei,tu=new ei,m1,p1,nu,ru,Ar={point:En,lineStart:En,lineEnd:En,polygonStart:function(){Ar.lineStart=yM,Ar.lineEnd=EM},polygonEnd:function(){Ar.lineStart=Ar.lineEnd=Ar.point=En,sc.add(ft(tu)),tu=new ei},result:function(){var t=sc/2;return sc=new ei,t}};function yM(){Ar.point=wM}function wM(t,e){Ar.point=g1,m1=nu=t,p1=ru=e}function g1(t,e){tu.add(ru*t-nu*e),nu=t,ru=e}function EM(){g1(m1,p1)}const xm=Ar;var ts=1/0,Co=ts,ea=-ts,Ao=ea,$M={point:TM,lineStart:En,lineEnd:En,polygonStart:En,polygonEnd:En,result:function(){var t=[[ts,Co],[ea,Ao]];return ea=Ao=-(Co=ts=1/0),t}};function TM(t,e){t<ts&&(ts=t),t>ea&&(ea=t),e<Co&&(Co=e),e>Ao&&(Ao=e)}const Io=$M;var iu=0,su=0,Os=0,Do=0,Lo=0,Bi=0,au=0,ou=0,Ms=0,v1,_1,jn,Wn,An={point:si,lineStart:km,lineEnd:Om,polygonStart:function(){An.lineStart=kM,An.lineEnd=OM},polygonEnd:function(){An.point=si,An.lineStart=km,An.lineEnd=Om},result:function(){var t=Ms?[au/Ms,ou/Ms]:Bi?[Do/Bi,Lo/Bi]:Os?[iu/Os,su/Os]:[NaN,NaN];return iu=su=Os=Do=Lo=Bi=au=ou=Ms=0,t}};function si(t,e){iu+=t,su+=e,++Os}function km(){An.point=SM}function SM(t,e){An.point=xM,si(jn=t,Wn=e)}function xM(t,e){var n=t-jn,r=e-Wn,i=Pn(n*n+r*r);Do+=i*(jn+t)/2,Lo+=i*(Wn+e)/2,Bi+=i,si(jn=t,Wn=e)}function Om(){An.point=si}function kM(){An.point=MM}function OM(){b1(v1,_1)}function MM(t,e){An.point=b1,si(v1=jn=t,_1=Wn=e)}function b1(t,e){var n=t-jn,r=e-Wn,i=Pn(n*n+r*r);Do+=i*(jn+t)/2,Lo+=i*(Wn+e)/2,Bi+=i,i=Wn*t-jn*e,au+=i*(jn+t),ou+=i*(Wn+e),Ms+=i*3,si(jn=t,Wn=e)}const Mm=An;function y1(t){this._context=t}y1.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,_n);break}}},result:En};var lu=new ei,ac,w1,E1,Cs,As,Ro={point:En,lineStart:function(){Ro.point=CM},lineEnd:function(){ac&&$1(w1,E1),Ro.point=En},polygonStart:function(){ac=!0},polygonEnd:function(){ac=null},result:function(){var t=+lu;return lu=new ei,t}};function CM(t,e){Ro.point=$1,w1=Cs=t,E1=As=e}function $1(t,e){Cs-=t,As-=e,lu.add(Pn(Cs*Cs+As*As)),Cs=t,As=e}const Cm=Ro;let Am,No,Im,Dm;class Lm{constructor(e){this._append=e==null?T1:AM(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==Im||this._append!==No){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Im=r,No=this._append,Dm=this._,this._=i}this._+=Dm;break}}}result(){const e=this._;return this._="",e.length?e:null}}function T1(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function AM(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return T1;if(e!==Am){const n=10**e;Am=e,No=function(i){let s=1;this._+=i[0];for(const a=i.length;s<a;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return No}function IM(t,e){let n=3,r=4.5,i,s;function a(o){return o&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Ii(o,i(s))),s.result()}return a.area=function(o){return Ii(o,i(xm)),xm.result()},a.measure=function(o){return Ii(o,i(Cm)),Cm.result()},a.bounds=function(o){return Ii(o,i(Io)),Io.result()},a.centroid=function(o){return Ii(o,i(Mm)),Mm.result()},a.projection=function(o){return arguments.length?(i=o==null?(t=null,eu):(t=o).stream,a):t},a.context=function(o){return arguments.length?(s=o==null?(e=null,new Lm(n)):new y1(e=o),typeof r!="function"&&s.pointRadius(r),a):e},a.pointRadius=function(o){return arguments.length?(r=typeof o=="function"?o:(s.pointRadius(+o),+o),a):r},a.digits=function(o){if(!arguments.length)return n;if(o==null)n=null;else{const l=Math.floor(o);if(!(l>=0))throw new RangeError(`invalid digits: ${o}`);n=l}return e===null&&(s=new Lm(n)),a},a.projection(t).digits(n).context(e)}function pf(t){return function(e){var n=new cu;for(var r in t)n[r]=t[r];return n.stream=e,n}}function cu(){}cu.prototype={constructor:cu,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function gf(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Ii(n,t.stream(Io)),e(Io.result()),r!=null&&t.clipExtent(r),t}function S1(t,e,n){return gf(t,function(r){var i=e[1][0]-e[0][0],s=e[1][1]-e[0][1],a=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),o=+e[0][0]+(i-a*(r[1][0]+r[0][0]))/2,l=+e[0][1]+(s-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([o,l])},n)}function DM(t,e,n){return S1(t,[[0,0],e],n)}function LM(t,e,n){return gf(t,function(r){var i=+e,s=i/(r[1][0]-r[0][0]),a=(i-s*(r[1][0]+r[0][0]))/2,o=-s*r[0][1];t.scale(150*s).translate([a,o])},n)}function RM(t,e,n){return gf(t,function(r){var i=+e,s=i/(r[1][1]-r[0][1]),a=-s*r[0][0],o=(i-s*(r[1][1]+r[0][1]))/2;t.scale(150*s).translate([a,o])},n)}var Rm=16,NM=ht(30*Dt);function Nm(t,e){return+e?VM(t,e):PM(t)}function PM(t){return pf({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function VM(t,e){function n(r,i,s,a,o,l,c,u,f,h,d,m,v,p){var g=c-r,_=u-i,b=g*g+_*_;if(b>4*e&&v--){var y=a+h,w=o+d,$=l+m,k=Pn(y*y+w*w+$*$),C=vr($/=k),V=ft(ft($)-1)<ut||ft(s-f)<ut?(s+f)/2:ii(w,y),I=t(V,C),S=I[0],N=I[1],O=S-r,R=N-i,T=_*O-g*R;(T*T/b>e||ft((g*O+_*R)/b-.5)>.3||a*h+o*d+l*m<NM)&&(n(r,i,s,a,o,l,S,N,V,y/=k,w/=k,$,v,p),p.point(S,N),n(S,N,V,y,w,$,c,u,f,h,d,m,v,p))}}return function(r){var i,s,a,o,l,c,u,f,h,d,m,v,p={point:g,lineStart:_,lineEnd:y,polygonStart:function(){r.polygonStart(),p.lineStart=w},polygonEnd:function(){r.polygonEnd(),p.lineStart=_}};function g(C,V){C=t(C,V),r.point(C[0],C[1])}function _(){f=NaN,p.point=b,r.lineStart()}function b(C,V){var I=es([C,V]),S=t(C,V);n(f,h,u,d,m,v,f=S[0],h=S[1],u=C,d=I[0],m=I[1],v=I[2],Rm,r),r.point(f,h)}function y(){p.point=g,r.lineEnd()}function w(){_(),p.point=$,p.lineEnd=k}function $(C,V){b(i=C,V),s=f,a=h,o=d,l=m,c=v,p.point=b}function k(){n(f,h,u,d,m,v,s,a,i,o,l,c,Rm,r),p.lineEnd=y,y()}return p}}var BM=pf({point:function(t,e){this.stream.point(t*Dt,e*Dt)}});function UM(t){return pf({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function HM(t,e,n,r,i){function s(a,o){return a*=r,o*=i,[e+t*a,n-t*o]}return s.invert=function(a,o){return[(a-e)/t*r,(n-o)/t*i]},s}function Pm(t,e,n,r,i,s){if(!s)return HM(t,e,n,r,i);var a=ht(s),o=ot(s),l=a*t,c=o*t,u=a/t,f=o/t,h=(o*n-a*e)/t,d=(o*e+a*n)/t;function m(v,p){return v*=r,p*=i,[l*v-c*p+e,n-c*v-l*p]}return m.invert=function(v,p){return[r*(u*v-f*p+h),i*(d-f*v-u*p)]},m}function yl(t){return x1(function(){return t})()}function x1(t){var e,n=150,r=480,i=250,s=0,a=0,o=0,l=0,c=0,u,f=0,h=1,d=1,m=null,v=Sm,p=null,g,_,b,y=eu,w=.5,$,k,C,V,I;function S(T){return C(T[0]*Dt,T[1]*Dt)}function N(T){return T=C.invert(T[0],T[1]),T&&[T[0]*en,T[1]*en]}S.stream=function(T){return V&&I===T?V:V=BM(UM(u)(v($(y(I=T)))))},S.preclip=function(T){return arguments.length?(v=T,m=void 0,R()):v},S.postclip=function(T){return arguments.length?(y=T,p=g=_=b=null,R()):y},S.clipAngle=function(T){return arguments.length?(v=+T?vM(m=T*Dt):(m=null,Sm),R()):m*en},S.clipExtent=function(T){return arguments.length?(y=T==null?(p=g=_=b=null,eu):bM(p=+T[0][0],g=+T[0][1],_=+T[1][0],b=+T[1][1]),R()):p==null?null:[[p,g],[_,b]]},S.scale=function(T){return arguments.length?(n=+T,O()):n},S.translate=function(T){return arguments.length?(r=+T[0],i=+T[1],O()):[r,i]},S.center=function(T){return arguments.length?(s=T[0]%360*Dt,a=T[1]%360*Dt,O()):[s*en,a*en]},S.rotate=function(T){return arguments.length?(o=T[0]%360*Dt,l=T[1]%360*Dt,c=T.length>2?T[2]%360*Dt:0,O()):[o*en,l*en,c*en]},S.angle=function(T){return arguments.length?(f=T%360*Dt,O()):f*en},S.reflectX=function(T){return arguments.length?(h=T?-1:1,O()):h<0},S.reflectY=function(T){return arguments.length?(d=T?-1:1,O()):d<0},S.precision=function(T){return arguments.length?($=Nm(k,w=T*T),R()):Pn(w)},S.fitExtent=function(T,F){return S1(S,T,F)},S.fitSize=function(T,F){return DM(S,T,F)},S.fitWidth=function(T,F){return LM(S,T,F)},S.fitHeight=function(T,F){return RM(S,T,F)};function O(){var T=Pm(n,0,0,h,d,f).apply(null,e(s,a)),F=Pm(n,r-T[0],i-T[1],h,d,f);return u=u1(o,l,c),k=Qc(e,F),C=Qc(u,k),$=Nm(k,w),R()}function R(){return V=I=null,S}return function(){return e=t.apply(this,arguments),S.invert=e.invert&&N,O()}}function k1(t){var e=0,n=Qe/3,r=x1(t),i=r(e,n);return i.parallels=function(s){return arguments.length?r(e=s[0]*Dt,n=s[1]*Dt):[e*en,n*en]},i}function zM(t){var e=ht(t);function n(r,i){return[r*e,ot(i)/e]}return n.invert=function(r,i){return[r/e,vr(i*e)]},n}function FM(t,e){var n=ot(t),r=(n+ot(e))/2;if(ft(r)<ut)return zM(t);var i=1+n*(2*r-n),s=Pn(i)/r;function a(o,l){var c=Pn(i-2*r*ot(l))/r;return[c*ot(o*=r),s-c*ht(o)]}return a.invert=function(o,l){var c=s-l,u=ii(o,ft(c))*Ir(c);return c*r<0&&(u-=Qe*Ir(o)*Ir(c)),[u/r,vr((i-(o*o+c*c)*r*r)/(2*r))]},a}function O1(){return k1(FM).scale(155.424).center([0,33.6442])}function GM(){return O1().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function vf(t,e){return[t,aM(oM((on+e)/2))]}vf.invert=function(t,e){return[t,2*c1(sM(e))-on]};function qM(){return jM(vf).scale(961/_n)}function jM(t){var e=yl(t),n=e.center,r=e.scale,i=e.translate,s=e.clipExtent,a=null,o,l,c;e.scale=function(f){return arguments.length?(r(f),u()):r()},e.translate=function(f){return arguments.length?(i(f),u()):i()},e.center=function(f){return arguments.length?(n(f),u()):n()},e.clipExtent=function(f){return arguments.length?(f==null?a=o=l=c=null:(a=+f[0][0],o=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):a==null?null:[[a,o],[l,c]]};function u(){var f=Qe*r(),h=e(cM(e.rotate()).invert([0,0]));return s(a==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:t===vf?[[Math.max(h[0]-f,a),o],[Math.min(h[0]+f,l),c]]:[[a,Math.max(h[1]-f,o)],[l,Math.min(h[1]+f,c)]])}return u()}function Po(t,e){return[t,e]}Po.invert=Po;function WM(){return yl(Po).scale(152.63)}function YM(t,e){var n=ht(t),r=t===e?ot(t):(n-ht(e))/(e-t),i=n/r+t;if(ft(r)<ut)return Po;function s(a,o){var l=i-o,c=r*a;return[l*ot(c),i-l*ht(c)]}return s.invert=function(a,o){var l=i-o,c=ii(a,ft(l))*Ir(l);return l*r<0&&(c-=Qe*Ir(a)*Ir(l)),[c/r,i-Ir(r)*Pn(a*a+l*l)]},s}function ZM(){return k1(YM).scale(131.154).center([0,13.9389])}var Hs=1.340264,zs=-.081106,Fs=893e-6,Gs=.003796,Vo=Pn(3)/2,XM=12;function M1(t,e){var n=vr(Vo*ot(e)),r=n*n,i=r*r*r;return[t*ht(n)/(Vo*(Hs+3*zs*r+i*(7*Fs+9*Gs*r))),n*(Hs+zs*r+i*(Fs+Gs*r))]}M1.invert=function(t,e){for(var n=e,r=n*n,i=r*r*r,s=0,a,o,l;s<XM&&(o=n*(Hs+zs*r+i*(Fs+Gs*r))-e,l=Hs+3*zs*r+i*(7*Fs+9*Gs*r),n-=a=o/l,r=n*n,i=r*r*r,!(ft(a)<l1));++s);return[Vo*t*(Hs+3*zs*r+i*(7*Fs+9*Gs*r))/ht(n),vr(ot(n)/Vo)]};function KM(){return yl(M1).scale(177.158)}function C1(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),e*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}C1.invert=function(t,e){var n=e,r=25,i;do{var s=n*n,a=s*s;n-=i=(n*(1.007226+s*(.015085+a*(-.044475+.028874*s-.005916*a)))-e)/(1.007226+s*(.015085*3+a*(-.044475*7+.028874*9*s-.005916*11*a)))}while(ft(i)>ut&&--r>0);return[t/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function QM(){return yl(C1).scale(175.295)}function JM(t,e){return t.parent===e.parent?1:2}function eC(t){return t.reduce(tC,0)/t.length}function tC(t,e){return t+e.x}function nC(t){return 1+t.reduce(rC,0)}function rC(t,e){return Math.max(t,e.y)}function iC(t){for(var e;e=t.children;)t=e[0];return t}function sC(t){for(var e;e=t.children;)t=e[e.length-1];return t}function aC(){var t=JM,e=1,n=1,r=!1;function i(s){var a,o=0;s.eachAfter(function(h){var d=h.children;d?(h.x=eC(d),h.y=nC(d)):(h.x=a?o+=t(h,a):0,h.y=0,a=h)});var l=iC(s),c=sC(s),u=l.x-t(l,c)/2,f=c.x+t(c,l)/2;return s.eachAfter(r?function(h){h.x=(h.x-s.x)*e,h.y=(s.y-h.y)*n}:function(h){h.x=(h.x-u)/(f-u)*e,h.y=(1-(s.y?h.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(t=s,i):t},i.size=function(s){return arguments.length?(r=!1,e=+s[0],n=+s[1],i):r?null:[e,n]},i.nodeSize=function(s){return arguments.length?(r=!0,e=+s[0],n=+s[1],i):r?[e,n]:null},i}function oC(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function lC(){return this.eachAfter(oC)}function cC(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function uC(t,e){for(var n=this,r=[n],i,s,a=-1;n=r.pop();)if(t.call(e,n,++a,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function fC(t,e){for(var n=this,r=[n],i=[],s,a,o,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(a=0,o=s.length;a<o;++a)r.push(s[a]);for(;n=i.pop();)t.call(e,n,++l,this);return this}function hC(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function dC(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function mC(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function pC(t){for(var e=this,n=gC(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function gC(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function vC(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function _C(){return Array.from(this)}function bC(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function yC(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*wC(){var t=this,e,n=[t],r,i,s;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function pa(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=TC)):e===void 0&&(e=$C);for(var n=new ta(t),r,i=[n],s,a,o,l;r=i.pop();)if((a=e(r.data))&&(l=(a=Array.from(a)).length))for(r.children=a,o=l-1;o>=0;--o)i.push(s=a[o]=new ta(a[o])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(xC)}function EC(){return pa(this).eachBefore(SC)}function $C(t){return t.children}function TC(t){return Array.isArray(t)?t[1]:null}function SC(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function xC(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function ta(t){this.data=t,this.depth=this.height=0,this.parent=null}ta.prototype=pa.prototype={constructor:ta,count:lC,each:cC,eachAfter:fC,eachBefore:uC,find:hC,sum:dC,sort:mC,path:pC,ancestors:vC,descendants:_C,leaves:bC,links:yC,copy:EC,[Symbol.iterator]:wC};function kC(t){return t==null?null:A1(t)}function A1(t){if(typeof t!="function")throw new Error;return t}function Wr(){return 0}function Di(t){return function(){return t}}const OC=1664525,MC=1013904223,Vm=4294967296;function CC(){let t=1;return()=>(t=(OC*t+MC)%Vm)/Vm}function AC(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function IC(t,e){let n=t.length,r,i;for(;n;)i=e()*n--|0,r=t[n],t[n]=t[i],t[i]=r;return t}function DC(t,e){for(var n=0,r=(t=IC(Array.from(t),e)).length,i=[],s,a;n<r;)s=t[n],a&&I1(a,s)?++n:(a=RC(i=LC(i,s)),n=0);return a}function LC(t,e){var n,r;if(oc(e,t))return[e];for(n=0;n<t.length;++n)if(Na(e,t[n])&&oc(Is(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Na(Is(t[n],t[r]),e)&&Na(Is(t[n],e),t[r])&&Na(Is(t[r],e),t[n])&&oc(D1(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Na(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function I1(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function oc(t,e){for(var n=0;n<e.length;++n)if(!I1(t,e[n]))return!1;return!0}function RC(t){switch(t.length){case 1:return NC(t[0]);case 2:return Is(t[0],t[1]);case 3:return D1(t[0],t[1],t[2])}}function NC(t){return{x:t.x,y:t.y,r:t.r}}function Is(t,e){var n=t.x,r=t.y,i=t.r,s=e.x,a=e.y,o=e.r,l=s-n,c=a-r,u=o-i,f=Math.sqrt(l*l+c*c);return{x:(n+s+l/f*u)/2,y:(r+a+c/f*u)/2,r:(f+i+o)/2}}function D1(t,e,n){var r=t.x,i=t.y,s=t.r,a=e.x,o=e.y,l=e.r,c=n.x,u=n.y,f=n.r,h=r-a,d=r-c,m=i-o,v=i-u,p=l-s,g=f-s,_=r*r+i*i-s*s,b=_-a*a-o*o+l*l,y=_-c*c-u*u+f*f,w=d*m-h*v,$=(m*y-v*b)/(w*2)-r,k=(v*p-m*g)/w,C=(d*b-h*y)/(w*2)-i,V=(h*g-d*p)/w,I=k*k+V*V-1,S=2*(s+$*k+C*V),N=$*$+C*C-s*s,O=-(Math.abs(I)>1e-6?(S+Math.sqrt(S*S-4*I*N))/(2*I):N/S);return{x:r+$+k*O,y:i+C+V*O,r:O}}function Bm(t,e,n){var r=t.x-e.x,i,s,a=t.y-e.y,o,l,c=r*r+a*a;c?(s=e.r+n.r,s*=s,l=t.r+n.r,l*=l,s>l?(i=(c+l-s)/(2*c),o=Math.sqrt(Math.max(0,l/c-i*i)),n.x=t.x-i*r-o*a,n.y=t.y-i*a+o*r):(i=(c+s-l)/(2*c),o=Math.sqrt(Math.max(0,s/c-i*i)),n.x=e.x+i*r-o*a,n.y=e.y+i*a+o*r)):(n.x=e.x+n.r,n.y=e.y)}function Um(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Hm(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,s=(e.y*n.r+n.y*e.r)/r;return i*i+s*s}function Pa(t){this._=t,this.next=null,this.previous=null}function PC(t,e){if(!(s=(t=AC(t)).length))return 0;var n,r,i,s,a,o,l,c,u,f,h;if(n=t[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Bm(r,n,i=t[2]),n=new Pa(n),r=new Pa(r),i=new Pa(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<s;++l){Bm(n._,r._,i=t[l]),i=new Pa(i),c=r.next,u=n.previous,f=r._.r,h=n._.r;do if(f<=h){if(Um(c._,i._)){r=c,n.next=r,r.previous=n,--l;continue e}f+=c._.r,c=c.next}else{if(Um(u._,i._)){n=u,n.next=r,r.previous=n,--l;continue e}h+=u._.r,u=u.previous}while(c!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=Hm(n);(i=i.next)!==r;)(o=Hm(i))<a&&(n=i,a=o);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=DC(n,e),l=0;l<s;++l)n=t[l],n.x-=i.x,n.y-=i.y;return i.r}function VC(t){return Math.sqrt(t.value)}function BC(){var t=null,e=1,n=1,r=Wr;function i(s){const a=CC();return s.x=e/2,s.y=n/2,t?s.eachBefore(zm(t)).eachAfter(lc(r,.5,a)).eachBefore(Fm(1)):s.eachBefore(zm(VC)).eachAfter(lc(Wr,1,a)).eachAfter(lc(r,s.r/Math.min(e,n),a)).eachBefore(Fm(Math.min(e,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(t=kC(s),i):t},i.size=function(s){return arguments.length?(e=+s[0],n=+s[1],i):[e,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:Di(+s),i):r},i}function zm(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function lc(t,e,n){return function(r){if(i=r.children){var i,s,a=i.length,o=t(r)*e||0,l;if(o)for(s=0;s<a;++s)i[s].r+=o;if(l=PC(i,n),o)for(s=0;s<a;++s)i[s].r-=o;r.r=l+o}}}function Fm(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function UC(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function HC(t,e,n,r,i){for(var s=t.children,a,o=-1,l=s.length,c=t.value&&(r-e)/t.value;++o<l;)a=s[o],a.y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*c}function zC(t,e){return t.parent===e.parent?1:2}function cc(t){var e=t.children;return e?e[0]:t.t}function uc(t){var e=t.children;return e?e[e.length-1]:t.t}function FC(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function GC(t){for(var e=0,n=0,r=t.children,i=r.length,s;--i>=0;)s=r[i],s.z+=e,s.m+=e,e+=s.s+(n+=s.c)}function qC(t,e,n){return t.a.parent===e.parent?t.a:n}function to(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}to.prototype=Object.create(ta.prototype);function jC(t){for(var e=new to(t,0),n,r=[e],i,s,a,o;n=r.pop();)if(s=n._.children)for(n.children=new Array(o=s.length),a=o-1;a>=0;--a)r.push(i=n.children[a]=new to(s[a],a)),i.parent=n;return(e.parent=new to(null,0)).children=[e],e}function WC(){var t=zC,e=1,n=1,r=null;function i(c){var u=jC(c);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(a),r)c.eachBefore(l);else{var f=c,h=c,d=c;c.eachBefore(function(_){_.x<f.x&&(f=_),_.x>h.x&&(h=_),_.depth>d.depth&&(d=_)});var m=f===h?1:t(f,h)/2,v=m-f.x,p=e/(h.x+m+v),g=n/(d.depth||1);c.eachBefore(function(_){_.x=(_.x+v)*p,_.y=_.depth*g})}return c}function s(c){var u=c.children,f=c.parent.children,h=c.i?f[c.i-1]:null;if(u){GC(c);var d=(u[0].z+u[u.length-1].z)/2;h?(c.z=h.z+t(c._,h._),c.m=c.z-d):c.z=d}else h&&(c.z=h.z+t(c._,h._));c.parent.A=o(c,h,c.parent.A||f[0])}function a(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function o(c,u,f){if(u){for(var h=c,d=c,m=u,v=h.parent.children[0],p=h.m,g=d.m,_=m.m,b=v.m,y;m=uc(m),h=cc(h),m&&h;)v=cc(v),d=uc(d),d.a=c,y=m.z+_-h.z-p+t(m._,h._),y>0&&(FC(qC(m,c,f),c,y),p+=y,g+=y),_+=m.m,p+=h.m,b+=v.m,g+=d.m;m&&!uc(d)&&(d.t=m,d.m+=_-g),h&&!cc(v)&&(v.t=h,v.m+=p-b,f=c)}return f}function l(c){c.x*=e,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(t=c,i):t},i.size=function(c){return arguments.length?(r=!1,e=+c[0],n=+c[1],i):r?null:[e,n]},i.nodeSize=function(c){return arguments.length?(r=!0,e=+c[0],n=+c[1],i):r?[e,n]:null},i}function YC(t,e,n,r,i){for(var s=t.children,a,o=-1,l=s.length,c=t.value&&(i-n)/t.value;++o<l;)a=s[o],a.x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*c}var ZC=(1+Math.sqrt(5))/2;function XC(t,e,n,r,i,s){for(var a=[],o=e.children,l,c,u=0,f=0,h=o.length,d,m,v=e.value,p,g,_,b,y,w,$;u<h;){d=i-n,m=s-r;do p=o[f++].value;while(!p&&f<h);for(g=_=p,w=Math.max(m/d,d/m)/(v*t),$=p*p*w,y=Math.max(_/$,$/g);f<h;++f){if(p+=c=o[f].value,c<g&&(g=c),c>_&&(_=c),$=p*p*w,b=Math.max(_/$,$/g),b>y){p-=c;break}y=b}a.push(l={value:p,dice:d<m,children:o.slice(u,f)}),l.dice?HC(l,n,r,i,v?r+=m*p/v:s):YC(l,n,r,v?n+=d*p/v:i,s),v-=p,u=f}return a}const KC=function t(e){function n(r,i,s,a,o){XC(e,r,i,s,a,o)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(ZC);function QC(){var t=KC,e=!1,n=1,r=1,i=[0],s=Wr,a=Wr,o=Wr,l=Wr,c=Wr;function u(h){return h.x0=h.y0=0,h.x1=n,h.y1=r,h.eachBefore(f),i=[0],e&&h.eachBefore(UC),h}function f(h){var d=i[h.depth],m=h.x0+d,v=h.y0+d,p=h.x1-d,g=h.y1-d;p<m&&(m=p=(m+p)/2),g<v&&(v=g=(v+g)/2),h.x0=m,h.y0=v,h.x1=p,h.y1=g,h.children&&(d=i[h.depth+1]=s(h)/2,m+=c(h)-d,v+=a(h)-d,p-=o(h)-d,g-=l(h)-d,p<m&&(m=p=(m+p)/2),g<v&&(v=g=(v+g)/2),t(h,m,v,p,g))}return u.round=function(h){return arguments.length?(e=!!h,u):e},u.size=function(h){return arguments.length?(n=+h[0],r=+h[1],u):[n,r]},u.tile=function(h){return arguments.length?(t=A1(h),u):t},u.padding=function(h){return arguments.length?u.paddingInner(h).paddingOuter(h):u.paddingInner()},u.paddingInner=function(h){return arguments.length?(s=typeof h=="function"?h:Di(+h),u):s},u.paddingOuter=function(h){return arguments.length?u.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):u.paddingTop()},u.paddingTop=function(h){return arguments.length?(a=typeof h=="function"?h:Di(+h),u):a},u.paddingRight=function(h){return arguments.length?(o=typeof h=="function"?h:Di(+h),u):o},u.paddingBottom=function(h){return arguments.length?(l=typeof h=="function"?h:Di(+h),u):l},u.paddingLeft=function(h){return arguments.length?(c=typeof h=="function"?h:Di(+h),u):c},u}function hs(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Gm=Symbol("implicit");function wl(){var t=new Hd,e=[],n=[],r=Gm;function i(s){let a=t.get(s);if(a===void 0){if(r!==Gm)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Hd;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return wl(e,n).unknown(r)},hs.apply(i,arguments),i}function ga(){var t=wl().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,o=!1,l=0,c=0,u=.5;delete t.unknown;function f(){var h=e().length,d=i<r,m=d?i:r,v=d?r:i;s=(v-m)/Math.max(1,h-l+c*2),o&&(s=Math.floor(s)),m+=(v-m-s*(h-l))*u,a=s*(1-l),o&&(m=Math.round(m),a=Math.round(a));var p=aS(h).map(function(g){return m+s*g});return n(d?p.reverse():p)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,o=!0,f()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(h){return arguments.length?(o=!!h,f()):o},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),f()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},t.copy=function(){return ga(e(),[r,i]).round(o).paddingInner(l).paddingOuter(c).align(u)},hs.apply(f(),arguments)}function JC(t){return function(){return t}}function e3(t){return+t}var qm=[0,1];function Ui(t){return t}function uu(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:JC(isNaN(e)?NaN:.5)}function t3(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function n3(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=uu(i,r),s=n(a,s)):(r=uu(r,i),s=n(s,a)),function(o){return s(r(o))}}function r3(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=uu(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=tf(t,o,1,r)-1;return s[l](i[l](o))}}function _f(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function L1(){var t=qm,e=qm,n=ma,r,i,s,a=Ui,o,l,c;function u(){var h=Math.min(t.length,e.length);return a!==Ui&&(a=t3(t[0],t[h-1])),o=h>2?r3:n3,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=o(t.map(r),e,n)))(r(a(h)))}return f.invert=function(h){return a(i((c||(c=o(e,t.map(r),mn)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,e3),u()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=Wv,u()},f.clamp=function(h){return arguments.length?(a=h?!0:Ui,u()):a!==Ui},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return r=h,i=d,u()}}function R1(){return L1()(Ui,Ui)}function i3(t,e,n,r){var i=Rc(t,e,n),s;switch(r=Js(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=rM(i,a))&&(r.precision=s),o1(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=iM(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=nM(i))&&(r.precision=s-(r.type==="%")*2);break}}return mf(r)}function N1(t){var e=t.domain;return t.ticks=function(n){var r=e();return _o(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return i3(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l,c,u=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);u-- >0;){if(c=Xi(a,o,n),c===l)return r[i]=a,r[s]=o,e(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function Vn(){var t=R1();return t.copy=function(){return _f(t,Vn())},hs.apply(t,arguments),N1(t)}function P1(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}function jm(t){return Math.log(t)}function Wm(t){return Math.exp(t)}function s3(t){return-Math.log(-t)}function a3(t){return-Math.exp(-t)}function o3(t){return isFinite(t)?+("1e"+t):t<0?0:t}function l3(t){return t===10?o3:t===Math.E?Math.exp:e=>Math.pow(t,e)}function c3(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Ym(t){return(e,n)=>-t(-e,n)}function u3(t){const e=t(jm,Wm),n=e.domain;let r=10,i,s;function a(){return i=c3(r),s=l3(r),n()[0]<0?(i=Ym(i),s=Ym(s),t(s3,a3)):t(jm,Wm),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=i(c),d=i(u),m,v;const p=o==null?10:+o;let g=[];if(!(r%1)&&d-h<p){if(h=Math.floor(h),d=Math.ceil(d),c>0){for(;h<=d;++h)for(m=1;m<r;++m)if(v=h<0?m/s(-h):m*s(h),!(v<c)){if(v>u)break;g.push(v)}}else for(;h<=d;++h)for(m=r-1;m>=1;--m)if(v=h>0?m/s(-h):m*s(h),!(v<c)){if(v>u)break;g.push(v)}g.length*2<p&&(g=_o(c,u,p))}else g=_o(h,d,Math.min(d-h,p)).map(s);return f?g.reverse():g},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Js(l)).precision==null&&(l.trim=!0),l=mf(l)),o===1/0)return l;const c=Math.max(1,r*o/e.ticks().length);return u=>{let f=u/s(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},e.nice=()=>n(P1(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),e}function V1(){const t=u3(L1()).domain([1,10]);return t.copy=()=>_f(t,V1()).base(t.base()),hs.apply(t,arguments),t}function bf(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[tf(r,l,0,n)]:s}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return bf().domain([t,e]).range(i).unknown(s)},hs.apply(N1(a),arguments)}const fc=new Date,hc=new Date;function Ht(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let c;do l.push(c=new Date(+s)),e(s,o),t(s);while(c<s&&s<a);return l},i.filter=s=>Ht(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(fc.setTime(+s),hc.setTime(+a),t(fc),t(hc),Math.floor(n(fc,hc))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const Bo=Ht(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Bo.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ht(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Bo);Bo.range;const ur=1e3,$n=ur*60,fr=$n*60,_r=fr*24,yf=_r*7,Zm=_r*30,dc=_r*365,Hi=Ht(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ur)},(t,e)=>(e-t)/ur,t=>t.getUTCSeconds());Hi.range;const wf=Ht(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ur)},(t,e)=>{t.setTime(+t+e*$n)},(t,e)=>(e-t)/$n,t=>t.getMinutes());wf.range;const f3=Ht(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*$n)},(t,e)=>(e-t)/$n,t=>t.getUTCMinutes());f3.range;const Ef=Ht(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ur-t.getMinutes()*$n)},(t,e)=>{t.setTime(+t+e*fr)},(t,e)=>(e-t)/fr,t=>t.getHours());Ef.range;const h3=Ht(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*fr)},(t,e)=>(e-t)/fr,t=>t.getUTCHours());h3.range;const va=Ht(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*$n)/_r,t=>t.getDate()-1);va.range;const $f=Ht(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/_r,t=>t.getUTCDate()-1);$f.range;const d3=Ht(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/_r,t=>Math.floor(t/_r));d3.range;function pi(t){return Ht(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*$n)/yf)}const El=pi(0),Uo=pi(1),m3=pi(2),p3=pi(3),ns=pi(4),g3=pi(5),v3=pi(6);El.range;Uo.range;m3.range;p3.range;ns.range;g3.range;v3.range;function gi(t){return Ht(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/yf)}const B1=gi(0),Ho=gi(1),_3=gi(2),b3=gi(3),rs=gi(4),y3=gi(5),w3=gi(6);B1.range;Ho.range;_3.range;b3.range;rs.range;y3.range;w3.range;const Tf=Ht(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Tf.range;const E3=Ht(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());E3.range;const br=Ht(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());br.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ht(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});br.range;const ai=Ht(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ai.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ht(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});ai.range;function $3(t,e,n,r,i,s){const a=[[Hi,1,ur],[Hi,5,5*ur],[Hi,15,15*ur],[Hi,30,30*ur],[s,1,$n],[s,5,5*$n],[s,15,15*$n],[s,30,30*$n],[i,1,fr],[i,3,3*fr],[i,6,6*fr],[i,12,12*fr],[r,1,_r],[r,2,2*_r],[n,1,yf],[e,1,Zm],[e,3,3*Zm],[t,1,dc]];function o(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const d=f&&typeof f.range=="function"?f:l(c,u,f),m=d?d.range(c,+u+1):[];return h?m.reverse():m}function l(c,u,f){const h=Math.abs(u-c)/f,d=ef(([,,p])=>p).right(a,h);if(d===a.length)return t.every(Rc(c/dc,u/dc,f));if(d===0)return Bo.every(Math.max(Rc(c,u,f),1));const[m,v]=a[h/a[d-1][2]<a[d][2]/h?d-1:d];return m.every(v)}return[o,l]}const[T3,S3]=$3(br,Tf,El,va,Ef,wf);function mc(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function pc(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function vs(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function x3(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,c=_s(i),u=bs(i),f=_s(s),h=bs(s),d=_s(a),m=bs(a),v=_s(o),p=bs(o),g=_s(l),_=bs(l),b={a:G,A:q,b:Y,B:te,c:null,d:tp,e:tp,f:Z3,g:sA,G:oA,H:j3,I:W3,j:Y3,L:U1,m:X3,M:K3,p:ie,q:pe,Q:ip,s:sp,S:Q3,u:J3,U:eA,V:tA,w:nA,W:rA,x:null,X:null,y:iA,Y:aA,Z:lA,"%":rp},y={a:Re,A:ce,b:ge,B:Ue,c:null,d:np,e:np,f:hA,g:EA,G:TA,H:cA,I:uA,j:fA,L:z1,m:dA,M:mA,p:oe,q:it,Q:ip,s:sp,S:pA,u:gA,U:vA,V:_A,w:bA,W:yA,x:null,X:null,y:wA,Y:$A,Z:SA,"%":rp},w={a:I,A:S,b:N,B:O,c:R,d:Jm,e:Jm,f:z3,g:Qm,G:Km,H:ep,I:ep,j:V3,L:H3,m:P3,M:B3,p:V,q:N3,Q:G3,s:q3,S:U3,u:A3,U:I3,V:D3,w:C3,W:L3,x:T,X:F,y:Qm,Y:Km,Z:R3,"%":F3};b.x=$(n,b),b.X=$(r,b),b.c=$(e,b),y.x=$(n,y),y.X=$(r,y),y.c=$(e,y);function $(ve,ke){return function(Ie){var le=[],lt=-1,We=0,de=ve.length,Be,_e,De;for(Ie instanceof Date||(Ie=new Date(+Ie));++lt<de;)ve.charCodeAt(lt)===37&&(le.push(ve.slice(We,lt)),(_e=Xm[Be=ve.charAt(++lt)])!=null?Be=ve.charAt(++lt):_e=Be==="e"?" ":"0",(De=ke[Be])&&(Be=De(Ie,_e)),le.push(Be),We=lt+1);return le.push(ve.slice(We,lt)),le.join("")}}function k(ve,ke){return function(Ie){var le=vs(1900,void 0,1),lt=C(le,ve,Ie+="",0),We,de;if(lt!=Ie.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(ke&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(We=pc(vs(le.y,0,1)),de=We.getUTCDay(),We=de>4||de===0?Ho.ceil(We):Ho(We),We=$f.offset(We,(le.V-1)*7),le.y=We.getUTCFullYear(),le.m=We.getUTCMonth(),le.d=We.getUTCDate()+(le.w+6)%7):(We=mc(vs(le.y,0,1)),de=We.getDay(),We=de>4||de===0?Uo.ceil(We):Uo(We),We=va.offset(We,(le.V-1)*7),le.y=We.getFullYear(),le.m=We.getMonth(),le.d=We.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),de="Z"in le?pc(vs(le.y,0,1)).getUTCDay():mc(vs(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(de+5)%7:le.w+le.U*7-(de+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,pc(le)):mc(le)}}function C(ve,ke,Ie,le){for(var lt=0,We=ke.length,de=Ie.length,Be,_e;lt<We;){if(le>=de)return-1;if(Be=ke.charCodeAt(lt++),Be===37){if(Be=ke.charAt(lt++),_e=w[Be in Xm?ke.charAt(lt++):Be],!_e||(le=_e(ve,Ie,le))<0)return-1}else if(Be!=Ie.charCodeAt(le++))return-1}return le}function V(ve,ke,Ie){var le=c.exec(ke.slice(Ie));return le?(ve.p=u.get(le[0].toLowerCase()),Ie+le[0].length):-1}function I(ve,ke,Ie){var le=d.exec(ke.slice(Ie));return le?(ve.w=m.get(le[0].toLowerCase()),Ie+le[0].length):-1}function S(ve,ke,Ie){var le=f.exec(ke.slice(Ie));return le?(ve.w=h.get(le[0].toLowerCase()),Ie+le[0].length):-1}function N(ve,ke,Ie){var le=g.exec(ke.slice(Ie));return le?(ve.m=_.get(le[0].toLowerCase()),Ie+le[0].length):-1}function O(ve,ke,Ie){var le=v.exec(ke.slice(Ie));return le?(ve.m=p.get(le[0].toLowerCase()),Ie+le[0].length):-1}function R(ve,ke,Ie){return C(ve,e,ke,Ie)}function T(ve,ke,Ie){return C(ve,n,ke,Ie)}function F(ve,ke,Ie){return C(ve,r,ke,Ie)}function G(ve){return a[ve.getDay()]}function q(ve){return s[ve.getDay()]}function Y(ve){return l[ve.getMonth()]}function te(ve){return o[ve.getMonth()]}function ie(ve){return i[+(ve.getHours()>=12)]}function pe(ve){return 1+~~(ve.getMonth()/3)}function Re(ve){return a[ve.getUTCDay()]}function ce(ve){return s[ve.getUTCDay()]}function ge(ve){return l[ve.getUTCMonth()]}function Ue(ve){return o[ve.getUTCMonth()]}function oe(ve){return i[+(ve.getUTCHours()>=12)]}function it(ve){return 1+~~(ve.getUTCMonth()/3)}return{format:function(ve){var ke=$(ve+="",b);return ke.toString=function(){return ve},ke},parse:function(ve){var ke=k(ve+="",!1);return ke.toString=function(){return ve},ke},utcFormat:function(ve){var ke=$(ve+="",y);return ke.toString=function(){return ve},ke},utcParse:function(ve){var ke=k(ve+="",!0);return ke.toString=function(){return ve},ke}}}var Xm={"-":"",_:" ",0:"0"},qt=/^\s*\d+/,k3=/^%/,O3=/[\\^$*+?|[\]().{}]/g;function st(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function M3(t){return t.replace(O3,"\\$&")}function _s(t){return new RegExp("^(?:"+t.map(M3).join("|")+")","i")}function bs(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function C3(t,e,n){var r=qt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function A3(t,e,n){var r=qt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function I3(t,e,n){var r=qt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function D3(t,e,n){var r=qt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function L3(t,e,n){var r=qt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Km(t,e,n){var r=qt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Qm(t,e,n){var r=qt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function R3(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function N3(t,e,n){var r=qt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function P3(t,e,n){var r=qt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Jm(t,e,n){var r=qt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function V3(t,e,n){var r=qt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function ep(t,e,n){var r=qt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function B3(t,e,n){var r=qt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function U3(t,e,n){var r=qt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function H3(t,e,n){var r=qt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function z3(t,e,n){var r=qt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function F3(t,e,n){var r=k3.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function G3(t,e,n){var r=qt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function q3(t,e,n){var r=qt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function tp(t,e){return st(t.getDate(),e,2)}function j3(t,e){return st(t.getHours(),e,2)}function W3(t,e){return st(t.getHours()%12||12,e,2)}function Y3(t,e){return st(1+va.count(br(t),t),e,3)}function U1(t,e){return st(t.getMilliseconds(),e,3)}function Z3(t,e){return U1(t,e)+"000"}function X3(t,e){return st(t.getMonth()+1,e,2)}function K3(t,e){return st(t.getMinutes(),e,2)}function Q3(t,e){return st(t.getSeconds(),e,2)}function J3(t){var e=t.getDay();return e===0?7:e}function eA(t,e){return st(El.count(br(t)-1,t),e,2)}function H1(t){var e=t.getDay();return e>=4||e===0?ns(t):ns.ceil(t)}function tA(t,e){return t=H1(t),st(ns.count(br(t),t)+(br(t).getDay()===4),e,2)}function nA(t){return t.getDay()}function rA(t,e){return st(Uo.count(br(t)-1,t),e,2)}function iA(t,e){return st(t.getFullYear()%100,e,2)}function sA(t,e){return t=H1(t),st(t.getFullYear()%100,e,2)}function aA(t,e){return st(t.getFullYear()%1e4,e,4)}function oA(t,e){var n=t.getDay();return t=n>=4||n===0?ns(t):ns.ceil(t),st(t.getFullYear()%1e4,e,4)}function lA(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+st(e/60|0,"0",2)+st(e%60,"0",2)}function np(t,e){return st(t.getUTCDate(),e,2)}function cA(t,e){return st(t.getUTCHours(),e,2)}function uA(t,e){return st(t.getUTCHours()%12||12,e,2)}function fA(t,e){return st(1+$f.count(ai(t),t),e,3)}function z1(t,e){return st(t.getUTCMilliseconds(),e,3)}function hA(t,e){return z1(t,e)+"000"}function dA(t,e){return st(t.getUTCMonth()+1,e,2)}function mA(t,e){return st(t.getUTCMinutes(),e,2)}function pA(t,e){return st(t.getUTCSeconds(),e,2)}function gA(t){var e=t.getUTCDay();return e===0?7:e}function vA(t,e){return st(B1.count(ai(t)-1,t),e,2)}function F1(t){var e=t.getUTCDay();return e>=4||e===0?rs(t):rs.ceil(t)}function _A(t,e){return t=F1(t),st(rs.count(ai(t),t)+(ai(t).getUTCDay()===4),e,2)}function bA(t){return t.getUTCDay()}function yA(t,e){return st(Ho.count(ai(t)-1,t),e,2)}function wA(t,e){return st(t.getUTCFullYear()%100,e,2)}function EA(t,e){return t=F1(t),st(t.getUTCFullYear()%100,e,2)}function $A(t,e){return st(t.getUTCFullYear()%1e4,e,4)}function TA(t,e){var n=t.getUTCDay();return t=n>=4||n===0?rs(t):rs.ceil(t),st(t.getUTCFullYear()%1e4,e,4)}function SA(){return"+0000"}function rp(){return"%"}function ip(t){return+t}function sp(t){return Math.floor(+t/1e3)}var xi,G1;xA({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function xA(t){return xi=x3(t),G1=xi.format,xi.parse,xi.utcFormat,xi.utcParse,xi}function kA(t){return new Date(t)}function OA(t){return t instanceof Date?+t:+new Date(+t)}function q1(t,e,n,r,i,s,a,o,l,c){var u=R1(),f=u.invert,h=u.domain,d=c(".%L"),m=c(":%S"),v=c("%I:%M"),p=c("%I %p"),g=c("%a %d"),_=c("%b %d"),b=c("%B"),y=c("%Y");function w($){return(l($)<$?d:o($)<$?m:a($)<$?v:s($)<$?p:r($)<$?i($)<$?g:_:n($)<$?b:y)($)}return u.invert=function($){return new Date(f($))},u.domain=function($){return arguments.length?h(Array.from($,OA)):h().map(kA)},u.ticks=function($){var k=h();return t(k[0],k[k.length-1],$??10)},u.tickFormat=function($,k){return k==null?w:c(k)},u.nice=function($){var k=h();return(!$||typeof $.range!="function")&&($=e(k[0],k[k.length-1],$??10)),$?h(P1(k,$)):u},u.copy=function(){return _f(u,q1(t,e,n,r,i,s,a,o,l,c))},u}function j1(){return hs.apply(q1(T3,S3,br,Tf,El,va,Ef,wf,Hi,G1).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ke(t){return function(){return t}}const ap=Math.abs,Kt=Math.atan2,Ur=Math.cos,MA=Math.max,gc=Math.min,Gn=Math.sin,zi=Math.sqrt,Qt=1e-12,na=Math.PI,zo=na/2,no=2*na;function CA(t){return t>1?0:t<-1?na:Math.acos(t)}function op(t){return t>=1?zo:t<=-1?-zo:Math.asin(t)}function $l(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new WO(e)}function AA(t){return t.innerRadius}function IA(t){return t.outerRadius}function DA(t){return t.startAngle}function LA(t){return t.endAngle}function RA(t){return t&&t.padAngle}function NA(t,e,n,r,i,s,a,o){var l=n-t,c=r-e,u=a-i,f=o-s,h=f*l-u*c;if(!(h*h<Qt))return h=(u*(e-s)-f*(t-i))/h,[t+h*l,e+h*c]}function Va(t,e,n,r,i,s,a){var o=t-n,l=e-r,c=(a?s:-s)/zi(o*o+l*l),u=c*l,f=-c*o,h=t+u,d=e+f,m=n+u,v=r+f,p=(h+m)/2,g=(d+v)/2,_=m-h,b=v-d,y=_*_+b*b,w=i-s,$=h*v-m*d,k=(b<0?-1:1)*zi(MA(0,w*w*y-$*$)),C=($*b-_*k)/y,V=(-$*_-b*k)/y,I=($*b+_*k)/y,S=(-$*_+b*k)/y,N=C-p,O=V-g,R=I-p,T=S-g;return N*N+O*O>R*R+T*T&&(C=I,V=S),{cx:C,cy:V,x01:-u,y01:-f,x11:C*(i/w-1),y11:V*(i/w-1)}}function ra(){var t=AA,e=IA,n=Ke(0),r=null,i=DA,s=LA,a=RA,o=null,l=$l(c);function c(){var u,f,h=+t.apply(this,arguments),d=+e.apply(this,arguments),m=i.apply(this,arguments)-zo,v=s.apply(this,arguments)-zo,p=ap(v-m),g=v>m;if(o||(o=u=l()),d<h&&(f=d,d=h,h=f),!(d>Qt))o.moveTo(0,0);else if(p>no-Qt)o.moveTo(d*Ur(m),d*Gn(m)),o.arc(0,0,d,m,v,!g),h>Qt&&(o.moveTo(h*Ur(v),h*Gn(v)),o.arc(0,0,h,v,m,g));else{var _=m,b=v,y=m,w=v,$=p,k=p,C=a.apply(this,arguments)/2,V=C>Qt&&(r?+r.apply(this,arguments):zi(h*h+d*d)),I=gc(ap(d-h)/2,+n.apply(this,arguments)),S=I,N=I,O,R;if(V>Qt){var T=op(V/h*Gn(C)),F=op(V/d*Gn(C));($-=T*2)>Qt?(T*=g?1:-1,y+=T,w-=T):($=0,y=w=(m+v)/2),(k-=F*2)>Qt?(F*=g?1:-1,_+=F,b-=F):(k=0,_=b=(m+v)/2)}var G=d*Ur(_),q=d*Gn(_),Y=h*Ur(w),te=h*Gn(w);if(I>Qt){var ie=d*Ur(b),pe=d*Gn(b),Re=h*Ur(y),ce=h*Gn(y),ge;if(p<na)if(ge=NA(G,q,Re,ce,ie,pe,Y,te)){var Ue=G-ge[0],oe=q-ge[1],it=ie-ge[0],ve=pe-ge[1],ke=1/Gn(CA((Ue*it+oe*ve)/(zi(Ue*Ue+oe*oe)*zi(it*it+ve*ve)))/2),Ie=zi(ge[0]*ge[0]+ge[1]*ge[1]);S=gc(I,(h-Ie)/(ke-1)),N=gc(I,(d-Ie)/(ke+1))}else S=N=0}k>Qt?N>Qt?(O=Va(Re,ce,G,q,d,N,g),R=Va(ie,pe,Y,te,d,N,g),o.moveTo(O.cx+O.x01,O.cy+O.y01),N<I?o.arc(O.cx,O.cy,N,Kt(O.y01,O.x01),Kt(R.y01,R.x01),!g):(o.arc(O.cx,O.cy,N,Kt(O.y01,O.x01),Kt(O.y11,O.x11),!g),o.arc(0,0,d,Kt(O.cy+O.y11,O.cx+O.x11),Kt(R.cy+R.y11,R.cx+R.x11),!g),o.arc(R.cx,R.cy,N,Kt(R.y11,R.x11),Kt(R.y01,R.x01),!g))):(o.moveTo(G,q),o.arc(0,0,d,_,b,!g)):o.moveTo(G,q),!(h>Qt)||!($>Qt)?o.lineTo(Y,te):S>Qt?(O=Va(Y,te,ie,pe,h,-S,g),R=Va(G,q,Re,ce,h,-S,g),o.lineTo(O.cx+O.x01,O.cy+O.y01),S<I?o.arc(O.cx,O.cy,S,Kt(O.y01,O.x01),Kt(R.y01,R.x01),!g):(o.arc(O.cx,O.cy,S,Kt(O.y01,O.x01),Kt(O.y11,O.x11),!g),o.arc(0,0,h,Kt(O.cy+O.y11,O.cx+O.x11),Kt(R.cy+R.y11,R.cx+R.x11),g),o.arc(R.cx,R.cy,S,Kt(R.y11,R.x11),Kt(R.y01,R.x01),!g))):o.arc(0,0,h,w,y,g)}if(o.closePath(),u)return o=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-na/2;return[Ur(f)*u,Gn(f)*u]},c.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:Ke(+u),c):t},c.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:Ke(+u),c):e},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:Ke(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:Ke(+u),c):r},c.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:Ke(+u),c):i},c.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:Ke(+u),c):s},c.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:Ke(+u),c):a},c.context=function(u){return arguments.length?(o=u??null,c):o},c}var PA=Array.prototype.slice;function Tl(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function W1(t){this._context=t}W1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Sl(t){return new W1(t)}function Sf(t){return t[0]}function xf(t){return t[1]}function _a(t,e){var n=Ke(!0),r=null,i=Sl,s=null,a=$l(o);t=typeof t=="function"?t:t===void 0?Sf:Ke(t),e=typeof e=="function"?e:e===void 0?xf:Ke(e);function o(l){var c,u=(l=Tl(l)).length,f,h=!1,d;for(r==null&&(s=i(d=a())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,c,l),+e(f,c,l));if(d)return s=null,d+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:Ke(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Ke(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Ke(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}function kf(t,e,n){var r=null,i=Ke(!0),s=null,a=Sl,o=null,l=$l(c);t=typeof t=="function"?t:t===void 0?Sf:Ke(+t),e=typeof e=="function"?e:Ke(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?xf:Ke(+n);function c(f){var h,d,m,v=(f=Tl(f)).length,p,g=!1,_,b=new Array(v),y=new Array(v);for(s==null&&(o=a(_=l())),h=0;h<=v;++h){if(!(h<v&&i(p=f[h],h,f))===g)if(g=!g)d=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),m=h-1;m>=d;--m)o.point(b[m],y[m]);o.lineEnd(),o.areaEnd()}g&&(b[h]=+t(p,h,f),y[h]=+e(p,h,f),o.point(r?+r(p,h,f):b[h],n?+n(p,h,f):y[h]))}if(_)return o=null,_+""||null}function u(){return _a().defined(i).curve(a).context(s)}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:Ke(+f),r=null,c):t},c.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Ke(+f),c):t},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ke(+f),c):r},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:Ke(+f),n=null,c):e},c.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Ke(+f),c):e},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ke(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ke(!!f),c):i},c.curve=function(f){return arguments.length?(a=f,s!=null&&(o=a(s)),c):a},c.context=function(f){return arguments.length?(f==null?s=o=null:o=a(s=f),c):s},c}function VA(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function BA(t){return t}function UA(){var t=BA,e=VA,n=null,r=Ke(0),i=Ke(no),s=Ke(0);function a(o){var l,c=(o=Tl(o)).length,u,f,h=0,d=new Array(c),m=new Array(c),v=+r.apply(this,arguments),p=Math.min(no,Math.max(-no,i.apply(this,arguments)-v)),g,_=Math.min(Math.abs(p)/c,s.apply(this,arguments)),b=_*(p<0?-1:1),y;for(l=0;l<c;++l)(y=m[d[l]=l]=+t(o[l],l,o))>0&&(h+=y);for(e!=null?d.sort(function(w,$){return e(m[w],m[$])}):n!=null&&d.sort(function(w,$){return n(o[w],o[$])}),l=0,f=h?(p-c*b)/h:0;l<c;++l,v=g)u=d[l],y=m[u],g=v+(y>0?y*f:0)+b,m[u]={data:o[u],index:l,value:y,startAngle:v,endAngle:g,padAngle:_};return m}return a.value=function(o){return arguments.length?(t=typeof o=="function"?o:Ke(+o),a):t},a.sortValues=function(o){return arguments.length?(e=o,n=null,a):e},a.sort=function(o){return arguments.length?(n=o,e=null,a):n},a.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:Ke(+o),a):r},a.endAngle=function(o){return arguments.length?(i=typeof o=="function"?o:Ke(+o),a):i},a.padAngle=function(o){return arguments.length?(s=typeof o=="function"?o:Ke(+o),a):s},a}var HA=Z1(Sl);function Y1(t){this._curve=t}Y1.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function Z1(t){function e(n){return new Y1(t(n))}return e._curve=t,e}function zA(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(Z1(n)):e()._curve},t}function FA(){return zA(_a().curve(HA))}class GA{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function qA(t){return new GA(t,!0)}function jA(t){return t.source}function WA(t){return t.target}function YA(t){let e=jA,n=WA,r=Sf,i=xf,s=null,a=null,o=$l(l);function l(){let c;const u=PA.call(arguments),f=e.apply(this,u),h=n.apply(this,u);if(s==null&&(a=t(c=o())),a.lineStart(),u[0]=f,a.point(+r.apply(this,u),+i.apply(this,u)),u[0]=h,a.point(+r.apply(this,u),+i.apply(this,u)),a.lineEnd(),c)return a=null,c+""||null}return l.source=function(c){return arguments.length?(e=c,l):e},l.target=function(c){return arguments.length?(n=c,l):n},l.x=function(c){return arguments.length?(r=typeof c=="function"?c:Ke(+c),l):r},l.y=function(c){return arguments.length?(i=typeof c=="function"?c:Ke(+c),l):i},l.context=function(c){return arguments.length?(c==null?s=a=null:a=t(s=c),l):s},l}function ZA(){return YA(qA)}function Pr(){}function Fo(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function xl(t){this._context=t}xl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Fo(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Fo(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function XA(t){return new xl(t)}function X1(t){this._context=t}X1.prototype={areaStart:Pr,areaEnd:Pr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Fo(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function KA(t){return new X1(t)}function K1(t){this._context=t}K1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Fo(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function QA(t){return new K1(t)}function Q1(t,e){this._basis=new xl(t),this._beta=e}Q1.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,a=e[n]-i,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*t[o]+(1-this._beta)*(r+l*s),this._beta*e[o]+(1-this._beta)*(i+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const JA=function t(e){function n(r){return e===1?new xl(r):new Q1(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function Go(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Of(t,e){this._context=t,this._k=(1-e)/6}Of.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Go(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Go(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const eI=function t(e){function n(r){return new Of(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Mf(t,e){this._context=t,this._k=(1-e)/6}Mf.prototype={areaStart:Pr,areaEnd:Pr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Go(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const tI=function t(e){function n(r){return new Mf(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Cf(t,e){this._context=t,this._k=(1-e)/6}Cf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Go(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const nI=function t(e){function n(r){return new Cf(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Af(t,e,n){var r=t._x1,i=t._y1,s=t._x2,a=t._y2;if(t._l01_a>Qt){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Qt){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,s,a,t._x2,t._y2)}function J1(t,e){this._context=t,this._alpha=e}J1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Af(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const rI=function t(e){function n(r){return e?new J1(r,e):new Of(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function e_(t,e){this._context=t,this._alpha=e}e_.prototype={areaStart:Pr,areaEnd:Pr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Af(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const iI=function t(e){function n(r){return e?new e_(r,e):new Mf(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function t_(t,e){this._context=t,this._alpha=e}t_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Af(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const sI=function t(e){function n(r){return e?new t_(r,e):new Cf(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function n_(t){this._context=t}n_.prototype={areaStart:Pr,areaEnd:Pr,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function r_(t){return new n_(t)}function lp(t){return t<0?-1:1}function cp(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(lp(s)+lp(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function up(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function vc(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,o=(s-r)/3;t._context.bezierCurveTo(r+o,i+o*e,s-o,a-o*n,s,a)}function qo(t){this._context=t}qo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:vc(this,this._t0,up(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,vc(this,up(this,n=cp(this,t,e)),n);break;default:vc(this,this._t0,n=cp(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function i_(t){this._context=new s_(t)}(i_.prototype=Object.create(qo.prototype)).point=function(t,e){qo.prototype.point.call(this,e,t)};function s_(t){this._context=t}s_.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function aI(t){return new qo(t)}function oI(t){return new i_(t)}function a_(t){this._context=t}a_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=fp(t),i=fp(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function fp(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function lI(t){return new a_(t)}function kl(t,e){this._context=t,this._t=e}kl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function cI(t){return new kl(t,.5)}function uI(t){return new kl(t,0)}function fI(t){return new kl(t,1)}function hp(t,e){if((a=t.length)>1)for(var n=1,r,i,s=t[e[0]],a,o=s.length;n<a;++n)for(i=s,s=t[e[n]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function dp(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function hI(t,e){return t[e]}function dI(t){const e=[];return e.key=t,e}function _c(){var t=Ke([]),e=dp,n=hp,r=hI;function i(s){var a=Array.from(t.apply(this,arguments),dI),o,l=a.length,c=-1,u;for(const f of s)for(o=0,++c;o<l;++o)(a[o][c]=[0,+r(f,a[o].key,c,s)]).data=f;for(o=0,u=Tl(e(a));o<l;++o)a[u[o]].index=o;return n(a,u),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Ke(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Ke(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?dp:typeof s=="function"?s:Ke(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??hp,i):n},i}function mI(t,e){if((l=t.length)>0)for(var n,r=0,i,s,a,o,l,c=t[e[0]].length;r<c;++r)for(a=o=0,n=0;n<l;++n)(s=(i=t[e[n]][r])[1]-i[0])>0?(i[0]=a,i[1]=a+=s):s<0?(i[1]=o,i[0]=o+=s):(i[0]=0,i[1]=s)}function Ds(t,e,n){this.k=t,this.x=e,this.y=n}Ds.prototype={constructor:Ds,scale:function(t){return t===1?this:new Ds(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ds(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ds.prototype;function bc(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}function ys(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var s=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):s;i=t.formattingValues[a]||t.formattingValues[s]}else{var o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[o]}var c=t.argumentCallback?t.argumentCallback(e):e;return i[c]}}function ws(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var a=s[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?gI(o,function(f){return f.test(a)}):pI(o,function(f){return f.test(a)}),c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;var u=e.slice(a.length);return{value:c,rest:u}}}function pI(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function gI(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function vI(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],s=e.match(t.parsePattern);if(!s)return null;var a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;var o=e.slice(i.length);return{value:a,rest:o}}}function jo(t){"@babel/helpers - typeof";return jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jo(t)}function Ut(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Ze(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function at(t){Ze(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||jo(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Ol(t,e){Ze(2,arguments);var n=at(t).getTime(),r=Ut(e);return new Date(n+r)}var _I={};function Ml(){return _I}function fu(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function bI(t){return Ze(1,arguments),t instanceof Date||jo(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function yI(t){if(Ze(1,arguments),!bI(t)&&typeof t!="number")return!1;var e=at(t);return!isNaN(Number(e))}function wI(t,e){Ze(2,arguments);var n=Ut(e);return Ol(t,-n)}var EI=864e5;function $I(t){Ze(1,arguments);var e=at(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/EI)+1}function Wo(t){Ze(1,arguments);var e=1,n=at(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function o_(t){Ze(1,arguments);var e=at(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Wo(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var a=Wo(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function TI(t){Ze(1,arguments);var e=o_(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=Wo(n);return r}var SI=6048e5;function xI(t){Ze(1,arguments);var e=at(t),n=Wo(e).getTime()-TI(e).getTime();return Math.round(n/SI)+1}function Yo(t,e){var n,r,i,s,a,o,l,c;Ze(1,arguments);var u=Ml(),f=Ut((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&i!==void 0?i:u.weekStartsOn)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=at(t),d=h.getUTCDay(),m=(d<f?7:0)+d-f;return h.setUTCDate(h.getUTCDate()-m),h.setUTCHours(0,0,0,0),h}function l_(t,e){var n,r,i,s,a,o,l,c;Ze(1,arguments);var u=at(t),f=u.getUTCFullYear(),h=Ml(),d=Ut((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:h.firstWeekContainsDate)!==null&&r!==void 0?r:(l=h.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var m=new Date(0);m.setUTCFullYear(f+1,0,d),m.setUTCHours(0,0,0,0);var v=Yo(m,e),p=new Date(0);p.setUTCFullYear(f,0,d),p.setUTCHours(0,0,0,0);var g=Yo(p,e);return u.getTime()>=v.getTime()?f+1:u.getTime()>=g.getTime()?f:f-1}function kI(t,e){var n,r,i,s,a,o,l,c;Ze(1,arguments);var u=Ml(),f=Ut((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:u.firstWeekContainsDate)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),h=l_(t,e),d=new Date(0);d.setUTCFullYear(h,0,f),d.setUTCHours(0,0,0,0);var m=Yo(d,e);return m}var OI=6048e5;function MI(t,e){Ze(1,arguments);var n=at(t),r=Yo(n,e).getTime()-kI(n,e).getTime();return Math.round(r/OI)+1}function ct(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var CI={y:function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return ct(e==="yy"?r%100:r,e.length)},M:function(t,e){var n=t.getUTCMonth();return e==="M"?String(n+1):ct(n+1,2)},d:function(t,e){return ct(t.getUTCDate(),e.length)},a:function(t,e){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,e){return ct(t.getUTCHours()%12||12,e.length)},H:function(t,e){return ct(t.getUTCHours(),e.length)},m:function(t,e){return ct(t.getUTCMinutes(),e.length)},s:function(t,e){return ct(t.getUTCSeconds(),e.length)},S:function(t,e){var n=e.length,r=t.getUTCMilliseconds(),i=Math.floor(r*Math.pow(10,n-3));return ct(i,e.length)}};const kr=CI;var ki={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},AI={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){var r=t.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return kr.y(t,e)},Y:function(t,e,n,r){var i=l_(t,r),s=i>0?i:1-i;if(e==="YY"){var a=s%100;return ct(a,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):ct(s,e.length)},R:function(t,e){var n=o_(t);return ct(n,e.length)},u:function(t,e){var n=t.getUTCFullYear();return ct(n,e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ct(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ct(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return kr.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return ct(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var i=MI(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):ct(i,e.length)},I:function(t,e,n){var r=xI(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ct(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):kr.d(t,e)},D:function(t,e,n){var r=$I(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ct(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return ct(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return ct(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return ct(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours(),i=r/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r=t.getUTCHours(),i;switch(r===12?i=ki.noon:r===0?i=ki.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r=t.getUTCHours(),i;switch(r>=17?i=ki.evening:r>=12?i=ki.afternoon:r>=4?i=ki.morning:i=ki.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){var r=t.getUTCHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return kr.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):kr.H(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ct(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ct(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):kr.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):kr.s(t,e)},S:function(t,e){return kr.S(t,e)},X:function(t,e,n,r){var i=r._originalDate||t,s=i.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return pp(s);case"XXXX":case"XX":return Fr(s);case"XXXXX":case"XXX":default:return Fr(s,":")}},x:function(t,e,n,r){var i=r._originalDate||t,s=i.getTimezoneOffset();switch(e){case"x":return pp(s);case"xxxx":case"xx":return Fr(s);case"xxxxx":case"xxx":default:return Fr(s,":")}},O:function(t,e,n,r){var i=r._originalDate||t,s=i.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+mp(s,":");case"OOOO":default:return"GMT"+Fr(s,":")}},z:function(t,e,n,r){var i=r._originalDate||t,s=i.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+mp(s,":");case"zzzz":default:return"GMT"+Fr(s,":")}},t:function(t,e,n,r){var i=r._originalDate||t,s=Math.floor(i.getTime()/1e3);return ct(s,e.length)},T:function(t,e,n,r){var i=r._originalDate||t,s=i.getTime();return ct(s,e.length)}};function mp(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;if(s===0)return n+String(i);var a=e||"";return n+String(i)+a+ct(s,2)}function pp(t,e){if(t%60===0){var n=t>0?"-":"+";return n+ct(Math.abs(t)/60,2)}return Fr(t,e)}function Fr(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),s=ct(Math.floor(i/60),2),a=ct(i%60,2);return r+s+n+a}const II=AI;var gp=function(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},c_=function(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},DI=function(t,e){var n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return gp(t,e);var s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",gp(r,e)).replace("{{time}}",c_(i,e))},LI={p:c_,P:DI};const RI=LI;var NI=["D","DD"],PI=["YY","YYYY"];function VI(t){return NI.indexOf(t)!==-1}function BI(t){return PI.indexOf(t)!==-1}function vp(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var UI={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},HI=function(t,e,n){var r,i=UI[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};const zI=HI;var FI={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},GI={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},qI={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jI={date:bc({formats:FI,defaultWidth:"full"}),time:bc({formats:GI,defaultWidth:"full"}),dateTime:bc({formats:qI,defaultWidth:"full"})};const WI=jI;var YI={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ZI=function(t,e,n,r){return YI[t]};const XI=ZI;var KI={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},QI={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},JI={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},eD={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},tD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},nD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},rD=function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},iD={ordinalNumber:rD,era:ys({values:KI,defaultWidth:"wide"}),quarter:ys({values:QI,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:ys({values:JI,defaultWidth:"wide"}),day:ys({values:eD,defaultWidth:"wide"}),dayPeriod:ys({values:tD,defaultWidth:"wide",formattingValues:nD,defaultFormattingWidth:"wide"})};const sD=iD;var aD=/^(\d+)(th|st|nd|rd)?/i,oD=/\d+/i,lD={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},cD={any:[/^b/i,/^(a|c)/i]},uD={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fD={any:[/1/i,/2/i,/3/i,/4/i]},hD={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},dD={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},mD={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pD={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gD={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vD={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_D={ordinalNumber:vI({matchPattern:aD,parsePattern:oD,valueCallback:function(t){return parseInt(t,10)}}),era:ws({matchPatterns:lD,defaultMatchWidth:"wide",parsePatterns:cD,defaultParseWidth:"any"}),quarter:ws({matchPatterns:uD,defaultMatchWidth:"wide",parsePatterns:fD,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:ws({matchPatterns:hD,defaultMatchWidth:"wide",parsePatterns:dD,defaultParseWidth:"any"}),day:ws({matchPatterns:mD,defaultMatchWidth:"wide",parsePatterns:pD,defaultParseWidth:"any"}),dayPeriod:ws({matchPatterns:gD,defaultMatchWidth:"any",parsePatterns:vD,defaultParseWidth:"any"})};const bD=_D;var yD={code:"en-US",formatDistance:zI,formatLong:WI,formatRelative:XI,localize:sD,match:bD,options:{weekStartsOn:0,firstWeekContainsDate:1}};const u_=yD;var wD=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ED=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$D=/^'([^]*?)'?$/,TD=/''/g,SD=/[a-zA-Z]/;function is(t,e,n){var r,i,s,a,o,l,c,u,f,h,d,m,v,p,g,_,b,y;Ze(2,arguments);var w=String(e),$=Ml(),k=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:$.locale)!==null&&r!==void 0?r:u_,C=Ut((s=(a=(o=(l=n==null?void 0:n.firstWeekContainsDate)!==null&&l!==void 0?l:n==null||(c=n.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&o!==void 0?o:$.firstWeekContainsDate)!==null&&a!==void 0?a:(f=$.locale)===null||f===void 0||(h=f.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var V=Ut((d=(m=(v=(p=n==null?void 0:n.weekStartsOn)!==null&&p!==void 0?p:n==null||(g=n.locale)===null||g===void 0||(_=g.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&v!==void 0?v:$.weekStartsOn)!==null&&m!==void 0?m:(b=$.locale)===null||b===void 0||(y=b.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&d!==void 0?d:0);if(!(V>=0&&V<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!k.localize)throw new RangeError("locale must contain localize property");if(!k.formatLong)throw new RangeError("locale must contain formatLong property");var I=at(t);if(!yI(I))throw new RangeError("Invalid time value");var S=fu(I),N=wI(I,S),O={firstWeekContainsDate:C,weekStartsOn:V,locale:k,_originalDate:I},R=w.match(ED).map(function(T){var F=T[0];if(F==="p"||F==="P"){var G=RI[F];return G(T,k.formatLong)}return T}).join("").match(wD).map(function(T){if(T==="''")return"'";var F=T[0];if(F==="'")return xD(T);var G=II[F];if(G)return!(n!=null&&n.useAdditionalWeekYearTokens)&&BI(T)&&vp(T,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&VI(T)&&vp(T,e,String(t)),G(N,T,k.localize,O);if(F.match(SD))throw new RangeError("Format string contains an unescaped latin alphabet character `"+F+"`");return T}).join("");return R}function xD(t){var e=t.match($D);return e?e[1].replace(TD,"'"):t}var kD=typeof global=="object"&&global&&global.Object===Object&&global;const f_=kD;var OD=typeof self=="object"&&self&&self.Object===Object&&self,MD=f_||OD||Function("return this")();const Un=MD;var CD=Un.Symbol;const Sn=CD;var h_=Object.prototype,AD=h_.hasOwnProperty,ID=h_.toString,Es=Sn?Sn.toStringTag:void 0;function DD(t){var e=AD.call(t,Es),n=t[Es];try{t[Es]=void 0;var r=!0}catch{}var i=ID.call(t);return r&&(e?t[Es]=n:delete t[Es]),i}var LD=Object.prototype,RD=LD.toString;function ND(t){return RD.call(t)}var PD="[object Null]",VD="[object Undefined]",_p=Sn?Sn.toStringTag:void 0;function vi(t){return t==null?t===void 0?VD:PD:_p&&_p in Object(t)?DD(t):ND(t)}function Qn(t){return t!=null&&typeof t=="object"}var BD="[object Symbol]";function Cl(t){return typeof t=="symbol"||Qn(t)&&vi(t)==BD}function d_(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var UD=Array.isArray;const Yt=UD;var HD=1/0,bp=Sn?Sn.prototype:void 0,yp=bp?bp.toString:void 0;function m_(t){if(typeof t=="string")return t;if(Yt(t))return d_(t,m_)+"";if(Cl(t))return yp?yp.call(t):"";var e=t+"";return e=="0"&&1/t==-HD?"-0":e}function xn(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function If(t){return t}var zD="[object AsyncFunction]",FD="[object Function]",GD="[object GeneratorFunction]",qD="[object Proxy]";function Df(t){if(!xn(t))return!1;var e=vi(t);return e==FD||e==GD||e==zD||e==qD}var jD=Un["__core-js_shared__"];const yc=jD;var wp=function(){var t=/[^.]+$/.exec(yc&&yc.keys&&yc.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function WD(t){return!!wp&&wp in t}var YD=Function.prototype,ZD=YD.toString;function _i(t){if(t!=null){try{return ZD.call(t)}catch{}try{return t+""}catch{}}return""}var XD=/[\\^$.*+?()[\]{}|]/g,KD=/^\[object .+?Constructor\]$/,QD=Function.prototype,JD=Object.prototype,eL=QD.toString,tL=JD.hasOwnProperty,nL=RegExp("^"+eL.call(tL).replace(XD,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rL(t){if(!xn(t)||WD(t))return!1;var e=Df(t)?nL:KD;return e.test(_i(t))}function iL(t,e){return t==null?void 0:t[e]}function bi(t,e){var n=iL(t,e);return rL(n)?n:void 0}var sL=bi(Un,"WeakMap");const hu=sL;var Ep=Object.create,aL=function(){function t(){}return function(e){if(!xn(e))return{};if(Ep)return Ep(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const oL=aL;function lL(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function cL(){}function p_(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var uL=800,fL=16,hL=Date.now;function dL(t){var e=0,n=0;return function(){var r=hL(),i=fL-(r-n);if(n=r,i>0){if(++e>=uL)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function mL(t){return function(){return t}}var pL=function(){try{var t=bi(Object,"defineProperty");return t({},"",{}),t}catch{}}();const Zo=pL;var gL=Zo?function(t,e){return Zo(t,"toString",{configurable:!0,enumerable:!1,value:mL(e),writable:!0})}:If;const vL=gL;var _L=dL(vL);const bL=_L;function yL(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function wL(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}function EL(t){return t!==t}function $L(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function TL(t,e,n){return e===e?$L(t,e,n):wL(t,EL,n)}function SL(t,e){var n=t==null?0:t.length;return!!n&&TL(t,e,0)>-1}var xL=9007199254740991,kL=/^(?:0|[1-9]\d*)$/;function Lf(t,e){var n=typeof t;return e=e??xL,!!e&&(n=="number"||n!="symbol"&&kL.test(t))&&t>-1&&t%1==0&&t<e}function Al(t,e,n){e=="__proto__"&&Zo?Zo(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ba(t,e){return t===e||t!==t&&e!==e}var OL=Object.prototype,ML=OL.hasOwnProperty;function g_(t,e,n){var r=t[e];(!(ML.call(t,e)&&ba(r,n))||n===void 0&&!(e in t))&&Al(t,e,n)}function ya(t,e,n,r){var i=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=r?r(n[o],t[o],o,n,t):void 0;l===void 0&&(l=t[o]),i?Al(n,o,l):g_(n,o,l)}return n}var $p=Math.max;function CL(t,e,n){return e=$p(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=$p(r.length-e,0),a=Array(s);++i<s;)a[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(a),lL(t,this,o)}}function v_(t,e){return bL(CL(t,e,If),t+"")}var AL=9007199254740991;function Rf(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=AL}function yi(t){return t!=null&&Rf(t.length)&&!Df(t)}function __(t,e,n){if(!xn(n))return!1;var r=typeof e;return(r=="number"?yi(n)&&Lf(e,n.length):r=="string"&&e in n)?ba(n[e],t):!1}function IL(t){return v_(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,a&&__(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var o=n[r];o&&t(e,o,r,s)}return e})}var DL=Object.prototype;function Il(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||DL;return t===n}function LL(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var RL="[object Arguments]";function Tp(t){return Qn(t)&&vi(t)==RL}var b_=Object.prototype,NL=b_.hasOwnProperty,PL=b_.propertyIsEnumerable,VL=Tp(function(){return arguments}())?Tp:function(t){return Qn(t)&&NL.call(t,"callee")&&!PL.call(t,"callee")};const ss=VL;function BL(){return!1}var y_=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Sp=y_&&typeof module=="object"&&module&&!module.nodeType&&module,UL=Sp&&Sp.exports===y_,xp=UL?Un.Buffer:void 0,HL=xp?xp.isBuffer:void 0,zL=HL||BL;const as=zL;var FL="[object Arguments]",GL="[object Array]",qL="[object Boolean]",jL="[object Date]",WL="[object Error]",YL="[object Function]",ZL="[object Map]",XL="[object Number]",KL="[object Object]",QL="[object RegExp]",JL="[object Set]",eR="[object String]",tR="[object WeakMap]",nR="[object ArrayBuffer]",rR="[object DataView]",iR="[object Float32Array]",sR="[object Float64Array]",aR="[object Int8Array]",oR="[object Int16Array]",lR="[object Int32Array]",cR="[object Uint8Array]",uR="[object Uint8ClampedArray]",fR="[object Uint16Array]",hR="[object Uint32Array]",Tt={};Tt[iR]=Tt[sR]=Tt[aR]=Tt[oR]=Tt[lR]=Tt[cR]=Tt[uR]=Tt[fR]=Tt[hR]=!0;Tt[FL]=Tt[GL]=Tt[nR]=Tt[qL]=Tt[rR]=Tt[jL]=Tt[WL]=Tt[YL]=Tt[ZL]=Tt[XL]=Tt[KL]=Tt[QL]=Tt[JL]=Tt[eR]=Tt[tR]=!1;function dR(t){return Qn(t)&&Rf(t.length)&&!!Tt[vi(t)]}function Nf(t){return function(e){return t(e)}}var w_=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qs=w_&&typeof module=="object"&&module&&!module.nodeType&&module,mR=qs&&qs.exports===w_,wc=mR&&f_.process,pR=function(){try{var t=qs&&qs.require&&qs.require("util").types;return t||wc&&wc.binding&&wc.binding("util")}catch{}}();const os=pR;var kp=os&&os.isTypedArray,gR=kp?Nf(kp):dR;const Dl=gR;var vR=Object.prototype,_R=vR.hasOwnProperty;function E_(t,e){var n=Yt(t),r=!n&&ss(t),i=!n&&!r&&as(t),s=!n&&!r&&!i&&Dl(t),a=n||r||i||s,o=a?LL(t.length,String):[],l=o.length;for(var c in t)(e||_R.call(t,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Lf(c,l)))&&o.push(c);return o}function $_(t,e){return function(n){return t(e(n))}}var bR=$_(Object.keys,Object);const yR=bR;var wR=Object.prototype,ER=wR.hasOwnProperty;function T_(t){if(!Il(t))return yR(t);var e=[];for(var n in Object(t))ER.call(t,n)&&n!="constructor"&&e.push(n);return e}function wa(t){return yi(t)?E_(t):T_(t)}function $R(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var TR=Object.prototype,SR=TR.hasOwnProperty;function xR(t){if(!xn(t))return $R(t);var e=Il(t),n=[];for(var r in t)r=="constructor"&&(e||!SR.call(t,r))||n.push(r);return n}function Ea(t){return yi(t)?E_(t,!0):xR(t)}var kR=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,OR=/^\w*$/;function Pf(t,e){if(Yt(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Cl(t)?!0:OR.test(t)||!kR.test(t)||e!=null&&t in Object(e)}var MR=bi(Object,"create");const ia=MR;function CR(){this.__data__=ia?ia(null):{},this.size=0}function AR(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var IR="__lodash_hash_undefined__",DR=Object.prototype,LR=DR.hasOwnProperty;function RR(t){var e=this.__data__;if(ia){var n=e[t];return n===IR?void 0:n}return LR.call(e,t)?e[t]:void 0}var NR=Object.prototype,PR=NR.hasOwnProperty;function VR(t){var e=this.__data__;return ia?e[t]!==void 0:PR.call(e,t)}var BR="__lodash_hash_undefined__";function UR(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ia&&e===void 0?BR:e,this}function oi(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}oi.prototype.clear=CR;oi.prototype.delete=AR;oi.prototype.get=RR;oi.prototype.has=VR;oi.prototype.set=UR;function HR(){this.__data__=[],this.size=0}function Ll(t,e){for(var n=t.length;n--;)if(ba(t[n][0],e))return n;return-1}var zR=Array.prototype,FR=zR.splice;function GR(t){var e=this.__data__,n=Ll(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():FR.call(e,n,1),--this.size,!0}function qR(t){var e=this.__data__,n=Ll(e,t);return n<0?void 0:e[n][1]}function jR(t){return Ll(this.__data__,t)>-1}function WR(t,e){var n=this.__data__,r=Ll(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Tr(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Tr.prototype.clear=HR;Tr.prototype.delete=GR;Tr.prototype.get=qR;Tr.prototype.has=jR;Tr.prototype.set=WR;var YR=bi(Un,"Map");const sa=YR;function ZR(){this.size=0,this.__data__={hash:new oi,map:new(sa||Tr),string:new oi}}function XR(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Rl(t,e){var n=t.__data__;return XR(e)?n[typeof e=="string"?"string":"hash"]:n.map}function KR(t){var e=Rl(this,t).delete(t);return this.size-=e?1:0,e}function QR(t){return Rl(this,t).get(t)}function JR(t){return Rl(this,t).has(t)}function e4(t,e){var n=Rl(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Sr(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Sr.prototype.clear=ZR;Sr.prototype.delete=KR;Sr.prototype.get=QR;Sr.prototype.has=JR;Sr.prototype.set=e4;var t4="Expected a function";function Vf(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(t4);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=t.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(Vf.Cache||Sr),n}Vf.Cache=Sr;var n4=500;function r4(t){var e=Vf(t,function(r){return n.size===n4&&n.clear(),r}),n=e.cache;return e}var i4=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s4=/\\(\\)?/g,a4=r4(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(i4,function(n,r,i,s){e.push(i?s.replace(s4,"$1"):r||n)}),e});const o4=a4;function $a(t){return t==null?"":m_(t)}function S_(t,e){return Yt(t)?t:Pf(t,e)?[t]:o4($a(t))}var l4=1/0;function Nl(t){if(typeof t=="string"||Cl(t))return t;var e=t+"";return e=="0"&&1/t==-l4?"-0":e}function x_(t,e){e=S_(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[Nl(e[n++])];return n&&n==r?t:void 0}function wt(t,e,n){var r=t==null?void 0:x_(t,e);return r===void 0?n:r}function Bf(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Op=Sn?Sn.isConcatSpreadable:void 0;function c4(t){return Yt(t)||ss(t)||!!(Op&&t&&t[Op])}function Pl(t,e,n,r,i){var s=-1,a=t.length;for(n||(n=c4),i||(i=[]);++s<a;){var o=t[s];e>0&&n(o)?e>1?Pl(o,e-1,n,r,i):Bf(i,o):r||(i[i.length]=o)}return i}var u4=$_(Object.getPrototypeOf,Object);const Uf=u4;var f4="[object Object]",h4=Function.prototype,d4=Object.prototype,k_=h4.toString,m4=d4.hasOwnProperty,p4=k_.call(Object);function g4(t){if(!Qn(t)||vi(t)!=f4)return!1;var e=Uf(t);if(e===null)return!0;var n=m4.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&k_.call(n)==p4}function v4(){this.__data__=new Tr,this.size=0}function _4(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function b4(t){return this.__data__.get(t)}function y4(t){return this.__data__.has(t)}var w4=200;function E4(t,e){var n=this.__data__;if(n instanceof Tr){var r=n.__data__;if(!sa||r.length<w4-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Sr(r)}return n.set(t,e),this.size=n.size,this}function Nn(t){var e=this.__data__=new Tr(t);this.size=e.size}Nn.prototype.clear=v4;Nn.prototype.delete=_4;Nn.prototype.get=b4;Nn.prototype.has=y4;Nn.prototype.set=E4;function $4(t,e){return t&&ya(e,wa(e),t)}function T4(t,e){return t&&ya(e,Ea(e),t)}var O_=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Mp=O_&&typeof module=="object"&&module&&!module.nodeType&&module,S4=Mp&&Mp.exports===O_,Cp=S4?Un.Buffer:void 0,Ap=Cp?Cp.allocUnsafe:void 0;function M_(t,e){if(e)return t.slice();var n=t.length,r=Ap?Ap(n):new t.constructor(n);return t.copy(r),r}function x4(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var a=t[n];e(a,n,t)&&(s[i++]=a)}return s}function C_(){return[]}var k4=Object.prototype,O4=k4.propertyIsEnumerable,Ip=Object.getOwnPropertySymbols,M4=Ip?function(t){return t==null?[]:(t=Object(t),x4(Ip(t),function(e){return O4.call(t,e)}))}:C_;const Hf=M4;function C4(t,e){return ya(t,Hf(t),e)}var A4=Object.getOwnPropertySymbols,I4=A4?function(t){for(var e=[];t;)Bf(e,Hf(t)),t=Uf(t);return e}:C_;const A_=I4;function D4(t,e){return ya(t,A_(t),e)}function I_(t,e,n){var r=e(t);return Yt(t)?r:Bf(r,n(t))}function du(t){return I_(t,wa,Hf)}function L4(t){return I_(t,Ea,A_)}var R4=bi(Un,"DataView");const mu=R4;var N4=bi(Un,"Promise");const pu=N4;var P4=bi(Un,"Set");const Yi=P4;var Dp="[object Map]",V4="[object Object]",Lp="[object Promise]",Rp="[object Set]",Np="[object WeakMap]",Pp="[object DataView]",B4=_i(mu),U4=_i(sa),H4=_i(pu),z4=_i(Yi),F4=_i(hu),Gr=vi;(mu&&Gr(new mu(new ArrayBuffer(1)))!=Pp||sa&&Gr(new sa)!=Dp||pu&&Gr(pu.resolve())!=Lp||Yi&&Gr(new Yi)!=Rp||hu&&Gr(new hu)!=Np)&&(Gr=function(t){var e=vi(t),n=e==V4?t.constructor:void 0,r=n?_i(n):"";if(r)switch(r){case B4:return Pp;case U4:return Dp;case H4:return Lp;case z4:return Rp;case F4:return Np}return e});const ls=Gr;var G4=Object.prototype,q4=G4.hasOwnProperty;function j4(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&q4.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var W4=Un.Uint8Array;const Xo=W4;function zf(t){var e=new t.constructor(t.byteLength);return new Xo(e).set(new Xo(t)),e}function Y4(t,e){var n=e?zf(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var Z4=/\w*$/;function X4(t){var e=new t.constructor(t.source,Z4.exec(t));return e.lastIndex=t.lastIndex,e}var Vp=Sn?Sn.prototype:void 0,Bp=Vp?Vp.valueOf:void 0;function K4(t){return Bp?Object(Bp.call(t)):{}}function D_(t,e){var n=e?zf(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Q4="[object Boolean]",J4="[object Date]",e6="[object Map]",t6="[object Number]",n6="[object RegExp]",r6="[object Set]",i6="[object String]",s6="[object Symbol]",a6="[object ArrayBuffer]",o6="[object DataView]",l6="[object Float32Array]",c6="[object Float64Array]",u6="[object Int8Array]",f6="[object Int16Array]",h6="[object Int32Array]",d6="[object Uint8Array]",m6="[object Uint8ClampedArray]",p6="[object Uint16Array]",g6="[object Uint32Array]";function v6(t,e,n){var r=t.constructor;switch(e){case a6:return zf(t);case Q4:case J4:return new r(+t);case o6:return Y4(t,n);case l6:case c6:case u6:case f6:case h6:case d6:case m6:case p6:case g6:return D_(t,n);case e6:return new r;case t6:case i6:return new r(t);case n6:return X4(t);case r6:return new r;case s6:return K4(t)}}function L_(t){return typeof t.constructor=="function"&&!Il(t)?oL(Uf(t)):{}}var _6="[object Map]";function b6(t){return Qn(t)&&ls(t)==_6}var Up=os&&os.isMap,y6=Up?Nf(Up):b6;const w6=y6;var E6="[object Set]";function $6(t){return Qn(t)&&ls(t)==E6}var Hp=os&&os.isSet,T6=Hp?Nf(Hp):$6;const S6=T6;var x6=1,k6=2,O6=4,R_="[object Arguments]",M6="[object Array]",C6="[object Boolean]",A6="[object Date]",I6="[object Error]",N_="[object Function]",D6="[object GeneratorFunction]",L6="[object Map]",R6="[object Number]",P_="[object Object]",N6="[object RegExp]",P6="[object Set]",V6="[object String]",B6="[object Symbol]",U6="[object WeakMap]",H6="[object ArrayBuffer]",z6="[object DataView]",F6="[object Float32Array]",G6="[object Float64Array]",q6="[object Int8Array]",j6="[object Int16Array]",W6="[object Int32Array]",Y6="[object Uint8Array]",Z6="[object Uint8ClampedArray]",X6="[object Uint16Array]",K6="[object Uint32Array]",_t={};_t[R_]=_t[M6]=_t[H6]=_t[z6]=_t[C6]=_t[A6]=_t[F6]=_t[G6]=_t[q6]=_t[j6]=_t[W6]=_t[L6]=_t[R6]=_t[P_]=_t[N6]=_t[P6]=_t[V6]=_t[B6]=_t[Y6]=_t[Z6]=_t[X6]=_t[K6]=!0;_t[I6]=_t[N_]=_t[U6]=!1;function ro(t,e,n,r,i,s){var a,o=e&x6,l=e&k6,c=e&O6;if(n&&(a=i?n(t,r,i,s):n(t)),a!==void 0)return a;if(!xn(t))return t;var u=Yt(t);if(u){if(a=j4(t),!o)return p_(t,a)}else{var f=ls(t),h=f==N_||f==D6;if(as(t))return M_(t,o);if(f==P_||f==R_||h&&!i){if(a=l||h?{}:L_(t),!o)return l?D4(t,T4(a,t)):C4(t,$4(a,t))}else{if(!_t[f])return i?t:{};a=v6(t,f,o)}}s||(s=new Nn);var d=s.get(t);if(d)return d;s.set(t,a),S6(t)?t.forEach(function(p){a.add(ro(p,e,n,p,t,s))}):w6(t)&&t.forEach(function(p,g){a.set(g,ro(p,e,n,g,t,s))});var m=c?l?L4:du:l?Ea:wa,v=u?void 0:m(t);return yL(v||t,function(p,g){v&&(g=p,p=t[g]),g_(a,g,ro(p,e,n,g,t,s))}),a}var Q6=1,J6=4;function yr(t){return ro(t,Q6|J6)}var e5="__lodash_hash_undefined__";function t5(t){return this.__data__.set(t,e5),this}function n5(t){return this.__data__.has(t)}function aa(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Sr;++e<n;)this.add(t[e])}aa.prototype.add=aa.prototype.push=t5;aa.prototype.has=n5;function V_(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function B_(t,e){return t.has(e)}var r5=1,i5=2;function U_(t,e,n,r,i,s){var a=n&r5,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var f=-1,h=!0,d=n&i5?new aa:void 0;for(s.set(t,e),s.set(e,t);++f<o;){var m=t[f],v=e[f];if(r)var p=a?r(v,m,f,e,t,s):r(m,v,f,t,e,s);if(p!==void 0){if(p)continue;h=!1;break}if(d){if(!V_(e,function(g,_){if(!B_(d,_)&&(m===g||i(m,g,n,r,s)))return d.push(_)})){h=!1;break}}else if(!(m===v||i(m,v,n,r,s))){h=!1;break}}return s.delete(t),s.delete(e),h}function s5(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function Ff(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var a5=1,o5=2,l5="[object Boolean]",c5="[object Date]",u5="[object Error]",f5="[object Map]",h5="[object Number]",d5="[object RegExp]",m5="[object Set]",p5="[object String]",g5="[object Symbol]",v5="[object ArrayBuffer]",_5="[object DataView]",zp=Sn?Sn.prototype:void 0,Ec=zp?zp.valueOf:void 0;function b5(t,e,n,r,i,s,a){switch(n){case _5:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case v5:return!(t.byteLength!=e.byteLength||!s(new Xo(t),new Xo(e)));case l5:case c5:case h5:return ba(+t,+e);case u5:return t.name==e.name&&t.message==e.message;case d5:case p5:return t==e+"";case f5:var o=s5;case m5:var l=r&a5;if(o||(o=Ff),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=o5,a.set(t,e);var u=U_(o(t),o(e),r,i,s,a);return a.delete(t),u;case g5:if(Ec)return Ec.call(t)==Ec.call(e)}return!1}var y5=1,w5=Object.prototype,E5=w5.hasOwnProperty;function $5(t,e,n,r,i,s){var a=n&y5,o=du(t),l=o.length,c=du(e),u=c.length;if(l!=u&&!a)return!1;for(var f=l;f--;){var h=o[f];if(!(a?h in e:E5.call(e,h)))return!1}var d=s.get(t),m=s.get(e);if(d&&m)return d==e&&m==t;var v=!0;s.set(t,e),s.set(e,t);for(var p=a;++f<l;){h=o[f];var g=t[h],_=e[h];if(r)var b=a?r(_,g,h,e,t,s):r(g,_,h,t,e,s);if(!(b===void 0?g===_||i(g,_,n,r,s):b)){v=!1;break}p||(p=h=="constructor")}if(v&&!p){var y=t.constructor,w=e.constructor;y!=w&&"constructor"in t&&"constructor"in e&&!(typeof y=="function"&&y instanceof y&&typeof w=="function"&&w instanceof w)&&(v=!1)}return s.delete(t),s.delete(e),v}var T5=1,Fp="[object Arguments]",Gp="[object Array]",Ba="[object Object]",S5=Object.prototype,qp=S5.hasOwnProperty;function x5(t,e,n,r,i,s){var a=Yt(t),o=Yt(e),l=a?Gp:ls(t),c=o?Gp:ls(e);l=l==Fp?Ba:l,c=c==Fp?Ba:c;var u=l==Ba,f=c==Ba,h=l==c;if(h&&as(t)){if(!as(e))return!1;a=!0,u=!1}if(h&&!u)return s||(s=new Nn),a||Dl(t)?U_(t,e,n,r,i,s):b5(t,e,l,n,r,i,s);if(!(n&T5)){var d=u&&qp.call(t,"__wrapped__"),m=f&&qp.call(e,"__wrapped__");if(d||m){var v=d?t.value():t,p=m?e.value():e;return s||(s=new Nn),i(v,p,n,r,s)}}return h?(s||(s=new Nn),$5(t,e,n,r,i,s)):!1}function Vl(t,e,n,r,i){return t===e?!0:t==null||e==null||!Qn(t)&&!Qn(e)?t!==t&&e!==e:x5(t,e,n,r,Vl,i)}var k5=1,O5=2;function M5(t,e,n,r){var i=n.length,s=i,a=!r;if(t==null)return!s;for(t=Object(t);i--;){var o=n[i];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=n[i];var l=o[0],c=t[l],u=o[1];if(a&&o[2]){if(c===void 0&&!(l in t))return!1}else{var f=new Nn;if(r)var h=r(c,u,l,t,e,f);if(!(h===void 0?Vl(u,c,k5|O5,r,f):h))return!1}}return!0}function H_(t){return t===t&&!xn(t)}function C5(t){for(var e=wa(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,H_(i)]}return e}function z_(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function A5(t){var e=C5(t);return e.length==1&&e[0][2]?z_(e[0][0],e[0][1]):function(n){return n===t||M5(n,t,e)}}function I5(t,e){return t!=null&&e in Object(t)}function D5(t,e,n){e=S_(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var a=Nl(e[r]);if(!(s=t!=null&&n(t,a)))break;t=t[a]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&Rf(i)&&Lf(a,i)&&(Yt(t)||ss(t)))}function L5(t,e){return t!=null&&D5(t,e,I5)}var R5=1,N5=2;function P5(t,e){return Pf(t)&&H_(e)?z_(Nl(t),e):function(n){var r=wt(n,t);return r===void 0&&r===e?L5(n,t):Vl(e,r,R5|N5)}}function V5(t){return function(e){return e==null?void 0:e[t]}}function B5(t){return function(e){return x_(e,t)}}function U5(t){return Pf(t)?V5(Nl(t)):B5(t)}function Bl(t){return typeof t=="function"?t:t==null?If:typeof t=="object"?Yt(t)?P5(t[0],t[1]):A5(t):U5(t)}function H5(t){return function(e,n,r){for(var i=-1,s=Object(e),a=r(e),o=a.length;o--;){var l=a[t?o:++i];if(n(s[l],l,s)===!1)break}return e}}var z5=H5();const F_=z5;function gu(t,e,n){(n!==void 0&&!ba(t[e],n)||n===void 0&&!(e in t))&&Al(t,e,n)}function vu(t){return Qn(t)&&yi(t)}function _u(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function F5(t){return ya(t,Ea(t))}function G5(t,e,n,r,i,s,a){var o=_u(t,n),l=_u(e,n),c=a.get(l);if(c){gu(t,n,c);return}var u=s?s(o,l,n+"",t,e,a):void 0,f=u===void 0;if(f){var h=Yt(l),d=!h&&as(l),m=!h&&!d&&Dl(l);u=l,h||d||m?Yt(o)?u=o:vu(o)?u=p_(o):d?(f=!1,u=M_(l,!0)):m?(f=!1,u=D_(l,!0)):u=[]:g4(l)||ss(l)?(u=o,ss(o)?u=F5(o):(!xn(o)||Df(o))&&(u=L_(l))):f=!1}f&&(a.set(l,u),i(u,l,r,s,a),a.delete(l)),gu(t,n,u)}function G_(t,e,n,r,i){t!==e&&F_(e,function(s,a){if(i||(i=new Nn),xn(s))G5(t,e,a,n,G_,r,i);else{var o=r?r(_u(t,a),s,a+"",t,e,i):void 0;o===void 0&&(o=s),gu(t,a,o)}},Ea)}function q5(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function j5(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var W5="[object Map]",Y5="[object Set]",Z5=Object.prototype,X5=Z5.hasOwnProperty;function In(t){if(t==null)return!0;if(yi(t)&&(Yt(t)||typeof t=="string"||typeof t.splice=="function"||as(t)||Dl(t)||ss(t)))return!t.length;var e=ls(t);if(e==W5||e==Y5)return!t.size;if(Il(t))return!T_(t).length;for(var n in t)if(X5.call(t,n))return!1;return!0}var K5=IL(function(t,e,n){G_(t,e,n)});const Ne=K5;var Q5=1/0,J5=Yi&&1/Ff(new Yi([,-0]))[1]==Q5?function(t){return new Yi(t)}:cL;const eN=J5;var tN=200;function q_(t,e,n){var r=-1,i=SL,s=t.length,a=!0,o=[],l=o;if(n)a=!1,i=q5;else if(s>=tN){var c=e?null:eN(t);if(c)return Ff(c);a=!1,i=B_,l=new aa}else l=e?[]:o;e:for(;++r<s;){var u=t[r],f=e?e(u):u;if(u=n||u!==0?u:0,a&&f===f){for(var h=l.length;h--;)if(l[h]===f)continue e;e&&l.push(f),o.push(u)}else i(l,f,n)||(l!==o&&l.push(f),o.push(u))}return o}var nN=v_(function(t){var e=j5(t);return vu(e)&&(e=void 0),q_(Pl(t,1,vu,!0),Bl(e))});const rN=nN;function oa(t){return t&&t.length?q_(t):[]}const sn="cds",cr={opacity:{unselected:.05,selected:.4}},Dr={ticks:{number:7,rotateIfSmallerThan:30,verticalSpaceRatio:2.5,horizontalSpaceRatio:3.5},ratio:{reference:"value",compareTo:"marker"},paddingRatio:.1,hover:{rectanglePadding:4}},Fi={duration:1e3,ease:r1,zoomLevel:3},Li={circles:{fillOpacity:.3,hover:{stroke:"#FFF"}},padding:{mainGroup:4,children:2},hierarchyLevel:2},j_={pairingOptions:{"1-color":4,"2-color":5,"3-color":5,"4-color":3,"5-color":2,"14-color":1}},yn={circle:{radius:4,opacity:{hovered:1,default:.3}},box:{opacity:{hovered:.5,default:.3}},strokeWidth:{default:1,thicker:2}},iN={defaultBins:10},Ot={items:{status:{ACTIVE:1,DISABLED:0},horizontalSpace:12,verticalSpace:24,textYOffset:8,spaceAfter:4},checkbox:{radius:6.5},radius:{iconData:[{cx:7,cy:7,r:6.5},{cx:7,cy:10,r:3.5}],fill:null,stroke:"#8c8c8c"},line:{yPosition:6,width:24,strokeWidth:1.4,fill:null,stroke:"#999999"},area:{width:24,height:14,fill:"#6f6f6f",stroke:null},size:{iconData:[{width:23,height:12},{width:13,height:6}],fill:null,stroke:"#8D8D8D"},quartile:{iconData:[{x:0,y:0,width:24,height:13},{x:11,y:4,width:1,height:4}]},zoom:{iconData:[{x:0,y:0,width:12,height:12}],color:"#8D8D8D"},color:{barWidth:300,barHeight:8,axisYTranslation:10}},lr={opacity:{unselected:.3,selected:1},weight:{selected:2,unselected:1}},jt={statusBar:{paddingRight:5},status:{indicatorSize:16,paddingLeft:15},total:{paddingLeft:36,paddingRight:24},height:{default:8,proportional:16},dividerWidth:2},bt={radiusOffset:-15,innerRadius:2,padAngle:.007,hoverArc:{outerRadiusOffset:3},xOffset:30,yOffset:20,yOffsetCallout:10,callout:{minSliceDegree:5,offsetX:15,offsetY:12,horizontalLineLength:8,textMargin:2}},Hr={opacity:{unselected:.1,selected:.3},xLabelPadding:10,yLabelPadding:8,yTicksNumber:4,minRange:10,xAxisRectHeight:50,dotsRadius:5},On={nodeWidth:4,nodeHoveredWidth:8,minNodePadding:24,opacity:{unfocus:.3,default:.8,selected:1}},jp={minCellDividerDimension:16,chartPadding:.5},Wp={default:{size:24}},sN={horizontalOffset:10},Yp={default:{duration:300},pie_slice_mouseover:{duration:100},pie_chart_titles:{duration:375},graph_element_mouseover_fill_update:{duration:100},graph_element_mouseout_fill_update:{duration:100}},dn={height:{[qn.GRAPH_VIEW]:32,[qn.SLIDER_VIEW]:10},spacerHeight:8,handleWidth:5,handleBarWidth:1,handleBarHeight:12},aN=[{type:Vt.RADIUS,name:"Radius"},{type:Vt.AREA,name:"Poor area"},{type:Vt.AREA,name:"Satisfactory area"},{type:Vt.AREA,name:"Great area"},{type:Vt.QUARTILE,name:"Quartiles"}],Gi={type:Ln.END_LINE,threshold:16,numCharacter:14},oN={enabled:!0,position:Bs.BOTTOM,clickable:!0,truncation:Gi,alignment:Ct.LEFT,order:null,additionalItems:[]},lN={x:{enabled:!0,numberOfTicks:15,alignWithAxisTicks:!1},y:{enabled:!0,numberOfTicks:5,alignWithAxisTicks:!1}},cN={enabled:!0},W_={enabled:!0,showTotal:!0,truncation:Gi,groupLabel:"Group"},Y_={top:{visible:!0,includeZero:!0,truncation:Gi},bottom:{visible:!0,includeZero:!0,truncation:Gi},left:{visible:!0,includeZero:!0,truncation:Gi},right:{visible:!0,includeZero:!0,truncation:Gi}},Ul={addSpaceOnEdges:1,showDayName:!1,localeObject:u_,timeIntervalFormats:{"15seconds":{primary:"MMM d, pp",secondary:"pp"},minute:{primary:"MMM d, p",secondary:"p"},"30minutes":{primary:"MMM d, p",secondary:"p"},hourly:{primary:"MMM d, hh a",secondary:"hh a"},daily:{primary:"MMM d",secondary:"d"},weekly:{primary:"eee, MMM d",secondary:"eee"},monthly:{primary:"MMM yyyy",secondary:"MMM"},quarterly:{primary:"QQQ ''yy",secondary:"QQQ"},yearly:{primary:"yyyy",secondary:"yyyy"}}},uN=typeof document<"u"&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled),Jt={width:null,height:null,resizable:!0,theme:xv.WHITE,tooltip:W_,legend:oN,style:{prefix:"cc"},data:{groupMapsTo:"group",loading:!1,selectedGroups:[]},color:{scale:null,pairing:{numberOfVariants:null,option:1},gradient:{enabled:!1}},toolbar:{enabled:!0,numberOfIcons:3,controls:[{type:kt.SHOW_AS_DATATABLE},...uN?[{type:kt.MAKE_FULLSCREEN}]:[],{type:kt.EXPORT_CSV},{type:kt.EXPORT_PNG},{type:kt.EXPORT_JPG}]}},Z_=Ne({},Jt,{thematic:{projection:or.geoNaturalEarth1}}),Ta=Ne({},Jt,{axes:Y_,timeScale:Ul,grid:lN,ruler:cN,zoomBar:{zoomRatio:.4,minZoomRatio:.01,top:{enabled:!1,type:qn.GRAPH_VIEW}}}),li=Ne({},Ta,{bars:{maxWidth:16,spacingFactor:.25},timeScale:Ne(Ul,{addSpaceOnEdges:1})}),fN=Ne({},li,{}),hN=Ne({},li,{}),dN=Ne({},li,{bars:Ne({},li.bars,{dividerSize:1.5})}),mN=Ne({},li,{}),Gf=Ne({},Ta,{points:{radius:4,fillOpacity:.3,filled:!0,enabled:!0}}),pN=Gf,X_=Ne({},Gf,{points:{radius:3,filled:!1,enabled:!0}}),K_=Ne({},X_,{timeScale:Ne(Ul,{addSpaceOnEdges:0})}),gN=K_,vN=Ne({},Ta,{bubble:{radiusMapsTo:"radius",radiusLabel:"Radius",radiusRange:t=>{const e=Math.min(t.width,t.height);return[e*3/400,e*25/400]},fillOpacity:.2,enabled:!0},points:{filled:!0},legend:{additionalItems:[{type:Vt.RADIUS,name:"Radius"}]}}),_N=Ne({},Ta,{bullet:{performanceAreaTitles:["Poor","Satisfactory","Great"]},grid:{x:{enabled:!1},y:{enabled:!1}},legend:{additionalItems:[{type:Vt.AREA,name:"Poor area"},{type:Vt.AREA,name:"Satisfactory area"},{type:Vt.AREA,name:"Great area"},{type:Vt.QUARTILE,name:"Quartiles"}]}}),bN=Ne({},li,{bars:{dividerSize:1.5},timeScale:Ne(Ul,{addSpaceOnEdges:0})}),yN=Ne({},Jt,{tooltip:Ne({},W_,{wordLabel:"Word",valueLabel:"Value"}),wordCloud:{fontSizeMapsTo:"value",fontSizeRange:t=>{const e=Math.min(t.width,t.height);return[e*20/400,e*75/400]},wordMapsTo:"word"}}),Q_=Ne({},Jt,{pie:{labels:{formatter:null,enabled:!0},alignment:Ct.LEFT,sortFunction:null,valueMapsTo:"value"}}),wN=Ne({},Jt,{legend:{enabled:!1},gauge:{type:Vi.SEMI,arcWidth:16,deltaArrow:{size:t=>t/8,enabled:!0},showPercentageSymbol:!0,status:null,numberSpacing:10,deltaFontSize:t=>t/8,valueFontSize:t=>t/2.5,numberFormatter:t=>Number(t.toFixed(2))%1!==0?t.toFixed(2).toLocaleString():t.toFixed().toLocaleString(),alignment:Ct.LEFT}}),EN=Ne({},Q_,{donut:{center:{numberFontSize:t=>`${Math.min(t/100*24,24)}px`,titleFontSize:t=>`${Math.min(t/100*15,15)}px`,titleYPosition:t=>Math.min(t/80*20,20),numberFormatter:t=>Math.floor(t).toLocaleString()},alignment:Ct.LEFT}}),J_=Ne({},Jt,{legend:{enabled:!1,clickable:!1},meter:{showLabels:!0,proportional:null,statusBar:{percentageIndicator:{enabled:!0}}}}),$N=Ne({},J_,{legend:{enabled:!0}}),TN=Ne({},Jt,{radar:{axes:{angle:"key",value:"value"},alignment:Ct.LEFT},tooltip:{gridline:{enabled:!0},valueFormatter:t=>t??"N/A"}}),SN=Ne({},li,{comboChartTypes:[]}),xN=Ne({tree:{type:Ju.TREE}},Jt,{}),kN=Ne({},Jt,{data:Ne(Jt.data,{groupMapsTo:"name"})}),ON=Ne({},Jt,Li,{data:Ne(Jt.data,{groupMapsTo:"name"})}),MN=Ne({},Jt,{alluvial:{data:Ne(Jt.data,{groupMapsTo:"source"}),nodeAlignment:Ct.CENTER,nodePadding:24,monochrome:!1,nodes:[]}}),CN=Ne({},Jt,{axes:Y_,heatmap:{divider:{state:Us.AUTO},colorLegend:{type:"linear"}}}),AN=Ne({},Z_,{choropleth:{colorLegend:{type:"linear"}}}),gt={alluvialChart:MN,areaChart:K_,axisChart:Ta,boxplotChart:mN,bubbleChart:vN,bulletChart:_N,chart:Jt,circlePackChart:ON,choroplethChart:AN,comboChart:SN,donutChart:EN,gaugeChart:wN,groupedBarChart:hN,heatmapChart:CN,histogramChart:bN,lineChart:X_,lollipopChart:pN,meterChart:J_,pieChart:Q_,proportionalMeterChart:$N,radarChart:TN,scatterChart:Gf,simpleBarChart:fN,stackedAreaChart:gN,stackedBarChart:dN,thematicChart:Z_,treeChart:xN,treemapChart:kN,wordCloudChart:yN};function IN(t,e,n){let r=null;return function(...i){const s=this;s.mousePosition=ni(i[0],n),clearTimeout(r),r=setTimeout(function(){t.apply(s,i)},e)}}function xt(t,e){var n;const r=yr(t),i=Object.keys(e.axes||{});(n=e==null?void 0:e.toolbar)!=null&&n.controls&&delete r.toolbar.controls,i.length===0&&delete r.axes;for(const s in r.axes)if(i.includes(s)){const a=e.axes[s];if((a.primary||a.secondary)&&console.warn("`primary` & `secondary` are no longer needed for axis configurations. Read more here https://carbon-design-system.github.io/carbon-charts/?path=/story/docs-tutorials--tabular-data-format"),a.mapsTo==null){const l=a.scaleType;l==null?a.mapsTo="value":l===xe.TIME?a.mapsTo="date":l===xe.LABELS&&(a.mapsTo="key")}}else delete r.axes[s];return qf(r,e),Ne(r,e)}function ar(t){if(!t)return;const e=/translate\([0-9]+\.?[0-9]*,[0-9]+\.?[0-9]*\)/,n=t.getAttribute("transform").match(e);if(!n)return null;if(n[0]){const r=n[0].replace(/translate\(/,"").replace(/\)/,"").split(",");return{tx:r[0],ty:r[1]}}return null}function Ls(t){const e=/\(([^)]+)\)/.exec(t);if(e&&e.length>1){const n=e[1].split(",");if(n.length>1)return{x:parseFloat(n[0]),y:parseFloat(n[1])}}return{x:0,y:0}}function $c(t,e,n="value",r=!1){const i=t/e.reduce((s,a)=>s+a[n],0)*100;return r?i:i%1!==0?parseFloat(i.toFixed(1)):i}function la(t,e,n){if(n>t.length)return t;if(e===Ln.MID_LINE)return t.substr(0,n/2)+"..."+t.substr(-n/2);if(e===Ln.FRONT_LINE)return"..."+t.substr(-n);if(e===Ln.END_LINE)return t.substr(0,n)+"..."}function qf(t,e){const n=D(t,"legend","additionalItems"),r=D(e,"legend","additionalItems");if(n&&r){const i=r.map(o=>o.type),s=n.map(o=>o.type),a=aN.filter(o=>s.includes(o.type)&&!i.includes(o.type));t.legend.additionalItems=a,e.legend.additionalItems=rN(a,r,"name")}}const D=(t,...e)=>{let n=t;if(n){for(const r of e)if(n[r]!==null&&n[r]!==void 0)n=n[r];else return null;return n}return null},eb=(t,e)=>e===Ft.HORIZONTAL?{y0:t.x0,y1:t.x1,x0:t.y0,x1:t.y1}:t,tn=(t,e)=>{const{x0:n,x1:r,y0:i,y1:s}=eb(t,e);return`M${n},${i}L${n},${s}L${r},${s}L${r},${i}L${n},${i}`};function hr(t,e,n){return n===Ft.VERTICAL?[t,e]:[e,t]}var tb=(t=>(t["15seconds"]="15seconds",t.minute="minute",t["30minutes"]="30minutes",t.hourly="hourly",t.daily="daily",t.weekly="weekly",t.monthly="monthly",t.quarterly="quarterly",t.yearly="yearly",t))(tb||{});const Tc=[["15seconds",15*1e3],["minute",60*1e3],["30minutes",30*60*1e3],["hourly",60*60*1e3],["daily",24*60*60*1e3],["monthly",30*24*60*60*1e3],["quarterly",3*30*24*60*60*1e3],["yearly",12*30*24*60*60*1e3]];function nb(t,e,n,r,i){const s=e===0,a=Number(is(new Date(t),"c"))===2,o=Number(is(new Date(t),"q"))===1,l=e!==0?n[e-1]:null;switch(r){case"15seconds":return s||Ua(t)||$s(t,l)||Or(t);case"minute":return s||Ua(t)||$s(t,l)||Or(t);case"30minutes":return s||Ua(t)||$s(t,l)||Or(t);case"hourly":return s||Ua(t)||$s(t,l)||Or(t);case"daily":return i?s||a||Or(t):s||$s(t,l)||Or(t);case"weekly":return s||a||Or(t);case"monthly":return s||Or(t);case"quarterly":return s||o;case"yearly":return!1;default:throw new Error(`${r} is not a valid time interval.`)}}function bu(t,e,n,r,i){const s=i.showDayName,a=r==="daily"&&s?"weekly":r,o=new Date(t),l=D(i,"timeIntervalFormats")[a],c=D(l,"primary"),u=D(l,"secondary");let f=nb(t,e,n,r,s)?c:u;r==="15seconds"&&o.getMilliseconds()!==0&&(f=f.replace("pp","h:mm:ss.SSS a"));const h=i.localeObject;return is(o,f,{locale:h})}function Ko(t){const e=new Date(t);return{M:e.getMonth()+1,d:e.getDate(),H:e.getHours(),m:e.getMinutes(),s:e.getSeconds()}}function DN(t){if(t)return t.slice(1).map((e,n)=>e-t[n])}function LN(t){const e=Tc.reduce((n,[,r],i)=>{const s=Tc[n][1],a=Math.abs(s-t),o=Math.abs(r-t);return a<o?n:i},0);return Tc[e][0]}function yu(t,e){if(tb[e])return e;if(t.length===1)return"15seconds";const n=DN(t),r=Nr(n);return LN(r)}function Ua(t){const{s:e,m:n,H:r}=Ko(t);return r===0&&n===0&&e===0}function $s(t,e){const n=Ko(t).M,r=Ko(e).M;return n!==r}function Or(t){const{M:e,d:n,s:r,m:i,H:s}=Ko(t);return e===1&&n===1&&s===0&&i===0&&r===0}function Zp(t){return t===void 0?"":t.toISOString()}function rb(t){const e=Rn(t,r=>r.value),n=Vn().domain(e).nice().domain();if(n[0]>0)n[0]=0;else if(n[0]===0&&n[1]===0)return[0,1];return n[0]<0&&n[1]>0&&(Math.abs(n[0])>n[1]?n[1]=Math.abs(n[0]):n[0]=-n[1]),n}function ib(t,e){const n=D(e,"gradient","colors"),r=!In(n);let i=D(e,"pairing","option");const s=rb(t),a=s[0]<0&&s[1]>0?"diverge":"mono";(i<1&&i>4&&a==="mono"||i<1&&i>2&&a==="diverge")&&(i=1);const o=r?n:[];if(!r){const l=a==="diverge"?17:11;for(let c=1;c<l+1;c++)o.push(`fill-${a}-${i}-${c}`)}return bf().domain(s).range(o)}var Ye=(t=>(t.GRAPHICS_DOCUMENT="graphics-document",t.GRAPHICS_OBJECT="graphics-object",t.GRAPHICS_SYMBOL="graphics-symbol",t.GROUP="group",t.DOCUMENT="document",t.CHECKBOX="checkbox",t.BUTTON="button",t.MENU="menu",t.MENU_ITEM="menuitem",t.IMG="img",t))(Ye||{});function RN(t,e){return t&&F_(t,e,wa)}function NN(t,e){return function(n,r){if(n==null)return n;if(!yi(n))return t(n,r);for(var i=n.length,s=e?i:-1,a=Object(n);(e?s--:++s<i)&&r(a[s],s,a)!==!1;);return n}}var PN=NN(RN);const jf=PN;function VN(t,e,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;){var a=t[i];e(r,a,n(a),t)}return r}function BN(t,e,n,r){return jf(t,function(i,s,a){e(r,i,n(i),a)}),r}function UN(t,e){return function(n,r){var i=Yt(n)?VN:BN,s=e?e():{};return i(n,t,Bl(r),s)}}function HN(t){for(var e=-1,n=t==null?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}var zN=Object.prototype,FN=zN.hasOwnProperty,GN=UN(function(t,e,n){FN.call(t,n)?t[n].push(e):Al(t,n,[e])});const qN=GN;class er{constructor(e){this.state={options:{}},this.colorScale={},this.colorClassNames={},this.services=e}getAllDataFromDomain(e){if(!this.getData())return null;const n=this.getOptions();let r=this.getData();const i=this.getDataGroups(),{groupMapsTo:s}=D(n,"data"),a=D(n,"axes");return e&&(r=r.filter(o=>e.includes(o[s]))),a&&Object.keys(a).forEach(o=>{const l=a[o].mapsTo,c=a[o].scaleType;if((c===xe.LINEAR||c===xe.LOG)&&(r=r.map(u=>({...u,[l]:u[l]===null?u[l]:Number(u[l])}))),l&&a[o].domain)if(c===xe.LABELS)r=r.filter(u=>a[o].domain.includes(u[l]));else{const[u,f]=a[o].domain;r=r.filter(h=>!(l in h)||h[l]>=u&&h[l]<=f)}}),r.filter(o=>i.find(l=>l.name===o[s]))}getDisplayData(e){if(!this.get("data"))return null;const{ACTIVE:n}=Ot.items.status,r=this.getDataGroups(e),{groupMapsTo:i}=this.getOptions().data;return this.getAllDataFromDomain(e).filter(s=>r.find(a=>a.name===s[i]&&a.status===n))}getData(){return this.get("data")}isDataEmpty(){return!this.getData().length}setData(e){const n=this.sanitize(yr(e)),r=this.generateDataGroups(n);return this.set({data:n,dataGroups:r}),n}getDataGroups(e){return D(this.getOptions(),"data","loading")?[]:e?this.get("dataGroups").filter(n=>e.includes(n.name)):this.get("dataGroups")}getActiveDataGroups(e){const{ACTIVE:n}=Ot.items.status;return this.getDataGroups(e).filter(r=>r.status===n)}getDataGroupNames(e){return this.getDataGroups(e).map(n=>n.name)}getActiveDataGroupNames(e){return this.getActiveDataGroups(e).map(n=>n.name)}aggregateBinDataByGroup(e){return qN(e,"group")}getBinConfigurations(){const e=this.getDisplayData(),n=this.getOptions(),r=this.services.cartesianScales.getMainXAxisPosition(),i=this.services.cartesianScales.getDomainIdentifier(),s=n.axes[r],{groupMapsTo:a}=n.data,{bins:o=iN.defaultBins}=s,l=Array.isArray(o),c=iS().value(d=>d[i]).thresholds(o)(e);if(l)c[c.length-1].x1=o[o.length-1];else{const d=c[0].x1-c[0].x0;c[c.length-1].x1=+c[c.length-1].x0+d}const u=l?[o[0],o[o.length-1]]:[c[0].x0,c[c.length-1].x1],f=Array.from(new Set(e.map(d=>d[a]))),h=[];return c.forEach(d=>{const m=`${d.x0}-${d.x1}`,v=this.aggregateBinDataByGroup(d);f.forEach(p=>{h.push({group:p,key:m,value:v[p]||0,bin:d.x0})})}),{bins:c,binsDomain:u}}getBinnedStackedData(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.getActiveDataGroupNames(),{bins:i}=this.getBinConfigurations(),s=this.getDataValuesGroupedByKeys({bins:i});return _c().keys(r)(s).map((a,o)=>Object.keys(a).filter(l=>!isNaN(l)).map(l=>{const c=a[l];return c[n]=r[o],c}))}getGroupedData(e){const n=this.getDisplayData(e),r={},{groupMapsTo:i}=this.getOptions().data;return n.map(s=>{const a=s[i];r[a]!==null&&r[a]!==void 0?r[a].push(s):r[a]=[s]}),Object.keys(r).map(s=>({name:s,data:r[s]}))}getStackKeys({bins:e=null,groups:n=null}={bins:null,groups:null}){const r=this.getOptions(),i=this.getDisplayData(n);let s;e?s=e.map(l=>`${l.x0}-${l.x1}`):s=oa(i.map(l=>{const c=this.services.cartesianScales.getDomainIdentifier(l);return l[c]instanceof Date?Zp(l[c]):l[c]&&typeof l[c].toString=="function"?l[c].toString():l[c]}));const a=this.services.cartesianScales.domainAxisPosition,o=r.axes[a].scaleType;return o===xe.TIME?s.sort((l,c)=>{const u=new Date(l),f=new Date(c);return u-f}):(o===xe.LOG||o===xe.LINEAR)&&s.sort((l,c)=>l-c),s}getDataValuesGroupedByKeys({bins:e=null,groups:n=null}){const r=this.getOptions(),{groupMapsTo:i}=r.data,s=this.getDisplayData(n),a=this.getDataGroupNames(),o=this.getStackKeys({bins:e,groups:n});return e?o.map(l=>{const[c,u]=l.split("-"),f={x0:c,x1:u},h=e.find(d=>d.x0.toString()===c.toString());return a.forEach(d=>{f[d]=h.filter(m=>m[i]===d).length}),f}):o.map(l=>{const c={sharedStackKey:l};return a.forEach(u=>{const f=s.find(d=>{const m=this.services.cartesianScales.getDomainIdentifier(d);return d[i]===u&&Object.prototype.hasOwnProperty.call(d,m)&&(d[m]instanceof Date?Zp(d[m])===l:d[m].toString()===l)}),h=this.services.cartesianScales.getRangeIdentifier(c);c[u]=f?f[h]:null}),c})}getStackedData({percentage:e=!1,groups:n=null,divergent:r=!1}){const i=this.getOptions(),{groupMapsTo:s}=i.data,a=this.getActiveDataGroupNames(n),o=this.getDataValuesGroupedByKeys({groups:n});if(e){const l=HN(o.map(c=>[c.sharedStackKey,0]));o.forEach(c=>{a.forEach(u=>{l[c.sharedStackKey]+=c[u]})}),o.forEach(c=>{a.forEach(u=>{const f=l[c.sharedStackKey];l[c.sharedStackKey]?c[u]=c[u]/f*100:c[u]=0})})}return(r?_c().offset(mI):_c()).keys(a)(o).map((l,c)=>Object.keys(l).filter(u=>!isNaN(u)).map(u=>{const f=l[u];return f[s]=a[c],f}))}getOptions(){return this.state.options}set(e,n){this.state=Object.assign({},this.state,e);const r=Object.assign({skipUpdate:!1,animate:!0},n);r.skipUpdate||this.update(r.animate)}get(e){return e?this.state[e]:this.state}setOptions(e){const n=this.getOptions();qf(n,e),this.set({options:Ne(n,e)})}update(e=!0){this.getDisplayData()&&(this.updateAllDataGroups(),this.setCustomColorScale(),this.setColorClassNames(),this.services.events.dispatchEvent(z.Model.UPDATE,{animate:e}))}toggleDataLabel(e){const{ACTIVE:n,DISABLED:r}=Ot.items.status,i=this.getDataGroups(),s=i.some(c=>c.status===r),a=i.filter(c=>c.status===n);if(s)if(a.length===1&&a[0].name===e)i.forEach((c,u)=>{i[u].status=n});else{const c=i.findIndex(u=>u.name===e);i[c].status=i[c].status===r?n:r}else i.forEach((c,u)=>{i[u].status=c.name===e?n:r});const o=i.filter(c=>c.status===n),l=this.getOptions();i.some(c=>c.status===r)?l.data.selectedGroups=o.map(c=>c.name):l.data.selectedGroups=[],this.services.events.dispatchEvent(z.Legend.ITEMS_UPDATE,{dataGroups:i}),this.set({dataGroups:i})}getIsFilled(e,n,r,i){const s=this.getOptions();return s.getIsFilled?s.getIsFilled(e,n,r,i):i}getFillColor(e,n,r){const i=this.getOptions(),s=D(this.colorScale,e);return i.getFillColor?i.getFillColor(e,n,r,s):s}getStrokeColor(e,n,r){const i=this.getOptions(),s=D(this.colorScale,e);return i.getStrokeColor?i.getStrokeColor(e,n,r,s):s}isUserProvidedColorScaleValid(){const e=D(this.getOptions(),"color","scale"),n=this.getDataGroups();return e==null||Object.keys(e).length==0?!1:n.some(r=>Object.keys(e).includes(r.name))}getColorClassName(e){const n=this.colorClassNames(e.dataGroupName);let r=e.originalClassName;return e.classNameTypes.forEach(i=>r=e.originalClassName?`${r} ${i}-${n}`:`${i}-${n}`),r||""}getStatus(){return null}getAllDataGroupsNames(){return this.allDataGroups}transformToTabularData(e){console.warn("We've updated the charting data format to be tabular by default. The current format you're using is deprecated and will be removed in v1.0, read more here https://carbon-design-system.github.io/carbon-charts/?path=/story/docs-tutorials--tabular-data-format");const n=[],{datasets:r,labels:i}=e;return r.forEach(s=>{s.data.forEach((a,o)=>{let l;const c=D(s,"label");if(c===null){const f=D(i,o);f?l=f:l="Ungrouped"}else l=c;const u={group:l,key:i[o]};isNaN(a)?(u.value=a.value,u.date=a.date):u.value=a,n.push(u)})}),n}getTabularDataArray(){return[]}exportToCSV(){const e=this.getTabularDataArray().map(o=>o.map(l=>`"${l==="&ndash;"?"â":l}"`));let n="",r="";e.forEach(function(o,l){r=o.join(","),n+=l<e.length?r+`
`:r});const i=this.getOptions();let s="myChart";const a=D(i,"fileDownload","fileName");typeof a=="function"?s=a("csv"):typeof a=="string"&&(s=a),this.services.files.downloadCSV(n,`${s}.csv`)}getTabularData(e){return Array.isArray(e)?e:this.transformToTabularData(e)}sanitize(e){return e=this.getTabularData(e),e}updateAllDataGroups(){this.allDataGroups?this.getDataGroupNames().forEach(e=>{this.allDataGroups.indexOf(e)===-1&&this.allDataGroups.push(e)}):this.allDataGroups=this.getDataGroupNames()}generateDataGroups(e){const{groupMapsTo:n}=this.getOptions().data,{ACTIVE:r,DISABLED:i}=Ot.items.status,s=this.getOptions(),a=oa(e.map(l=>l[n]));s.data.selectedGroups.length&&(s.data.selectedGroups.every(l=>a.includes(l))||(s.data.selectedGroups=[]));const o=l=>!s.data.selectedGroups.length||s.data.selectedGroups.includes(l)?r:i;return a.map(l=>({name:l,status:o(l)}))}setCustomColorScale(){if(!this.isUserProvidedColorScaleValid())return;const e=this.getOptions(),n=D(e,"color","scale");Object.keys(n).forEach(r=>{this.allDataGroups.includes(r)||console.warn(`"${r}" does not exist in data groups.`)}),this.allDataGroups.filter(r=>n[r]).forEach(r=>this.colorScale[r]=n[r])}setColorClassNames(){const e=D(this.getOptions(),"color","pairing");let n=D(e,"numberOfVariants");(!n||n<this.allDataGroups.length)&&(n=this.allDataGroups.length);let r=D(e,"option");const i=j_.pairingOptions,s=n>5?14:n,a=`${s}-color`;r=r<=i[a]?r:1;const o=this.allDataGroups.map((l,c)=>`${s}-${r}-${c%14+1}`);this.colorClassNames=wl().range(o).domain(this.allDataGroups)}}class wi extends er{constructor(e){super(e),this.axisFlavor=pl.DEFAULT}assignRangeAndDomains(){const{cartesianScales:e}=this.services,n=this.getOptions(),r=e.isDualAxes(),i={primaryDomain:e.domainAxisPosition,primaryRange:e.rangeAxisPosition,secondaryDomain:null,secondaryRange:null};return r&&(i.secondaryDomain=e.secondaryDomainAxisPosition,i.secondaryRange=e.secondaryRangeAxisPosition),Object.keys(i).forEach(s=>{const a=i[s];e.scales[a]?i[s]={position:a,label:e.getScaleLabel(a),identifier:D(n,"axes",a,"mapsTo")}:i[s]=null}),i}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,{cartesianScales:i}=this.services,{primaryDomain:s,primaryRange:a,secondaryDomain:o,secondaryRange:l}=this.assignRangeAndDomains(),c=i.getDomainAxisScaleType();let u;return c===xe.TIME&&(u=f=>is(f,"MMM d, yyyy")),[["Group",s.label,a.label,...o?[o.label]:[],...l?[l.label]:[]],...e.map(f=>[f[r],f[s.identifier]===null?"&ndash;":u?u(f[s.identifier]):f[s.identifier],f[a.identifier]===null||isNaN(f[a.identifier])?"&ndash;":f[a.identifier].toLocaleString(),...o?[f[o.identifier]===null?"&ndash;":f[o.identifier]]:[],...l?[f[l.identifier]===null||isNaN(f[l.identifier])?"&ndash;":f[l.identifier]]:[]])]}setData(e){let n;if(e&&(n=super.setData(e),D(this.getOptions(),"zoomBar",ae.TOP,"enabled"))){const r=D(this.getOptions(),"zoomBar",ae.TOP,"data");this.setZoomBarData(r)}return n}setZoomBarData(e){const n=e?this.sanitize(yr(e)):this.getDisplayData();let r=n;const{cartesianScales:i}=this.services;if(n&&i.domainAxisPosition&&i.rangeAxisPosition){const s=i.getDomainIdentifier(),a=i.getRangeIdentifier();let o=n.map(l=>l[s].getTime());o=oa(o).sort(),r=o.map(l=>{let c=0;const u={};return n.forEach(f=>{f[s].getTime()===l&&(c+=f[a])}),u[s]=new Date(l),u[a]=c,u})}this.set({zoomBarData:r})}getZoomBarData(){return this.get("zoomBarData")}sanitizeDateValues(e){const n=this.getOptions();if(!n.axes)return e;const r=[];return Object.keys(ae).forEach(i=>{const s=ae[i],a=n.axes[s];if(a&&a.scaleType===xe.TIME){const o=a.mapsTo;(o!==null||o!==void 0)&&r.push(o)}}),r.length>0&&e.forEach(i=>{r.forEach(s=>{D(i,s,"getTime")===null&&(i[s]=new Date(i[s]))})}),e}sanitize(e){return e=super.sanitize(e),e=this.sanitizeDateValues(e),e}}let jN=class extends wi{constructor(e){super(e)}getTabularDataArray(){const e=this.getDisplayData();return e.sort((n,r)=>n.source.localeCompare(r.source)),[["Source","Target","Value"],...e.map(n=>[n.source,n.target,n.value])]}},WN=class extends wi{constructor(e){super(e)}getBoxQuartiles(e){return{q_25:Zl(e,.25),q_50:Zl(e,.5),q_75:Zl(e,.75)}}getBoxplotData(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.getGroupedData(),i=[];for(const{name:s,data:a}of r){const o=this.services.cartesianScales.getRangeIdentifier(),l=a.map(b=>b[o]).sort(Qr),c={[n]:s,counts:l,quartiles:this.getBoxQuartiles(l),outliers:null,whiskers:null},u=c.quartiles.q_25,f=c.quartiles.q_75,h=(f-u)*1.5,d=u-h,m=f+h,v=[],p=[];for(const b of l)b<d||b>m?v.push(b):p.push(b);c.outliers=v;const g=Nr(p),_=ti(p);c.whiskers={min:g||Nr([c.quartiles.q_25,c.quartiles.q_50,c.quartiles.q_75]),max:_||ti([c.quartiles.q_25,c.quartiles.q_50,c.quartiles.q_75])},i.push(c)}return i}getTabularDataArray(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.getBoxplotData();return[["Group","Minimum","Q1","Median","Q3","Maximum","IQR","Outlier(s)"],...r.map(i=>{let s=D(i,"outliers");return(s===null||s.length===0)&&(s=["&ndash;"]),[i[n],D(i,"whiskers","min")!==null?D(i,"whiskers","min").toLocaleString():"&ndash;",D(i,"quartiles","q_25")!==null?D(i,"quartiles","q_25").toLocaleString():"&ndash;",D(i,"quartiles","q_50")!==null?D(i,"quartiles","q_50").toLocaleString():"&ndash;",D(i,"quartiles","q_75")!==null?D(i,"quartiles","q_75").toLocaleString():"&ndash;",D(i,"whiskers","max")!==null?D(i,"whiskers","max").toLocaleString():"&ndash;",D(i,"quartiles","q_75")!==null&&D(i,"quartiles","q_25")!==null?(D(i,"quartiles","q_75")-D(i,"quartiles","q_25")).toLocaleString():"&ndash;",s.map(a=>a.toLocaleString()).join(",")]})]}setColorClassNames(){const e=D(this.getOptions(),"color","pairing");let n=D(e,"option");const r=j_.pairingOptions;n=n<=r["1-color"]?n:1;const i=this.allDataGroups.map(()=>`1-${n}-1`);this.colorClassNames=wl().range(i).domain(this.allDataGroups)}},YN=class extends wi{constructor(e){super(e)}getMatchingRangeIndexForDatapoint(e){let n;for(let r=e.ranges.length-1;r>0;r--){const i=e.ranges[r];if(e.value>=i)return n=r,n}return 0}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.services.cartesianScales.getRangeIdentifier(),s=D(n,"bullet","performanceAreaTitles");return[["Title","Group","Value","Target","Percentage","Performance"],...e.map(a=>[a.title,a[r],a.value===null?"&ndash;":a.value,D(a,"marker")===null?"&ndash;":a.marker,D(a,"marker")===null?"&ndash;":`${Math.floor(a[i]/a.marker*100)}%`,s[this.getMatchingRangeIndexForDatapoint(a)]])]}},ZN=class extends er{constructor(e){super(e),this._colorScale=void 0,this._matrix={}}getFillColor(e){return this._colorScale(e)}getCombinedData(){if(In(this._matrix)){const e=this.getOptions(),n=this.getDisplayData();!In(n)&&!In(e.geoData.objects.countries)&&(e.geoData.objects.countries.geometries.forEach(r=>{this._matrix[r.properties.NAME]=r}),n.forEach(r=>{this._matrix[r.name]?this._matrix[r.name].value=r.value||null:console.warn(`Data point ${r} is missing geographical data.`)}))}return this._matrix}getTabularDataArray(){const e=this.getDisplayData();return[["Country ID","Country Name","Value"],...e.map(n=>[n.id===null?"&ndash;":n.id,n.name,n.value])]}getColorClassName(e){return`${e.originalClassName} ${this._colorScale(e.value)}`}setColorClassNames(){const e=D(this.getOptions(),"color");this._colorScale=ib(this.getDisplayData(),e)}},XN=class extends er{constructor(e){super(e),this.parentNode=!1,this.set({depth:2},{skipUpdate:!0})}setData(e){super.setData(e),this.setDataGroups(),e.length===1&&(this.parentNode=!0),this.setZoom()}setOptions(e){const n=this.getOptions(),r=Ne({},e,this.getZoomOptions(e));qf(n,r);const i=this.getHierarchyLevel(),s=D(n,"circlePack","hierarchyLevel");this.set({options:Ne(n,r),depth:s&&s<4?s:i})}getZoomOptions(e){if(!this.getDisplayData())return{};const n=this.getDisplayData(),r=e||this.getOptions(),i=n.length===1&&D(n,0,"children")?D(n,0,"children"):n;let s=this.getHierarchyLevel();return i.some(a=>{if(a.children&&a.children.some(o=>o.children))return s=3,!1}),D(r,"canvasZoom","enabled")===!0&&s>2?{legend:{additionalItems:[{type:Vt.ZOOM,name:"Click to zoom"}]}}:null}setZoom(e){this.setOptions(this.getZoomOptions(e))}updateHierarchyLevel(e){this.set({depth:e})}getHierarchyLevel(){return this.get("depth")}hasParentNode(){return this.parentNode}setDataGroups(){const e=this.getData(),n=this.getOptions(),{groupMapsTo:r}=n.data,i=e.map(s=>{const a=s[r];return this.setChildrenDataGroup(s,a)});this.set({data:i},{skipUpdate:!0})}setChildrenDataGroup(e,n){return e.children?{...e,dataGroupName:n,children:e.children.map(r=>this.setChildrenDataGroup(r,n))}:{...e,dataGroupName:n}}getTabularDataArray(){const e=this.getDisplayData(),n=[["Child","Parent","Value"]];return e.forEach(r=>{let i=r.value?r.value:0;r.children&&(i+=this.getChildrenDatums(r.children,r.name,n,0)),n.push(["&ndash;",r.name,i])}),n}getChildrenDatums(e,n,r=[],i=0){const s=n;return e.forEach(a=>{const o=a.name;let l=0;if(a.children)a.children.length>0&&(typeof a.value=="number"&&(i+=a.value),l+=this.getChildrenDatums(a.children,o,r,l),r.push([o,s,l]),i+=l);else{let c=0;typeof a.value=="number"&&(c=a.value,i+=a.value),r.push([a.name,s,c])}}),i}},KN=class extends er{constructor(e){super(e)}getTabularData(e){const n=super.getTabularData(e);return e!==n&&n.forEach(r=>{r.key&&r.key!==r.group&&(r.group=r.key)}),n}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data;return[["Group","Value"],...e.map(i=>[i[r],i.value===null?"&ndash;":i.value.toLocaleString()])]}sanitize(e){return this.getTabularData(e).sort((n,r)=>r.value-n.value)}},QN=class extends er{constructor(e){super(e)}getDataGroups(){return super.getDataGroups().filter(e=>e.name!=="delta")}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data;return[["Group","Value"],...e.map(i=>[i[r],i.value===null?"&ndash;":i.value.toLocaleString()])]}},JN=class extends wi{constructor(e){super(e),this.axisFlavor=pl.HOVERABLE,this._colorScale=void 0,this._domains=[],this._ranges=[],this._matrix={};const n=D(this.getOptions(),"axes");if(D(n,"left","scaleType")&&D(n,"left","scaleType")!==xe.LABELS||D(n,"right","scaleType")&&D(n,"right","scaleType")!==xe.LABELS||D(n,"top","scaleType")&&D(n,"top","scaleType")!==xe.LABELS||D(n,"bottom","scaleType")&&D(n,"bottom","scaleType")!==xe.LABELS)throw Error("Heatmap only supports label scaletypes.")}getValueDomain(){const e=Rn(this.getDisplayData(),r=>r.value),n=Vn().domain(e).nice().domain();if(n[0]>0)n[0]=0;else if(n[0]===0&&n[1]===0)return[0,1];return n[0]<0&&n[1]>0&&(Math.abs(n[0])>n[1]?n[1]=Math.abs(n[0]):n[0]=-n[1]),n}getFillColor(e){return this._colorScale(e)}getUniqueDomain(){if(In(this._domains)){const e=this.getDisplayData(),{cartesianScales:n}=this.services,r=n.getDomainIdentifier(),i=n.getMainXAxisPosition(),s=n.getCustomDomainValuesByposition(i);if(s)return s;this._domains=Array.from(new Set(e.map(a=>a[r])))}return this._domains}getUniqueRanges(){if(In(this._ranges)){const e=this.getDisplayData(),{cartesianScales:n}=this.services,r=n.getRangeIdentifier(),i=n.getMainYAxisPosition(),s=n.getCustomDomainValuesByposition(i);if(s)return s;this._ranges=Array.from(new Set(e.map(a=>a[r])))}return this._ranges}getMatrix(){if(In(this._matrix)){const e=this.getUniqueDomain(),n=this.getUniqueRanges(),r=this.services.cartesianScales.getDomainIdentifier(),i=this.services.cartesianScales.getRangeIdentifier(),s={};n.forEach(a=>{s[a]={value:null,index:-1}}),e.forEach(a=>{this._matrix[a]=yr(s)}),this.getDisplayData().forEach((a,o)=>{this._matrix[a[r]][a[i]]={value:a.value,index:o}})}return this._matrix}setData(e){const n=this.sanitize(yr(e)),r=this.generateDataGroups(n);return this.set({data:n,dataGroups:r}),this._domains=[],this._ranges=[],this._matrix={},n}getMatrixAsArray(){In(this._matrix)&&this.getMatrix();const e=this.getUniqueDomain(),n=this.getUniqueRanges(),r=this.services.cartesianScales.getDomainIdentifier(),i=this.services.cartesianScales.getRangeIdentifier(),s=[];return e.forEach(a=>{n.forEach(o=>{const l={value:this._matrix[a][o].value,index:this._matrix[a][o].index};l[r]=a,l[i]=o,s.push(l)})}),s}getTabularDataArray(){const e=this.getDisplayData(),{primaryDomain:n,primaryRange:r}=this.assignRangeAndDomains();return[[n.label,r.label,"Value"],...e.map(i=>[i[n.identifier]===null?"&ndash;":i[n.identifier],i[r.identifier]===null?"&ndash;":i[r.identifier].toLocaleString(),i.value])]}getColorClassName(e){return`${e.originalClassName} ${this._colorScale(e.value)}`}setColorClassNames(){const e=this.getOptions(),n=D(e,"color","gradient","colors"),r=!In(n);let i=D(e,"color","pairing","option");const s=this.getValueDomain(),a=s[0]<0&&s[1]>0?"diverge":"mono";(i<1&&i>4&&a==="mono"||i<1&&i>2&&a==="diverge")&&(i=1);const o=r?n:[];if(!r){const c=a==="diverge"?17:11;for(let u=1;u<c+1;u++)o.push(`fill-${a}-${i}-${u}`)}this._colorScale=bf().domain(s).range(o);const l=D(this.getOptions(),"color");this._colorScale=ib(this.getDisplayData(),l)}},eP=class extends wi{getTabularDataArray(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.getBinnedStackedData();return[[wt(e,"bins.rangeLabel")||"Range",...r.map(i=>wt(i,`0.${n}`))],...wt(r,0).map((i,s)=>[`${wt(i,"data.x0")} â ${wt(i,"data.x1")}`,...r.map(a=>wt(a[s],`data.${wt(a[s],n)}`))])]}},tP=class extends er{constructor(e){super(e)}getMaximumDomain(e){return e.reduce((n,r)=>n+r.value,0)}getFillColor(e){const n=this.getOptions(),r=D(n,"color","scale"),i=this.getStatus();return r||!i?super.getFillColor(e):null}getStatus(){const e=this.getOptions(),n=D(this.getDisplayData()),r=(n==null?void 0:n.reduce((a,o)=>a+o.value,0))??0,i=D(e,"meter","proportional")?r:r>100?100:r,s=D(e,"meter","status","ranges");if(s){const a=s.filter(o=>o.range[0]<=i&&i<=o.range[1]);if(a.length>0)return a[0].status}return null}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.getStatus(),s=D(n,"meter","proportional");let a=[],o;if(s===null){o=100;const l=e[0];a=[["Group","Value",...i?["Status"]:[]],[l[r],l.value,...i?[i]:[]]]}else o=D(s,"total")||this.getMaximumDomain(e),a=[["Group","Value","Percentage of total"],...e.map(c=>[c[r],c.value,(c.value/o*100).toFixed(2)+" %"])];return a}},nP=class extends wi{constructor(e){super(e)}getTabularDataArray(){const e=this.getOptions(),n=this.getGroupedData(),{angle:r,value:i}=D(e,"radar","axes"),s=D(n,"0","data").map(a=>a[r]);return[["Group",...s],...n.map(a=>[a.name,...s.map((o,l)=>D(a,"data",l,i)!==null?D(a,"data",l,i).toLocaleString():"&ndash;")])]}},rP=class extends er{constructor(e){super(e)}getTabularDataArray(){const e=this.getDisplayData(),n=[["Child","Parent"]];return e.forEach(r=>{this.getChildrenDatums(r,n),n.push([r.name,"&ndash;"])}),n}getChildrenDatums(e,n=[]){e.children&&e.children.length>0&&e.children.forEach(r=>{this.getChildrenDatums(r,n),n.push([r.name,e.name])})}},iP=class extends er{constructor(e){super(e)}getTabularDataArray(){const e=this.getDisplayData(),n=[["Child","Group","Value"]];return e.forEach(r=>{Array.isArray(r.children)?r.children.forEach(i=>{n.push([i.name,r.name,i.value])}):D(r.name)!==null&&D(r.value)&&n.push(["â",r.name,r.value])}),n}},sP=class extends er{constructor(e){super(e)}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{fontSizeMapsTo:r,wordMapsTo:i}=n.wordCloud,{groupMapsTo:s}=n.data;return[[n.tooltip.wordLabel,"Group",n.tooltip.valueLabel],...e.map(a=>[a[i],a[s],a[r]])]}};var aP=/\s/;function oP(t){for(var e=t.length;e--&&aP.test(t.charAt(e)););return e}var lP=/^\s+/;function cP(t){return t&&t.slice(0,oP(t)+1).replace(lP,"")}var Xp=0/0,uP=/^[-+]0x[0-9a-f]+$/i,fP=/^0b[01]+$/i,hP=/^0o[0-7]+$/i,dP=parseInt;function js(t){if(typeof t=="number")return t;if(Cl(t))return Xp;if(xn(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=xn(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=cP(t);var n=fP.test(t);return n||hP.test(t)?dP(t.slice(2),n?2:8):uP.test(t)?Xp:+t}var mP=function(){return Un.Date.now()};const Sc=mP;var pP="Expected a function",gP=Math.max,vP=Math.min;function Qo(t,e,n){var r,i,s,a,o,l,c=0,u=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(pP);e=js(e)||0,xn(n)&&(u=!!n.leading,f="maxWait"in n,s=f?gP(js(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function d($){var k=r,C=i;return r=i=void 0,c=$,a=t.apply(C,k),a}function m($){return c=$,o=setTimeout(g,e),u?d($):a}function v($){var k=$-l,C=$-c,V=e-k;return f?vP(V,s-C):V}function p($){var k=$-l,C=$-c;return l===void 0||k>=e||k<0||f&&C>=s}function g(){var $=Sc();if(p($))return _($);o=setTimeout(g,v($))}function _($){return o=void 0,h&&r?d($):(r=i=void 0,a)}function b(){o!==void 0&&clearTimeout(o),c=0,r=l=i=o=void 0}function y(){return o===void 0?a:_(Sc())}function w(){var $=Sc(),k=p($);if(r=arguments,i=this,l=$,k){if(o===void 0)return m(l);if(f)return clearTimeout(o),o=setTimeout(g,e),d(l)}return o===void 0&&(o=setTimeout(g,e)),a}return w.cancel=b,w.flush=y,w}function _P(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const bP=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function dr(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}function Jo(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function yP(t){const e=Jo(t,"border-left-width"),n=Jo(t,"border-right-width");return t.clientWidth+e+n}function wP(t){const e=Jo(t,"border-top-width"),n=Jo(t,"border-bottom-width");return t.clientHeight+e+n}function sb(t,e={}){const n=e.width||yP(t),r=e.height||wP(t);return{width:n,height:r}}function EP(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const hn=16384;function $P(t){(t.width>hn||t.height>hn)&&(t.width>hn&&t.height>hn?t.width>t.height?(t.height*=hn/t.width,t.width=hn):(t.width*=hn/t.height,t.height=hn):t.width>hn?(t.height*=hn/t.width,t.width=hn):(t.width*=hn/t.height,t.height=hn))}function el(t){return new Promise((e,n)=>{const r=new Image;r.decode=()=>e(r),r.onload=()=>e(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function TP(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function SP(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(t),TP(i)}const ln=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||ln(n,e)};function xP(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function kP(t){return dr(t).map(e=>{const n=t.getPropertyValue(e),r=t.getPropertyPriority(e);return`${e}: ${n}${r?" !important":""};`}).join(" ")}function OP(t,e,n){const r=`.${t}:${e}`,i=n.cssText?xP(n):kP(n);return document.createTextNode(`${r}{${i}}`)}function Kp(t,e,n){const r=window.getComputedStyle(t,n),i=r.getPropertyValue("content");if(i===""||i==="none")return;const s=bP();try{e.className=`${e.className} ${s}`}catch{return}const a=document.createElement("style");a.appendChild(OP(s,n,r)),e.appendChild(a)}function MP(t,e){Kp(t,e,":before"),Kp(t,e,":after")}const Qp="application/font-woff",Jp="image/jpeg",CP={woff:Qp,woff2:Qp,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Jp,jpeg:Jp,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function AP(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function Wf(t){const e=AP(t).toLowerCase();return CP[e]||""}function IP(t){return t.split(/,/)[1]}function wu(t){return t.search(/^(data:)/)!==-1}function ab(t,e){return`data:${e};base64,${t}`}async function ob(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,a)=>{const o=new FileReader;o.onerror=a,o.onloadend=()=>{try{s(n({res:r,result:o.result}))}catch(l){a(l)}},o.readAsDataURL(i)})}const xc={};function DP(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function Yf(t,e,n){const r=DP(t,e,n.includeQueryParams);if(xc[r]!=null)return xc[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let i;try{const s=await ob(t,n.fetchRequestInit,({res:a,result:o})=>(e||(e=a.headers.get("Content-Type")||""),IP(o)));i=ab(s,e)}catch(s){i=n.imagePlaceholder||"";let a=`Failed to fetch resource: ${t}`;s&&(a=typeof s=="string"?s:s.message),a&&console.warn(a)}return xc[r]=i,i}async function LP(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):el(e)}async function RP(t,e){if(t.currentSrc){const s=document.createElement("canvas"),a=s.getContext("2d");s.width=t.clientWidth,s.height=t.clientHeight,a==null||a.drawImage(t,0,0,s.width,s.height);const o=s.toDataURL();return el(o)}const n=t.poster,r=Wf(n),i=await Yf(n,r,e);return el(i)}async function NP(t){var e;try{if(!((e=t==null?void 0:t.contentDocument)===null||e===void 0)&&e.body)return await Hl(t.contentDocument.body,{},!0)}catch{}return t.cloneNode(!1)}async function PP(t,e){return ln(t,HTMLCanvasElement)?LP(t):ln(t,HTMLVideoElement)?RP(t,e):ln(t,HTMLIFrameElement)?NP(t):t.cloneNode(!1)}const VP=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT";async function BP(t,e,n){var r,i;let s=[];return VP(t)&&t.assignedNodes?s=dr(t.assignedNodes()):ln(t,HTMLIFrameElement)&&!((r=t.contentDocument)===null||r===void 0)&&r.body?s=dr(t.contentDocument.body.childNodes):s=dr(((i=t.shadowRoot)!==null&&i!==void 0?i:t).childNodes),s.length===0||ln(t,HTMLVideoElement)||await s.reduce((a,o)=>a.then(()=>Hl(o,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function UP(t,e){const n=e.style;if(!n)return;const r=window.getComputedStyle(t);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):dr(r).forEach(i=>{let s=r.getPropertyValue(i);i==="font-size"&&s.endsWith("px")&&(s=`${Math.floor(parseFloat(s.substring(0,s.length-2)))-.1}px`),ln(t,HTMLIFrameElement)&&i==="display"&&s==="inline"&&(s="block"),i==="d"&&e.getAttribute("d")&&(s=`path(${e.getAttribute("d")})`),n.setProperty(i,s,r.getPropertyPriority(i))})}function HP(t,e){ln(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),ln(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function zP(t,e){if(ln(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function FP(t,e){return ln(e,Element)&&(UP(t,e),MP(t,e),HP(t,e),zP(t,e)),e}async function GP(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let s=0;s<n.length;s++){const a=n[s].getAttribute("xlink:href");if(a){const o=t.querySelector(a),l=document.querySelector(a);!o&&l&&!r[a]&&(r[a]=await Hl(l,e,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg");a.setAttribute("xmlns",s),a.style.position="absolute",a.style.width="0",a.style.height="0",a.style.overflow="hidden",a.style.display="none";const o=document.createElementNS(s,"defs");a.appendChild(o);for(let l=0;l<i.length;l++)o.appendChild(i[l]);t.appendChild(a)}return t}async function Hl(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>PP(r,e)).then(r=>BP(t,r,e)).then(r=>FP(t,r)).then(r=>GP(r,e))}const lb=/url\((['"]?)([^'"]+?)\1\)/g,qP=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,jP=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function WP(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function YP(t){const e=[];return t.replace(lb,(n,r,i)=>(e.push(i),n)),e.filter(n=>!wu(n))}async function ZP(t,e,n,r,i){try{const s=n?_P(e,n):e,a=Wf(e);let o;if(i){const l=await i(s);o=ab(l,a)}else o=await Yf(s,a,r);return t.replace(WP(e),`$1${o}$3`)}catch{}return t}function XP(t,{preferredFontFormat:e}){return e?t.replace(jP,n=>{for(;;){const[r,,i]=qP.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}function cb(t){return t.search(lb)!==-1}async function ub(t,e,n){if(!cb(t))return t;const r=XP(t,n);return YP(r).reduce((i,s)=>i.then(a=>ZP(a,s,e,n)),Promise.resolve(r))}async function Ha(t,e,n){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(i){const s=await ub(i,null,n);return e.style.setProperty(t,s,e.style.getPropertyPriority(t)),!0}return!1}async function KP(t,e){await Ha("background",t,e)||await Ha("background-image",t,e),await Ha("mask",t,e)||await Ha("mask-image",t,e)}async function QP(t,e){const n=ln(t,HTMLImageElement);if(!(n&&!wu(t.src))&&!(ln(t,SVGImageElement)&&!wu(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await Yf(r,Wf(r),e);await new Promise((s,a)=>{t.onload=s,t.onerror=a;const o=t;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}async function JP(t,e){const n=dr(t.childNodes).map(r=>fb(r,e));await Promise.all(n).then(()=>t)}async function fb(t,e){ln(t,Element)&&(await KP(t,e),await QP(t,e),await JP(t,e))}function eV(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}const eg={};async function tg(t){let e=eg[t];if(e!=null)return e;const n=await(await fetch(t)).text();return e={url:t,cssText:n},eg[t]=e,e}async function ng(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map(async s=>{let a=s.replace(r,"$1");return a.startsWith("https://")||(a=new URL(a,t.url).href),ob(a,e.fetchRequestInit,({result:o})=>(n=n.replace(s,`url(${o})`),[s,o]))});return Promise.all(i).then(()=>n)}function rg(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=i.exec(r);if(l===null)break;e.push(l[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,a="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(a,"gi");for(;;){let l=s.exec(r);if(l===null){if(l=o.exec(r),l===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;e.push(l[0])}return e}async function tV(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{dr(i.cssRules||[]).forEach((s,a)=>{if(s.type===CSSRule.IMPORT_RULE){let o=a+1;const l=s.href,c=tg(l).then(u=>ng(u,e)).then(u=>rg(u).forEach(f=>{try{i.insertRule(f,f.startsWith("@import")?o+=1:i.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(u=>{console.error("Error loading remote css",u.toString())});r.push(c)}})}catch(s){const a=t.find(o=>o.href==null)||document.styleSheets[0];i.href!=null&&r.push(tg(i.href).then(o=>ng(o,e)).then(o=>rg(o).forEach(l=>{a.insertRule(l,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{dr(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function nV(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>cb(e.style.getPropertyValue("src")))}async function rV(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=dr(t.ownerDocument.styleSheets),r=await tV(n,e);return nV(r)}async function iV(t,e){const n=await rV(t,e);return(await Promise.all(n.map(r=>{const i=r.parentStyleSheet?r.parentStyleSheet.href:null;return ub(r.cssText,i,e)}))).join(`
`)}async function sV(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await iV(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function aV(t,e={}){const{width:n,height:r}=sb(t,e),i=await Hl(t,e,!0);return await sV(i,e),await fb(i,e),eV(i,e),await SP(i,n,r)}async function hb(t,e={}){const{width:n,height:r}=sb(t,e),i=await aV(t,e),s=await el(i),a=document.createElement("canvas"),o=a.getContext("2d"),l=e.pixelRatio||EP(),c=e.canvasWidth||n,u=e.canvasHeight||r;return a.width=c*l,a.height=u*l,e.skipAutoScale||$P(a),a.style.width=`${c}`,a.style.height=`${u}`,e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,a.width,a.height)),o.drawImage(s,0,0,a.width,a.height),a}async function oV(t,e={}){return(await hb(t,e)).toDataURL()}async function lV(t,e={}){return(await hb(t,e)).toDataURL("image/jpeg",e.quality||1)}class xr{constructor(e,n){this.model=e,this.services=n,this.init()}init(){}update(){}setModel(e){this.model=e}setServices(e){this.services=e}}const cV="DONT_STYLE_ME_css_styles_verifier";class J extends xr{constructor(e,n){super(e,n),this.chartID=""}static getHTMLElementSize(e){return{width:e.clientWidth,height:e.clientHeight}}static getSVGElementSize(e,n={useAttrs:!1,useClientDimensions:!1,useBBox:!1,useBoundingRect:!1}){e.attr||(e=ee(e));const r={width:0,height:0},i=h=>{h&&Object.keys(r).forEach(d=>{if(h[d]){const m=h[d],v=parseFloat(m);m&&v>r[d]&&(""+m).indexOf("%")===-1&&(r[d]=v)}})},s={width:e.attr("width"),height:e.attr("height")},a=e.node();let o,l,c,u;try{typeof a.getBBox=="function"&&(o=a.getBBox(),l={width:o.width,height:o.height})}catch(h){console.error(h)}try{typeof(a==null?void 0:a.getBoundingClientRect)=="function"&&(c=a.getBoundingClientRect(),u={width:c.width,height:c.height})}catch(h){console.error(h)}let f;if(a instanceof SVGSVGElement&&(f={width:a.clientWidth,height:a.clientHeight}),n){if(n.useAttrs&&(i(s),r.width>0&&r.height>0))return r;if(n.useClientDimensions&&(i(f),r.width>0&&r.height>0))return f;if(n.useBBox&&(i(l),r.width>0&&r.height>0))return l;if(n.useBoundingRect&&(i(u),r.width>0&&r.height>0))return u}try{const h={width:D(e.node(),"width","baseVal","value"),height:D(e.node(),"height","baseVal","value")};i(h)}catch{i(f),i(l),i(s)}return r}static appendOrSelect(e,n){const r=e.select(`${n}`);if(r.empty()){let i=n.split("#"),s,a;return i.length===2?(s=i[0],i=i[1].split("."),a=i[0]):(i=n.split("."),s=i[0]),e.append(s).attr("id",a).attr("class",i.slice(1).join(" "))}return r}init(){this.styleHolderElement(),this.initializeID(),this.addMainContainer(),this.model.getOptions().resizable&&this.addResizeListener(),this.addHolderListeners(),this.handleFullscreenChange()}getChartID(){return this.chartID}generateElementIDString(e){return`chart-${this.chartID}-${e}`}initializeID(){this.chartID=Math.floor((1+Math.random())*281474976710656).toString(16)}addMainContainer(){const e=this.model.getOptions(),n=D(e,"style","prefix"),r=ee(this.getHolder()).append("div").classed(`${sn}--${n}--chart-wrapper`,!0).attr("id",`chart-${this.getChartID()}`).style("height","100%").style("width","100%");r.append("g").attr("class",cV),this.mainContainer=r.node()}update(){this.styleHolderElement()}styleHolderElement(){const e=this.getHolder(),{width:n,height:r,theme:i}=this.model.getOptions();n!==this.width&&(e.style.width=n,this.width=n),r!==this.height&&(e.style.height=r,this.height=r),ee(this.getHolder()).classed(`${sn}--chart-holder`,!0).attr("data-carbon-theme",i)}getHolder(){return this.model.get("holder")}exportToJPG(){const e=this,n=this.model.getOptions(),r=this.getHolder(),i=ee(r);i.classed("filled",!0),lV(this.getMainContainer(),{quality:1,filter:s=>!(s.classList&&s.classList.contains("cds--cc--toolbar"))}).then(function(s){var a;let o="myChart";const l=D(n,"fileDownload","fileName");typeof l=="function"?o=l("jpg"):typeof l=="string"&&(o=l),(a=e.services.files)==null||a.downloadImage(s,`${o}.jpg`),i.classed("filled",!1)})}exportToPNG(){const e=this,n=this.model.getOptions(),r=this.getHolder(),i=ee(r);i.classed("filled",!0),oV(this.getMainContainer(),{quality:1,filter:s=>!(s.classList&&s.classList.contains("cds--cc--toolbar"))}).then(function(s){var a;let o="myChart";const l=D(n,"fileDownload","fileName");typeof l=="function"?o=l("png"):typeof l=="string"&&(o=l),(a=e.services.files)==null||a.downloadImage(s,`${o}.png`),i.classed("filled",!1)}).catch(function(s){console.error("oops, something went wrong!",s)})}toggleFullscreen(){const e=this.getHolder();ee(e).classed("fullscreen")&&(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}handleFullscreenChange(){document.addEventListener("fullscreenchange",()=>{const e=ee(this.getHolder()),n=e.classed("fullscreen");e.classed("fullscreen",!n)})}setSVGMaxHeight(){if(!this.model.getOptions().height){const{height:e}=J.getSVGElementSize(ee(this.mainContainer),{useBBox:!0}),n=ee(this.mainContainer).attr("class"),r=ee(this.mainContainer).selectAll(`.${n} > svg`);let i=0;r.nodes().forEach(function(s){i+=Number(J.getSVGElementSize(ee(s),{useBBox:!0}).height)}),i<=e?ee(this.mainContainer).attr("height",i):ee(this.mainContainer).attr("height","100%")}}getMainContainer(){return this.mainContainer}addHolderListeners(){const e=this.getHolder();e&&ee(e).on("mouseover",()=>{var n;(n=this.services.events)==null||n.dispatchEvent(z.Chart.MOUSEOVER)}).on("mouseout",()=>{var n;(n=this.services.events)==null||n.dispatchEvent(z.Chart.MOUSEOUT)})}addResizeListener(){const e=this.getHolder();if(!e)return;let n=e.clientWidth,r=e.clientHeight;const i=Qo(()=>{var s;e&&(Math.abs(n-e.clientWidth)>1||Math.abs(r-e.clientHeight)>1)&&(n=e.clientWidth,r=e.clientHeight,(s=this.services.events)==null||s.dispatchEvent(z.Chart.RESIZE))},12.5);new ResizeObserver(i).observe(e)}}let Eu=class db extends xr{static appendOrUpdateLinearGradient(e){let n=e.svg.select(`defs linearGradient#${e.id}`);n.empty()&&(n=e.svg.append("defs").append("linearGradient").attr("id",e.id).attr("x1",e.x1).attr("x2",e.x2).attr("y1",e.y1).attr("y2",e.y2)),n.selectAll("stop").remove(),n.selectAll("stop").data(e.stops).enter().append("stop").attr("offset",r=>r.offset).style("stop-color",r=>r.color).style("stop-opacity",r=>r.opacity)}static getOffsetRatio(e){return(Math.abs(e[1])*100/Math.abs(e[0]-e[1])).toFixed(2)+"%"}static getStops(e,n){const r=e[0]<0&&e[1]>0;let i=[{offset:"0%",color:n,opacity:"0.6"},{offset:"80%",color:n,opacity:"0"}];return r&&(i=[{offset:"0%",color:n,opacity:"0.6"},{offset:db.getOffsetRatio(e),color:n,opacity:"0"},{offset:"100%",color:n,opacity:"0.6"}]),i}};function ig(t){const e=uV(mb(t),360);return Mr(e,[0,10])||Mr(e,[350,0])?{textAnchor:ir.START,dominantBaseline:sr.MIDDLE}:Mr(e,[10,80])?{textAnchor:ir.START,dominantBaseline:sr.HANGING}:Mr(e,[80,100])?{textAnchor:ir.MIDDLE,dominantBaseline:sr.HANGING}:Mr(e,[100,170])?{textAnchor:ir.END,dominantBaseline:sr.HANGING}:Mr(e,[170,190])?{textAnchor:ir.END,dominantBaseline:sr.MIDDLE}:Mr(e,[190,260])?{textAnchor:ir.END,dominantBaseline:sr.BASELINE}:Mr(e,[260,280])?{textAnchor:ir.MIDDLE,dominantBaseline:sr.BASELINE}:{textAnchor:ir.START,dominantBaseline:sr.BASELINE}}function uV(t,e){return(t%e+e)%e}function Mr(t,[e,n]){return t>=e&&t<=n}function mb(t){return t*(180/Math.PI)}function At(t,e,n={x:0,y:0}){const r=e*Math.cos(t)+n.x,i=e*Math.sin(t)+n.y;return{x:isNaN(r)?0:r,y:isNaN(i)?0:i}}function fV(t,e){return e*Math.sin(t-Math.PI/2)}function sg(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function hV(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function kc(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function dV(t){return t.depth}function mV(t,e){return e-1-t.height}function pb(t,e){return t.sourceLinks.length?t.depth:e-1}function za(t){return function(){return t}}function ag(t,e){return tl(t.source,e.source)||t.index-e.index}function og(t,e){return tl(t.target,e.target)||t.index-e.index}function tl(t,e){return t.y0-e.y0}function Oc(t){return t.value}function pV(t){return t.index}function gV(t){return t.nodes}function vV(t){return t.links}function lg(t,e){const n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function cg({nodes:t}){for(const e of t){let n=e.y0,r=n;for(const i of e.sourceLinks)i.y0=n+i.width/2,n+=i.width;for(const i of e.targetLinks)i.y1=r+i.width/2,r+=i.width}}function _V(){let t=0,e=0,n=1,r=1,i=24,s=8,a,o=pV,l=pb,c,u,f=gV,h=vV,d=6;function m(){const T={nodes:f.apply(null,arguments),links:h.apply(null,arguments)};return v(T),p(T),g(T),_(T),w(T),cg(T),T}m.update=function(T){return cg(T),T},m.nodeId=function(T){return arguments.length?(o=typeof T=="function"?T:za(T),m):o},m.nodeAlign=function(T){return arguments.length?(l=typeof T=="function"?T:za(T),m):l},m.nodeSort=function(T){return arguments.length?(c=T,m):c},m.nodeWidth=function(T){return arguments.length?(i=+T,m):i},m.nodePadding=function(T){return arguments.length?(s=a=+T,m):s},m.nodes=function(T){return arguments.length?(f=typeof T=="function"?T:za(T),m):f},m.links=function(T){return arguments.length?(h=typeof T=="function"?T:za(T),m):h},m.linkSort=function(T){return arguments.length?(u=T,m):u},m.size=function(T){return arguments.length?(t=e=0,n=+T[0],r=+T[1],m):[n-t,r-e]},m.extent=function(T){return arguments.length?(t=+T[0][0],n=+T[1][0],e=+T[0][1],r=+T[1][1],m):[[t,e],[n,r]]},m.iterations=function(T){return arguments.length?(d=+T,m):d};function v({nodes:T,links:F}){for(const[q,Y]of T.entries())Y.index=q,Y.sourceLinks=[],Y.targetLinks=[];const G=new Map(T.map((q,Y)=>[o(q,Y,T),q]));for(const[q,Y]of F.entries()){Y.index=q;let{source:te,target:ie}=Y;typeof te!="object"&&(te=Y.source=lg(G,te)),typeof ie!="object"&&(ie=Y.target=lg(G,ie)),te.sourceLinks.push(Y),ie.targetLinks.push(Y)}if(u!=null)for(const{sourceLinks:q,targetLinks:Y}of T)q.sort(u),Y.sort(u)}function p({nodes:T}){for(const F of T)F.value=F.fixedValue===void 0?Math.max(kc(F.sourceLinks,Oc),kc(F.targetLinks,Oc)):F.fixedValue}function g({nodes:T}){const F=T.length;let G=new Set(T),q=new Set,Y=0;for(;G.size;){for(const te of G){te.depth=Y;for(const{target:ie}of te.sourceLinks)q.add(ie)}if(++Y>F)throw new Error("circular link");G=q,q=new Set}}function _({nodes:T}){const F=T.length;let G=new Set(T),q=new Set,Y=0;for(;G.size;){for(const te of G){te.height=Y;for(const{source:ie}of te.targetLinks)q.add(ie)}if(++Y>F)throw new Error("circular link");G=q,q=new Set}}function b({nodes:T}){const F=sg(T,Y=>Y.depth)+1,G=(n-t-i)/(F-1),q=new Array(F);for(const Y of T){const te=Math.max(0,Math.min(F-1,Math.floor(l.call(null,Y,F))));Y.layer=te,Y.x0=t+te*G,Y.x1=Y.x0+i,q[te]?q[te].push(Y):q[te]=[Y]}if(c)for(const Y of q)Y.sort(c);return q}function y(T){const F=hV(T,G=>(r-e-(G.length-1)*a)/kc(G,Oc));for(const G of T){let q=e;for(const Y of G){Y.y0=q,Y.y1=q+Y.value*F,q=Y.y1+a;for(const te of Y.sourceLinks)te.width=te.value*F}q=(r-q+a)/(G.length+1);for(let Y=0;Y<G.length;++Y){const te=G[Y];te.y0+=q*(Y+1),te.y1+=q*(Y+1)}N(G)}}function w(T){const F=b(T);a=Math.min(s,(r-e)/(sg(F,G=>G.length)-1)),y(F);for(let G=0;G<d;++G){const q=Math.pow(.99,G),Y=Math.max(1-q,(G+1)/d);k(F,q,Y),$(F,q,Y)}}function $(T,F,G){for(let q=1,Y=T.length;q<Y;++q){const te=T[q];for(const ie of te){let pe=0,Re=0;for(const{source:ge,value:Ue}of ie.targetLinks){let oe=Ue*(ie.layer-ge.layer);pe+=O(ge,ie)*oe,Re+=oe}if(!(Re>0))continue;let ce=(pe/Re-ie.y0)*F;ie.y0+=ce,ie.y1+=ce,S(ie)}c===void 0&&te.sort(tl),C(te,G)}}function k(T,F,G){for(let q=T.length,Y=q-2;Y>=0;--Y){const te=T[Y];for(const ie of te){let pe=0,Re=0;for(const{target:ge,value:Ue}of ie.sourceLinks){let oe=Ue*(ge.layer-ie.layer);pe+=R(ie,ge)*oe,Re+=oe}if(!(Re>0))continue;let ce=(pe/Re-ie.y0)*F;ie.y0+=ce,ie.y1+=ce,S(ie)}c===void 0&&te.sort(tl),C(te,G)}}function C(T,F){const G=T.length>>1,q=T[G];I(T,q.y0-a,G-1,F),V(T,q.y1+a,G+1,F),I(T,r,T.length-1,F),V(T,e,0,F)}function V(T,F,G,q){for(;G<T.length;++G){const Y=T[G],te=(F-Y.y0)*q;te>1e-6&&(Y.y0+=te,Y.y1+=te),F=Y.y1+a}}function I(T,F,G,q){for(;G>=0;--G){const Y=T[G],te=(Y.y1-F)*q;te>1e-6&&(Y.y0-=te,Y.y1-=te),F=Y.y0-a}}function S({sourceLinks:T,targetLinks:F}){if(u===void 0){for(const{source:{sourceLinks:G}}of F)G.sort(og);for(const{target:{targetLinks:G}}of T)G.sort(ag)}}function N(T){if(u===void 0)for(const{sourceLinks:F,targetLinks:G}of T)F.sort(og),G.sort(ag)}function O(T,F){let G=T.y0-(T.sourceLinks.length-1)*a/2;for(const{target:q,width:Y}of T.sourceLinks){if(q===F)break;G+=Y+a}for(const{source:q,width:Y}of F.targetLinks){if(q===T)break;G-=Y}return G}function R(T,F){let G=F.y0-(F.targetLinks.length-1)*a/2;for(const{source:q,width:Y}of F.targetLinks){if(q===T)break;G+=Y+a}for(const{target:q,width:Y}of T.sourceLinks){if(q===F)break;G-=Y}return G}return m}var $u=Math.PI,Tu=2*$u,qr=1e-6,bV=Tu-qr;function Su(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function gb(){return new Su}Su.prototype=gb.prototype={constructor:Su,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var s=this._x1,a=this._y1,o=n-t,l=r-e,c=s-t,u=a-e,f=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>qr)if(!(Math.abs(u*o-l*c)>qr)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var h=n-s,d=r-a,m=o*o+l*l,v=h*h+d*d,p=Math.sqrt(m),g=Math.sqrt(f),_=i*Math.tan(($u-Math.acos((m+f-v)/(2*p*g)))/2),b=_/g,y=_/p;Math.abs(b-1)>qr&&(this._+="L"+(t+b*c)+","+(e+b*u)),this._+="A"+i+","+i+",0,0,"+ +(u*h>c*d)+","+(this._x1=t+y*o)+","+(this._y1=e+y*l)}},arc:function(t,e,n,r,i,s){t=+t,e=+e,n=+n,s=!!s;var a=n*Math.cos(r),o=n*Math.sin(r),l=t+a,c=e+o,u=1^s,f=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>qr||Math.abs(this._y1-c)>qr)&&(this._+="L"+l+","+c),n&&(f<0&&(f=f%Tu+Tu),f>bV?this._+="A"+n+","+n+",0,1,"+u+","+(t-a)+","+(e-o)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):f>qr&&(this._+="A"+n+","+n+",0,"+ +(f>=$u)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function ug(t){return function(){return t}}function yV(t){return t[0]}function wV(t){return t[1]}var EV=Array.prototype.slice;function $V(t){return t.source}function TV(t){return t.target}function SV(t){var e=$V,n=TV,r=yV,i=wV,s=null;function a(){var o,l=EV.call(arguments),c=e.apply(this,l),u=n.apply(this,l);if(s||(s=o=gb()),t(s,+r.apply(this,(l[0]=c,l)),+i.apply(this,l),+r.apply(this,(l[0]=u,l)),+i.apply(this,l)),o)return s=null,o+""||null}return a.source=function(o){return arguments.length?(e=o,a):e},a.target=function(o){return arguments.length?(n=o,a):n},a.x=function(o){return arguments.length?(r=typeof o=="function"?o:ug(+o),a):r},a.y=function(o){return arguments.length?(i=typeof o=="function"?o:ug(+o),a):i},a.context=function(o){return arguments.length?(s=o??null,a):s},a}function xV(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function kV(){return SV(xV)}function OV(t){return[t.source.x1,t.y0]}function MV(t){return[t.target.x0,t.y1]}function CV(){return kV().source(OV).target(MV)}var AV={value:function(){}};function vb(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new io(n)}function io(t){this._=t}function IV(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}io.prototype=vb.prototype={constructor:io,on:function(t,e){var n=this._,r=IV(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=DV(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=fg(n[i],t.name,e);else if(e==null)for(i in n)n[i]=fg(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new io(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function DV(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function fg(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=AV,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const LV=Object.freeze(Object.defineProperty({__proto__:null,dispatch:vb},Symbol.toStringTag,{value:"Module"})),RV=_y(LV),NV=RV.dispatch,Mc=Math.PI/180,PV={archimedean:_b,rectangular:YV},Rs=64,so=2048;var VV=function(){var t=[256,256],e=BV,n=UV,r=HV,i=hg,s=hg,a=zV,o=FV,l=_b,c=[],u=1/0,f=NV("word","end"),h=null,d=Math.random,m={},v=XV;m.canvas=function(_){return arguments.length?(v=Cr(_),m):v},m.start=function(){var _=p(v()),b=ZV((t[0]>>5)*t[1]),y=null,w=c.length,$=-1,k=[],C=c.map(function(I,S){return I.text=e.call(this,I,S),I.font=n.call(this,I,S),I.style=i.call(this,I,S),I.weight=s.call(this,I,S),I.rotate=a.call(this,I,S),I.size=~~r.call(this,I,S),I.padding=o.call(this,I,S),I}).sort(function(I,S){return S.size-I.size});return h&&clearInterval(h),h=setInterval(V,0),V(),m;function V(){for(var I=Date.now();Date.now()-I<u&&++$<w&&h;){var S=C[$];S.x=t[0]*(d()+.5)>>1,S.y=t[1]*(d()+.5)>>1,GV(_,S,C,$),S.hasText&&g(b,S,y)&&(k.push(S),f.call("word",m,S),y?jV(y,S):y=[{x:S.x+S.x0,y:S.y+S.y0},{x:S.x+S.x1,y:S.y+S.y1}],S.x-=t[0]>>1,S.y-=t[1]>>1)}$>=w&&(m.stop(),f.call("end",m,k,y))}},m.stop=function(){h&&(clearInterval(h),h=null);for(const _ of c)delete _.sprite;return m};function p(_){const b=_.getContext("2d",{willReadFrequently:!0});_.width=_.height=1;const y=Math.sqrt(b.getImageData(0,0,1,1).data.length>>2);return _.width=(Rs<<5)/y,_.height=so/y,b.fillStyle=b.strokeStyle="red",{context:b,ratio:y}}function g(_,b,y){t[0],t[1];for(var w=b.x,$=b.y,k=Math.sqrt(t[0]*t[0]+t[1]*t[1]),C=l(t),V=d()<.5?1:-1,I=-V,S,N,O;(S=C(I+=V))&&(N=~~S[0],O=~~S[1],!(Math.min(Math.abs(N),Math.abs(O))>=k));)if(b.x=w+N,b.y=$+O,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>t[0]||b.y+b.y1>t[1])&&(!y||WV(b,y))&&!qV(b,_,t[0])){for(var R=b.sprite,T=b.width>>5,F=t[0]>>5,G=b.x-(T<<4),q=G&127,Y=32-q,te=b.y1-b.y0,ie=(b.y+b.y0)*F+(G>>5),pe,Re=0;Re<te;Re++){pe=0;for(var ce=0;ce<=T;ce++)_[ie+ce]|=pe<<Y|(ce<T?(pe=R[Re*T+ce])>>>q:0);ie+=F}return!0}return!1}return m.timeInterval=function(_){return arguments.length?(u=_??1/0,m):u},m.words=function(_){return arguments.length?(c=_,m):c},m.size=function(_){return arguments.length?(t=[+_[0],+_[1]],m):t},m.font=function(_){return arguments.length?(n=Cr(_),m):n},m.fontStyle=function(_){return arguments.length?(i=Cr(_),m):i},m.fontWeight=function(_){return arguments.length?(s=Cr(_),m):s},m.rotate=function(_){return arguments.length?(a=Cr(_),m):a},m.text=function(_){return arguments.length?(e=Cr(_),m):e},m.spiral=function(_){return arguments.length?(l=PV[_]||_,m):l},m.fontSize=function(_){return arguments.length?(r=Cr(_),m):r},m.padding=function(_){return arguments.length?(o=Cr(_),m):o},m.random=function(_){return arguments.length?(d=_,m):d},m.on=function(){var _=f.on.apply(f,arguments);return _===f?m:_},m};function BV(t){return t.text}function UV(){return"serif"}function hg(){return"normal"}function HV(t){return Math.sqrt(t.value)}function zV(){return(~~(random()*6)-3)*30}function FV(){return 1}function GV(t,e,n,r){if(!e.sprite){var i=t.context,s=t.ratio;i.clearRect(0,0,(Rs<<5)/s,so/s);var a=0,o=0,l=0,c=n.length;for(--r;++r<c;){e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/s)+"px "+e.font;const S=i.measureText(e.text),N=-Math.floor(S.width/2);let O=(S.width+1)*s,R=e.size<<1;if(e.rotate){var u=Math.sin(e.rotate*Mc),f=Math.cos(e.rotate*Mc),h=O*f,d=O*u,m=R*f,v=R*u;O=Math.max(Math.abs(h+v),Math.abs(h-v))+31>>5<<5,R=~~Math.max(Math.abs(d+m),Math.abs(d-m))}else O=O+31>>5<<5;if(R>l&&(l=R),a+O>=Rs<<5&&(a=0,o+=l,l=0),o+R>=so)break;i.translate((a+(O>>1))/s,(o+(R>>1))/s),e.rotate&&i.rotate(e.rotate*Mc),i.fillText(e.text,N,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,N,0)),i.restore(),e.width=O,e.height=R,e.xoff=a,e.yoff=o,e.x1=O>>1,e.y1=R>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,a+=O}for(var p=i.getImageData(0,0,(Rs<<5)/s,so/s).data,g=[];--r>=0;)if(e=n[r],!!e.hasText){for(var _=e.width,b=_>>5,y=e.y1-e.y0,w=0;w<y*b;w++)g[w]=0;if(a=e.xoff,a==null)return;o=e.yoff;for(var $=0,k=-1,C=0;C<y;C++){for(var w=0;w<_;w++){var V=b*C+(w>>5),I=p[(o+C)*(Rs<<5)+(a+w)<<2]?1<<31-w%32:0;g[V]|=I,$|=I}$?k=C:(e.y0++,y--,C--,o++)}e.y1=e.y0+k,e.sprite=g.slice(0,(e.y1-e.y0)*b)}}}function qV(t,e,n){n>>=5;for(var r=t.sprite,i=t.width>>5,s=t.x-(i<<4),a=s&127,o=32-a,l=t.y1-t.y0,c=(t.y+t.y0)*n+(s>>5),u,f=0;f<l;f++){u=0;for(var h=0;h<=i;h++)if((u<<o|(h<i?(u=r[f*i+h])>>>a:0))&e[c+h])return!0;c+=n}return!1}function jV(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function WV(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function _b(t){var e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function YV(t){var e=4,n=e*t[0]/t[1],r=0,i=0;return function(s){var a=s<0?-1:1;switch(Math.sqrt(1+4*a*s)-a&3){case 0:r+=n;break;case 1:i+=e;break;case 2:r-=n;break;default:i-=e;break}return[r,i]}}function ZV(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function XV(){return document.createElement("canvas")}function Cr(t){return typeof t=="function"?t:function(){return t}}const KV=by(VV);function QV(t,e,n,r){var i=-1,s=t==null?0:t.length;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n}function JV(t){return function(e){return t==null?void 0:t[e]}}var e8={Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã:"C",Ã§:"c",Ã:"D",Ã°:"d",Ã:"E",Ã:"E",Ã:"E",Ã:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",Ã:"I",Ã:"I",Ã:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã:"N",Ã±:"n",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã:"U",Ã:"U",Ã:"U",Ã:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã:"Ae",Ã¦:"ae",Ã:"Th",Ã¾:"th",Ã:"ss",Ä:"A",Ä:"A",Ä:"A",Ä:"a",Ä:"a",Ä:"a",Ä:"C",Ä:"C",Ä:"C",Ä:"C",Ä:"c",Ä:"c",Ä:"c",Ä:"c",Ä:"D",Ä:"D",Ä:"d",Ä:"d",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"G",Ä:"G",Ä :"G",Ä¢:"G",Ä:"g",Ä:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å:"l",Å:"l",Å:"N",Å:"N",Å:"N",Å:"N",Å:"n",Å:"n",Å:"n",Å:"n",Å:"O",Å:"O",Å:"O",Å:"o",Å:"o",Å:"o",Å:"R",Å:"R",Å:"R",Å:"r",Å:"r",Å:"r",Å:"S",Å:"S",Å:"S",Å :"S",Å:"s",Å:"s",Å:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å:"Oe",Å:"oe",Å:"'n",Å¿:"s"},t8=JV(e8);const n8=t8;var r8=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,i8="\\u0300-\\u036f",s8="\\ufe20-\\ufe2f",a8="\\u20d0-\\u20ff",o8=i8+s8+a8,l8="["+o8+"]",c8=RegExp(l8,"g");function u8(t){return t=$a(t),t&&t.replace(r8,n8).replace(c8,"")}var f8=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function h8(t){return t.match(f8)||[]}var d8=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function m8(t){return d8.test(t)}var bb="\\ud800-\\udfff",p8="\\u0300-\\u036f",g8="\\ufe20-\\ufe2f",v8="\\u20d0-\\u20ff",_8=p8+g8+v8,yb="\\u2700-\\u27bf",wb="a-z\\xdf-\\xf6\\xf8-\\xff",b8="\\xac\\xb1\\xd7\\xf7",y8="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",w8="\\u2000-\\u206f",E8=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Eb="A-Z\\xc0-\\xd6\\xd8-\\xde",$8="\\ufe0e\\ufe0f",$b=b8+y8+w8+E8,Tb="['â]",dg="["+$b+"]",T8="["+_8+"]",Sb="\\d+",S8="["+yb+"]",xb="["+wb+"]",kb="[^"+bb+$b+Sb+yb+wb+Eb+"]",x8="\\ud83c[\\udffb-\\udfff]",k8="(?:"+T8+"|"+x8+")",O8="[^"+bb+"]",Ob="(?:\\ud83c[\\udde6-\\uddff]){2}",Mb="[\\ud800-\\udbff][\\udc00-\\udfff]",Ri="["+Eb+"]",M8="\\u200d",mg="(?:"+xb+"|"+kb+")",C8="(?:"+Ri+"|"+kb+")",pg="(?:"+Tb+"(?:d|ll|m|re|s|t|ve))?",gg="(?:"+Tb+"(?:D|LL|M|RE|S|T|VE))?",Cb=k8+"?",Ab="["+$8+"]?",A8="(?:"+M8+"(?:"+[O8,Ob,Mb].join("|")+")"+Ab+Cb+")*",I8="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",D8="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",L8=Ab+Cb+A8,R8="(?:"+[S8,Ob,Mb].join("|")+")"+L8,N8=RegExp([Ri+"?"+xb+"+"+pg+"(?="+[dg,Ri,"$"].join("|")+")",C8+"+"+gg+"(?="+[dg,Ri+mg,"$"].join("|")+")",Ri+"?"+mg+"+"+pg,Ri+"+"+gg,D8,I8,Sb,R8].join("|"),"g");function P8(t){return t.match(N8)||[]}function V8(t,e,n){return t=$a(t),e=n?void 0:e,e===void 0?m8(t)?P8(t):h8(t):t.match(e)||[]}var B8="['â]",U8=RegExp(B8,"g");function Ib(t){return function(e){return QV(V8(u8(e).replace(U8,"")),t,"")}}function H8(t,e,n){return t===t&&(n!==void 0&&(t=t<=n?t:n),e!==void 0&&(t=t>=e?t:e)),t}function Db(t,e,n){return n===void 0&&(n=e,e=void 0),n!==void 0&&(n=js(n),n=n===n?n:0),e!==void 0&&(e=js(e),e=e===e?e:0),H8(js(t),e,n)}function z8(t,e){var n=-1,r=yi(t)?Array(t.length):[];return jf(t,function(i,s,a){r[++n]=e(i,s,a)}),r}function F8(t,e){var n=Yt(t)?d_:z8;return n(t,Bl(e))}var G8=1/0;function q8(t,e){return Pl(F8(t,e),G8)}function Lb(t,e){return Vl(t,e)}var j8=Ib(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()});const Oi=j8;function W8(t,e){var n;return jf(t,function(r,i,s){return n=e(r,i,s),!n}),!!n}function Y8(t,e,n){var r=Yt(t)?V_:W8;return n&&__(t,e,n)&&(e=void 0),r(t,Bl(e))}class tt{constructor(e,n,r){if(this.type="",this.renderType=Me.HTML,this.id="",this.parent=void 0,this.configs={},this.model=e,this.services=n,r&&(this.configs=r,this.configs.id)){const i=D(this.model.getOptions(),"style","prefix");this.id=`${i}--${this.configs.id}`}this.parent||this.setParent(ee(this.services.domUtils.getMainContainer()))}init(){}render(e=!0){console.error("Error: Component did not provide the required render function.")}destroy(){}setModel(e){this.model=e}setServices(e){this.services=e}setParent(e){var n;const r=this.parent;if(this.parent=e,!(r&&r.node()===e.node())&&this.type){const i=D(this.model.getOptions(),"style","prefix");(n=this.parent)==null||n.classed(`${sn}--${i}--${this.type}`,!0),r&&r.classed(`${sn}--${i}--${this.type}`,!1)}}getParent(){return this.parent}getComponentContainer(e={withinChartClip:!1}){if(this.type){const n=D(this.model.getOptions(),"style","prefix"),r=this.id?`#${this.id}`:"",i=J.appendOrSelect(this.parent,`${this.renderType===Me.SVG?"svg":"div"}${r}.${sn}--${n}--${this.type}`);if(e.withinChartClip){const s=this.model.get("chartClipId");if(s){const a=ee(`#${s}`).select("rect");a.size()!==0&&parseFloat(a.attr("height"))>0&&i.attr("clip-path",`url(#${s})`)}}return i.attr("width","100%").attr("height","100%")}return this.parent}getOptions(){return this.configs.options?Ne({},this.model.getOptions(),this.configs.options):this.model.getOptions()}}const Rb=class Nb extends tt{constructor(){super(...arguments),this.type="toolbar",this.renderType=Me.HTML}init(){const e=()=>this.updateOverflowMenu(!1);this.services.events.addEventListener(z.Toolbar.SHOW_OVERFLOW_MENU,()=>{this.renderOverflowMenu(),document.body.addEventListener("click",e)}),this.services.events.addEventListener(z.Toolbar.HIDE_OVERFLOW_MENU,()=>{document.body.removeEventListener("click",e)})}render(e=!0){const n=this.getComponentContainer().attr("role","toolbar").attr("aria-label",`chart-${this.services.domUtils.getChartID()} toolbar`);if(D(this.getOptions(),"data","loading"))n.html(""),this.overflowMenu=null;else{this.overflowMenu||(this.overflowMenu=n.append("div").attr("class","cds--overflow-menu-options cds--overflow-menu--flip cds--overflow-menu-options cds--overflow-menu--flip").attr("tabindex",-1).html("<ul role='menu'></ul>"));const{buttonList:r,overflowMenuItemList:i}=this.getControlConfigs();i&&r.push(this.getOverflowButtonConfig());const s=n.selectAll("div.toolbar-control").data(r,l=>l.id);s.exit().remove();const a=s.enter().append("div").attr("class","toolbar-control cds--overflow-menu cds--overflow-menu").attr("role","button"),o=this;a.merge(s).classed("disabled",l=>l.shouldBeDisabled()).attr("aria-disabled",l=>l.shouldBeDisabled()).attr("aria-label",l=>l.title).html(l=>`
			<button
				class="cds--overflow-menu__trigger cds--overflow-menu__trigger"
				aria-haspopup="true" aria-expanded="false" id="${this.services.domUtils.generateElementIDString(`control-${l.id}`)}" aria-label="${l.title}">
				<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" class="cds--overflow-menu__icon cds--overflow-menu__icon" viewBox="0 0 32 32" aria-hidden="true">
					${l.iconSVG.content}
				</svg>
			</button>`).each(function(l,c){ee(this).select("svg").style("will-change","transform").style("width",l.iconSVG.width!==void 0?l.iconSVG.width:"20px").style("height",l.iconSVG.height!==void 0?l.iconSVG.height:"20px"),ee(this).select("button").on("click",u=>{l.shouldBeDisabled()||o.triggerFunctionAndEvent(l,u,this)}).on("keydown",u=>{u.key&&u.key==="Enter"||u.key===" "?(u.preventDefault(),o.triggerFunctionAndEvent(l,u,this)):u.key&&u.key==="ArrowLeft"?o.focusOnPreviousEnabledToolbarItem(c):u.key&&u.key==="ArrowRight"&&o.focusOnNextEnabledToolbarItem(c)})}),this.overflowButton=this.getComponentContainer().select(`button.cds--overflow-menu__trigger#${this.services.domUtils.generateElementIDString("control-toolbar-overflow-menu")}`)}}renderOverflowMenu(){const{overflowMenuItemList:e}=this.getControlConfigs(),n=this.overflowMenu.select("ul").selectAll("li.cds--overflow-menu-options__option").data(e,i=>D(i,"id"));n.exit().remove();const r=n.enter().append("li").attr("id",i=>this.services.domUtils.generateElementIDString(`control-${i.id}`)).attr("class","cds--overflow-menu-options__option cds--overflow-menu-options__option").attr("role","menuitem").attr("tabindex",1);r.append("button").attr("class","cds--overflow-menu-options__btn cds--overflow-menu-options__btn"),r.merge(n).classed("cds--overflow-menu-options__option--disabled",i=>i.shouldBeDisabled()).classed("cds--overflow-menu-options__option--disabled",i=>i.shouldBeDisabled()).attr("aria-disabled",i=>i.shouldBeDisabled()).selectAll("button").text(i=>i.text)}isOverflowMenuOpen(){return this.overflowMenu.classed("is-open")}updateOverflowMenu(e){this.overflowMenu&&(this.overflowMenu.classed("is-open",e),this.overflowButton&&(this.overflowButton.attr("aria-expanded",e),ee(this.overflowButton.node().parentNode).classed("cds--overflow-menu--open",e).classed("cds--overflow-menu--open",e)),e?this.services.events.dispatchEvent(z.Toolbar.SHOW_OVERFLOW_MENU):this.services.events.dispatchEvent(z.Toolbar.HIDE_OVERFLOW_MENU))}focusOnPreviousEnabledToolbarItem(e){const n=this.getToolbarButtonItems();let r=n.length;for(let i=e-1;i>=0;i--)if(!n[i].shouldBeDisabled()){r=i;break}if(r<n.length){const i=ee(`button#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)}`).node();"focus"in i&&i.focus()}}focusOnNextEnabledToolbarItem(e){const n=this.getToolbarButtonItems();let r=-1;for(let i=e+1;i<n.length;i++)if(!n[i].shouldBeDisabled()){r=i;break}if(r>-1){const i=ee(`button#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)}`).node();"focus"in i&&i.focus()}}focusOnPreviousEnabledMenuItem(e){const n=this.getOverflowMenuItems();let r=n.length;for(let i=e-1;i>=0;i--)if(!n[i].shouldBeDisabled()){r=i;break}if(r<n.length){const i=ee(`#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)} button`).node();"focus"in i&&i.focus()}}focusOnNextEnabledMenuItem(e){const n=this.getOverflowMenuItems();let r=-1;for(let i=e+1;i<n.length;i++)if(!n[i].shouldBeDisabled()){r=i;break}if(r>-1){const i=ee(`#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)} button`).node();"focus"in i&&i.focus()}}toggleOverflowMenu(e){if(this.isOverflowMenuOpen())this.updateOverflowMenu(!1);else{this.updateOverflowMenu(!0);const n=this;this.getOverflowMenuItems().forEach((r,i)=>{const s=ee(`#${this.services.domUtils.generateElementIDString(`control-${r.id}`)}`);s!==null&&(s.on("click",()=>{n.triggerFunctionAndEvent(r,e,s.node()),n.updateOverflowMenu(!1)}),s.on("keydown",a=>{a&&a.key==="Enter"?n.triggerFunctionAndEvent(r,e,s.node()):a&&a.key==="ArrowUp"?n.focusOnPreviousEnabledMenuItem(i):a&&a.key==="ArrowDown"?n.focusOnNextEnabledMenuItem(i):a&&a.key==="Escape"&&n.updateOverflowMenu(!1),a.preventDefault()}))}),n.focusOnNextEnabledMenuItem(-1)}e&&e.stopImmediatePropagation()}triggerFunctionAndEvent(e,n,r){typeof e.shouldBeDisabled=="function"&&e.shouldBeDisabled()||(typeof e.clickFunction=="function"&&e.clickFunction(n),this.services.events.dispatchEvent(z.Toolbar.BUTTON_CLICK,{control:e,event:n,element:r}))}getControlConfigs(){const e=D(this.getOptions(),"toolbar","numberOfIcons")-1,n=D(this.getOptions(),"toolbar","controls"),r=[],i=[],s=[];return n.forEach(a=>{let o=null;a.type===kt.CUSTOM?(D(a,"id")===null&&(a.id=`toolbar-button-${Nb.buttonID++}`),D(a,"shouldBeDisabled")===null&&(a.shouldBeDisabled=()=>!1),o=a):o=this.getControlConfigByType(a.type),o&&(o.text=a.text?a.text:a.type,o.id.indexOf("toolbar-export")!==-1?r.push(o):i.length<e?D(o,"iconSVG","content")===null?s.push(o):i.push(o):s.push(o))}),s.push(...r),s.length?{buttonList:i,overflowMenuItemList:s}:{buttonList:i}}getToolbarButtonItems(){const{buttonList:e,overflowMenuItemList:n}=this.getControlConfigs();return n&&e.push(this.getOverflowButtonConfig()),e||[]}getOverflowMenuItems(){const{overflowMenuItemList:e}=this.getControlConfigs();return e||[]}getOverflowButtonConfig(){return{id:"toolbar-overflow-menu",title:"More options",shouldBeDisabled:()=>!1,iconSVG:{content:`<circle cx="16" cy="8" r="2"></circle>
				<circle cx="16" cy="16" r="2"></circle>
				<circle cx="16" cy="24" r="2"></circle>`},clickFunction:e=>this.toggleOverflowMenu(e)}}getControlConfigByType(e){const n=this.services.zoom&&this.services.zoom.isZoomBarEnabled()&&!this.services.zoom.isEmptyState(),r=this.model.getDisplayData();let i;switch(e){case kt.ZOOM_IN:n&&(i={id:"toolbar-zoomIn",title:"Zoom in",shouldBeDisabled:()=>this.services.zoom.isMinZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.zoomIn()});break;case kt.ZOOM_OUT:n&&(i={id:"toolbar-zoomOut",title:"Zoom out",shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.zoomOut()});break;case kt.RESET_ZOOM:n&&(i={id:"toolbar-resetZoom",title:"Reset zoom",shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.resetZoomDomain()});break;case kt.MAKE_FULLSCREEN:i={id:"toolbar-makefullscreen",iconSVG:{content:this.getControlIconByType(e),width:"15px",height:"15px"},title:"Make fullscreen",shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case kt.SHOW_AS_DATATABLE:i={id:"toolbar-showasdatatable",iconSVG:{content:this.getControlIconByType(e)},title:"Show as table",shouldBeDisabled:()=>r.length===0,clickFunction:()=>this.services.events.dispatchEvent(z.Modal.SHOW)};break;case kt.EXPORT_CSV:i={id:"toolbar-export-CSV",title:"Export as CSV",shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.model.exportToCSV()};break;case kt.EXPORT_PNG:i={id:"toolbar-export-PNG",title:"Export as PNG",shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.domUtils.exportToPNG()};break;case kt.EXPORT_JPG:i={id:"toolbar-export-JPG",title:"Export as JPG",shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.domUtils.exportToJPG()};break;default:throw Error("Not supported toolbar control type: "+e)}return i}getControlIconByType(e){switch(e){case kt.ZOOM_IN:return`<polygon points="19 13 15 13 15 9 13 9 13 13 9 13 9 15 13 15 13 19 15 19 15 15 19 15 19 13"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case kt.ZOOM_OUT:return`<rect x="9" y="13" width="10" height="2"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case kt.RESET_ZOOM:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case kt.MAKE_FULLSCREEN:return'<polygon points="21 2 21 4 26.59 4 17 13.58 18.41 15 28 5.41 28 11 30 11 30 2 21 2"/><polygon points="15 18.42 13.59 17 4 26.59 4 21 2 21 2 30 11 30 11 28 5.41 28 15 18.42"/>';case kt.SHOW_AS_DATATABLE:return'<rect x="4" y="6" width="18" height="2"/><rect x="4" y="12" width="18" height="2"/><rect x="4" y="18" width="18" height="2"/><rect x="4" y="24" width="18" height="2"/><rect x="26" y="6" width="2" height="2"/><rect x="26" y="12" width="2" height="2"/><rect x="26" y="18" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/>';case kt.EXPORT_CSV:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case kt.EXPORT_JPG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case kt.EXPORT_PNG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';default:throw Error("Not supported toolbar control type: "+e)}}};Rb.buttonID=0;let zl=Rb;const Pb=class Vb extends tt{constructor(e,n,r,i){super(e,n,i),this.type="layout",this.configs=i,this.children=r,this._instanceID=Vb.instanceID++,this.init()}init(){this.children.forEach(e=>{e.components.forEach(n=>{n.init()})})}getPreferedAndFixedSizeSum(){const e=this.parent;let n=0;return e.selectAll(`div.layout-child-${this._instanceID}`).filter(r=>{const i=D(r,"growth");return i===Ge.PREFERRED||i===Ge.FIXED}).each(function(r){n+=r.size}),n}getNumOfStretchChildren(){return this.parent.selectAll(`div.layout-child-${this._instanceID}`).filter(e=>D(e,"growth")===Ge.STRETCH).size()}render(e=!0){const n=this.parent,{width:r,height:i}=J.getHTMLElementSize(n.node()),s=this.configs.direction===Et.ROW||this.configs.direction===Et.ROW_REVERSE,a=D(this.model.getOptions(),"style","prefix"),o=n.classed(`${sn}--${a}--layout-row`,this.configs.direction===Et.ROW).classed(`${sn}--${a}--layout-row-reverse`,this.configs.direction===Et.ROW_REVERSE).classed(`${sn}--${a}--layout-column`,this.configs.direction===Et.COLUMN).classed(`${sn}--${a}--layout-column-reverse`,this.configs.direction===Et.COLUMN_REVERSE).classed(`${sn}--${a}--layout-alignitems-center`,this.configs.alignItems===fs.CENTER).selectAll(`div.layout-child-${this._instanceID}`).data(this.children,c=>c.id);o.enter().append("div").merge(n.selectAll(`div.layout-child-${this._instanceID}`)).attr("class",c=>`layout-child layout-child-${this._instanceID} ${c.id}`).each(function(c){c.components.forEach(u=>{const f=ee(this),h=D(c,"renderType")===Me.SVG;u.setParent(h?J.appendOrSelect(f,"svg.layout-svg-wrapper").attr("width","100%").attr("height","100%"):f);const d=D(c,"growth");(d===Ge.PREFERRED||d===Ge.FIXED)&&u.render(e)})}),n.selectAll(`div.layout-child-${this._instanceID}`).style("height",null).style("width",null).each(function(c){const u=D(c,"growth"),f=D(c,"renderType")===Me.SVG?J.getSVGElementSize(ee(this).select("svg.layout-svg-wrapper"),{useBBox:!0}):J.getHTMLElementSize(this);if(u===Ge.PREFERRED){const h=s?f.width:f.height,d=s?r:i;c.size=h/d*100}}),o.exit().remove(),this.children.filter(c=>D(c,"growth")===Ge.STRETCH).forEach(c=>{c.size=(100-+this.getPreferedAndFixedSizeSum())/+this.getNumOfStretchChildren()});const l=n.selectAll(`div.layout-child-${this._instanceID}`).data(this.children,c=>c.id);s?l.style("width",c=>`${c.size/100*r}px`).style("height","100%"):l.style("height",c=>`${c.size/100*i}px`).style("width","100%"),l.each(function(c){c.components.forEach(u=>{D(c,"growth")===Ge.STRETCH&&u.render(e)})})}setModel(e){super.setModel(e),this.children.forEach(n=>{n.components.forEach(r=>r.setModel(e))})}setServices(e){super.setServices(e),this.children.forEach(n=>{n.components.forEach(r=>r.setServices(e))})}destroy(){this.children.forEach(e=>{e.components.forEach(n=>n.destroy())})}};Pb.instanceID=Math.floor(Math.random()*99999999999);let pn=Pb;class wr extends tt{constructor(){super(...arguments),this.type="spacer"}render(e=!1){this.getComponentContainer().style("width",`${this.configs.size||Wp.default.size}px`).style("height",`${this.configs.size||Wp.default.size}px`).attr("opacity",0)}}var Z8={prefix:"bx",selectorTabbable:`
    a[href], area[href], input:not([disabled]):not([tabindex='-1']),
    button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']),
    textarea:not([disabled]):not([tabindex='-1']),
    iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]
  `,selectorFocusable:`
    a[href], area[href], input:not([disabled]),
    button:not([disabled]),select:not([disabled]),
    textarea:not([disabled]),
    iframe, object, embed, *[tabindex], *[contenteditable=true]
  `},Cc=Z8;function vg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function X8(t,e,n){return e&&vg(t.prototype,e),n&&vg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function K8(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q8(t){return nB(t)||tB(t)||eB(t)||J8()}function J8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eB(t,e){if(t){if(typeof t=="string")return xu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xu(t,e)}}function tB(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nB(t){if(Array.isArray(t))return xu(t)}function xu(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Bb(t){return t.reduce(function(e,n){return Array.isArray(n)?e.push.apply(e,Q8(Bb(n))):e.push(n),e},[])}function rB(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Bb(e).reduce(function(r,i){return i(r)},function(){function r(){K8(this,r)}return X8(r)}())}function ku(t){"@babel/helpers - typeof";return ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ku(t)}function iB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sB(t,e,n){return e&&_g(t.prototype,e),n&&_g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function aB(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ou(t,e)}function Ou(t,e){return Ou=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Ou(t,e)}function oB(t){var e=cB();return function(){var n=nl(t),r;if(e){var i=nl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return lB(this,r)}}function lB(t,e){if(e&&(ku(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ub(t)}function Ub(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cB(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function nl(t){return nl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},nl(t)}function uB(t){var e=function(n){aB(i,n);var r=oB(i);function i(s){var a,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(iB(this,i),a=r.call(this,s,o),a.children=[],!s||s.nodeType!==Node.ELEMENT_NODE)throw new TypeError("DOM element should be given to initialize this widget.");return a.element=s,a.options=Object.assign(Object.create(a.constructor.options),o),a.constructor.components.set(a.element,Ub(a)),a}return sB(i,[{key:"release",value:function(){for(var s=this.children.pop();s;s=this.children.pop())s.release();return this.constructor.components.delete(this.element),null}}],[{key:"create",value:function(s,a){return this.components.get(s)||new this(s,a)}}]),i}(t);return e}function Mu(t){"@babel/helpers - typeof";return Mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mu(t)}function fB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hB(t,e,n){return e&&bg(t.prototype,e),n&&bg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ao(){return typeof Reflect<"u"&&Reflect.get?ao=Reflect.get:ao=function(t,e,n){var r=dB(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},ao.apply(this,arguments)}function dB(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=cs(t),t!==null););return t}function mB(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cu(t,e)}function Cu(t,e){return Cu=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Cu(t,e)}function pB(t){var e=_B();return function(){var n=cs(t),r;if(e){var i=cs(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return gB(this,r)}}function gB(t,e){if(e&&(Mu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vB(t)}function vB(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _B(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function cs(t){return cs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},cs(t)}function bB(t){var e=function(n){mB(i,n);var r=pB(i);function i(){var s;fB(this,i);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return s=r.call.apply(r,[this].concat(o)),s.handles=new Set,s}return hB(i,[{key:"manage",value:function(s){return this.handles.add(s),s}},{key:"unmanage",value:function(s){return this.handles.delete(s),s}},{key:"release",value:function(){var s=this;return this.handles.forEach(function(a){a.release(),s.handles.delete(a)}),ao(cs(i.prototype),"release",this).call(this)}}]),i}(t);return e}function Ns(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.addEventListener.apply(t,n),{release:function(){return t.removeEventListener.apply(t,n),null}}}function Au(t){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Au(t)}function yB(t){return TB(t)||$B(t)||EB(t)||wB()}function wB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EB(t,e){if(t){if(typeof t=="string")return Iu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Iu(t,e)}}function $B(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function TB(t){if(Array.isArray(t))return Iu(t)}function Iu(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function SB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xB(t,e,n){return e&&yg(t.prototype,e),n&&yg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function kB(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Du(t,e)}function Du(t,e){return Du=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Du(t,e)}function OB(t){var e=AB();return function(){var n=rl(t),r;if(e){var i=rl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return MB(this,r)}}function MB(t,e){if(e&&(Au(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CB(t)}function CB(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AB(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rl(t){return rl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rl(t)}function IB(t){var e=function(n){kB(i,n);var r=OB(i);function i(){return SB(this,i),r.apply(this,arguments)}return xB(i,[{key:"_changeState",value:function(){throw new Error("_changeState() should be overridden to perform actual change in state.")}},{key:"changeState",value:function(){for(var s=this,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var c=typeof o[0]=="string"?o.shift():void 0,u=Object(o[0])===o[0]&&typeof o[0]!="function"?o.shift():void 0,f=typeof o[0]=="function"?o.shift():void 0;if(typeof this.shouldStateBeChanged=="function"&&!this.shouldStateBeChanged(c,u)){f&&f(null,!0);return}var h={group:u&&u.group,state:c},d=[h.group,c].filter(Boolean).join("-").split("-").map(function(b){return b[0].toUpperCase()+b.substr(1)}).join(""),m=new CustomEvent(this.options["eventBefore".concat(d)],{bubbles:!0,cancelable:!0,detail:u}),v=u&&u.delegatorNode||this.element,p=!v.dispatchEvent(m);if(p){if(f){var g=new Error("Changing state (".concat(JSON.stringify(h),") has been canceled."));g.canceled=!0,f(g)}}else{var _=[c,u].filter(Boolean);this._changeState.apply(this,yB(_).concat([function(){v.dispatchEvent(new CustomEvent(s.options["eventAfter".concat(d)],{bubbles:!0,cancelable:!0,detail:u})),f&&f()}]))}}}]),i}(t);return e}function Lu(t,e){var n=t.target,r=t.currentTarget;if(typeof n.matches=="function"){if(n.matches(e))return n;if(n.matches("".concat(e," *"))){var i=n.closest(e);if((r.nodeType===Node.DOCUMENT_NODE?r.documentElement:r).contains(i))return i}}}function wg(t){if(!t||typeof t=="function")return{launchingElement:null,launchingEvent:null};var e=t.delegateTarget||t.currentTarget||t,n=t.currentTarget&&t;if(e&&!e.nodeType)throw new TypeError("DOM Node should be given for launching element.");if(n&&!n.type)throw new TypeError("DOM event should be given for launching event.");return{launchingElement:e,launchingEvent:n}}function Ru(t){"@babel/helpers - typeof";return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ru(t)}function DB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Eg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function LB(t,e,n){return e&&Eg(t.prototype,e),n&&Eg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function RB(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nu(t,e)}function Nu(t,e){return Nu=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Nu(t,e)}function NB(t){var e=BB();return function(){var n=il(t),r;if(e){var i=il(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return PB(this,r)}}function PB(t,e){if(e&&(Ru(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VB(t)}function VB(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BB(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function il(t){return il=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},il(t)}function UB(t){var e=function(n){RB(i,n);var r=NB(i);function i(){return DB(this,i),r.apply(this,arguments)}return LB(i,[{key:"show",value:function(s,a){(!s||typeof s=="function")&&(a=s),this.changeState("shown",wg(s),a)}},{key:"hide",value:function(s,a){(!s||typeof s=="function")&&(a=s),this.changeState("hidden",wg(s),a)}}]),i}(t);return e}var HB=[IB,UB];const zB=HB;function Pu(t){"@babel/helpers - typeof";return Pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pu(t)}function FB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function GB(t,e,n){return e&&$g(t.prototype,e),n&&$g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function qB(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vu(t,e)}function Vu(t,e){return Vu=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Vu(t,e)}function jB(t){var e=ZB();return function(){var n=sl(t),r;if(e){var i=sl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return WB(this,r)}}function WB(t,e){if(e&&(Pu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YB(t)}function YB(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZB(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sl(t){return sl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},sl(t)}function XB(t){var e=function(n){qB(i,n);var r=jB(i);function i(){return FB(this,i),r.apply(this,arguments)}return GB(i,null,[{key:"init",value:function(){var s=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=Object.assign(Object.create(this.options),o);if(!a||a.nodeType!==Node.ELEMENT_NODE&&a.nodeType!==Node.DOCUMENT_NODE)throw new TypeError("DOM document or DOM element should be given to search for and initialize this widget.");if(a.nodeType===Node.ELEMENT_NODE&&a.matches(l.selectorInit))this.create(a,o);else{var c=l.initEventNames.map(function(u){return Ns(a,u,function(f){var h=Lu(f,"[".concat(l.attribInitTarget,"]"));if(h){f.delegateTarget=h;var d=h.ownerDocument.querySelectorAll(h.getAttribute(l.attribInitTarget));if(d.length>1)throw new Error("Target widget must be unique.");if(d.length===1){h.tagName==="A"&&f.preventDefault();var m=s.create(d[0],o);typeof m.createdByLauncher=="function"&&m.createdByLauncher(f)}}})});return{release:function(){for(var u=c.pop();u;u=c.pop())u.release()}}}return""}}]),i.forLazyInit=!0,i}(t);return e}function Bu(t){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bu(t)}function KB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function QB(t,e,n){return e&&Tg(t.prototype,e),n&&Tg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function JB(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uu(t,e)}function Uu(t,e){return Uu=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Uu(t,e)}function eU(t){var e=rU();return function(){var n=al(t),r;if(e){var i=al(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return tU(this,r)}}function tU(t,e){if(e&&(Bu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nU(t)}function nU(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rU(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function al(t){return al=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},al(t)}var iU=function(t){JB(n,t);var e=eU(n);function n(r,i){var s;return KB(this,n),s=e.call(this,r,i),s._handleFocusinListener=void 0,s._handleKeydownListener=void 0,s._handleFocusin=function(a){var o=s.element.querySelector(s.options.selectorModalContainer)||s.element;s.element.classList.contains(s.options.classVisible)&&!o.contains(a.target)&&s.options.selectorsFloatingMenus.every(function(l){return!Lu(a,l)})&&s.element.querySelector(Cc.selectorTabbable).focus()},s._hookCloseActions(),s}return QB(n,[{key:"createdByLauncher",value:function(r){this.show(r)}},{key:"shouldStateBeChanged",value:function(r){return r==="shown"?!this.element.classList.contains(this.options.classVisible):this.element.classList.contains(this.options.classVisible)}},{key:"_changeState",value:function(r,i,s){var a=this,o,l=function(){if(o&&(o=a.unmanage(o).release()),r==="shown"&&a.element.offsetWidth>0&&a.element.offsetHeight>0){a.previouslyFocusedNode=a.element.ownerDocument.activeElement;var f=a.element.querySelector(a.options.selectorPrimaryFocus)||a.element.querySelector(Cc.selectorTabbable);f.focus()}s()};if(this._handleFocusinListener&&(this._handleFocusinListener=this.unmanage(this._handleFocusinListener).release()),r==="shown"){var c="onfocusin"in this.element.ownerDocument.defaultView,u=c?"focusin":"focus";this._handleFocusinListener=this.manage(Ns(this.element.ownerDocument,u,this._handleFocusin,!c))}r==="hidden"?(this.element.classList.toggle(this.options.classVisible,!1),this.element.ownerDocument.body.classList.toggle(this.options.classBody,!1),(this.options.selectorFocusOnClose||this.previouslyFocusedNode)&&(this.element.ownerDocument.querySelector(this.options.selectorFocusOnClose)||this.previouslyFocusedNode).focus()):r==="shown"&&(this.element.classList.toggle(this.options.classVisible,!0),this.element.ownerDocument.body.classList.toggle(this.options.classBody,!0)),o=this.manage(Ns(this.element,"transitionend",l))}},{key:"_hookCloseActions",value:function(){var r=this;this.manage(Ns(this.element,"click",function(i){var s=Lu(i,r.options.selectorModalClose);s&&(i.delegateTarget=s),(s||i.target===r.element)&&r.hide(i)})),this._handleKeydownListener&&(this._handleKeydownListener=this.unmanage(this._handleKeydownListener).release()),this._handleKeydownListener=this.manage(Ns(this.element.ownerDocument.body,"keydown",function(i){i.which===27&&r.shouldStateBeChanged("hidden")&&(i.stopPropagation(),r.hide(i))}))}}],[{key:"options",get:function(){var r=Cc.prefix;return{selectorInit:"[data-modal]",selectorModalClose:"[data-modal-close]",selectorPrimaryFocus:"[data-modal-primary-focus]",selectorsFloatingMenus:[".".concat(r,"--overflow-menu-options"),".".concat(r,"--tooltip"),".flatpickr-calendar"],selectorModalContainer:".".concat(r,"--modal-container"),classVisible:"is-visible",classBody:"".concat(r,"--body--with-modal-open"),attribInitTarget:"data-modal-target",initEventNames:["click"],eventBeforeShown:"modal-beingshown",eventAfterShown:"modal-shown",eventBeforeHidden:"modal-beinghidden",eventAfterHidden:"modal-hidden"}}}]),n.components=new WeakMap,n}(rB(uB,XB,zB,bB));const sU=iU;class Fl extends tt{constructor(e,n,r){super(e,n,r),this.type="modal",this.isEventListenerAdded=!1,this.handleShowModal=()=>{this.modal.html(this.getModalHTML()),this.modal.select("div.cds--modal-footer button.cds--btn").on("click",()=>this.model.exportToCSV()),sU.create(this.modal.node()).show()},this.init()}addEventListeners(){this.services.events.addEventListener(z.Modal.SHOW,this.handleShowModal)}removeEventListeners(){this.services.events.removeEventListener(z.Modal.SHOW,this.handleShowModal)}getModalHTML(){const e=this.model.getOptions(),n=D(e,"style","prefix"),r=this.model.getTabularDataArray();return`
		<div class="cds--modal-container cds--modal-container">
			<div class="cds--modal-header cds--modal-header">
				<p class="cds--modal-header__label cds--type-delta cds--modal-header__label cds--type-delta" id="modal-title">Tabular representation</p>

				<p class="cds--modal-header__heading cds--type-beta cds--modal-header__heading cds--type-beta" id="modal-description">${e.title}</p>

				<button class="cds--modal-close cds--modal-close" type="button" data-modal-close aria-label="close modal"  data-modal-primary-focus>
					<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" aria-label="Close" width="20" height="20" viewBox="0 0 32 32" role="img" class="cds--modal-close__icon cds--modal-close__icon">
						<path d="M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"></path>
					</svg>
				</button>
			</div>

			<div class="cds--modal-content cds--modal-content">
				<table class="cds--data-table cds--data-table--no-border cds--data-table cds--data-table--no-border">
					<thead>
						<tr>
							${wt(r,0).map(i=>`<th scope="col">
								<div class="cds--table-header-label cds--table-header-label">${i}</div>
							</th>`).join("")}
						</tr>
					</thead>

					<tbody>${r.slice(1).map(i=>`
							<tr>
								${i.map(s=>`<td>${s}</td>`).join("")}
							</tr>`).join("")}
					</tbody>
				</table>
			</div>

			<div class="cds--modal-footer cds--modal-footer">
			  <div class="${sn}--${n}-modal-footer-spacer"></div>
			  <button class="cds--btn cds--btn--primary cds--btn cds--btn--primary" type="button" data-modal-primary-focus>Download as CSV</button>
			</div>
		</div>`}render(e=!1){const n=this.model.getOptions();if(!this.isEventListenerAdded){const r=ee(this.services.domUtils.getHolder()),i=D(n,"style","prefix");this.modal=J.appendOrSelect(r,`div.${sn}--${i}--modal`),this.addEventListeners(),this.isEventListenerAdded=!0,this.modal.attr("data-modal",!0).attr("class","cds--modal cds--modal").attr("role","dialog").attr("aria-modal",!0).attr("aria-labelledby","modal-title").attr("aria-describedby","modal-description").attr("tabindex",-1)}}destroy(){this.removeEventListeners(),this.isEventListenerAdded=!1}}class Sa extends tt{constructor(){super(...arguments),this.type="title",this.renderType=Me.HTML}render(e=!1){const n=this.getComponentContainer(),r=D(this.getOptions(),"title"),i=n.selectAll("p.title").data([r]);if(i.enter().append("p").classed("title",!0).attr("role","heading").attr("aria-level",2).merge(i).html(s=>s),i.node()&&i.node().offsetWidth<i.node().scrollWidth){const s=this;i.on("mouseover",function(a){s.services.events.dispatchEvent(z.Tooltip.SHOW,{event:a,hoveredElement:i,content:i.text()})}).on("mousemove",function(a){s.services.events.dispatchEvent(z.Tooltip.MOVE,{event:a})}).on("mouseout",function(){s.services.events.dispatchEvent(z.Tooltip.HIDE)})}i.exit().remove()}truncateTitle(e,n){if(n<=0)return;const r=e.text();if(e.node().getComputedTextLength()>n){e.append("tspan").text("...");const i=J.appendOrSelect(e,"tspan").node().getComputedTextLength(),s=e.text(),a=this.getSubstringIndex(e.node(),0,s.length-1,n-i);e.html(s.substring(0,a-1)).append("tspan").text("...");const o=this;e.on("mouseover",function(l){o.services.events.dispatchEvent(z.Tooltip.SHOW,{event:l,hoveredElement:e,content:r})}).on("mousemove",function(l){o.services.events.dispatchEvent(z.Tooltip.MOVE,{event:l})}).on("mouseout",function(){o.services.events.dispatchEvent(z.Tooltip.HIDE)})}}getMaxTitleWidth(){return J.getSVGElementSize(this.parent.node(),{useAttrs:!0}).width}getSubstringIndex(e,n,r,i){const s=Math.floor((r+n)/2);return e.getSubStringLength(0,s)>i?this.getSubstringIndex(e,n,s,i):e.getSubStringLength(0,s)<i?e.getSubStringLength(0,s+1)>i?s:this.getSubstringIndex(e,s,r,i):s}}class Zf extends tt{constructor(){super(...arguments),this.type="legend",this.renderType=Me.HTML}render(e=!1){const n=this.getOptions(),r=D(n,"legend"),i=D(r,"alignment"),s=D(n,"legend","orientation");let a=this.model.getDataGroups();const{DISABLED:o}=Ot.items.status,l=a.some(_=>_.status===o),c=D(r,"order"),u=this.getComponentContainer().classed("center-aligned",i===Ct.CENTER).classed("right-aligned",i===Ct.RIGHT).classed(s,!0).classed("has-deactivated-items",l).attr("role",Ye.GROUP).attr("aria-label","Data groups").attr("data-name","legend-items");c&&(a=this.sortDataGroups(a,c));const f=u.selectAll("div.legend-item").data(a,_=>_.name),h=f.enter().append("div").attr("class","legend-item");h.merge(u.selectAll("div.legend-item")).classed("active",function(_){return _.status===Ot.items.status.ACTIVE});const d=D(this.getOptions(),"legend","clickable");u.classed("clickable",d&&a.length>1);const m=Ot.checkbox.radius,v=h.append("div").classed("checkbox",!0),p=v.merge(f.select("div.checkbox")).attr("role",Ye.CHECKBOX).attr("tabindex",d?0:-1).attr("aria-labelledby",(_,b)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${b}-title`)).attr("aria-checked",({status:_})=>_===Ot.items.status.ACTIVE).attr("width",m*2).attr("height",m*2).attr("class",_=>this.model.getColorClassName({classNameTypes:[Le.BACKGROUND],dataGroupName:_.name,originalClassName:"checkbox"})).style("background",_=>_.status===Ot.items.status.ACTIVE?this.model.getFillColor(_.name)||this.model.getStrokeColor(_.name):null).classed("active",function(_){return _.status===Ot.items.status.ACTIVE});v.append("svg").attr("focusable",!1).attr("preserveAspectRatio","xMidYMid meet").attr("xmlns","http://www.w3.org/2000/svg").attr("width","11").attr("height","11").attr("viewBox","0 0 31 28").attr("aria-hidden",!0).style("will-change","transform").append("path").attr("d","M13 21.2l-7.1-7.1-1.4 1.4 7.1 7.1L13 24 27.1 9.9l-1.4-1.5z"),h.append("p").merge(f.select("p"));const g=D(n,"legend","additionalItems");if(g&&a.length){const _=this,b=u.selectAll("div.additional-item").data(g);b.exit().remove();const y=b.enter().append("div").merge(b).classed("legend-item",!0).classed("additional",!0).attr("aria-labelledby",(k,C)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${p.size()+C}-title`));y.selectAll("*").remove();let w,$=1;y.append("svg").classed("icon",!0).each(function(k){const C=ee(this);!w||w!=k.type?(w=k.type,$=1):$++,_.addAdditionalItem(C,k,$)}),y.append("p").merge(y.select("p")),this.truncateLegendText()}f.exit().on("mouseover",null).on("click",null).on("mouseout",null).remove(),d&&h.size()>1&&this.addEventListeners()}sortDataGroups(e,n){if(e.sort((r,i)=>n.indexOf(r.name)-n.indexOf(i.name)),n.length<e.length){const r=e.length-n.length;return e.slice(r).concat(e.slice(0,r))}return e}addAdditionalItem(e,n,r){const{width:i,height:s}=Ot.area;if(n.type===Vt.RADIUS?e.style("width",`${s}px`).style("height",`${s}px`):e.style("width",`${i}px`).style("height",`${s}px`),n.type===Vt.RADIUS){const{iconData:a,fill:o,stroke:l}=Ot.radius;e.attr("fill","none").selectAll("circle").data(a).enter().append("circle").classed("radius",!0).attr("role",Ye.IMG).attr("aria-label","radius").attr("cx",c=>c.cx).attr("cy",c=>c.cy).attr("r",c=>c.r).style("fill",n.fill?n.fill:o).style("stroke",n.stroke?n.stroke:l)}else if(n.type===Vt.LINE){const a=Ot.line;e.select("line.line").empty()&&e.append("line").classed(`line-${r}`,!0).attr("role",Ye.IMG).attr("aria-label","line").attr("x1",0).attr("y1",a.yPosition).attr("x2",i).attr("y2",a.yPosition).style("stroke",n.stroke?n.stroke:a.stroke).style("stroke-width",a.strokeWidth)}else if(n.type===Vt.AREA)e.select("rect.area").empty()&&e.append("rect").classed(`area-${r}`,!0).attr("role",Ye.IMG).attr("aria-label","area").attr("width",i).attr("height",s).style("fill",r>3&&!n.fill?Ot.area.fill:n.fill).style("stroke",n.stroke);else if(n.type===Vt.SIZE){const{iconData:a,fill:o,stroke:l}=Ot.size;e.attr("fill","none").attr("role",Ye.IMG).attr("aria-label","size").selectAll("rect").data(a).enter().append("rect").classed("size",!0).attr("width",c=>c.width).attr("height",c=>c.height).attr("y",()=>0).style("fill",n.fill?n.fill:o).style("stroke",n.stroke?n.stroke:l).style("stroke-width",1)}else if(n.type===Vt.QUARTILE){const{iconData:a}=Ot.quartile;e.selectAll("rect").attr("role",Ye.IMG).attr("aria-label","quartile").data(a).enter().append("rect").attr("class",(o,l)=>`quartile-${l===0?"wrapper":"line"}`).attr("x",o=>o.x).attr("y",o=>o.y).attr("width",o=>o.width).attr("height",o=>o.height)}else if(n.type===Vt.ZOOM){const{iconData:a,color:o}=D(Ot,"zoom"),l=e.attr("role",Ye.IMG).attr("aria-label","zoom").selectAll("g.icon").data(a).enter();l.append("g").attr("x",c=>c.x).attr("y",c=>c.y).attr("width",c=>c.width).attr("height",c=>c.height).append("polygon").attr("points","7.7 4.82 5.78 4.82 5.78 2.89 4.82 2.89 4.82 4.82 2.89 4.82 2.89 5.78 4.82 5.78 4.82 7.7 5.78 7.7 5.78 5.78 7.7 5.78 7.7 4.82").attr("fill",()=>n.color?n.color:o),l.append("path").attr("d","M9.36,8.67A5.22,5.22,0,0,0,10.59,5.3,5.3,5.3,0,1,0,5.3,10.59,5.22,5.22,0,0,0,8.67,9.36L12.32,13l.68-.68Zm-4.06,1A4.34,4.34,0,1,1,9.63,5.3,4.33,4.33,0,0,1,5.3,9.63Z").attr("fill",()=>n.color?n.color:o)}}truncateLegendText(){const e=this.getComponentContainer(),n=D(this.getOptions(),"legend","truncation"),r=D(n,"type"),i=D(n,"threshold"),s=D(n,"numCharacter"),a=e.selectAll("div.legend-item p");a.attr("id",function(){return(this.parentNode.querySelector("div.checkbox")||this.parentNode).getAttribute("aria-labelledby")}),r!==Ln.NONE?a.html(function(o){return o.name.length>i&&o.name.length!==s?la(o.name,r,s):o.name}):a.html(o=>o.name)}addEventListeners(){const e=this,n=this.getComponentContainer(),r=this.getOptions(),i=D(r,"legend"),s=D(i,"truncation");n.selectAll("div.legend-item").on("mouseover",function(a){e.services.events.dispatchEvent(z.Legend.ITEM_HOVER,{hoveredElement:ee(this)});const o=ee(this);o.select("div.checkbox").classed("hovered",!0);const l=o.datum();l.name.length>s.threshold&&s.numCharacter<l.name.length&&s.type!==Ln.NONE&&e.services.events.dispatchEvent(z.Tooltip.SHOW,{event:a,hoveredElement:o,content:l.name})}).on("mousemove",function(a){ee(this).datum().name.length>s.threshold&&s.type!==Ln.NONE&&e.services.events.dispatchEvent(z.Tooltip.MOVE,{event:a})}).on("click",function(){e.services.events.dispatchEvent(z.Legend.ITEM_CLICK,{clickedElement:ee(this)});const a=ee(this).datum();e.model.toggleDataLabel(a.name)}).on("mouseout",function(){const a=ee(this);a.select("div.checkbox").classed("hovered",!1),a.datum().name.length>s.threshold&&s.type!==Ln.NONE&&e.services.events.dispatchEvent(z.Tooltip.HIDE),e.services.events.dispatchEvent(z.Legend.ITEM_MOUSEOUT,{hoveredElement:a})}),n.selectAll("div.legend-item div.checkbox").on("keyup",function(a){a.key&&a.key==="Tab"&&e.services.events.dispatchEvent(z.Legend.ITEM_HOVER,{hoveredElement:ee(this)})}),n.selectAll("div.legend-item div.checkbox").on("keydown",function(a,o){a.key&&a.key===" "?(a.preventDefault(),e.model.toggleDataLabel(o.name)):a.key&&a.key==="Tab"&&e.services.events.dispatchEvent(z.Legend.ITEM_MOUSEOUT,{hoveredElement:ee(this)})}),n.selectAll("g.additional-item").on("mouseover",function(a){const o=ee(this),l=o.datum();l.name.length>s.threshold&&e.services.events.dispatchEvent(z.Tooltip.SHOW,{event:a,hoveredElement:o,content:l.name})})}}class Hb extends tt{constructor(e,n,r){super(e,n,r),this.type="chart-clip",this.renderType=Me.SVG,this.chartClipId="chart-clip-id-"+Math.floor(Math.random()*99999999999),this.init()}init(){this.model.set({chartClipId:this.chartClipId},{skipUpdate:!0})}render(e=!0){this.createClipPath()}createClipPath(){const e=this.parent,{cartesianScales:n}=this.services;if(!n)throw new Error("Service cartesianScales was undefined");const r=n.getMainXScale(),i=n.getMainYScale(),[s,a]=r.range(),[o,l]=i.range();if(!e)throw new Error("svg is undefined");this.chartClipPath=J.appendOrSelect(e,`clipPath.${this.type}`).attr("id",this.chartClipId);const c=J.appendOrSelect(this.chartClipPath,`rect.${this.type}`);a-s>0&&c.attr("x",s).attr("y",l).attr("width",a-s).attr("height",o-l),this.chartClipPath.merge(c).lower()}}class aU extends Hb{constructor(){super(...arguments),this.type="canvas-chart-clip",this.chartClipId="canvas-chart-clip-id-"+Math.floor(Math.random()*99999999999)}createClipPath(){const e=this.parent,{width:n,height:r}=J.getSVGElementSize(this.parent,{useAttrs:!0});this.chartClipPath=J.appendOrSelect(e,`clipPath.${this.type}`).attr("id",this.chartClipId);const i=J.appendOrSelect(this.chartClipPath,`rect.${this.type}`);i.attr("x",0).attr("y",0).attr("width",n).attr("height",r),this.chartClipPath.merge(i).lower()}}var Mi,Wt;(function(t){t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom"})(Wt||(Wt={}));var Sg=(Mi={},Mi[Wt.LEFT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left-e.offsetWidth)}},Mi[Wt.RIGHT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left+n.width)}},Mi[Wt.TOP]=function(t,e,n){return{top:Math.round(t.top-e.offsetHeight),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},Mi[Wt.BOTTOM]=function(t,e,n){return{top:Math.round(t.top+n.height),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},Mi),xg=typeof window<"u"?window:{innerHeight:0,scrollY:0,innerWidth:0,scrollX:0},Gl=function(){function t(e){e===void 0&&(e={}),this.positions=Sg,this.positions=Object.assign({},Sg,e)}return t.prototype.getRelativeOffset=function(e){for(var n={left:e.offsetLeft,top:e.offsetTop};e.offsetParent&&getComputedStyle(e.offsetParent).position==="static";)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;return n},t.prototype.getAbsoluteOffset=function(e){for(var n=e,r={top:0,left:0};n.offsetParent;){var i=getComputedStyle(n.offsetParent);i.position==="static"&&i.marginLeft&&i.marginTop&&(parseInt(i.marginTop,10)&&(r.top+=parseInt(i.marginTop,10)),parseInt(i.marginLeft,10)&&(r.left+=parseInt(i.marginLeft,10))),n=n.offsetParent}var s=e.getBoundingClientRect(),a=document.body.getBoundingClientRect();return{top:s.top-a.top+r.top,left:s.left-a.left+r.left}},t.prototype.findRelative=function(e,n,r){var i=this.getRelativeOffset(e),s=e.getBoundingClientRect();return this.calculatePosition(i,s,n,r)},t.prototype.findAbsolute=function(e,n,r){var i=this.getAbsoluteOffset(e),s=e.getBoundingClientRect();return this.calculatePosition(i,s,n,r)},t.prototype.findPosition=function(e,n,r,i){i===void 0&&(i=this.getAbsoluteOffset.bind(this));var s=i(e),a=e.getBoundingClientRect();return this.calculatePosition(s,a,n,r)},t.prototype.findPositionAt=function(e,n,r){return this.calculatePosition(e,{top:0,left:0,height:0,width:0},n,r)},t.prototype.getPlacementBox=function(e,n){var r=e.offsetHeight+n.top,i=e.offsetWidth+n.left;return{top:n.top,bottom:r,left:n.left,right:i}},t.prototype.addOffset=function(e,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),Object.assign({},e,{top:e.top+n,left:e.left+r})},t.prototype.setElement=function(e,n){e.style.top=n.top+"px",e.style.left=n.left+"px"},t.prototype.findBestPlacement=function(e,n,r,i,s){var a=this;i===void 0&&(i=this.defaultContainerFunction.bind(this)),s===void 0&&(s=this.findPosition.bind(this));var o=r.map(function(l){var c=s(e,n,l),u=a.getPlacementBox(n,c),f=0,h=0,d=i();u.top<d.top?f=d.top-u.top:u.bottom>d.height&&(f=u.bottom-d.height),u.left<d.left?h=d.left-u.left:u.right>d.width&&(h=u.right-d.width),f&&!h?h=1:h&&!f&&(f=1);var m=n.offsetHeight*n.offsetWidth,v=f*h,p=m-v,g=p/m;return{placement:l,weight:g}});return o.sort(function(l,c){return c.weight-l.weight}),o[0].placement},t.prototype.findBestPlacementAt=function(e,n,r,i){var s=this;i===void 0&&(i=this.defaultContainerFunction.bind(this));var a=function(o,l,c){return s.findPositionAt(e,l,c)};return this.findBestPlacement(null,n,r,i,a)},t.prototype.defaultContainerFunction=function(){return{top:0,left:0,height:xg.innerHeight,width:xg.innerWidth}},t.prototype.calculatePosition=function(e,n,r,i){return this.positions[i]?this.positions[i](e,r,n):(console.error("No function found for placement, defaulting to 0,0"),{left:0,top:0})},t}();new Gl;class Xf extends tt{constructor(e,n,r){super(e,n,r),this.type="tooltip",this.renderType=Me.HTML,this.isEventListenerAdded=!1,this.positionService=new Gl,this.handleShowTooltip=i=>{const s=i.detail.data||i.detail.items;let a;const o=this.formatItems(this.getItems(i));i.detail.content?a=`<div class="title-tooltip"><p>${i.detail.content}</p></div>`:a=this.getTooltipHTML(o);const l=J.appendOrSelect(this.tooltip,"div.content-box");if(D(this.getOptions(),"tooltip","customHTML"))if(i.detail.content){const c=`<div class="title-tooltip"><p>${i.detail.content}</p></div>`;l.html(c)}else l.html(this.model.getOptions().tooltip.customHTML(s,a));else l.html(a);l.selectAll(".datapoint-tooltip").each(function(c,u){const f=o[u];o[u]&&o[u].color&&ee(this).select(".tooltip-color").attr("class","tooltip-color").style("background-color",f.color)}),this.positionTooltip(i),this.tooltip.classed("hidden",!1).attr("aria-hidden",!1)},this.handleHideTooltip=()=>{this.tooltip.classed("hidden",!0).attr("aria-hidden",!0)},this.init()}addTooltipEventListener(){this.services.events.addEventListener(z.Tooltip.MOVE,e=>{this.tooltip.classed("hidden")===!1&&this.positionTooltip(e)}),this.services.events.addEventListener(z.Tooltip.SHOW,this.handleShowTooltip),this.services.events.addEventListener(z.Tooltip.HIDE,this.handleHideTooltip),this.services.events.addEventListener(z.Chart.MOUSEOUT,this.handleHideTooltip)}removeTooltipEventListener(){this.services.events.removeEventListener(z.Tooltip.MOVE,null),this.services.events.removeEventListener(z.Tooltip.SHOW,this.handleShowTooltip),this.services.events.removeEventListener(z.Tooltip.HIDE,this.handleHideTooltip),this.services.events.removeEventListener(z.Chart.MOUSEOUT,this.handleHideTooltip)}getItems(e){return e.detail.items?e.detail.items:[]}formatItems(e){const n=this.getOptions(),r=D(n,"tooltip","truncation","type"),i=D(n,"tooltip","truncation","threshold"),s=D(n,"tooltip","truncation","numCharacter");return r!==Ln.NONE?e.map(a=>{const o=a.labelIcon?12:0;return a.value=a.value?this.valueFormatter(a.value,a.label):a.value,a.label&&a.label.length+o>i&&(a.label=la(a.label,r,s)),a.value&&a.value.length>i&&(a.value=la(a.value,r,s)),a}):e.map(a=>(a.value=a.value?this.valueFormatter(a.value,a.label):a.value,a))}getTooltipHTML(e){return'<ul class="multi-tooltip">'+e.map(n=>`<li>
					<div class="datapoint-tooltip${n.bold?" bold":""}">
						${n.class||n.color?`<div class="tooltip-color ${n.class}"></div>`:""}
						<div class="label">
						<p>${n.label||""}</p>
						${n.labelIcon?`<span class="label-icon"/>${n.labelIcon}</span>`:""}
						</div>
						${n.value===void 0||n.value===null?"":`<p class="value"/>${n.value}</p>`}
					</div>
				</li>`).join("")+"</ul>"}valueFormatter(e,n){const r=this.getOptions(),i=D(r,"tooltip","valueFormatter");if(i)return i(e,n);if(typeof e.getTime=="function")return is(e,"MMM d, yyyy");try{if(typeof e=="string"&&/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(e))return is(Date.parse(e),"MMM d, yyyy")}catch{}return e.toLocaleString()}render(e=!1){const n=this.getOptions(),r=D(n,"tooltip","enabled");if(r){const i=ee(this.services.domUtils.getHolder()),s=D(n,"style","prefix");this.tooltip=J.appendOrSelect(i,`div.${sn}--${s}--tooltip`),this.tooltip.style("max-width",null).attr("role","tooltip"),this.isEventListenerAdded||(this.addTooltipEventListener(),this.isEventListenerAdded=!0),this.tooltip.classed("hidden",!0)}else!r&&this.isEventListenerAdded&&(this.removeTooltipEventListener(),this.isEventListenerAdded=!1)}positionTooltip(e){const n=this.services.domUtils.getHolder(),r=this.tooltip.node(),i=this.getOptions(),s=D(i,"zoomBar","top","enabled");let a=D(e,"detail","mousePosition");if(!a)a=ni(D(e,"detail","event"),n);else{const h=D(i,"zoomBar","top","type"),d=dn.height[h];s&&(a[1]+=d+dn.spacerHeight)}const o=n.offsetWidth,l=n.offsetHeight;let c;a[0]/o>.9?c=Wt.LEFT:a[0]/o<.1?c=Wt.RIGHT:c=this.positionService.findBestPlacementAt({left:a[0],top:a[1]},r,[Wt.RIGHT,Wt.LEFT,Wt.TOP,Wt.BOTTOM],()=>({top:void 0,left:void 0,width:o,height:l}));let{horizontalOffset:u}=sN;c===Wt.LEFT&&(u*=-1);const f=this.positionService.findPositionAt({left:a[0]+u,top:a[1]},r,c);this.positionService.setElement(r,f)}}const zb=class oo extends tt{constructor(){super(...arguments),this.type="grid-brush",this.renderType=Me.SVG,this.selectionSelector="rect.selection",this.frontSelectionSelector="rect.frontSelection"}render(e=!0){const n=this.parent,r=this.getComponentContainer();if(!n)throw new Error("SVG was not defined");const i=J.appendOrSelect(n,"svg.chart-grid-backdrop"),s=J.appendOrSelect(i,`g.${this.type}`),a=J.appendOrSelect(s,this.selectionSelector),{width:o,height:l}=J.getSVGElementSize(i,{useAttrs:!0}),{cartesianScales:c}=this.services,u=c.getMainXScaleType(),f=c.getMainXScale(),[h]=f.range();r.attr("transform",`translate(${h},0)`);const d=J.appendOrSelect(r,this.frontSelectionSelector);if(f&&u===xe.TIME){let m=this.model.get("zoomDomain");m===void 0&&(m=this.services.zoom.getDefaultZoomBarDomain(),m&&this.model.set({zoomDomain:m},{animate:!1}));const v=w=>{const $=w[1]-w[0];let k="0,"+$.toString();const C=Math.floor(l/oo.DASH_LENGTH),V=C*oo.DASH_LENGTH;for(let I=0;I<C;I++)k+=","+oo.DASH_LENGTH;k+=","+(l-V),C%2===1&&(k+=",0"),k+=","+$.toString(),k+=","+l.toString(),d.attr("stroke-dasharray",k)},p=w=>{const $=w.selection;$===null||$[0]===$[1]||(d.attr("x",parseFloat(a.attr("x"))+parseFloat(i.attr("x"))).attr("y",a.attr("y")).attr("width",a.attr("width")).attr("height",a.attr("height")).style("cursor","pointer").style("display",null),v($))},g=(w,$)=>{const k=j1().range([0,o]).domain(m);let C=[k.invert(w),k.invert($)];C[0].valueOf()===C[1].valueOf()&&(C=this.services.zoom.getDefaultZoomBarDomain()),(m[0].valueOf()!==C[0].valueOf()||m[1].valueOf()!==C[1].valueOf())&&this.services.zoom.handleDomainChange(C)};let _;const b=w=>{const $=w.selection;$!==null&&(g($[0],$[1]),s.call(_.move,null),d.style("display","none"))};l!=0&&o!=0&&(_=i1().extent([[0,0],[o-1,l]]).on("start brush end",p).on("end.brushed",b),s.call(_));const y=this.services.zoom.getZoomRatio();i.on("click",function(w){if(w.shiftKey){const $=this.services.domUtils.getHolder(),k=ni(s.node(),$)[0];let C=k-o*y/2;C<0&&(C=0);let V=k+o*y/2;V>o&&(V=o),g(C,V)}})}}};zb.DASH_LENGTH=4;let oU=zb;class lU extends tt{constructor(){super(...arguments),this.type="zoom-bar",this.renderType=Me.SVG,this.MIN_SELECTION_DIFF=9e-10,this.brushSelector="g.zoom-bar-brush",this.clipId="zoomBarClip-"+Math.floor(Math.random()*99999999999),this.brush=i1(),this.highlightStrokeWidth=1}init(){this.services.events.addEventListener(z.ZoomBar.UPDATE,this.render.bind(this));const e=D(this.getOptions(),"zoomBar",ae.TOP,"data");this.model.setZoomBarData(e)}render(e=!0){const n=this.getComponentContainer(),r=this.services.zoom.isZoomBarLoading(ae.TOP),i=this.services.zoom.isZoomBarLocked(ae.TOP),s=D(this.getOptions(),"zoomBar",ae.TOP,"type"),a=D(this.getOptions(),"axes",ae.BOTTOM,"highlights"),o=dn.height[s],{width:l}=J.getSVGElementSize(this.parent,{useAttrs:!0});if(l===0)return;let c=0;const u=this.model.get("axesMargins");u&&u.left&&(c=u.left);const f=J.appendOrSelect(n,"svg.zoom-container").attr("width","100%").attr("height",o).attr("opacity",1);if(J.appendOrSelect(n,"rect.zoom-spacer").attr("x",0).attr("y",o).attr("width","100%").attr("height",dn.spacerHeight).attr("opacity",1).attr("fill","none"),s===qn.GRAPH_VIEW?J.appendOrSelect(f,"rect.zoom-bg").attr("x",c).attr("y",0).attr("width",l-c).attr("height","100%").classed("zoom-bg-skeleton",r).style("stroke",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null):s===qn.SLIDER_VIEW&&J.appendOrSelect(f,"rect.zoom-slider-bg").attr("x",c).attr("y",o/2-1).attr("width",l-c).attr("height",2).classed("zoom-slider-bg-skeleton",r).style("stroke",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null),r){this.renderSkeleton(f,c,l);return}const{cartesianScales:h}=this.services,d=h.getMainXScale(),m=h.getMainYScale(),v=h.getMainXScaleType();if(d&&v===xe.TIME){let p=this.services.zoom.getZoomBarData();if(In(p)||p.length===1)return;this.xScale=d.copy(),this.yScale=m.copy();const g=this.services.zoom.getDefaultZoomBarDomain(p);p=this.compensateDataForDefaultDomain(p,g);const _=this.model.get("initialZoomDomain"),b=D(this.getOptions(),"zoomBar",ae.TOP,"initialZoomDomain");b&&b[0]&&b[1]&&(b[0]=new Date(b[0]),b[1]=new Date(b[1])),b&&!(_&&_[0].valueOf()===b[0].valueOf()&&_[1].valueOf()===b[1].valueOf())?this.model.set({initialZoomDomain:Ne([],b),zoomDomain:b?Ne([],b):g},{skipUpdate:!0}):b===null&&_!==null&&this.model.set({initialZoomDomain:null,zoomDomain:Ne([],g)},{skipUpdate:!0}),this.xScale.range([c,l]).domain(g),this.maxSelectionRange=this.xScale.range(),this.yScale.range([0,o-6]).domain(Rn(p,$=>$.value));const y=this.model.get("zoomDomain");if(s===qn.GRAPH_VIEW&&(this.renderZoomBarArea(f,"path.zoom-graph-area-unselected",p,null),this.updateClipPath(n,this.clipId,0,0,0,0),this.renderZoomBarArea(f,"path.zoom-graph-area",p,this.clipId),this.renderZoomBarBaseline(f,c,l),a)){const $=a.highlightStartMapsTo,k=a.highlightEndMapsTo,C=a.color,V=a.labelMapsTo;a.data.forEach((I,S)=>{J.appendOrSelect(f,`rect.highlight-${S}`).attr("height",o-2*this.highlightStrokeWidth).attr("y",this.highlightStrokeWidth).attr("x",this.xScale(I[$])).attr("width",this.xScale(I[k])-this.xScale(I[$])).style("fill",C&&C.scale[I[V]]?C.scale[I[V]]:null).style("fill-opacity",.1).style("stroke",C&&C.scale[I[V]]?C.scale[I[V]]:null).style("stroke-dasharray","2, 2").attr("stroke-width","1px")})}this.addBrushEventListener(y,c,l);const w=J.appendOrSelect(n,this.brushSelector).call(this.brush);if(y!==void 0)if(y[0].valueOf()===y[1].valueOf())w.call(this.brush.move,this.xScale.range()),this.updateBrushHandle(this.getComponentContainer(),this.xScale.range());else{const $=y.map(k=>this.xScale(k));$[1]-$[0]<this.MIN_SELECTION_DIFF||(w.call(this.brush.move,$),this.updateBrushHandle(this.getComponentContainer(),$))}i&&(this.brush.filter(()=>!1),w.selectAll("rect").attr("cursor","auto"))}}addBrushEventListener(e,n,r){const i=o=>{const l=o.selection;l===null?this.handleBrushedEvent(o,e,this.xScale,this.xScale.range()):l[0]===l[1]||this.handleBrushedEvent(o,e,this.xScale,l)},s=D(this.getOptions(),"zoomBar",ae.TOP,"type"),a=dn.height[s];this.brush.extent([[n,0],[r,a]]).on("start brush end",null).on("start brush end",i)}handleBrushedEvent(e,n,r,i){const s=[r.invert(i[0]),r.invert(i[1])];if(this.updateBrushHandle(this.getComponentContainer(),i),e.sourceEvent!=null&&(e.sourceEvent.type==="mousemove"||e.sourceEvent.type==="mouseup"||e.sourceEvent.type==="mousedown"||e.sourceEvent.type==="touchstart"||e.sourceEvent.type==="touchmove"||e.sourceEvent.type==="touchend")){(n===void 0||n[0]!==s[0]||n[1]!==s[1])&&this.services.zoom.handleDomainChange(s,{dispatchEvent:!1});let a;e.type==="start"?a=z.ZoomBar.SELECTION_START:e.type==="brush"?a=z.ZoomBar.SELECTION_IN_PROGRESS:e.type==="end"&&(a=z.ZoomBar.SELECTION_END,this.services.events.dispatchEvent(z.ZoomDomain.CHANGE,{newDomain:s})),this.services.events.dispatchEvent(a,{selection:i,newDomain:s})}}updateBrushHandle(e,n){const r=this,i=dn.handleWidth,s=D(this.getOptions(),"zoomBar",ae.TOP,"type"),a=dn.height[s],o=-i/2,l=dn.handleBarWidth,c=s===qn.GRAPH_VIEW?dn.handleBarHeight:6,u=-l/2,f=(a-c)/2;e.select(this.brushSelector).selectAll("rect.handle").data([{type:"w"},{type:"e"}]).attr("x",function(d){if(d.type==="w")return Math.max(n[0]+o,r.maxSelectionRange[0]);if(d.type==="e")return Math.min(n[1]+o,r.maxSelectionRange[1]-i)}).attr("y",0).attr("width",i).attr("height",a).attr("cursor","ew-resize").style("display",null);const h=e.select(this.brushSelector).selectAll("rect.handle-bar").data([{type:"w"},{type:"e"}]);h.enter().append("rect").attr("class",function(d){return"handle-bar handle-bar--"+d.type}),h.attr("x",function(d){if(d.type==="w")return Math.max(n[0]+u,r.maxSelectionRange[0]-o+u);if(d.type==="e")return Math.min(n[1]+u,r.maxSelectionRange[1]+o+u)}).attr("y",f).attr("width",l).attr("height",c).attr("cursor","ew-resize"),s===qn.SLIDER_VIEW&&this.updateSliderSelectedArea(n),this.updateClipPath(e,this.clipId,n[0],0,n[1]-n[0],a)}updateSliderSelectedArea(e){const n=D(this.getOptions(),"zoomBar",ae.TOP,"type"),r=dn.height[n],i=this.getComponentContainer().select("svg.zoom-container");J.appendOrSelect(i,"rect.zoom-slider-selected-area").attr("x",e[0]).attr("y",r/2-1).attr("width",e[1]-e[0]).attr("height",2)}renderZoomBarArea(e,n,r,i){const{cartesianScales:s}=this.services,a=s.getMainXAxisPosition(),o=s.getMainYAxisPosition(),l=s.getMainXScaleType(),c=s.getMainYScaleType(),u=(g,_,b)=>y=>s.getValueFromScale(g,_,b,y),f=u(this.xScale,l,a),h=u(this.yScale,c,o),d=D(this.getOptions(),"zoomBar",ae.TOP,"type"),m=dn.height[d],v=kf().x(g=>f(g)).y0(m).y1(g=>m-h(g)),p=J.appendOrSelect(e,n).datum(r).attr("d",v);i&&p.attr("clip-path",`url(#${i})`)}updateClipPath(e,n,r,i,s,a){const o=J.appendOrSelect(e,"clipPath").attr("id",n);J.appendOrSelect(o,"rect").attr("x",r).attr("y",i).attr("width",s).attr("height",a)}compensateDataForDefaultDomain(e,n){if(!e||e.length<2)return;const r=yr(e),i=this.services.cartesianScales.getDomainIdentifier(),s=this.services.cartesianScales.getRangeIdentifier();if(Number(n[0])<Number(r[0][i])){const a={};a[i]=n[0],a[s]=0,r.unshift(a)}if(Number(n[1])>Number(r[r.length-1][i])){const a={};a[i]=n[1],a[s]=0,r.push(a)}return r}renderZoomBarBaseline(e,n,r,i=!1){const s=D(this.model.getOptions(),"zoomBar",ae.TOP,"type"),a=dn.height[s],o=_a()([[n,a],[r,a]]);J.appendOrSelect(e,"path.zoom-bg-baseline").attr("d",o).classed("zoom-bg-baseline-skeleton",i).style("stroke",i?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}renderSkeleton(e,n,r){this.renderZoomBarArea(e,"path.zoom-graph-area-unselected",[],null),this.renderZoomBarArea(e,"path.zoom-graph-area",[],this.clipId),this.brush.on("start brush end",null),J.appendOrSelect(this.getComponentContainer(),this.brushSelector).html(null),D(this.getOptions(),"zoomBar",ae.TOP,"type")===qn.GRAPH_VIEW&&this.renderZoomBarBaseline(e,n,r,!0)}destroy(){this.brush.on("start brush end",null),this.services.events.removeEventListener(z.ZoomBar.UPDATE,this.render.bind(this))}}class cU extends tt{constructor(e,n){super(e,n),this.type="threshold",this.renderType=Me.SVG,this.positionService=new Gl}render(e=!1){const n=D(this.getOptions(),"axes"),r=[];Object.keys(n).forEach(c=>{if(Object.values(ae).includes(c)){const u=n[c];u.thresholds&&u.thresholds.length>0&&r.push({axisPosition:c,thresholds:u.thresholds,correspondingDatasets:u==null?void 0:u.correspondingDatasets,mapsTo:u==null?void 0:u.mapsTo})}});const i=this.getComponentContainer({withinChartClip:!0}).selectAll("g.axis-thresholds").data(r,c=>c.axisPosition);i.exit().attr("opacity",0).remove();const s=i.enter().append("g").merge(i);s.attr("class",c=>`axis-thresholds ${c.axisPosition}`);const a=s.selectAll("g.threshold-group").data(c=>c.thresholds.map(u=>(u.axisPosition=c.axisPosition,u.datum=this.constructDatumObj(c,u),u)));a.exit().attr("opacity",0).remove();const o=a.enter().append("g");o.append("line").attr("class","threshold-line"),o.append("rect").attr("class","threshold-hoverable-area"),o.merge(a).attr("class","threshold-group");const l=this;s.each(function({axisPosition:c}){const u=l.services.cartesianScales.getScaleByPosition(c),f=l.services.cartesianScales.getScaleTypeByPosition(c);let h=null,d=null;c===ae.LEFT||c===ae.RIGHT?(d=u,h=l.services.cartesianScales.getMainXScale()):(h=u,d=l.services.cartesianScales.getMainYScale());const m=f===xe.LABELS,[v,p]=h.range(),[g,_]=d.range(),{cartesianScales:b}=l.services,y=b.getOrientation(),w=I=>b.getDomainValue(I),$=I=>b.getRangeValue(I),[k,C]=hr(w,$,y),V=ee(this);c===ae.TOP||c===ae.BOTTOM?(V.selectAll("line.threshold-line").transition().call(I=>l.services.transitions.setupTransition({transition:I,name:"threshold-line-update",animate:e})).attr("y1",_).attr("y2",g).attr("x1",({datum:I})=>k(I)+(m?u.step()/2:0)).attr("x2",({datum:I})=>k(I)+(m?u.step()/2:0)).style("stroke",({fillColor:I})=>I),V.selectAll("rect.threshold-hoverable-area").attr("x",0).attr("y",({datum:I})=>-k(I)).attr("width",Math.abs(g-_)).classed("rotate",!0)):(V.selectAll("line.threshold-line").transition().call(I=>l.services.transitions.setupTransition({transition:I,name:"threshold-line-update",animate:e})).attr("x1",v).attr("x2",p).attr("y1",({datum:I})=>C(I)+(m?u.step()/2:0)).attr("y2",({datum:I})=>C(I)+(m?u.step()/2:0)).style("stroke",({fillColor:I})=>I),V.selectAll("rect.threshold-hoverable-area").attr("x",v).attr("y",({datum:I})=>C(I)).attr("width",Math.abs(p-v)).classed("rotate",!1))}),this.services.events.addEventListener(z.Threshold.SHOW,c=>{this.setThresholdLabelPosition(c.detail),this.label.classed("hidden",!1)}),this.services.events.addEventListener(z.Threshold.HIDE,()=>{this.label.classed("hidden",!0)}),this.appendThresholdLabel(),this.addEventListeners()}getFormattedValue(e){const{value:n,axisPosition:r}=e,i=this.getOptions();if(this.services.cartesianScales.getScaleTypeByPosition(r)===xe.TIME){const s=[ae.LEFT,ae.RIGHT].includes(r),a=this.services.cartesianScales.getMainXScale(),o=this.services.cartesianScales.getMainYScale(),l=s?o:a,c=D(i,"timeScale"),u=yu(l.ticks(),D(c,"timeInterval"));return bu(n,0,l.ticks(),u,c)}return n.toLocaleString("en")}appendThresholdLabel(){const e=ee(this.services.domUtils.getHolder()),n=D(this.getOptions(),"style","prefix");this.label=J.appendOrSelect(e,`div.${sn}--${n}--threshold--label`).classed("hidden",!0)}setThresholdLabelPosition({event:e,datum:n}){const r=this.services.domUtils.getHolder(),i=ni(e,r),s=n.valueFormatter?n.valueFormatter(n.value):this.getFormattedValue(n);this.label.html(`${n.label||"Threshold"}: ${s}`).style("background-color",n.fillColor);const a=this.label.node(),o=this.positionService.findBestPlacementAt({left:i[0],top:i[1]},a,[Wt.RIGHT,Wt.LEFT,Wt.TOP,Wt.BOTTOM],()=>({top:void 0,left:void 0,width:r.offsetWidth,height:r.offsetHeight})),l=this.positionService.findPositionAt({left:i[0],top:i[1]},a,o);this.positionService.setElement(a,l)}constructDatumObj(e,n){const r={};return e.correspondingDatasets&&(r.group=D(e,"correspondingDatasets",0)),r[e.mapsTo]=n.value,r}addEventListeners(){const e=this;this.getComponentContainer({withinChartClip:!0}).selectAll("rect.threshold-hoverable-area").on("mouseover mousemove",function(n){ee(this.parentNode).select("line.threshold-line").classed("active",!0),e.services.events.dispatchEvent(z.Threshold.SHOW,{event:n,hoveredElement:ee(this),datum:ee(this).datum()})}).on("mouseout",function(n){ee(this.parentNode).select("line.threshold-line").classed("active",!1),e.services.events.dispatchEvent(z.Threshold.HIDE,{event:n,hoveredElement:ee(this),datum:ee(this).datum()})})}}class uU extends tt{constructor(e,n){super(e,n),this.type="highlight",this.renderType=Me.SVG,this.positionService=new Gl,this.highlightStrokeWidth=1}render(e=!1){const n=D(this.getOptions(),"axes"),r=[];Object.keys(n).forEach(c=>{if(Object.values(ae).includes(c)){const u=n[c];u.highlights&&u.highlights.data.length>0&&r.push({axisPosition:c,highlightStartMapsTo:u.highlights.highlightStartMapsTo,highlightEndMapsTo:u.highlights.highlightEndMapsTo,labelMapsTo:u.highlights.labelMapsTo,highlight:u.highlights.data,color:u.highlights.color})}});const i=this.getComponentContainer({withinChartClip:!0}).selectAll("g.axis-highlight").data(r,c=>c.axisPosition);i.exit().attr("opacity",0).remove();const s=i.enter().append("g").merge(i);s.attr("class",c=>`axis-highlight ${c.axisPosition}`);const a=s.selectAll("g.highlight-group").data(c=>c.highlight.map(u=>(u.axisPosition=c.axisPosition,u.highlightStartMapsTo=c.highlightStartMapsTo,u.labelMapsTo=c.labelMapsTo,u.color=c.color,u.highlightEndMapsTo=c.highlightEndMapsTo,u)));a.exit().attr("opacity",0).remove();const o=a.enter().append("g");o.append("rect").attr("class","highlight-bar"),o.append("line").attr("class","highlight-line"),o.merge(a).attr("class","highlight-group");const l=this;s.each(function({axisPosition:c}){const u=l.services.cartesianScales.getMainXScale(),f=l.services.cartesianScales.getMainYScale(),[h,d]=u.range(),[m,v]=f.range(),{cartesianScales:p}=l.services,g=p.getOrientation(),_=k=>p.getDomainValue(k),b=k=>p.getRangeValue(k),[y,w]=hr(_,b,g),$=ee(this);c===ae.TOP||c===ae.BOTTOM?$.selectAll("rect.highlight-bar").transition().call(k=>l.services.transitions.setupTransition({transition:k,name:"highlight-bar-update",animate:e})).attr("y",Math.max(v+l.highlightStrokeWidth,0)).attr("height",Math.max(m-2*l.highlightStrokeWidth,0)).attr("x",({highlightStartMapsTo:k,...C})=>y(C[k])).attr("width",({highlightStartMapsTo:k,highlightEndMapsTo:C,...V})=>Math.max(y(V[C])-y(V[k]),0)).style("stroke",({color:k,labelMapsTo:C,...V})=>k&&k.scale[V[C]]?k.scale[V[C]]:null).style("stroke-dasharray","2, 2").attr("stroke-width",l.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",({color:k,labelMapsTo:C,...V})=>k&&k.scale[V[C]]?k.scale[V[C]]:null):$.selectAll("rect.highlight-bar").transition().call(k=>l.services.transitions.setupTransition({transition:k,name:"highlight-bar-update",animate:e})).attr("x",h).attr("width",Math.max(d-h,0)).attr("y",({highlightEndMapsTo:k,...C})=>w(C[k])).attr("height",({highlightStartMapsTo:k,highlightEndMapsTo:C,...V})=>Math.max(w(V[k])-w(V[C]),0)).style("stroke",({color:k,labelMapsTo:C,...V})=>k&&k.scale[V[C]]?k.scale[V[C]]:null).style("stroke-dasharray","2, 2").attr("stroke-width",l.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",({color:k,labelMapsTo:C,...V})=>k&&k.scale[V[C]]?k.scale[V[C]]:null)})}}class Fb extends Xf{getItems(e){if(e.detail.items)return e.detail.items;const{data:n}=e.detail;if(!n||!n.length||!n[0])return[];const r=this.getOptions(),{cartesianScales:i}=this.services,s=i.getDomainIdentifier(),a=i.isDualAxes(),{groupMapsTo:o}=r.data,l=i.getDomainLabel();let c=i.getRangeLabel();const u=n[0][s];let f;if(n.length===1){const h=n[0],d=i.getRangeIdentifier(h);if(a){const v=i.getRangeAxisPosition({datum:h,groups:[h[o]]});c=i.getScaleLabel(v)}const m=h[d];f=[{label:l,value:u},...Array.isArray(m)&&m.length===2?[{label:"Start",value:m[0]},{label:"End",value:m[1]}]:[{label:c,value:h[d]}]],e.detail.additionalItems&&e.detail.additionalItems.forEach(v=>f.push({label:v.label,value:v.value})),f.push({label:r.tooltip.groupLabel,value:h[o],color:this.model.getFillColor(h[o]),class:this.model.getColorClassName({classNameTypes:[Le.TOOLTIP],dataGroupName:h[o]})})}else if(n.length>1&&(f=[{label:l,value:u}],f=f.concat(n.map(h=>{const d=h[i.getRangeIdentifier(h)];return{label:h[o],value:Array.isArray(d)&&d.length===2?`${d[0]} - ${d[1]}`:d,color:this.model.getFillColor(h[o]),class:this.model.getColorClassName({classNameTypes:[Le.TOOLTIP],dataGroupName:h[o]})}}).sort((h,d)=>d.value-h.value)),!a&&D(r,"tooltip","showTotal")===!0)){const h=i.getRangeIdentifier();f.push({label:wt(r,"tooltip.totalLabel")||"Total",value:n.reduce((d,m)=>d+m[h],0),bold:!0})}return f}}class fU extends tt{constructor(){super(...arguments),this.type="alluvial",this.renderType=Me.SVG,this.gradient_id="gradient-id-"+Math.floor(Math.random()*99999999999)}render(e=!0){const n=this.getComponentContainer({withinChartClip:!0});n.html("");const{width:r,height:i}=J.getSVGElementSize(n,{useAttrs:!0});if(r<1||i<1)return;const s=this.model.getOptions(),a=this.model.getDisplayData(),o=D(this.getOptions(),"color","gradient","enabled");let l=On.minNodePadding;s.alluvial.nodePadding>On.minNodePadding&&(l=s.alluvial.nodePadding);const c=D(s,"alluvial","nodeAlignment");let u=pb;c===Ct.LEFT?u=dV:c===Ct.RIGHT&&(u=mV);const f=_V().nodeId(p=>p.name).nodeWidth(On.nodeWidth).nodePadding(l).nodeAlign(u).extent([[2,30],[r-2,i]]);this.graph=f({nodes:s.alluvial.nodes.map(p=>Object.assign({},p)),links:a.map(p=>Object.assign({},p))}),this.graph.nodes=this.graph.nodes.filter(p=>p.value!==0);const h={};this.graph.nodes.forEach(p=>{const g=p.x0;p.category&&(h[g]=p==null?void 0:p.category)}),n.append("g").classed("header-arrows",!0).selectAll("g").data(Object.keys(h)).join("g").attr("transform",p=>`translate(${p}, 0)`).append("text").attr("id",(p,g)=>this.services.domUtils.generateElementIDString(`alluvial-category-${g}`)).style("font-size","14px").text(p=>h[p]?h[p]:"").attr("y",20).attr("x",(p,g)=>{const _=this.services.domUtils.generateElementIDString(`alluvial-category-${g}`),{width:b}=J.getSVGElementSize(ee(`text#${_}`),{useBBox:!0});let y=0;return p+y>=b&&(y=-b+4),y});const d=n.append("g").attr("fill","none").selectAll("g").data(this.graph.links);if(d.exit().remove(),o){const p=D(this.getOptions(),"color","scale");p&&d.enter().append("linearGradient").attr("id",g=>`${this.gradient_id}-link-${g.index}`).attr("gradientUnits","userSpaceOnUse").call(g=>g.append("stop").attr("offset","0%").attr("stop-color",_=>p[_.source.name])).call(g=>g.append("stop").attr("offset","100%").attr("stop-color",_=>p[_.target.name])),d.exit().remove()}d.enter().append("path").classed("link",!0).attr("d",CV()).attr("id",p=>this.services.domUtils.generateElementIDString(`alluvial-line-${p.index}`)).attr("class",p=>s.alluvial.monochrome?this.model.getColorClassName({classNameTypes:[Le.STROKE],dataGroupName:0,originalClassName:"link"}):this.model.getColorClassName({classNameTypes:[Le.STROKE],dataGroupName:p.source.index,originalClassName:"link"})).style("stroke",p=>o?`url(#${this.gradient_id}-link-${p.index})`:this.model.getFillColor(p.source.name)).attr("stroke-width",p=>Math.max(1,p.width)).style("stroke-opacity",On.opacity.default).attr("aria-label",p=>`${p.source.name} â ${p.target.name} (${p.value}${s.alluvial.units?" "+s.alluvial.units:""})`);const m=n.append("g").selectAll("g").data(this.graph.nodes).enter().append("g").attr("id",p=>this.services.domUtils.generateElementIDString(`alluvial-node-${p.index}`)).classed("node-group",!0).attr("transform",p=>`translate(${p.x0}, ${p.y0})`);m.append("rect").classed("node",!0).attr("height",p=>p.y1-p.y0).attr("width",p=>p.x1-p.x0).attr("fill","black");const v=m.append("g").attr("id",p=>this.services.domUtils.generateElementIDString(`alluvial-node-title-${p.index}`));v.append("text").attr("id",p=>this.services.domUtils.generateElementIDString(`alluvial-node-text-${p.index}`)).attr("class","node-text").style("font-size","12px").attr("text-anchor","start").attr("fill","white").attr("x",4).attr("dy",13).text(p=>`${p.name} (${p.value})`).attr("aria-label",p=>`${p.name} (${p.value})`),v.append("rect").classed("node-text-bg",!0).attr("width",(p,g)=>{const _=this.services.domUtils.generateElementIDString(`alluvial-node-text-${g}`),{width:b}=J.getSVGElementSize(ee(`text#${_}`),{useBBox:!0});return b+8}).attr("height",18).attr("stroke-width",2).lower(),v.attr("transform",(p,g)=>{const _=this.services.domUtils.generateElementIDString(`alluvial-node-text-${g}`),{width:b}=J.getSVGElementSize(ee(`text#${_}`),{useBBox:!0}),y=(p.y1-p.y0)/2-9;let w=p.x1-p.x0;return p.x1>=b?w=w-(b+16):w+=4,`translate(${w}, ${y})`}),this.addLineEventListener(),this.addNodeEventListener()}addLineEventListener(){const e=this.getOptions(),n=this,r=Qo((i,s="mouseover")=>{const a=n.parent.selectAll("path.link").transition().call(o=>n.services.transitions.setupTransition({transition:o,name:"alluvial-links-mouse-highlight"}));s==="mouseout"?(ee(i).lower(),a.style("stroke-opacity",On.opacity.default)):a.style("stroke-opacity",function(){return i===this?(ee(this).raise(),On.opacity.selected):On.opacity.unfocus})},33);this.parent.selectAll("path.link").on("mouseover",function(i,s){const a=ee(this);r(this,"mouseover"),a.classed("link-hovered",!0);const o=getComputedStyle(this).getPropertyValue("stroke");n.services.events.dispatchEvent(z.Alluvial.LINE_MOUSEOVER,{event:i,element:a,datum:s}),n.services.events.dispatchEvent(z.Tooltip.SHOW,{event:i,hoveredElement:a,items:[{label:s.target.name,value:s.value+(e.alluvial.units?` ${e.alluvial.units}`:""),color:o,labelIcon:n.getRightArrowIcon()}]})}).on("mousemove",function(i,s){n.services.events.dispatchEvent(z.Alluvial.LINE_MOUSEMOVE,{event:i,element:ee(this),datum:s}),n.services.events.dispatchEvent(z.Tooltip.MOVE,{event:i})}).on("click",function(i,s){n.services.events.dispatchEvent(z.Alluvial.LINE_CLICK,{event:i,element:ee(this),datum:s})}).on("mouseout",function(i,s){const a=ee(this);r(this,"mouseout"),a.classed("link-hovered",!1),n.services.events.dispatchEvent(z.Alluvial.LINE_MOUSEOUT,{event:i,element:a,datum:s}),n.services.events.dispatchEvent(z.Tooltip.HIDE,{event:i,hoveredElement:a})})}addNodeEventListener(){const e=this,n=Qo((r=[],i="mouseover")=>{if(i==="mouseout"||r.length===0){e.parent.selectAll("path.link").classed("link-hovered",!1).data(this.graph.links,s=>s.index).order().style("stroke-opacity",On.opacity.default);return}e.parent.selectAll("path.link").transition().call(s=>this.services.transitions.setupTransition({transition:s,name:"alluvial-link-mouse-highlight"})).style("stroke-opacity",function(s){return r.some(a=>a===s.index)?(ee(this).classed("link-hovered",!0).raise(),On.opacity.selected):On.opacity.unfocus})},66);e.parent.selectAll(".node-group").on("mouseover",function(r,i){const s=ee(this),a=[];if(e.traverse({link:"sourceLinks",node:"target"},i,a),e.traverse({link:"targetLinks",node:"source"},i,a),a.length){const o=Ls(s.attr("transform"));if(s.attr("transform",`translate(${o.x-2}, ${o.y})`),s.classed("node-hovered",!0).selectAll("rect.node").attr("width",8),i.x0-2===0){const c=e.services.domUtils.generateElementIDString(`alluvial-node-title-${i.index}`),u=e.parent.select(`g#${c}`),f=Ls(u.attr("transform"));u.attr("transform",`translate(${f.x+4},${f.y})`)}const l=e.services.domUtils.generateElementIDString(`alluvial-node-text-${i.index}`);e.parent.select(`text#${l}`).style("font-weight","bold"),n(a,"mouseover"),e.services.events.dispatchEvent(z.Alluvial.NODE_MOUSEOVER,{event:r,element:s,datum:i})}}).on("mousemove",function(r,i){e.services.events.dispatchEvent(z.Alluvial.NODE_MOUSEMOVE,{event:r,element:ee(this),datum:i}),e.services.events.dispatchEvent(z.Tooltip.MOVE,{event:r})}).on("click",function(r,i){e.services.events.dispatchEvent(z.Alluvial.NODE_CLICK,{event:r,element:ee(this),datum:i})}).on("mouseout",function(r,i){const s=ee(this),a=Ls(s.attr("transform"));if(s.classed("node-hovered",!1).attr("transform",`translate(${a.x+2}, ${a.y})`).select("rect.node").attr("width",On.nodeWidth),i.x0-2===0){const l=e.services.domUtils.generateElementIDString(`alluvial-node-title-${i.index}`),c=e.parent.select(`g#${l}`),u=Ls(c.attr("transform"));c.attr("transform",`translate(${u.x-4},${u.y})`)}const o=e.services.domUtils.generateElementIDString(`alluvial-node-text-${i.index}`);e.parent.select(`text#${o}`).style("font-weight","normal"),n([],"mouseout"),e.services.events.dispatchEvent(z.Alluvial.NODE_MOUSEOUT,{event:r,element:s,datum:i}),e.services.events.dispatchEvent(z.Tooltip.HIDE,{hoveredElement:s})})}traverse(e,n,r=[]){n[e.link].map(i=>(r.push(i.index),i[e.node])).forEach(i=>this.traverse(e,i,r))}getRightArrowIcon(){return`
		<svg xmlns="http://www.w3.org/2000/svg" class="arrow-right" width="32" height="32" viewBox="0 0 32 32">
			<polygon points="18 6 16.57 7.393 24.15 15 4 15 4 17 24.15 17 16.57 24.573 18 26 28 16 18 6"/>
			<rect width="32" height="32"/>
		</svg>`}destroy(){this.parent.selectAll("path.line,.node-group").on("mouseover",null).on("mousemove",null).on("click",null).on("mouseout",null)}}class bn extends tt{constructor(){super(...arguments),this.type="grid",this.renderType=Me.SVG}render(e=!0){const n=D(this.getOptions(),"grid","x","enabled"),r=D(this.getOptions(),"grid","y","enabled");this.drawBackdrop(n,r),!(!n&&!r)&&(n&&(J.appendOrSelect(this.backdrop,"g.x.grid"),this.drawXGrid(e)),r&&(J.appendOrSelect(this.backdrop,"g.y.grid"),this.drawYGrid(e)))}drawXGrid(e){const n=this.parent,r=this.backdrop.attr("height"),i=this.services.cartesianScales.getMainXScale(),s=nf(i).tickSizeInner(-r).tickSizeOuter(0);if(D(this.getOptions(),"grid","x","alignWithAxisTicks")){const o=this.services.cartesianScales.getDomainAxisPosition(),l=D(this.getOptions(),"axes",o,"ticks","values");l&&s.tickValues(l)}else{const o=D(this.getOptions(),"grid","x","numberOfTicks");s.ticks(o)}const a=n.select(".x.grid").attr("transform",`translate(${-this.backdrop.attr("x")}, ${r})`);e?a.transition().call(o=>this.services.transitions.setupTransition({transition:o,name:"grid-update",animate:e})).call(s):a.call(s),this.cleanGrid(a)}drawYGrid(e){const n=this.parent,r=this.backdrop.attr("width"),i=this.services.cartesianScales.getMainYScale(),s=Cv(i).tickSizeInner(-r).tickSizeOuter(0);if(D(this.getOptions(),"grid","y","alignWithAxisTicks")){const o=this.services.cartesianScales.getRangeAxisPosition(),l=D(this.getOptions(),"axes",o,"ticks","values");l&&s.tickValues(l)}else{const o=D(this.getOptions(),"grid","y","numberOfTicks");s.ticks(o)}const a=n.select(".y.grid").attr("transform",`translate(0, ${-this.backdrop.attr("y")})`);e?a.transition().call(o=>this.services.transitions.setupTransition({transition:o,name:"grid-update",animate:e})).call(s):a.call(s),this.cleanGrid(a)}getGridlineThreshold(e){const n=this.parent,r=n.selectAll(".x.grid .tick").nodes().sort((u,f)=>Number(ar(u).tx)-Number(ar(f).tx));let i=-1;if(!r.length)return;r.forEach(u=>{e[0]>=+ar(u).tx&&i++});const s=i+1<r.length?i+1:r.length,a=r[i],o=r[s];let l;if(!a)l=+ar(o).tx;else if(o)l=+ar(o).tx-+ar(a).tx;else{const u=n.select("rect.chart-grid-backdrop").node();l=J.getSVGElementSize(u).width-+ar(a).tx}const{threshold:c}=this.getOptions().tooltip.gridline;return l*c}getActiveGridline(e){const n=D(this.getOptions,"tooltip","gridline","threshold"),r=n||this.getGridlineThreshold(e);return this.parent.selectAll(".x.grid .tick").filter(function(){const i=ar(this),s={min:Number(i.tx)-r,max:Number(i.tx)+r};return s.min<=e[0]&&e[0]<=s.max})}drawBackdrop(e,n){const r=this.parent,i=this.services.cartesianScales.getMainXScale(),s=this.services.cartesianScales.getMainYScale(),[a,o]=i.range(),[l,c]=s.range();this.backdrop=J.appendOrSelect(r,"svg.chart-grid-backdrop");const u=J.appendOrSelect(this.backdrop,e||n?"rect.chart-grid-backdrop.stroked":"rect.chart-grid-backdrop");this.backdrop.merge(u).attr("x",a).attr("y",c).attr("width",Math.abs(o-a)).attr("height",Math.abs(l-c)).lower(),u.attr("width","100%").attr("height","100%")}cleanGrid(e){e.selectAll("text").remove(),e.select(".domain").remove()}}class Gb extends tt{constructor(){super(...arguments),this.type="area",this.renderType=Me.SVG,this.gradient_id="gradient-id-"+Math.floor(Math.random()*99999999999),this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("path.area").transition("legend-hover-area").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-area"})).attr("opacity",r=>r.name!==n.datum().name?cr.opacity.unselected:cr.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-area"})).attr("opacity",cr.opacity.selected)}}init(){const e=this.services.events;e.addEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({withinChartClip:!0}),r=this.getOptions();let i=[0,0];const{cartesianScales:s}=this.services,a=s.getOrientation(),o=kf().curve(this.services.curves.getD3Curve()).defined(w=>{const $=s.getRangeIdentifier();return w[$]!=null}),l=this.model.getGroupedData(this.configs.groups),c=D(r,"bounds"),u=c&&l&&l.length===1;!u&&c&&console.warn(`Bounds can only be shown when having 1 single datagroup, you've supplied ${l.length}`);let f=0;const h=(w,$)=>{D(r,"axes",w,"includeZero")===!1&&$[0]>0&&$[1]>0&&(f=$[0])},d=w=>u?s.getBoundedScaledValues(w)[0]:s.getRangeValue(f),m=w=>u?s.getBoundedScaledValues(w)[1]:s.getRangeValue(w);a===Ft.VERTICAL?(i=s.getMainYScale().domain(),h(s.getMainYAxisPosition(),i),o.x(w=>s.getDomainValue(w)).y0(w=>d(w)).y1(w=>m(w))):(i=s.getMainXScale().domain(),h(s.getMainXAxisPosition(),i),o.x0(w=>d(w)).x1(w=>m(w)).y(w=>s.getDomainValue(w)));const v=D(r,"color","gradient","enabled"),p=l&&l.length===1&&v;l.length>1&&v&&console.error("Gradients can only be enabled when having 1 single dataset");const g=n.selectAll("path.area").data(l,w=>w.name),_=ee(this.services.domUtils.getMainContainer());if(g.exit().attr("opacity",0).remove(),!l.length)return;if(p){const w=_.select(`path.${this.model.getColorClassName({classNameTypes:[Le.STROKE],dataGroupName:l[0].name})}`).node();let $;if(w)$=getComputedStyle(w,null).getPropertyValue("stroke");else{const k=D(this.model.getOptions(),"color","scale");if(k!==null){const C=Object.keys(k);$=k[C[0]]}}Eu.appendOrUpdateLinearGradient({svg:this.parent,id:this.services.domUtils.generateElementIDString(`${l[0].name.replace(" ","")}_${this.gradient_id}`),x1:"0%",x2:"0%",y1:"0%",y2:"100%",stops:Eu.getStops(i,$)})}else this.parent.selectAll("defs linearGradient").empty()||this.parent.selectAll("defs linearGradient").each(function(){this.parentNode.remove()});const b=this,y=g.enter().append("path");p?y.merge(g).style("fill",w=>`url(#${this.services.domUtils.generateElementIDString(`${w.name.replace(" ","")}_${this.gradient_id}`)})`).attr("class","area").attr("class",w=>this.model.getColorClassName({classNameTypes:[Le.FILL],dataGroupName:w.name,originalClassName:"area"})).attr("d",w=>{const{data:$}=w;return o($)}):(y.attr("opacity",0).merge(g).attr("class","area").attr("class",w=>this.model.getColorClassName({classNameTypes:[Le.FILL,Le.STROKE],dataGroupName:w.name,originalClassName:"area"})).style("fill",w=>b.model.getFillColor(w.name)).transition().call(w=>this.services.transitions.setupTransition({transition:w,name:"area-update-enter",animate:e})).attr("opacity",u?1:cr.opacity.selected).attr("d",w=>{const{data:$}=w;return o($)}),u&&y.attr("fill-opacity",cr.opacity.selected).style("stroke",w=>b.model.getStrokeColor(w.name)).style("stroke-dasharray","2, 2").attr("stroke-width",.7+"px"))}destroy(){const e=this.services.events;e.removeEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class Zi extends tt{constructor(){super(...arguments),this.type="line",this.renderType=Me.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("path.line").transition("legend-hover-line").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-line"})).attr("opacity",r=>r.name!==n.datum().name?lr.opacity.unselected:lr.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.line").transition("legend-mouseout-line").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-line"})).attr("opacity",lr.opacity.selected)}}init(){const{events:e}=this.services;e.addEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({withinChartClip:!0}),{cartesianScales:r,curves:i}=this.services,s=d=>r.getDomainValue(d),a=d=>r.getRangeValue(d),[o,l]=hr(s,a,r.getOrientation()),c=this.getOptions(),u=_a().x(o).y(l).curve(i.getD3Curve()).defined(d=>{const m=r.getRangeIdentifier(d);return d[m]!=null});let f=[];if(this.configs.stacked){const d=Object.keys(c.axes).some(v=>c.axes[v].percentage),{groupMapsTo:m}=c.data;f=this.model.getStackedData({groups:this.configs.groups,percentage:d}).map(v=>{const p=this.services.cartesianScales.getDomainIdentifier(v),g=this.services.cartesianScales.getRangeIdentifier(v);return{name:D(v,0,m),data:v.map(_=>({[p]:_.data.sharedStackKey,[m]:_[m],[g]:_[1]})),hidden:!Y8(v,_=>_[0]!==_[1])}})}else f=this.model.getGroupedData(this.configs.groups);const h=n.selectAll("path.line").data(f,d=>d.name);h.exit().attr("opacity",0).remove(),h.enter().append("path").classed("line",!0).attr("opacity",0).merge(h).data(f,d=>d.name).attr("class",d=>this.model.getColorClassName({classNameTypes:[Le.STROKE],dataGroupName:d.name,originalClassName:"line"})).style("stroke",d=>this.model.getStrokeColor(d.name)).attr("role",Ye.GRAPHICS_SYMBOL).attr("aria-roledescription","line").attr("aria-label",d=>{const{data:m}=d;return m.map(v=>{const p=this.services.cartesianScales.getRangeIdentifier(v);return v[p]}).join(",")}).transition().call(d=>this.services.transitions.setupTransition({transition:d,name:"line-update-enter",animate:e})).attr("opacity",d=>d.hidden?0:1).attr("d",d=>{const{data:m}=d;return u(m)})}destroy(){const e=this.services.events;e.removeEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}const kg=5;function hU(t,e){return t>e-kg&&t<e+kg}let Vr=class extends tt{constructor(){super(...arguments),this.type="ruler",this.renderType=Me.SVG,this.isXGridEnabled=D(this.getOptions(),"grid","x","enabled"),this.isYGridEnabled=D(this.getOptions(),"grid","y","enabled"),this.isEventListenerAdded=!1}render(e=!1){const n=D(this.getOptions(),"ruler","enabled");this.drawBackdrop(),n&&!this.isEventListenerAdded?this.addBackdropEventListeners():!n&&this.isEventListenerAdded&&this.removeBackdropEventListeners()}removeBackdropEventListeners(){this.isEventListenerAdded=!1,this.backdrop.on("mousemove mouseover mouseout",null)}formatTooltipData(e){return e}showRuler(e,[n,r]){const i=this.parent,s=this.services.cartesianScales.getOrientation(),a=this.model.getDisplayData(),o=this.services.cartesianScales.getRangeScale(),[l,c]=o.range(),u=s===Ft.HORIZONTAL?r:n,f=J.appendOrSelect(i,"g.ruler").attr("aria-label","ruler"),h=J.appendOrSelect(f,"line.ruler-line"),d=i.selectAll("[role=graphics-symbol]"),m=a.map(p=>({domainValue:this.services.cartesianScales.getDomainValue(p),originalData:p})).filter(p=>hU(p.domainValue,u));if(this.pointsWithinLine&&m.length===this.pointsWithinLine.length&&m.map(p=>p.domainValue).join()===this.pointsWithinLine.map(p=>p.domainValue).join())return this.pointsWithinLine=m,this.services.events.dispatchEvent(z.Tooltip.MOVE,{mousePosition:[n,r]});this.pointsWithinLine=m;const v=this.pointsWithinLine.reduce((p,g)=>{if(p.length===0)return p.push(g),p;const _=p[0].domainValue,b=Math.abs(u-g.domainValue),y=Math.abs(u-_);return b>y||(b<y?p=[g]:p.push(g)),p},[]);if(v.length>0){const p=v.map(y=>y.originalData).filter(y=>{const w=this.services.cartesianScales.getRangeIdentifier(y);return y[w]!=null}),g=v.map(y=>y.domainValue),_=d.filter(y=>{const w=this.services.cartesianScales.getDomainValue(y);return g.includes(w)});this.elementsToHighlight&&this.elementsToHighlight.size()>0&&!Lb(this.elementsToHighlight,_)&&this.hideRuler(),_.dispatch("mouseover"),this.elementsToHighlight=_,this.services.events.dispatchEvent(z.Tooltip.SHOW,{mousePosition:[n,r],hoveredElement:h,data:this.formatTooltipData(p)}),f.attr("opacity",1);const b=v[0];s==="horizontal"?h.attr("x1",c).attr("x2",l).attr("y1",b.domainValue).attr("y2",b.domainValue):h.attr("y1",c).attr("y2",l).attr("x1",b.domainValue).attr("x2",b.domainValue)}else this.hideRuler()}hideRuler(){const e=this.parent,n=J.appendOrSelect(e,"g.ruler");e.selectAll("[role=graphics-symbol]").dispatch("mouseout"),this.services.events.dispatchEvent(z.Tooltip.HIDE),n.attr("opacity",0)}addBackdropEventListeners(){this.isEventListenerAdded=!0;const e=this,n=this.services.domUtils.getHolder(),r=this.model.getDisplayData();let i=function(s){const a=ni(s,e.parent.node());e.showRuler(s,a)};if(r.length>100){const s=r.length%50*12.5;i=IN(function(a){const{mousePosition:o}=this;e.showRuler(a,o)},s,n)}this.backdrop.on("mousemove mouseover",i).on("mouseout",this.hideRuler.bind(this))}drawBackdrop(){const e=this.parent;this.backdrop=J.appendOrSelect(e,"svg.chart-grid-backdrop")}};class Xn extends tt{constructor(){super(...arguments),this.type="scatter",this.renderType=Me.SVG,this.handleChartHolderOnHover=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-hover-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"chart-holder-hover-scatter"})}).attr("opacity",1)},this.handleChartHolderOnMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-mouseout-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"chart-holder-mouseout-scatter"})}).attr("opacity",0)},this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-hover-scatter").call(i=>{var s;return(s=this.services.transitions)==null?void 0:s.setupTransition({transition:i,name:"legend-hover-scatter"})}).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-mouseout-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"legend-mouseout-scatter"})}).attr("opacity",1)}}init(){const{events:e}=this.services;if(!e)throw new Error("Services events are undefined.");e.addEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut);const{fadeInOnChartHolderMouseover:n}=this.configs;n&&(e.addEventListener(z.Chart.MOUSEOVER,this.handleChartHolderOnHover),e.addEventListener(z.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut))}filterBasedOnZoomDomain(e){const{cartesianScales:n}=this.services;if(!n)throw new Error("Services cartesianScales are undefined.");const r=n.getDomainIdentifier(e),i=this.model.get("zoomDomain");return i!==void 0?e.filter(s=>s[r].getTime()>=i[0].getTime()&&s[r].getTime()<=i[1].getTime()):e}getScatterData(){const e=this.getOptions(),{stacked:n}=this.configs;let r;if(n){const i=Object.keys(e.axes).some(s=>e.axes[s].percentage);r=this.model.getStackedData({groups:this.configs.groups,percentage:i})}else{const{cartesianScales:i}=this.services;if(!i)throw new Error("Services cartesianScales are undefined.");r=this.model.getDisplayData(this.configs.groups).filter(s=>{const a=i.getRangeIdentifier(s);return s[a]!==void 0&&s[a]!==null})}return this.filterBasedOnZoomDomain(r)}render(e){if(!(D(this.getOptions(),"points","enabled")||D(this.getOptions(),"bubble","enabled")))return;const n=this.getComponentContainer({withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,{cartesianScales:s}=this.services;if(!s)throw new Error("Services cartesianScales are undefined.");const a=s.getDomainIdentifier(),o=n.selectAll("circle.dot").data(this.getScatterData(),c=>`${c[i]}-${c[a]}`);o.exit().attr("opacity",0).remove();const l=o.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(o);this.styleCircles(l,e),this.addEventListeners()}isDatapointThresholdAnomaly(e){const{handleThresholds:n}=this.configs;if(!n)return!1;const{cartesianScales:r}=this.services;if(!r)throw new Error("Cartesian scales service is undefined");const i=r.getOrientation(),[s,a]=hr(r.getHighestDomainThreshold(),r.getHighestRangeThreshold(),i),[o,l]=hr(f=>r.getDomainValue(f),f=>r.getRangeValue(f),i),c=o(e),u=l(e);return a&&s?u<=a.scaleValue&&c>=s.scaleValue:a?u<=a.scaleValue:s?c>=s.scaleValue:!1}styleCircles(e,n){const r=this.getOptions(),{filled:i,fillOpacity:s}=r.points,{cartesianScales:a}=this.services;if(!a)throw new Error("Cartesian scales service is undefined");const{groupMapsTo:o}=r.data,l=d=>a.getDomainValue(d),c=d=>a.getRangeValue(d),[u,f]=hr(l,c,a.getOrientation()),{fadeInOnChartHolderMouseover:h}=this.configs;e.raise().classed("dot",!0).attr("class",d=>{const m=a.getDomainIdentifier(d),v=this.model.getIsFilled(d[o],d[m],d,i)?[Le.FILL,Le.STROKE]:[Le.STROKE];return this.model.getColorClassName({classNameTypes:v,dataGroupName:d[o],originalClassName:"dot"})||""}).classed("threshold-anomaly",d=>this.isDatapointThresholdAnomaly(d)).classed("filled",d=>{const m=a.getDomainIdentifier(d);return this.model.getIsFilled(d[o],d[m],d,i)}).classed("unfilled",d=>{const m=a.getDomainIdentifier(d);return!this.model.getIsFilled(d[o],d[m],d,i)}).transition().call(d=>{var m;return(m=this.services.transitions)==null?void 0:m.setupTransition({transition:d,name:"scatter-update-enter",animate:n})}).attr("cx",u).attr("cy",f).attr("r",r.points.radius).style("fill",d=>{const m=a.getDomainIdentifier(d);if(this.model.getIsFilled(d[o],d[m],d,i))return this.model.getFillColor(d[o],d[m],d)}).style("stroke",d=>{const m=a.getDomainIdentifier(d);return this.model.getStrokeColor(d[o],d[m],d)}).attr("fill-opacity",i?s:1).attr("opacity",h?0:1).attr("role",Ye.GRAPHICS_SYMBOL).attr("aria-roledescription","point").attr("aria-label",d=>{const m=a.getRangeIdentifier(d);return d[m]}),this.addEventListeners()}getTooltipAdditionalItems(e){return null}addEventListeners(){const e=this,{groupMapsTo:n}=e.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle").on("mouseover",function(r,i){var s,a;const o=ee(this);o.classed("hovered",!0).attr("class",l=>e.model.getColorClassName({classNameTypes:[Le.FILL],dataGroupName:l[n],originalClassName:o.attr("class")})).style("fill",l=>{var c;const u=(c=e.services.cartesianScales)==null?void 0:c.getDomainIdentifier(l);return e.model.getFillColor(l[n],l[u],l)}).classed("unfilled",!1),(s=e.services.events)==null||s.dispatchEvent(z.Tooltip.SHOW,{event:r,hoveredElement:o,data:[i],additionalItems:e.getTooltipAdditionalItems(i)}),(a=e.services.events)==null||a.dispatchEvent(z.Scatter.SCATTER_MOUSEOVER,{event:r,element:o,datum:i})}).on("mousemove",function(r,i){var s,a;const o=ee(this);(s=e.services.events)==null||s.dispatchEvent(z.Scatter.SCATTER_MOUSEMOVE,{event:r,element:o,datum:i}),(a=e.services.events)==null||a.dispatchEvent(z.Tooltip.MOVE,{event:r})}).on("click",function(r,i){var s;(s=e.services.events)==null||s.dispatchEvent(z.Scatter.SCATTER_CLICK,{event:r,element:ee(this),datum:i})}).on("mouseout",function(r,i){var s,a,o;const l=ee(this);if(l.classed("hovered",!1),!e.configs.filled){const{filled:c}=e.getOptions().points,u=(s=e.services.cartesianScales)==null?void 0:s.getDomainIdentifier(i),f=e.model.getIsFilled(i[n],i[u],i,c);l.classed("unfilled",!f).style("fill",h=>f||c?e.model.getFillColor(h[n],h[u],h):null)}(a=e.services.events)==null||a.dispatchEvent(z.Scatter.SCATTER_MOUSEOUT,{event:r,element:l,datum:i}),(o=e.services.events)==null||o.dispatchEvent(z.Tooltip.HIDE,{hoveredElement:l})})}destroy(){var e;(e=this.parent)==null||e.selectAll("circle").on("mousemove",null).on("mouseout",null);const{events:n}=this.services;if(!n)throw new Error("Services events undefined");n.removeEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),n.removeEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),n.removeEventListener(z.Chart.MOUSEOVER,this.handleChartHolderOnHover),n.removeEventListener(z.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut)}}class qb extends tt{constructor(e,n,r){super(e,n,r),this.type="axes",this.renderType=Me.SVG,this.truncation={[ae.LEFT]:!1,[ae.RIGHT]:!1,[ae.TOP]:!1,[ae.BOTTOM]:!1},r&&(this.configs=r),this.margins=this.configs.margins}render(e=!0){const{position:n}=this.configs,r=this.getOptions(),i=D(r,"axes",n,"visible"),s=this.getComponentContainer(),{width:a,height:o}=J.getSVGElementSize(s,{useAttrs:!0}),l=J.appendOrSelect(s,`g.axis.${n}`);let c,u;if(n===ae.BOTTOM||n===ae.TOP?(c=this.configs.axes[ae.LEFT]?this.margins.left:0,u=this.configs.axes[ae.RIGHT]?a-this.margins.right:a):(c=o-this.margins.bottom,u=this.margins.top),!this.services.cartesianScales)throw new Error("Services cartesianScales undefined");const f=this.services.cartesianScales.getScaleByPosition(n);this.scaleType===xe.LABELS||this.scaleType===xe.LABELS_RATIO?f.rangeRound([c,u]):f.range([c,u]);let h;switch(n){case ae.LEFT:h=Cv;break;case ae.BOTTOM:h=nf;break;case ae.RIGHT:h=mS;break;case ae.TOP:h=dS;break}l.attr("aria-label",`${n} axis`);const d=!l.select("g.ticks").empty();let m=J.appendOrSelect(l,"g.ticks");d||(m.attr("role",`${Ye.GRAPHICS_OBJECT} ${Ye.GROUP}`),m.attr("aria-label",`${n} ticks`));const v=J.appendOrSelect(l,"g.ticks.invisible").style("opacity","0").style("pointer-events","none").attr("aria-hidden",!0).attr("aria-label",`invisible ${n} ticks`),p=D(r,"axes",n),g=this.scaleType===xe.TIME||p.scaleType===xe.TIME,_=n===ae.LEFT||n===ae.RIGHT,b=this.model.get("zoomDomain");if(b&&g&&!_&&f.domain(b),!i){m.attr("aria-hidden",!0);return}const y=D(p,"scaleType"),w=D(r,"data","loading"),$=D(p,"ticks","number"),k=D(p,"ticks","values"),C=D(p,"truncation","type"),V=D(p,"truncation","threshold"),I=D(p,"truncation","numCharacter"),S=$!==null,N=D(r,"timeScale"),O=J.appendOrSelect(v,"g.tick"),R=J.appendOrSelect(O,"text").text("0"),T=J.getSVGElementSize(R.node(),{useBBox:!0}).height;O.remove();const F=this.scaleType||p.scaleType||xe.LINEAR,G=h(f).tickSizeOuter(0);if(f.ticks){let ce;if(S?ce=$:(ce=Dr.ticks.number,_&&(ce=this.getNumberOfFittingTicks(o,T,Dr.ticks.verticalSpaceRatio))),f.ticks().length===1&&f.ticks()[0]===0&&(ce=0),G.ticks(ce),g)if(!f.ticks(ce).length)G.tickValues([]);else{const ge=D(r,"timeScale","addSpaceOnEdges"),Ue=D(r,"axes",n,"domain"),oe=f.copy();ge&&!Ue&&oe.nice(ce);const it=oe.ticks(ce);ge&&it.length>2&&!Ue&&(it.splice(it.length-1,1),it.splice(0,1)),G.tickValues(it)}}let q;const Y=D(p,"ticks","formatter");if(g){const ce=yu(G.tickValues(),D(r,"timeScale","timeInterval"));Y===null?q=(ge,Ue)=>bu(ge,Ue,G.tickValues(),ce,N):q=(ge,Ue)=>{const oe=bu(ge,Ue,G.tickValues(),ce,N);return Y(ge,Ue,oe)}}else Y===null?F===xe.LINEAR&&(q=ce=>ce.toLocaleString()):q=Y;G.tickFormat(q);const[te,ie]=this.services.cartesianScales.getScaleByPosition(n).domain();let pe;if(k){if(g)k.forEach((ce,ge)=>{ce.getTime===void 0&&(k[ge]=new Date(ce))}),pe=k.filter(ce=>{const ge=ce.getTime();return ge>=new Date(te).getTime()&&ge<=new Date(ie).getTime()});else if(y===xe.LABELS){const ce=this.services.cartesianScales.getScaleByPosition(n).domain();pe=k.filter(ge=>ce.includes(ge))}else pe=k.filter(ce=>ce>=te&&ce<=ie);G.tickValues(pe)}switch(n){case ae.LEFT:m.attr("transform",`translate(${this.margins.left}, 0)`);break;case ae.BOTTOM:m.attr("transform",`translate(0, ${o-this.margins.bottom})`);break;case ae.RIGHT:m.attr("transform",`translate(${a-this.margins.right}, 0)`);break;case ae.TOP:m.attr("transform",`translate(0, ${this.margins.top})`);break}const Re=this.model.isDataEmpty();if(p.title){const ce=J.appendOrSelect(l,"text.axis-title").html(Re||w?"":p.title),ge=D(p,"titleOrientation");let Ue;switch(n){case ae.LEFT:ge===Lc.RIGHT?ce.attr("transform","rotate(90)").attr("y",0).attr("x",f.range()[0]/2).attr("dy","-0.5em").style("text-anchor","middle"):ce.attr("transform","rotate(-90)").attr("y",0).attr("x",-(f.range()[0]/2)).attr("dy","0.75em").style("text-anchor","middle");break;case ae.BOTTOM:ce.attr("transform",`translate(${this.margins.left/2+f.range()[1]/2}, ${o+4})`).style("text-anchor","middle");break;case ae.RIGHT:ge===Lc.LEFT?ce.attr("transform","rotate(-90)").attr("y",a).attr("x",-(f.range()[0]/2)).style("text-anchor","middle"):ce.attr("transform","rotate(90)").attr("y",-a).attr("x",f.range()[0]/2).attr("dy","0.75em").style("text-anchor","middle");break;case ae.TOP:Ue=J.getSVGElementSize(ce,{useBBox:!0}).height,ce.attr("transform",`translate(${this.margins.left/2+f.range()[1]/2}, ${Ue/2})`).style("text-anchor","middle");break}}if(g){const ce=yu(G.tickValues(),D(r,"timeScale","timeInterval")),ge=N.showDayName,Ue=m;e&&(m=m.transition().call(oe=>this.services.transitions.setupTransition({transition:oe,name:"axis-update",animate:e}))),m=m.call(G),Ue.selectAll(".tick").data(G.tickValues(),f).order().select("text").style("font-weight",(oe,it)=>nb(oe,it,G.tickValues(),ce,ge)?"bold":"normal")}else!e||!d?m=m.call(G):m=m.transition().call(ce=>this.services.transitions.setupTransition({transition:ce,name:"axis-update",animate:e})).call(G);if(v.call(G),n===ae.BOTTOM||n===ae.TOP){let ce=!1;const ge=D(p,"ticks","rotation");if(ge===ja.ALWAYS)ce=!0;else if(ge===ja.NEVER)ce=!1;else if(!ge||ge===ja.AUTO)if(f.step)ce=v.selectAll("g.tick text").nodes().some(Ue=>J.getSVGElementSize(Ue,{useBBox:!0}).width>=f.step());else{ce=!1;const Ue=v.append("text").text("A"),oe=J.getSVGElementSize(Ue.node(),{useBBox:!0}).width;let it;v.selectAll("g.tick").each(function(){const ve=ee(this),ke=parseFloat(D(ar(this),"tx"));ke!==null&&it+ve.text().length*oe*.8>=ke&&(ce=!0),it=ke}),Ue.remove()}ce?(S||(G.ticks(this.getNumberOfFittingTicks(a,T,Dr.ticks.horizontalSpaceRatio)),v.call(G),m.call(G)),l.selectAll("g.ticks g.tick text").attr("transform","rotate(-45)").attr("text-anchor",n===ae.TOP?"start":"end")):l.selectAll("g.ticks g.tick text").attr("transform",null).attr("text-anchor",null)}if(w?l.attr("opacity",0):l.attr("opacity",1),m.selectAll("g.tick").attr("aria-label",ce=>ce),v.selectAll("g.tick").attr("aria-label",ce=>ce),C!==Ln.NONE&&y===xe.LABELS&&!k){const ce=this.services.cartesianScales.getScaleDomain(n);if(ce.length>0){const ge=s.select(`g.axis.${n} g.ticks g.tick`).html();l.selectAll("g.ticks g.tick").html(ge);const Ue=this;l.selectAll("g.tick text").data(ce).text(function(oe){return oe.length>V?(Ue.truncation[n]=!0,la(oe,C,I)):oe}),this.getInvisibleAxisRef().selectAll("g.tick text").data(ce).text(function(oe){return oe.length>V?la(oe,C,I):oe}),l.selectAll("g.ticks").html(this.getInvisibleAxisRef().html()),l.selectAll("g.tick text").data(ce)}}this.addEventListeners()}addEventListeners(){const e=this.getComponentContainer(),{position:n}=this.configs,r=J.appendOrSelect(e,`g.axis.${n}`),i=this.getOptions(),s=D(i,"axes",n),a=D(s,"scaleType"),o=D(s,"truncation","threshold"),l=this;r.selectAll("g.tick text").on("mouseover",function(c,u){l.services.events.dispatchEvent(z.Axis.LABEL_MOUSEOVER,{event:c,element:ee(this),datum:u}),a===xe.LABELS&&u.length>o&&l.services.events.dispatchEvent(z.Tooltip.SHOW,{event:c,hoveredElement:ee(this),content:u})}).on("mousemove",function(c,u){l.services.events.dispatchEvent(z.Axis.LABEL_MOUSEMOVE,{event:c,element:ee(this),datum:u}),a===xe.LABELS&&u.length>o&&l.services.events.dispatchEvent(z.Tooltip.MOVE,{event:c})}).on("click",function(c,u){l.services.events.dispatchEvent(z.Axis.LABEL_CLICK,{event:c,element:ee(this),datum:u})}).on("mouseout",function(c,u){l.services.events.dispatchEvent(z.Axis.LABEL_MOUSEOUT,{event:c,element:ee(this),datum:u}),a===xe.LABELS&&l.services.events.dispatchEvent(z.Tooltip.HIDE)})}getInvisibleAxisRef(){const{position:e}=this.configs;return this.getComponentContainer().select(`g.axis.${e} g.ticks.invisible`)}getTitleRef(){const{position:e}=this.configs;return this.getComponentContainer().select(`g.axis.${e} text.axis-title`)}getNumberOfFittingTicks(e,n,r){const i=Math.floor(e/(n*r));return Db(i,2,Dr.ticks.number)}destroy(){const e=this.getComponentContainer(),{position:n}=this.configs;J.appendOrSelect(e,`g.axis.${n}`).selectAll("g.tick text").on("mouseover",null).on("mousemove",null).on("mouseout",null)}}class dU extends qb{constructor(e,n,r){super(e,n,r)}render(e=!0){super.render(e),super.destroy();const n=this.configs.position,r=this.getComponentContainer(),i=J.appendOrSelect(r,`g.axis.${n}`),s=this;i.selectAll("g.tick").each(function(a,o){const l=ee(this);l.classed("tick-hover",!0).attr("tabindex",o===0?0:-1);const c=l.select("text"),{width:u,height:f}=J.getSVGElementSize(c,{useBBox:!0}),h=J.appendOrSelect(l,"rect.axis-holder");let d=0,m=0;switch(n){case ae.LEFT:d=-u+Number(c.attr("x")),m=-(f/2);break;case ae.RIGHT:d=Math.abs(Number(c.attr("x"))),m=-(f/2);break;case ae.TOP:d=-(u/2),m=-f+Number(c.attr("y"))/2,s.truncation[n]&&(d=0,h.attr("transform","rotate(-45)"));break;case ae.BOTTOM:d=-(u/2),m=f/2-2,s.truncation[n]&&(d=-u,h.attr("transform","rotate(-45)"));break}h.attr("x",d-Dr.hover.rectanglePadding).attr("y",m).attr("width",u+Dr.hover.rectanglePadding*2).attr("height",f).lower()}),this.addEventListeners()}addEventListeners(){const e=this.getComponentContainer(),{position:n}=this.configs,r=J.appendOrSelect(e,`g.axis.${n}`),i=this.getOptions(),s=D(i,"axes",n),a=D(s,"scaleType"),o=D(s,"truncation","threshold"),l=this;r.selectAll("g.tick.tick-hover").on("mouseover",function(c){const u=ee(this).select("text"),f=u.datum();l.services.events.dispatchEvent(z.Axis.LABEL_MOUSEOVER,{event:c,element:u,datum:f}),a===xe.LABELS&&f.length>o&&l.services.events.dispatchEvent(z.Tooltip.SHOW,{event:c,element:u,datum:f})}).on("mousemove",function(c){const u=ee(this).select("text"),f=u.datum();l.services.events.dispatchEvent(z.Axis.LABEL_MOUSEMOVE,{event:c,element:u,datum:f}),l.services.events.dispatchEvent(z.Tooltip.MOVE,{event:c})}).on("click",function(c){l.services.events.dispatchEvent(z.Axis.LABEL_CLICK,{event:c,element:ee(this).select("text"),datum:ee(this).select("text").datum()})}).on("mouseout",function(c){l.services.events.dispatchEvent(z.Axis.LABEL_MOUSEOUT,{event:c,element:ee(this).select("text"),datum:ee(this).select("text").datum()}),a===xe.LABELS&&l.services.events.dispatchEvent(z.Tooltip.HIDE)}).on("focus",function(c){const u={clientX:0,clientY:0};if(c.target){c.target.focus();const f=c.target.getBoundingClientRect();u.clientX=f.x,u.clientY=f.y}l.services.events.dispatchEvent(z.Axis.LABEL_FOCUS,{event:{...c,...u},element:ee(this),datum:ee(this).select("text").datum()})}).on("blur",function(c){l.services.events.dispatchEvent(z.Axis.LABEL_BLUR,{event:c,element:ee(this),datum:ee(this).select("text").datum()})}).on("keydown",function(c){c.key&&c.key==="Escape"&&(l.services.events.dispatchEvent(z.Tooltip.HIDE),l.services.events.dispatchEvent(z.Axis.LABEL_BLUR,{event:c,element:ee(this),datum:ee(this).select("text").datum()})),n===ae.LEFT||n===ae.RIGHT?c.key&&c.key==="ArrowUp"?l.goNext(this,c):c.key&&c.key==="ArrowDown"&&l.goPrevious(this,c):c.key&&c.key==="ArrowLeft"?l.goPrevious(this,c):c.key&&c.key==="ArrowRight"&&l.goNext(this,c)})}goNext(e,n){e.nextElementSibling&&e.nextElementSibling.tagName!=="path"&&e.nextElementSibling.dispatchEvent(new Event("focus")),n.preventDefault()}goPrevious(e,n){e.previousElementSibling&&e.previousElementSibling.tagName!=="path"&&e.previousElementSibling.dispatchEvent(new Event("focus")),n.preventDefault()}destroy(){const e=this.getComponentContainer(),{position:n}=this.configs;J.appendOrSelect(e,`g.axis.${n}`).selectAll("g.tick.tick-hover").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("focus",null).on("blur",null)}}class un extends tt{constructor(){super(...arguments),this.type="2D-axes",this.renderType=Me.SVG,this.children={},this.thresholds=[],this.margins={top:0,right:0,bottom:0,left:0}}render(e=!1){const n={},r=Object.keys(ae),i=D(this.getOptions(),"axes");r.forEach(a=>{i[ae[a]]&&(n[ae[a]]=!0)}),this.configs.axes=n,r.forEach(a=>{const o=ae[a];if(this.configs.axes[o]&&!this.children[o]){const l={position:o,axes:this.configs.axes,margins:this.margins},c=this.model.axisFlavor===pl.DEFAULT?new qb(this.model,this.services,l):new dU(this.model,this.services,l);c.setModel(this.model),c.setServices(this.services),c.setParent(this.parent),this.children[o]=c}}),Object.keys(this.children).forEach(a=>{this.children[a].render(e)});const s={};Object.keys(this.children).forEach(a=>{const o=this.children[a],l=o.configs.position,c=o.getInvisibleAxisRef(),{width:u,height:f}=J.getSVGElementSize(c,{useBBox:!0});let h;switch(o.getTitleRef().empty()?h=0:(h=J.getSVGElementSize(o.getTitleRef(),{useBBox:!0}).height,(l===ae.LEFT||l===ae.RIGHT)&&(h+=5)),l){case ae.TOP:s.top=f+h;break;case ae.BOTTOM:s.bottom=f+h;break;case ae.LEFT:s.left=u+h;break;case ae.RIGHT:s.right=u+h;break}}),this.services.events.dispatchEvent(z.Axis.RENDER_COMPLETE),Object.keys(s).some(a=>this.margins[a]!==s[a])&&(this.margins=Object.assign(this.margins,s),this.model.set({axesMargins:this.margins},{skipUpdate:!0}),this.services.events.dispatchEvent(z.ZoomBar.UPDATE),Object.keys(this.children).forEach(a=>{const o=this.children[a];o.margins=this.margins}),this.render(!0))}}class nn extends tt{constructor(){super(...arguments),this.type="skeleton"}render(e=!0){const n=D(this.getOptions(),"data","loading");n?this.renderSkeleton(n):this.removeSkeleton()}renderSkeleton(e){if(this.configs.skeleton===Bt.GRID)this.renderGridSkeleton(e);else if(this.configs.skeleton===Bt.VERT_OR_HORIZ)this.renderVertOrHorizSkeleton(e);else if(this.configs.skeleton===Bt.PIE)this.renderPieSkeleton(e);else if(this.configs.skeleton===Bt.DONUT)this.renderDonutSkeleton(e);else throw new Error(`"${this.configs.skeleton}" is not a valid Skeleton type.`)}renderGridSkeleton(e){this.setScales(),this.drawBackdrop(e),this.drawXGrid(e),this.drawYGrid(e),e&&this.setShimmerEffect("shimmer-lines")}renderVertOrHorizSkeleton(e){const n=this.services.cartesianScales.getOrientation();this.setScales(),this.drawBackdrop(e),n===Ft.VERTICAL&&this.drawYGrid(e),n===Ft.HORIZONTAL&&this.drawXGrid(e),this.setShimmerEffect("shimmer-lines")}renderPieSkeleton(e){const n=this.computeOuterRadius(),r=0;this.drawRing(n,r,e),e&&this.setShimmerEffect("shimmer-areas")}renderDonutSkeleton(e){const n=this.computeOuterRadius(),r=this.computeInnerRadius();this.drawRing(n,r,e),e&&this.setShimmerEffect("shimmer-areas")}setScales(){const e=this.services.cartesianScales.getMainXScale().range(),n=this.services.cartesianScales.getMainYScale().range();this.xScale=Vn().domain([0,1]).range(e),this.yScale=Vn().domain([0,1]).range(n)}drawBackdrop(e){const n=this.parent,{width:r,height:i}=J.getSVGElementSize(n,{useAttrs:!0});this.backdrop=J.appendOrSelect(n,"svg.chart-skeleton.DAII").attr("width",r).attr("height",i);const s=J.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop");s.attr("width","100%").attr("height","100%");const[a]=this.xScale.range(),[,o]=this.yScale.range();this.backdrop.merge(s).attr("x",a).attr("y",o),s.classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawXGrid(e){const n=+this.backdrop.attr("width"),r=D(this.getOptions(),"grid","x","numberOfTicks"),i=this.xScale.ticks(r).map(o=>o*n),s=J.appendOrSelect(this.backdrop,"g.x.skeleton"),a=s.selectAll("line").data(i);a.enter().append("line").merge(a).attr("x1",o=>o).attr("x2",o=>o).attr("y1",0).attr("y2","100%"),s.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawYGrid(e){const n=+this.backdrop.attr("height"),r=this.backdrop.attr("width"),i=D(this.getOptions(),"grid","y","numberOfTicks"),s=this.xScale.ticks(i).map(l=>l*n),a=J.appendOrSelect(this.backdrop,"g.y.skeleton"),o=a.selectAll("line").data(s);o.enter().append("line").merge(o).attr("x1",0).attr("x2",r).attr("y1",l=>l).attr("y2",l=>l),a.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}drawRing(e,n,r=!0){const i=this.parent,{width:s,height:a}=J.getSVGElementSize(i,{useAttrs:!0}),o=J.appendOrSelect(i,"svg.chart-skeleton").attr("width",s).attr("height",a),l=n===0?"pie":"donut",c=D(this.getOptions(),l,"alignment");J.appendOrSelect(o,"rect.chart-skeleton-area-container").attr("width",s).attr("height",a).attr("fill","none");const u=ra().innerRadius(n).outerRadius(e).startAngle(0).endAngle(Math.PI*2),f=e+Math.abs(bt.radiusOffset),h=e+(Math.min(s,a)-e*2)/2,d=J.appendOrSelect(o,"path").attr("class","skeleton-area-shape").attr("transform",`translate(${f}, ${h})`).attr("d",u).classed("shimmer-effect-areas",r).classed("empty-state-areas",!r).style("fill",r?`url(#${this.services.domUtils.generateElementIDString("shimmer-areas")})`:null);let m=e+bt.xOffset;c===Ct.CENTER?m=s/2:c===Ct.RIGHT&&(m=s-e-bt.xOffset);const v=e+bt.yOffset;d.attr("transform",`translate(${m}, ${v})`)}computeOuterRadius(){const{width:e,height:n}=J.getSVGElementSize(this.parent,{useAttrs:!0});return Math.min(e,n)/2+bt.radiusOffset}computeInnerRadius(){return this.computeOuterRadius()*(3/4)}setShimmerEffect(e){const n="stop-bg-shimmer",r="stop-shimmer",i=this.parent.select(".chart-skeleton"),{width:s}=J.getSVGElementSize(this.parent,{useAttrs:!0}),a=0,o=s,l=J.appendOrSelect(i,"defs").lower(),c=J.appendOrSelect(l,"linearGradient").attr("id",this.services.domUtils.generateElementIDString(e)).attr("class",e).attr("x1",a-3*.2*s).attr("x2",o).attr("y1",0).attr("y2",0).attr("gradientUnits","userSpaceOnUse").attr("gradientTransform","translate(0, 0)"),u=`
			<stop class="${n}" offset="${a}"></stop>
			<stop class="${r}" offset="${a+.2}"></stop>
			<stop class="${n}" offset="${a+2*.2}"></stop>
		`;c.html(u),f();function f(){c.attr("gradientTransform",`translate(${a-3*.2*s}, 0)`).transition().duration(2e3).delay(1e3).ease(IO).attr("gradientTransform",`translate(${o+3*.2*s}, 0)`).on("end",f)}}removeSkeleton(){this.parent.select(".chart-skeleton").remove()}}class mU extends tt{constructor(){super(...arguments),this.type="boxplot",this.renderType=Me.SVG}render(e){const n=this.getComponentContainer({withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,s=this.model.getDataGroupNames(),a=this.services.cartesianScales.getMainXScale(),o=this.services.cartesianScales.getMainYScale(),[l,c]=a.range(),[u,f]=o.range(),h=c-l,d=u-f;if(h===0)return;const{cartesianScales:m}=this.services,v=m.getOrientation(),p=v===Ft.VERTICAL,[g,_]=hr(S=>this.services.cartesianScales.getDomainValue(S),S=>this.services.cartesianScales.getRangeValue(S),v),b=Math.floor((p?h:d)/s.length),y=Math.min(b/2,16),w=this.model.getBoxplotData(),$=n.selectAll(".box-group").data(w);$.exit().remove();const k=$.enter().append("g").attr("class","box-group"),C=$.merge(k);k.append("path").merge($.select("path.vertical-line.start")).attr("class",()=>this.model.getColorClassName({classNameTypes:[Le.STROKE],originalClassName:"vertical-line start"})).attr("stroke-width",yn.strokeWidth.default).attr("fill","none").transition().call(S=>this.services.transitions.setupTransition({transition:S,name:"boxplot-update-verticalstartline",animate:e})).attr("d",S=>{const N=m.getDomainValue(S[i]),O=N,R=m.getRangeValue(S.whiskers.min),T=m.getRangeValue(S.quartiles.q_25);return tn({x0:N,x1:O,y0:R,y1:T},v)}),k.append("path").merge($.select("path.vertical-line.end")).attr("class",()=>this.model.getColorClassName({classNameTypes:[Le.STROKE],originalClassName:"vertical-line end"})).attr("stroke-width",yn.strokeWidth.default).attr("fill","none").transition().call(S=>this.services.transitions.setupTransition({transition:S,name:"boxplot-update-verticalendline",animate:e})).attr("d",S=>{const N=m.getDomainValue(S[i]),O=N,R=m.getRangeValue(S.whiskers.max),T=m.getRangeValue(S.quartiles.q_75);return tn({x0:N,x1:O,y0:R,y1:T},v)}),k.append("path").merge($.select("path.box")).attr("class",()=>this.model.getColorClassName({classNameTypes:[Le.FILL,Le.STROKE],originalClassName:"box"})).attr("fill-opacity",yn.box.opacity.default).attr("stroke-width",yn.strokeWidth.default).attr("role",Ye.GRAPHICS_SYMBOL).attr("aria-roledescription","box").attr("aria-label",S=>S[i]).transition().call(S=>this.services.transitions.setupTransition({transition:S,name:"boxplot-update-quartiles",animate:e})).attr("d",S=>{const N=m.getDomainValue(S[i])-y/2,O=N+y,R=m.getRangeValue(Math[p?"max":"min"](S.quartiles.q_75,S.quartiles.q_25)),T=R+Math.abs(m.getRangeValue(S.quartiles.q_75)-m.getRangeValue(S.quartiles.q_25));return tn({x0:N,x1:O,y0:R,y1:T},v)}),k.append("path").merge($.select("path.highlight-area")).attr("class","highlight-area").attr("opacity",0).attr("d",S=>{const N=m.getDomainValue(S[i])-y/2,O=N+y,R=m.getRangeValue(S.whiskers.min),T=m.getRangeValue(S.whiskers.max);return tn({x0:N,x1:O,y0:R,y1:T},v)}),k.append("path").merge($.select("path.whisker.start")).attr("class",()=>this.model.getColorClassName({classNameTypes:[Le.STROKE],originalClassName:"whisker start"})).attr("stroke-width",yn.strokeWidth.thicker).attr("fill","none").transition().call(S=>this.services.transitions.setupTransition({transition:S,name:"boxplot-update-startingwhisker",animate:e})).attr("d",S=>{const N=m.getDomainValue(S[i])-y/4,O=N+y/2,R=m.getRangeValue(S.whiskers.min),T=m.getRangeValue(S.whiskers.min);return tn({x0:N,x1:O,y0:R,y1:T},v)}),k.append("path").merge($.select("path.median")).attr("fill","none").attr("class",()=>this.model.getColorClassName({classNameTypes:[Le.STROKE],originalClassName:"median"})).attr("stroke-width",2).transition().call(S=>this.services.transitions.setupTransition({transition:S,name:"boxplot-update-median",animate:e})).attr("d",S=>{const N=m.getDomainValue(S[i])-y/2,O=N+y,R=m.getRangeValue(S.quartiles.q_50);return tn({x0:N,x1:O,y0:R,y1:R},v)}),k.append("path").merge($.select("path.whisker.end")).attr("class",()=>this.model.getColorClassName({classNameTypes:[Le.STROKE],originalClassName:"whisker end"})).attr("stroke-width",yn.strokeWidth.thicker).attr("fill","none").transition().call(S=>this.services.transitions.setupTransition({transition:S,name:"boxplot-update-endingwhisker",animate:e})).attr("d",S=>{const N=m.getDomainValue(S[i])-y/4,O=N+y/2,R=m.getRangeValue(S.whiskers.max),T=m.getRangeValue(S.whiskers.max);return tn({x0:N,x1:O,y0:R,y1:T},v)});const V=C.selectAll("circle.outlier").data(S=>S.outliers.map(N=>({min:S.whiskers.min,max:S.whiskers.max,[i]:S[i],value:N})));V.exit().remove();const I=V.enter().append("circle");V.merge(I).attr("r",yn.circle.radius).attr("class",()=>this.model.getColorClassName({classNameTypes:[Le.FILL,Le.STROKE],originalClassName:"outlier"})).attr("fill-opacity",yn.circle.opacity.default).attr("cx",g).transition().call(S=>this.services.transitions.setupTransition({transition:S,name:"boxplot-update-circles",animate:e})).attr("cy",_),this.addBoxEventListeners(),this.addCircleEventListeners()}addBoxEventListeners(){const e=this,n=this.getOptions(),{groupMapsTo:r}=n.data;this.parent.selectAll("path.highlight-area").on("mouseover",function(i,s){const a=ee(this);ee(this.parentNode).select("path.box").classed("hovered",!0).attr("fill-opacity",yn.box.opacity.hovered),e.services.events.dispatchEvent(z.Tooltip.SHOW,{event:i,hoveredElement:a,items:[{label:n.tooltip.groupLabel,value:s[r],class:e.model.getColorClassName({classNameTypes:[Le.TOOLTIP]})},{label:"Minimum",value:s.whiskers.min},{label:"Q1",value:s.quartiles.q_25},{label:"Median",value:s.quartiles.q_50},{label:"Q3",value:s.quartiles.q_75},{label:"Maximum",value:s.whiskers.max},{label:"IQR",value:s.quartiles.q_75-s.quartiles.q_25}]}),e.services.events.dispatchEvent(z.Boxplot.BOX_MOUSEOVER,{event:i,element:a,datum:s})}).on("mousemove",function(i,s){const a=ee(this);e.services.events.dispatchEvent(z.Boxplot.BOX_MOUSEMOVE,{event:i,element:a,datum:s}),e.services.events.dispatchEvent(z.Tooltip.MOVE,{event:i})}).on("click",function(i,s){e.services.events.dispatchEvent(z.Boxplot.BOX_CLICK,{event:i,element:ee(this),datum:s})}).on("mouseout",function(i,s){const a=ee(this);ee(this.parentNode).select("path.box").classed("hovered",!1).attr("fill-opacity",yn.box.opacity.default),e.services.events.dispatchEvent(z.Boxplot.BOX_MOUSEOUT,{event:i,element:a,datum:s}),e.services.events.dispatchEvent(z.Tooltip.HIDE,{hoveredElement:a})})}addCircleEventListeners(){const e=this,n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.services.cartesianScales.getRangeIdentifier();this.parent.selectAll("circle").on("mouseover",function(s,a){const o=ee(this);o.classed("hovered",!0).attr("fill-opacity",yn.circle.opacity.hovered).classed("unfilled",!1),e.services.events.dispatchEvent(z.Tooltip.SHOW,{event:s,hoveredElement:o,items:[{label:n.tooltip.groupLabel,value:a[r],class:e.model.getColorClassName({classNameTypes:[Le.TOOLTIP]})},{label:"Outlier",value:a[i]}]}),e.services.events.dispatchEvent(z.Boxplot.OUTLIER_MOUSEOVER,{event:s,element:o,datum:a})}).on("mousemove",function(s,a){const o=ee(this);e.services.events.dispatchEvent(z.Boxplot.OUTLIER_MOUSEMOVE,{event:s,element:o,datum:a}),e.services.events.dispatchEvent(z.Tooltip.MOVE,{event:s})}).on("click",function(s,a){e.services.events.dispatchEvent(z.Boxplot.OUTLIER_CLICK,{event:s,element:ee(this),datum:a})}).on("mouseout",function(s,a){const o=ee(this);o.classed("hovered",!1).attr("fill-opacity",yn.circle.opacity.default),e.services.events.dispatchEvent(z.Boxplot.OUTLIER_MOUSEOUT,{event:s,element:o,datum:a}),e.services.events.dispatchEvent(z.Tooltip.HIDE,{hoveredElement:o})})}}class ds extends tt{constructor(){super(...arguments),this.type="zero-line",this.renderType=Me.SVG}render(e){const n=this.services.cartesianScales.getRangeAxisPosition({groups:this.configs.groups}),r=this.services.cartesianScales.getScaleByPosition(n),[i,s]=r.domain(),a=i>0&&s<0||i<0&&s>0,o=this.getComponentContainer();if(!a){o.selectAll("line.domain").remove();return}const[l,c]=this.services.cartesianScales.getDomainScale().range();let u=+r(0)+.5;u||(u=r.range()[0]);const f=eb({x0:l,x1:c,y0:u,y1:u},this.services.cartesianScales.getOrientation());J.appendOrSelect(o,"line.domain").transition().call(h=>this.services.transitions.setupTransition({transition:h,name:"zero-line-update",animate:e})).attr("y1",f.y0).attr("y2",f.y1).attr("x1",f.x0).attr("x2",f.x1)}}class pU extends Xn{constructor(){super(...arguments),this.type="bubble",this.renderType=Me.SVG}getRadiusScale(e){const n=this.getOptions(),{radiusMapsTo:r}=n.bubble,i=e.data(),s=i.map(c=>c[r]).filter(c=>c),a=J.getHTMLElementSize(this.services.domUtils.getMainContainer()),o=s.length>0,l=o?Rn(s):[1,1];return Vn().domain(l).range(o?n.bubble.radiusRange(a,i):[4,4])}styleCircles(e,n){const r=this.getOptions(),{radiusMapsTo:i}=r.bubble,s=this.getRadiusScale(e),{groupMapsTo:a}=r.data,{cartesianScales:o}=this.services,l=h=>o.getDomainValue(h),c=h=>o.getRangeValue(h),[u,f]=hr(l,c,o.getOrientation());e.raise().classed("dot",!0).attr("role",Ye.GRAPHICS_SYMBOL).attr("aria-label",h=>{const d=o.getRangeIdentifier(h);return h[d]}).transition().call(h=>this.services.transitions.setupTransition({transition:h,name:"bubble-update-enter",animate:n})).attr("cx",u).attr("cy",f).attr("r",h=>s(h[i]||1)).attr("class",h=>this.model.getColorClassName({classNameTypes:[Le.FILL,Le.STROKE],dataGroupName:h[a],originalClassName:"dot"})).style("fill",h=>{const d=this.services.cartesianScales.getDomainIdentifier(h);return this.model.getFillColor(h[a],h[d],h)}).style("stroke",h=>{const d=this.services.cartesianScales.getDomainIdentifier(h);return this.model.getStrokeColor(h[a],h[d],h)}).attr("fill-opacity",r.bubble.fillOpacity).attr("opacity",1)}getTooltipAdditionalItems(e){const n=D(this.getOptions(),"bubble");return[{label:D(n,"radiusLabel"),value:e[D(n,"radiusMapsTo")]}]}}class gU extends tt{constructor(){super(...arguments),this.type="bullet",this.renderType=Me.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-simple-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-simple-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.getComponentContainer({withinChartClip:!0}),s=this.model.getDisplayData(this.configs.groups),a=this.services.cartesianScales.getRangeScale(),o=this.services.cartesianScales.getRangeIdentifier(),[l,c]=a.range(),[,u]=a.domain(),f=()=>{const v=[];s.forEach(g=>{g.ranges?g.ranges.forEach((_,b)=>{_!=null&&_<u&&v.push({datum:g,value:_,order:b+1})}):v.push({datum:g,order:1})});const p=J.appendOrSelect(i,"g.range-boxes").selectAll("path.range-box").data(v,g=>`${g[r]}-${g.order}`);p.exit().attr("opacity",0).remove(),p.enter().append("path").attr("opacity",0).merge(p).attr("class",g=>`range-box order-${g.order}`).transition().call(g=>this.services.transitions.setupTransition({transition:g,name:"bullet-range-box-update-enter",animate:e})).attr("d",g=>{let _,b,y,w;return g.order===1?(_=this.services.cartesianScales.getDomainValue(g.datum)-16/2,b=_+16,y=c-2,w=l+1):(_=this.services.cartesianScales.getDomainValue(g.datum)-16/2,b=_+16,y=this.services.cartesianScales.getRangeValue(g.value),w=c),tn({x0:_,x1:b,y0:y,y1:w},this.services.cartesianScales.getOrientation())}).attr("opacity",1)},h=()=>{const v=J.appendOrSelect(i,"g.bars").selectAll("path.bar").data(s,p=>p[r]);v.exit().attr("opacity",0).remove(),v.enter().append("path").attr("opacity",0).merge(v).classed("bar",!0).transition().call(p=>this.services.transitions.setupTransition({transition:p,name:"bullet-bar-update-enter",animate:e})).attr("class",p=>this.model.getColorClassName({classNameTypes:[Le.FILL],dataGroupName:p[r],originalClassName:"bar"})).style("fill",p=>this.model.getFillColor(p[r])).attr("d",p=>{const g=this.services.cartesianScales.getDomainValue(p)-4,_=g+8,b=this.services.cartesianScales.getRangeValue(0)+1,y=this.services.cartesianScales.getRangeValue(p);return tn({x0:g,x1:_,y0:b,y1:y},this.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",Ye.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",p=>p.value)},d=()=>{const v=J.appendOrSelect(i,"g.markers").selectAll("path.marker").data(s.filter(p=>D(p,"marker")!==null),p=>p[r]);v.exit().attr("opacity",0).remove(),v.enter().append("path").attr("opacity",0).merge(v).classed("marker",!0).transition().call(p=>this.services.transitions.setupTransition({transition:p,name:"bullet-marker-update-enter",animate:e})).attr("d",p=>{const g=this.services.cartesianScales.getDomainValue(p)-12,_=g+24,b=this.services.cartesianScales.getRangeValue(p.marker);return tn({x0:g,x1:_,y0:b,y1:b},this.services.cartesianScales.getOrientation())}).attr("opacity",1)},m=()=>{let v=[];s.filter(g=>D(g,"marker")!==null).forEach(g=>{const _=g.marker,b=g[o];v=v.concat([{datum:g,value:_*.25,barValue:b},{datum:g,value:_*.5,barValue:b},{datum:g,value:_*.75,barValue:b}])});const p=J.appendOrSelect(i,"g.quartiles").selectAll("path.quartile").data(v,g=>g[r]);p.exit().attr("opacity",0).remove(),p.enter().append("path").attr("opacity",0).merge(p).attr("class",g=>`quartile ${g.value<=g.barValue?"over-bar":""}`).transition().call(g=>this.services.transitions.setupTransition({transition:g,name:"bullet-quartile-update-enter",animate:e})).attr("d",({datum:g,value:_})=>{let b=4;g.ranges&&g.ranges.indexOf(_)!==-1&&(b=8);const y=this.services.cartesianScales.getDomainValue(g)-b/2,w=y+b,$=this.services.cartesianScales.getRangeValue(_);return tn({x0:y,x1:w,y0:$,y1:$},this.services.cartesianScales.getOrientation())}).attr("opacity",1)};f(),h(),d(),m(),this.addEventListeners()}addEventListeners(){const e=this,n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.services.cartesianScales.getRangeIdentifier();this.parent.selectAll("path.bar").on("mouseover",function(s,a){const o=ee(this);o.classed("hovered",!0),e.services.events.dispatchEvent(z.Bar.BAR_MOUSEOVER,{event:s,element:o,datum:a});const l=D(n,"bullet","performanceAreaTitles"),c=e.model.getMatchingRangeIndexForDatapoint(a);e.services.events.dispatchEvent(z.Tooltip.SHOW,{event:s,hoveredElement:o,items:[{label:n.tooltip.groupLabel||"Group",value:a[r],class:e.model.getColorClassName({classNameTypes:[Le.TOOLTIP],dataGroupName:a[r]})},{label:"Value",value:a[i]},{label:"Target",value:a.marker},{label:"Percentage",value:`${Math.floor(a[i]/a.marker*100)}%`},{label:"Performance",value:l[c]}]})}).on("mousemove",function(s,a){e.services.events.dispatchEvent(z.Bar.BAR_MOUSEMOVE,{event:s,element:ee(this),datum:a}),e.services.events.dispatchEvent(z.Tooltip.MOVE,{event:s})}).on("click",function(s,a){e.services.events.dispatchEvent(z.Bar.BAR_CLICK,{event:s,element:ee(this),datum:a})}).on("mouseout",function(s,a){const o=ee(this);o.classed("hovered",!1),e.services.events.dispatchEvent(z.Bar.BAR_MOUSEOUT,{event:s,element:o,datum:a}),e.services.events.dispatchEvent(z.Tooltip.HIDE,{hoveredElement:o})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}function vU(t){return t}function _U(t){if(t==null)return vU;var e,n,r=t.scale[0],i=t.scale[1],s=t.translate[0],a=t.translate[1];return function(o,l){l||(e=n=0);var c=2,u=o.length,f=new Array(u);for(f[0]=(e+=o[0])*r+s,f[1]=(n+=o[1])*i+a;c<u;)f[c]=o[c],++c;return f}}function bU(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}function yU(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(n){return Og(t,n)})}:Og(t,e)}function Og(t,e){var n=e.id,r=e.bbox,i=e.properties==null?{}:e.properties,s=Kf(t,e);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function Kf(t,e){var n=_U(t.transform),r=t.arcs;function i(u,f){f.length&&f.pop();for(var h=r[u<0?~u:u],d=0,m=h.length;d<m;++d)f.push(n(h[d],d));u<0&&bU(f,m)}function s(u){return n(u)}function a(u){for(var f=[],h=0,d=u.length;h<d;++h)i(u[h],f);return f.length<2&&f.push(f[0]),f}function o(u){for(var f=a(u);f.length<4;)f.push(f[0]);return f}function l(u){return u.map(o)}function c(u){var f=u.type,h;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(c)};case"Point":h=s(u.coordinates);break;case"MultiPoint":h=u.coordinates.map(s);break;case"LineString":h=a(u.arcs);break;case"MultiLineString":h=u.arcs.map(a);break;case"Polygon":h=l(u.arcs);break;case"MultiPolygon":h=u.arcs.map(l);break;default:return null}return{type:f,coordinates:h}}return c(e)}function wU(t,e){var n={},r={},i={},s=[],a=-1;e.forEach(function(c,u){var f=t.arcs[c<0?~c:c],h;f.length<3&&!f[1][0]&&!f[1][1]&&(h=e[++a],e[a]=c,e[u]=h)}),e.forEach(function(c){var u=o(c),f=u[0],h=u[1],d,m;if(d=i[f])if(delete i[d.end],d.push(c),d.end=h,m=r[h]){delete r[m.start];var v=m===d?d:d.concat(m);r[v.start=d.start]=i[v.end=m.end]=v}else r[d.start]=i[d.end]=d;else if(d=r[h])if(delete r[d.start],d.unshift(c),d.start=f,m=i[f]){delete i[m.end];var p=m===d?d:m.concat(d);r[p.start=m.start]=i[p.end=d.end]=p}else r[d.start]=i[d.end]=d;else d=[c],r[d.start=f]=i[d.end=h]=d});function o(c){var u=t.arcs[c<0?~c:c],f=u[0],h;return t.transform?(h=[0,0],u.forEach(function(d){h[0]+=d[0],h[1]+=d[1]})):h=u[u.length-1],c<0?[h,f]:[f,h]}function l(c,u){for(var f in c){var h=c[f];delete u[h.start],delete h.start,delete h.end,h.forEach(function(d){n[d<0?~d:d]=1}),s.push(h)}}return l(i,r),l(r,i),e.forEach(function(c){n[c<0?~c:c]||s.push([c])}),s}function EU(t){for(var e=-1,n=t.length,r,i=t[n-1],s=0;++e<n;)r=i,i=t[e],s+=r[0]*i[1]-r[1]*i[0];return Math.abs(s)}function $U(t){return Kf(t,TU.apply(this,arguments))}function TU(t,e){var n={},r=[],i=[];e.forEach(s);function s(l){switch(l.type){case"GeometryCollection":l.geometries.forEach(s);break;case"Polygon":a(l.arcs);break;case"MultiPolygon":l.arcs.forEach(a);break}}function a(l){l.forEach(function(c){c.forEach(function(u){(n[u=u<0?~u:u]||(n[u]=[])).push(l)})}),r.push(l)}function o(l){return EU(Kf(t,{type:"Polygon",arcs:[l]}).coordinates[0])}return r.forEach(function(l){if(!l._){var c=[],u=[l];for(l._=1,i.push(c);l=u.pop();)c.push(l),l.forEach(function(f){f.forEach(function(h){n[h<0?~h:h].forEach(function(d){d._||(d._=1,u.push(d))})})})}}),r.forEach(function(l){delete l._}),{type:"MultiPolygon",arcs:i.map(function(l){var c=[],u;if(l.forEach(function(v){v.forEach(function(p){p.forEach(function(g){n[g<0?~g:g].length<2&&c.push(g)})})}),c=wU(t,c),(u=c.length)>1)for(var f=1,h=o(c[0]),d,m;f<u;++f)(d=o(c[f]))>h&&(m=c[0],c[0]=c[f],c[f]=m,h=d);return c}).filter(function(l){return l.length>0})}}class SU extends Vr{constructor(){super(...arguments),this.type="ruler-binned",this.renderType=Me.SVG}showRuler(e,[n,r]){const i=this.parent,s=this.model.getOptions(),{cartesianScales:a}=this.services,o=a.getOrientation(),l=a.getRangeScale(),[c,u]=l.range(),f=a.getDomainScale(),h=f.invert(o===Ft.VERTICAL?n:r),d=J.appendOrSelect(i,"g.ruler").attr("aria-label","ruler"),m=J.appendOrSelect(d,"line.ruler-line"),v=i.selectAll("[role=graphics-symbol]").filter(p=>{if(parseFloat(wt(p,"data.x0"))<=h&&parseFloat(wt(p,"data.x1"))>=h)return!0});if(v.size()>0){this.elementsToHighlight&&this.elementsToHighlight.size()>0&&!Lb(this.elementsToHighlight,v)&&this.hideRuler(),v.dispatch("mouseover"),this.elementsToHighlight=v;const p=ee(v.nodes()[0]).datum(),g=parseFloat(wt(p,"data.x0")),_=parseFloat(wt(p,"data.x1")),b=this.model.getActiveDataGroupNames(),y=b.reverse().map(w=>({label:w,value:wt(p,`data.${w}`),class:this.model.getColorClassName({classNameTypes:[Le.TOOLTIP],dataGroupName:w})})).filter(w=>w.value!==0);if(y.length>0){this.services.events.dispatchEvent(z.Tooltip.SHOW,{mousePosition:[n,r],hoveredElement:m,items:[{label:wt(s,"bins.rangeLabel")||"Range",value:`${g} â ${_}`},...y,...D(s,"tooltip","showTotal")===!0?[{label:wt(s,"tooltip.totalLabel")||"Total",value:b.reduce(($,k)=>$+parseFloat(wt(p,`data.${k}`)),0)}]:[]]}),d.attr("opacity",1);const w=f((g+_)/2);o==="horizontal"?m.attr("x1",u).attr("x2",c).attr("y1",w).attr("y2",w):m.attr("y1",u).attr("y2",c).attr("x1",w).attr("x2",w)}else this.hideRuler()}else this.hideRuler()}}class ol extends Vr{formatTooltipData(e){return e.reverse()}}class jb extends Zf{constructor(e,n,r){super(e,n,r),this.type="color-legend",this.renderType=Me.SVG,this.gradient_id=`gradient-id-${Math.floor(Math.random()*99999999999)}`,this.handleAxisCompleteEvent=()=>{const i=this.getComponentContainer(),{width:s}=J.getSVGElementSize(i,{useAttrs:!0}),a=D(this.getOptions(),"data","loading");if(s>Ot.color.barWidth&&!a){const o=D(this.getOptions(),"heatmap","colorLegend","title"),{cartesianScales:l}=this.services,c=l.getMainXScale().range();if(c[0]>1&&(i.select("g.legend").attr("transform",`translate(${c[0]}, 0)`),o)){const{width:u}=J.getSVGElementSize(i.select("g.legend-title").select("text"),{useBBox:!0}),f=c[0]-u-9;f>1?i.select("g.legend-title").attr("transform",`translate(${f}, 0)`):(i.select("g.legend").attr("transform",`translate(${c[0]}, 16)`),i.select("g.legend-title").attr("transform",`translate(${c[0]}, 0)`))}}else i.select("g.legend-title").attr("transform","translate(0, 0)")},this.chartType=r.chartType}init(){this.chartType==="heatmap"&&this.services.events.addEventListener(z.Axis.RENDER_COMPLETE,this.handleAxisCompleteEvent)}render(e=!1){const n=this.getOptions(),r=this.getComponentContainer(),{width:i}=J.getSVGElementSize(r,{useAttrs:!0}),s=D(n,"color","gradient","colors"),a=D(n,this.chartType,"colorLegend","type");let o=D(n,"color","pairing","option");const l=D(n,"heatmap","colorLegend","title");if(D(this.getOptions(),"data","loading")){r.html("");return}const c=!In(s),u=rb(this.model.getDisplayData()),f=!(i<=Ot.color.barWidth),h=f?Ot.color.barWidth:i,d=J.appendOrSelect(r,"g.legend"),m=J.appendOrSelect(d,"g.legend-axis");if(l){const k=J.appendOrSelect(r,"g.legend-title");J.appendOrSelect(k,"text").text(l).attr("dy","0.7em"),d.attr("transform","translate(0, 16)")}const v=u[0]<0&&u[1]>0?"diverge":"mono";(o<1&&o>4&&v==="mono"||o<1&&o>2&&v==="diverge")&&(o=1);let p=[];const g=v==="diverge"?17:11;if(c)p=s;else for(let k=1;k<g+1;k++)p.push(a===Wa.LINEAR?`stop-color-${v}-${o}-${k}`:`fill-${v}-${o}-${k}`);const _=mn(u[0],u[1]),b=Tk(_,3),y=Vn().domain(u).range([0,h]),w=nf(y).tickSize(0).tickValues(b);let $;switch(a){case Wa.LINEAR:this.drawLinear(p,d,h);break;case Wa.QUANTIZE:$=this.drawQuantize(p,v,c,d,h),y.range([$,h]);break;default:throw Error("Entered color legend type is not supported.")}m.attr("transform",`translate(0,${Ot.color.axisYTranslation})`).call(w),m.select(".domain").remove(),m.select("g.tick:last-of-type text").style("text-anchor",f?"middle":"end"),m.select("g.tick:first-of-type text").style("text-anchor",f&&this.chartType!=="choropleth"?"middle":"start")}drawLinear(e,n,r){const i=100/(e.length-1);J.appendOrSelect(n,"linearGradient").attr("id",`${this.gradient_id}-legend`).selectAll("stop").data(e).enter().append("stop").attr("offset",(s,a)=>`${a*i}%`).attr("class",(s,a)=>e[a]).attr("stop-color",s=>s),J.appendOrSelect(n,"rect").attr("width",r).attr("height",Ot.color.barHeight).style("fill",`url(#${this.gradient_id}-legend)`)}drawQuantize(e,n,r,i,s){!r&&n==="diverge"&&e.splice(e.length/2,1);const a=ga().domain(e).range([0,s]);return J.appendOrSelect(i,"g.quantized-rect").selectAll("rect").data(a.domain()).join("rect").attr("x",o=>a(o)).attr("y",0).attr("width",Math.max(0,a.bandwidth()-1)).attr("height",Ot.color.barHeight).attr("class",o=>o).attr("fill",o=>o),(!r&&n)==="mono"?a.bandwidth()-1:0}destroy(){this.chartType==="heatmap"&&this.services.events.removeEventListener(z.Axis.RENDER_COMPLETE,this.handleAxisCompleteEvent)}}class xU extends Sa{constructor(){super(...arguments),this.type="meter-title",this.renderType=Me.SVG}render(e=!1){const n=D(this.model.getDisplayData(),0),r=this.getOptions(),i=this.getComponentContainer(),{groupMapsTo:s}=r.data;if(D(r,"meter","proportional"))this.displayTotal(),this.displayBreakdownTitle();else{const l=i.selectAll("text.meter-title").data([n[s]]);l.enter().append("text").classed("meter-title",!0).merge(l).attr("x",0).attr("y","1em").text(c=>c),l.exit().remove(),this.appendPercentage()}this.displayStatus();const a=this.getMaxTitleWidth(),o=J.appendOrSelect(i,"text.meter-title");a>0&&o.node().getComputedTextLength()>a&&this.truncateTitle(o,a)}displayBreakdownTitle(){const e=this.getComponentContainer(),n=this.getOptions(),r=this.model.getMaximumDomain(this.model.getDisplayData()),i=D(n,"meter","proportional","total"),s=D(n,"meter","proportional","unit")?D(n,"meter","proportional","unit"):"";let a;if(r===i)a=null;else{const u=i!==null?i-r:r,f=D(n,"meter","proportional","breakdownFormatter");a=f!==null?f({datasetsTotal:r,total:i}):`${r} ${s} used (${u} ${s} available)`}const o=e.selectAll("text.proportional-meter-title").data([a]);o.enter().append("text").classed("proportional-meter-title",!0).merge(o).attr("x",0).attr("y","1em").text(u=>u),o.exit().remove();const l=this.getMaxTitleWidth(),c=J.appendOrSelect(e,"text.proportional-meter-title");l>0&&c.node().getComputedTextLength()>l&&this.truncateTitle(c,l)}displayTotal(){const e=this.getComponentContainer(),n=this.getOptions(),r=D(n,"meter","proportional","total"),i=r?D(n,"meter","proportional","total"):this.model.getMaximumDomain(this.model.getDisplayData()),s=D(n,"meter","proportional","unit")?D(n,"meter","proportional","unit"):"",a=D(n,"meter","proportional","totalFormatter"),o=a!==null?a(i):`${r} ${s} total`,l=J.getHTMLElementSize(this.services.domUtils.getMainContainer()),c=l.width?l.width:this.parent.node().getAttribute("width"),u=e.selectAll("text.proportional-meter-total").data([o]);u.enter().append("text").classed("proportional-meter-total",!0).merge(u).attr("x",this.model.getStatus()&&typeof c!="string"?c-jt.total.paddingRight:c).attr("y","1em").attr("text-anchor","end").text(f=>f),u.exit().remove()}displayStatus(){const e=this,n=this.getComponentContainer(),r=J.getHTMLElementSize(this.services.domUtils.getMainContainer()),i=r.width?r.width:0,s=this.model.getStatus(),a=jt.status.indicatorSize/2,o=J.appendOrSelect(n,"g.status-indicator").attr("class",s!==null?`status-indicator status--${s}`:"").attr("transform",`translate(${i-a}, 0)`),l=s?[s]:[],c=o.selectAll("circle.status").data(l);c.enter().append("circle").merge(c).attr("class","status").attr("r",a).attr("cx",0).attr("cy",8);const u=o.selectAll("path.innerFill").data(l);u.enter().append("path").merge(u).attr("d",e.getStatusIconPathString(s)).attr("transform",`translate(-${a}, 0)`).attr("class","innerFill"),u.exit().remove(),c.exit().remove()}appendPercentage(){const e=D(this.model.getDisplayData(),0,"value"),n=this.getComponentContainer(),r=J.appendOrSelect(n,"text.meter-title"),i=D(this.getOptions(),"meter","statusBar","percentageIndicator","enabled")===!0?[e]:[],s=n.selectAll("text.percent-value").data(i),a=jt.statusBar.paddingRight;s.enter().append("text").classed("percent-value",!0).merge(s).text(o=>`${o}%`).attr("x",+r.attr("x")+r.node().getComputedTextLength()+a).attr("y",r.attr("y")),s.exit().remove()}truncateTitle(e,n){super.truncateTitle(e,n);const r=J.appendOrSelect(this.parent,"tspan"),i=jt.statusBar.paddingRight,s=Math.ceil(r.node().getComputedTextLength());J.appendOrSelect(this.parent,"text.percent-value").attr("x",+e.attr("x")+e.node().getComputedTextLength()+s+i)}getMaxTitleWidth(){const e=J.getHTMLElementSize(this.services.domUtils.getMainContainer()),n=D(this.getOptions(),"meter","proportional"),r=e.width?e.width:this.parent.node().getBoundingClientRect().width;if(n!==null){const i=J.appendOrSelect(this.parent,"text.proportional-meter-total").node(),s=J.getSVGElementSize(i,{useBBox:!0}).width;return r-s-jt.total.paddingLeft}else{const i=J.appendOrSelect(this.parent,"text.percent-value"),s=jt.statusBar.paddingRight,a=i.node().getComputedTextLength(),o=J.appendOrSelect(this.parent,"g.status-indicator").node(),l=J.getSVGElementSize(o,{useBBox:!0}).width+jt.status.paddingLeft;return r-a-s-l}}getStatusIconPathString(e){switch(e){case qa.SUCCESS:return"M6.875 11.3125 3.75 8.1875 4.74375 7.25 6.875 9.34375 11.50625 4.75 12.5 5.7375 Z";case qa.DANGER:return"M10.7 11.5 4.5 5.3 5.3 4.5 11.5 10.7 Z";case qa.WARNING:return"M7.9375,11.125 C7.41973305,11.125 7,11.544733 7,12.0625 C7,12.580267 7.41973305,13 7.9375,13 C8.45526695,13 8.875,12.580267 8.875,12.0625 C8.875,11.544733 8.45526695,11.125 7.9375,11.125 M7.3125, 3 8.5625, 3 8.5625, 9.875 7.3125, 9.875, 7.3125, 3 Z"}}}class Qf extends tt{getBarWidth(){const e=this.getOptions();if(e.bars.width)return e.bars.width;const n=this.model.getDisplayData().length,r=this.services.cartesianScales.getMainXScale(),i=J.getSVGElementSize(this.parent,{useAttrs:!0}).width;if(!r.step){const s=D(e,"bars","spacingFactor");return Math.min(e.bars.maxWidth,i*s/n)}return Math.min(e.bars.maxWidth,r.step()/2)}isOutsideZoomedDomain(e,n){if(this.model.getDisplayData().length<=1)return!1;const r=this.model.get("zoomDomain");if(r!==void 0){const i=this.services.cartesianScales.getDomainScale();return e<i(r[0])||n>i(r[1])}return!1}}class kU extends tt{constructor(){super(...arguments),this.type="circle-pack",this.renderType=Me.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("circle.node").transition("legend-hover-circlepack").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-circlepack"})).attr("opacity",r=>r.data.dataGroupName===n.datum().name?1:Li.circles.fillOpacity)},this.handleLegendMouseOut=()=>{this.parent.selectAll("circle.node").transition("legend-mouseout-circlepack").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-circlepack"})).attr("opacity",1)}}render(e=!0){const n=this.getComponentContainer({withinChartClip:!0}),{width:r,height:i}=J.getSVGElementSize(this.parent,{useAttrs:!0});if(r<1||i<1)return;let s=this.model.getDisplayData();const a=this.model.hasParentNode(),o=this.model.getHierarchyLevel(),l=this.getOptions(),c=D(l,"canvasZoom","enabled");a&&D(s,0,"children")&&(s=D(s,0,"children"));const u=pa({children:s}).sum(m=>m.value).sort((m,v)=>v.value-m.value),f=BC().size([r,i]).padding(m=>m.depth>=1?Li.padding.children+3:Li.padding.mainGroup+3)(u).descendants().splice(1).filter(m=>m.depth<=o),h=n.selectAll("circle.node").data(f);h.exit().attr("width",0).attr("height",0).remove();const d=h.enter().append("circle").classed("node",!0);d.merge(h).attr("class",m=>{const v=c&&o===3?this.getZoomClass(m):"";return this.model.getColorClassName({classNameTypes:[Le.FILL,Le.STROKE],dataGroupName:m.data.dataGroupName,originalClassName:m.children?`node ${v}`:`node node-leaf ${v}`})}).style("fill",m=>this.model.getFillColor(m.data.dataGroupName)).style("stroke",m=>this.model.getFillColor(m.data.dataGroupName)).attr("cx",m=>m.x).attr("cy",m=>m.y).transition("circlepack-leaf-update-enter").call(m=>this.services.transitions.setupTransition({transition:m,name:"circlepack-leaf-update-enter"})).attr("r",m=>m.r).attr("opacity",1).attr("fill-opacity",Li.circles.fillOpacity),c===!0&&this.focal&&(this.services.canvasZoom.zoomIn(this.focal,d,Fi),this.setBackgroundListeners()),a||this.addLegendListeners(),this.addEventListeners()}unhighlightChildren(e){const n=e.map(r=>r.data);this.parent.selectAll("circle.node").filter(r=>n.some(i=>i===r.data)&&r.depth>1).style("stroke",r=>this.model.getFillColor(r.data.dataGroupName))}highlightChildren(e){const n=e.map(r=>r.data);this.parent.selectAll("circle.node").filter(r=>n.some(i=>i===r.data)&&r.depth>1).style("stroke",Li.circles.hover.stroke)}getZoomClass(e){return this.model.getHierarchyLevel()===3&&this.focal&&(e.data===this.focal.data||this.focal.children.some(n=>n.data===e.data))?"focal":"non-focal"}addLegendListeners(){const{events:e}=this.services;e.addEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}removeBackgroundListeners(){ee(this.services.domUtils.getMainContainer()).on("click",()=>null)}setBackgroundListeners(){const e=ee(this.services.domUtils.getMainContainer()),n=this,r=this.parent.selectAll("circle.node");e.on("click",()=>{n.focal=null,n.model.updateHierarchyLevel(2),e.classed("zoomed-in",!1),n.services.canvasZoom.zoomOut(r,Fi)})}getZoomIcon(){return`
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10">
			<polygon points="5.93 3.71 4.45 3.71 4.45 2.23 3.71 2.23 3.71 3.71 2.23 3.71 2.23 4.45 3.71 4.45 3.71 5.93 4.45 5.93 4.45 4.45 5.93 4.45 5.93 3.71"/>
			<path d="M7.2,6.67a4,4,0,0,0,1-2.59A4.08,4.08,0,1,0,4.07,8.15h0a4,4,0,0,0,2.59-1L9.48,10,10,9.48Zm-3.12.77A3.34,3.34,0,1,1,7.41,4.08,3.34,3.34,0,0,1,4.08,7.44Z"/>
		</svg>`}addEventListeners(){const e=this;this.parent.selectAll("circle.node").on("mouseover",function(n,r){const i=ee(this);i.classed("hovered",!0);const s=e.model.getHierarchyLevel(),a=s>2&&!i.classed("focal"),o=D(e.model.getOptions(),"canvasZoom","enabled");let l=!1;if(!a){let c=[],u=[],f=null;if(r.children){r.depth>1&&o&&(l=!0,i.classed("clickable",!0)),c=r.children.map(m=>{if(m!==null)return typeof m.data.value=="number"?{label:m.data.name,value:m.data.value}:{label:m.data.name,labelIcon:o&&s<=2?e.getZoomIcon():null,value:m.value}});const d=e.model.getOptions();u=[{label:wt(d,"tooltip.totalLabel")||"Total",value:r.value,bold:!0}],e.highlightChildren(r.children)}else f=r.value;const h=getComputedStyle(this,null).getPropertyValue("fill");e.services.events.dispatchEvent(z.Tooltip.SHOW,{event:n,hoveredElement:i,items:[{color:h,label:r.data.name,labelIcon:l&&o&&s<=2?e.getZoomIcon():null,value:f},...c,...u]})}e.services.events.dispatchEvent(z.CirclePack.CIRCLE_MOUSEOVER,{event:n,element:i,datum:r})}).on("mousemove",function(n,r){const i=ee(this);e.services.events.dispatchEvent(z.CirclePack.CIRCLE_MOUSEMOVE,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(z.Tooltip.MOVE,{event:n})}).on("mouseout",function(n,r){const i=ee(this);i.classed("hovered",!1),r.children&&e.unhighlightChildren(r.children),e.services.events.dispatchEvent(z.CirclePack.CIRCLE_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(z.Tooltip.HIDE,{hoveredElement:i})}).on("click",function(n,r){const i=ee(this),s=i.classed("non-focal"),a=D(e.model.getOptions(),"canvasZoom","enabled");if(a&&e.model.getHierarchyLevel()>2){const o=e.parent.selectAll("circle.node");ee(e.services.domUtils.getMainContainer()).classed("zoomed-in",!1),e.focal=null,e.model.updateHierarchyLevel(2),e.services.canvasZoom.zoomOut(o,Fi)}else if(r.depth===2&&r.children&&!s&&a){const o=e.parent.selectAll("circle.node");ee(e.services.domUtils.getMainContainer()).classed("zoomed-in",!0),e.focal=r,e.model.updateHierarchyLevel(3),e.services.canvasZoom.zoomIn(r,o,Fi),n.stopPropagation()}e.services.events.dispatchEvent(z.CirclePack.CIRCLE_CLICK,{event:n,element:i,datum:r})})}destroy(){this.parent.selectAll("circle.node").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("click",null);const e=this.services.events;e.removeEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),this.removeBackgroundListeners()}}function OU(t,e){const n=ma(this._current,t);return r=>(this._current=n(r),e(this._current))}class Wb extends tt{constructor(){super(...arguments),this.type="pie",this.renderType=Me.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.slice").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i.data[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.slice").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}getInnerRadius(){return bt.innerRadius}render(e=!0){const n=this,r=this.getComponentContainer(),i=this.getOptions(),{groupMapsTo:s}=i.data,{valueMapsTo:a}=i.pie,o=this.model.getDisplayData().filter(k=>k[a]>0),l=this.computeRadius();this.arc=ra().innerRadius(this.getInnerRadius()).outerRadius(l),this.hoverArc=ra().innerRadius(this.getInnerRadius()).outerRadius(l+bt.hoverArc.outerRadiusOffset);const c=UA().value(k=>k[a]).sort(D(i,"pie","sortFunction")).padAngle(bt.padAngle)(o),u=J.appendOrSelect(r,"g.slices").attr("role",Ye.GROUP).attr("data-name","slices").selectAll("path.slice").data(c,k=>k.data[s]);u.exit().attr("opacity",0).remove(),u.enter().append("path").classed("slice",!0).attr("opacity",0).merge(u).attr("class",k=>this.model.getColorClassName({classNameTypes:[Le.FILL],dataGroupName:k.data[s],originalClassName:"slice"})).style("fill",k=>n.model.getFillColor(k.data[s])).attr("d",this.arc).transition().call(k=>this.services.transitions.setupTransition({transition:k,name:"pie_slice_enter_update",animate:e})).attr("opacity",1).attr("role",Ye.GRAPHICS_SYMBOL).attr("aria-roledescription","slice").attr("aria-label",k=>`${k[a]}, ${$c(k.data[a],o,a)+"%"}`).attrTween("d",function(k){return OU.bind(this)(k,n.arc)});const f=i.pie.labels.enabled,h=f?c.filter(k=>k.data[a]>0):[],d=J.appendOrSelect(r,"g.labels").attr("role",Ye.GROUP).attr("data-name","labels").selectAll("text.pie-label").data(h,k=>k.data[s]);d.exit().attr("opacity",0).remove();const m=d.enter().append("text").classed("pie-label",!0),v=[];m.merge(d).style("text-anchor","middle").text(k=>i.pie.labels.formatter?i.pie.labels.formatter({...k,percentageValue:$c(k.data[a],o,a,!0)}):$c(k.data[a],o,a)+"%").datum(function(k){const C=l+7,V=(k.endAngle-k.startAngle)/2+k.startAngle,I=V/Math.PI*180,S=this.getComputedTextLength();return k.textOffsetX=S/2,k.textOffsetY=I>90&&I<270?10:0,k.xPosition=(k.textOffsetX+C)*Math.sin(V),k.yPosition=(k.textOffsetY+C)*-Math.cos(V),k}).attr("transform",function(k,C){const V=h.length,I=(k.endAngle-k.startAngle)*(180/Math.PI);if(C>=V-2&&I<bt.callout.minSliceDegree){let S,N;return k.index===V-1?(S=k.xPosition+bt.callout.offsetX+bt.callout.textMargin+k.textOffsetX,N=k.yPosition-bt.callout.offsetY,k.direction=Ga.RIGHT,v.push(k)):(S=k.xPosition-bt.callout.offsetX-k.textOffsetX-bt.callout.textMargin,N=k.yPosition-bt.callout.offsetY,k.direction=Ga.LEFT,v.push(k)),`translate(${S}, ${N})`}return`translate(${k.xPosition}, ${k.yPosition})`}),this.renderCallouts(v);const p=D(i,"donut")?"donut":"pie",g=D(i,p,"alignment"),{width:_}=J.getSVGElementSize(this.getParent(),{useAttrs:!0}),b=f?bt.xOffset:0,y=f?bt.yOffset:0;let w=l+b;g===Ct.CENTER?w=_/2:g===Ct.RIGHT&&(w=_-l-bt.xOffset);let $=l+y;v.length>0&&($+=bt.yOffsetCallout),r.attr("x",w+7).attr("y",$),this.addEventListeners()}renderCallouts(e){const n=J.appendOrSelect(this.getComponentContainer(),"g.callouts").attr("role",Ye.GROUP).attr("data-name","callouts"),r=n.selectAll("g.callout").data(e);r.exit().remove();const i=r.enter().append("g").classed("callout",!0).attr("role",Ye.GROUP).attr("aria-roledescription","label callout");i.merge(r).datum(function(s){const{xPosition:a,yPosition:o,direction:l}=s;return l===Ga.RIGHT?(s.startPos={x:a,y:o+s.textOffsetY},s.endPos={x:a+bt.callout.offsetX,y:o-bt.callout.offsetY+s.textOffsetY},s.intersectPointX=s.endPos.x-bt.callout.horizontalLineLength):(s.startPos={x:a,y:o+s.textOffsetY},s.endPos={x:a-bt.callout.offsetX,y:o-bt.callout.offsetY+s.textOffsetY},s.intersectPointX=s.endPos.x+bt.callout.horizontalLineLength),s}),i.append("line").classed("vertical-line",!0).merge(n.selectAll("line.vertical-line")).datum(function(){return ee(this.parentNode).datum()}).style("stroke-width","1px").attr("x1",s=>s.startPos.x).attr("y1",s=>s.startPos.y).attr("x2",s=>s.intersectPointX).attr("y2",s=>s.endPos.y),i.append("line").classed("horizontal-line",!0).merge(n.selectAll("line.horizontal-line")).datum(function(){return ee(this.parentNode).datum()}).style("stroke-width","1px").attr("x1",s=>s.intersectPointX).attr("y1",s=>s.endPos.y).attr("x2",s=>s.endPos.x).attr("y2",s=>s.endPos.y)}addEventListeners(){const e=this;this.parent.selectAll("path.slice").on("mouseover",function(n,r){const i=ee(this);i.classed("hovered",!0).transition("pie_slice_mouseover").call(o=>e.services.transitions.setupTransition({transition:o,name:"pie_slice_mouseover"})).attr("d",e.hoverArc),e.services.events.dispatchEvent(z.Pie.SLICE_MOUSEOVER,{event:n,element:ee(this),datum:r});const{groupMapsTo:s}=e.getOptions().data,{valueMapsTo:a}=e.getOptions().pie;e.services.events.dispatchEvent(z.Tooltip.SHOW,{event:n,hoveredElement:i,items:[{label:r.data[s],value:r.data[a]}]})}).on("mousemove",function(n,r){const i=ee(this);e.services.events.dispatchEvent(z.Pie.SLICE_MOUSEMOVE,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(z.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(z.Pie.SLICE_CLICK,{event:n,element:ee(this),datum:r})}).on("mouseout",function(n,r){const i=ee(this);i.classed("hovered",!1).transition("pie_slice_mouseout").call(s=>e.services.transitions.setupTransition({transition:s,name:"pie_slice_mouseout"})).attr("d",e.arc),e.services.events.dispatchEvent(z.Pie.SLICE_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(z.Tooltip.HIDE,{hoveredElement:i})})}computeRadius(){const{width:e,height:n}=J.getSVGElementSize(this.parent,{useAttrs:!0}),r=this.getOptions(),i=Math.min(e,n)/2;return r.pie.labels.enabled?i+bt.radiusOffset:i}}class MU extends Wb{constructor(){super(...arguments),this.type="donut",this.renderType=Me.SVG}render(e=!0){super.render(e);const n=this;if(this.model.isDataEmpty()){this.getComponentContainer().select("g.center").remove();return}const r=J.appendOrSelect(this.getComponentContainer(),"g.center"),i=this.getOptions(),s=this.computeRadius(),a=D(i,"donut","center","label");J.appendOrSelect(r,"text.donut-figure").attr("text-anchor","middle").style("dominant-baseline",()=>a===null||a===""?"central":"initial").style("font-size",()=>i.donut.center.numberFontSize(s)).transition().call(o=>this.services.transitions.setupTransition({transition:o,name:"donut-figure-enter-update",animate:e})).tween("text",function(){return n.centerNumberTween(ee(this))}),a!==null&&a!==""&&J.appendOrSelect(r,"text.donut-title").attr("text-anchor","middle").style("font-size",()=>i.donut.center.titleFontSize(s)).attr("y",i.donut.center.titleYPosition(s)).text(a)}getInnerRadius(){return this.computeRadius()*(3/4)}centerNumberTween(e){const n=this.getOptions();let r=D(n,"donut","center","number");r===null&&(r=this.model.getDisplayData().reduce((o,l)=>o+l[n.pie.valueMapsTo],0));const i=parseInt(e.text().replace(/[, ]+/g,""),10)||0;let s;i%1===0&&r%1===0?s=Wv:s=mn;const a=s(i,r);return o=>{const{numberFormatter:l}=n.donut.center;e.text(l(a(o)))}}}const Mg="4,10 8,6 12,10",Cg="12,6 8,10 4,6";class CU extends tt{constructor(){super(...arguments),this.type="gauge",this.renderType=Me.SVG}getValue(){var e;return((e=this.model.getData().find(n=>n.group==="value"))==null?void 0:e.value)??null}getValueRatio(){return Db(this.getValue(),0,100)/100}getDelta(){var e;return((e=this.model.getData().find(n=>n.group==="delta"))==null?void 0:e.value)??null}getArcRatio(){const e=this.getOptions();return D(e,"gauge","type")===Vi.FULL?1:.5}getArcSize(){return this.getArcRatio()*Math.PI*2}getStartAngle(){const e=this.getArcSize();return e===2*Math.PI?0:-e/2}getArrow(e){const n=this.getOptions();switch(D(n,"gauge","deltaArrow","direction")){case Dc.UP:return Mg;case Dc.DOWN:return Cg;default:return e>0?Mg:Cg}}render(e=!0){const n=this.getComponentContainer().attr("width","100%").attr("height","100%"),r=this.getOptions(),i=this.getValue(),s=this.getValueRatio(),a=this.getArcSize(),o=this.getStartAngle(),l=s*a,c=o+l,u=o+a,f=this.computeRadius(),h=this.getInnerRadius();this.backgroundArc=ra().innerRadius(h).outerRadius(f).startAngle(c).endAngle(u),this.arc=ra().innerRadius(h).outerRadius(f).startAngle(o).endAngle(c),J.appendOrSelect(n,"path.arc-background").attr("d",this.backgroundArc);const d=n.selectAll("path.arc-foreground").data([i]);d.enter().append("path").merge(d).attr("class",this.model.getColorClassName({classNameTypes:[Le.FILL],dataGroupName:"value",originalClassName:"arc-foreground"})).style("fill",()=>D(this.getOptions(),"color","scale","value")).attr("d",this.arc).attr("role",Ye.GRAPHICS_SYMBOL).attr("aria-roledescription","value").attr("aria-label",g=>g),this.drawValueNumber(),this.drawDelta(),d.exit().remove();const m=D(r,"gauge","alignment"),{width:v}=J.getSVGElementSize(this.getParent(),{useAttrs:!0});let p=f;m===Ct.CENTER?p=v/2:m===Ct.RIGHT&&(p=v-f),n.attr("x",p).attr("y",f),this.addEventListeners()}drawValueNumber(){const e=this.getComponentContainer(),n=this.getOptions(),r=D(n,"gauge","type"),i=this.getValue(),s=this.getDelta(),a=this.computeRadius(),o=D(n,"gauge","valueFontSize"),l=D(n,"gauge","deltaFontSize"),c=D(n,"gauge","numberSpacing"),u=D(n,"gauge","showPercentageSymbol");let f=0;r===Vi.FULL&&!s?f=l(a):r===Vi.SEMI&&s&&(f=-(l(a)+c));const h=J.appendOrSelect(e,"g.gauge-numbers").attr("transform",`translate(0, ${f})`),d=o(a),m=J.appendOrSelect(h,"g.gauge-value-number"),v=D(n,"gauge","numberFormatter"),p=m.selectAll("text.gauge-value-number").data([i]);p.enter().append("text").attr("class","gauge-value-number").merge(p).style("font-size",`${d}px`).attr("text-anchor","middle").text(k=>v(k));const{width:g}=J.getSVGElementSize(J.appendOrSelect(e,"text.gauge-value-number"),{useBBox:!0}),_=d/2,b=u?"%":"",y=J.appendOrSelect(m,"text.gauge-value-symbol").style("font-size",`${_}px`).attr("x",g/2).text(b),{width:w,height:$}=J.getSVGElementSize(y,{useBBox:!0});y.attr("y",`-${$/2}px`),m.attr("transform",`translate(-${w/2}, 0)`)}drawDelta(){const e=this,n=this.getComponentContainer(),r=this.getOptions(),i=this.getDelta();if(i){const s=this.computeRadius(),a=i?D(r,"gauge","deltaFontSize"):()=>0,o=i?D(r,"gauge","numberFormatter"):()=>null,l=D(r,"gauge","deltaArrow","size"),c=D(r,"gauge","numberSpacing"),u=D(r,"gauge","showPercentageSymbol"),f=J.appendOrSelect(n,"g.gauge-numbers"),h=J.appendOrSelect(f,"g.gauge-delta").attr("transform",`translate(0, ${a(s)+c})`),d=J.appendOrSelect(h,"text.gauge-delta-number"),m=u?"%":"";d.data(i===null?[]:[i]),d.enter().append("text").classed("gauge-delta-number",!0).merge(d).attr("text-anchor","middle").style("font-size",`${a(s)}px`).text(_=>`${o(_)}${m}`);const{width:v}=J.getSVGElementSize(J.appendOrSelect(n,".gauge-delta-number"),{useBBox:!0}),p=D(r,"gauge","deltaArrow","enabled"),g=h.selectAll("svg.gauge-delta-arrow").data(i!==null&&p?[i]:[]);g.enter().append("svg").merge(g).attr("class","gauge-delta-arrow").attr("x",-l(s)-v/2).attr("y",-l(s)/2-a(s)*.35).attr("width",l(s)).attr("height",l(s)).attr("viewBox","0 0 16 16").each(function(){const _=ee(this);J.appendOrSelect(_,"rect.gauge-delta-arrow-backdrop").attr("width","16").attr("height","16").attr("fill","none");const b=D(r,"gauge","status");J.appendOrSelect(_,"polygon.gauge-delta-arrow").attr("class",b!==null?`gauge-delta-arrow status--${b}`:"").attr("points",e.getArrow(i))}),g.exit().remove(),d.exit().remove()}else{const s=n.select("g.gauge-delta");s.empty()||s.remove()}}getInnerRadius(){const e=this.computeRadius(),n=D(this.getOptions(),"gauge","arcWidth");return e-n}addEventListeners(){const e=this;this.parent.selectAll("path.arc-foreground").on("mouseover",function(n,r){e.services.events.dispatchEvent(z.Gauge.ARC_MOUSEOVER,{event:n,element:ee(this),datum:r})}).on("mousemove",function(n,r){const i=ee(this);e.services.events.dispatchEvent(z.Gauge.ARC_MOUSEMOVE,{event:n,element:i,datum:r})}).on("click",function(n,r){e.services.events.dispatchEvent(z.Gauge.ARC_CLICK,{event:n,element:ee(this),datum:r})}).on("mouseout",function(n,r){const i=ee(this);e.services.events.dispatchEvent(z.Gauge.ARC_MOUSEOUT,{event:n,element:i,datum:r})})}computeRadius(){const e=this.getOptions(),n=D(e,"gauge","type"),{width:r,height:i}=J.getSVGElementSize(this.parent,{useAttrs:!0});return n===Vi.SEMI?Math.min(r/2,i):Math.min(r/2,i/2)}}class Yb extends Qf{constructor(){super(...arguments),this.type="grouped-bar",this.renderType=Me.SVG,this.padding=5,this.defaultStepFactor=70,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.model.getDisplayData(this.configs.groups),r=this.getOptions(),{groupMapsTo:i}=r.data;this.setGroupScale();const s=this.getComponentContainer({withinChartClip:!0}),a=oa(n.map(u=>{const f=this.services.cartesianScales.getDomainIdentifier(u);return u[f]&&typeof u[f].toString=="function"?u[f].toString():u[f]})),o=s.selectAll("g.bars").data(a,u=>u);o.exit().attr("opacity",0).remove();const l=o.enter().append("g").classed("bars",!0).attr("role",Ye.GROUP).attr("data-name","bars").merge(o);l.transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"bar-group-update-enter",animate:e})).attr("transform",u=>{const f=this.services.cartesianScales.getDomainValue(u)-this.getGroupWidth()/2;return this.services.cartesianScales.getOrientation()===Ft.VERTICAL?`translate(${f}, 0)`:`translate(0, ${f})`});const c=l.selectAll("path.bar").data(u=>this.getDataCorrespondingToLabel(u),u=>u[i]);c.exit().attr("opacity",0).remove(),c.enter().append("path").attr("opacity",0).merge(c).classed("bar",!0).transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"bar-update-enter",animate:e})).attr("class",u=>this.model.getColorClassName({classNameTypes:[Le.FILL],dataGroupName:u[i],originalClassName:"bar"})).style("fill",u=>this.model.getFillColor(u[i])).attr("d",u=>{const f=this.groupScale(u[i]),h=this.getBarWidth(),d=f,m=f+h,v=this.services.cartesianScales.getRangeAxisPosition({datum:u}),p=this.services.cartesianScales.getValueThroughAxisPosition(v,0),g=this.services.cartesianScales.getRangeValue(u),_=this.services.cartesianScales.getDomainValue(u)-h/2,b=_+h;if(!this.isOutsideZoomedDomain(_,b))return tn({x0:d,x1:m,y0:p,y1:g},this.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",Ye.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",u=>u.value),this.addEventListeners()}addEventListeners(){const e=this;this.parent.selectAll("path.bar").on("mouseover",function(n,r){const i=ee(this);i.classed("hovered",!0),e.services.events.dispatchEvent(z.Bar.BAR_MOUSEOVER,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(z.Tooltip.SHOW,{event:n,hoveredElement:i,data:[r]})}).on("mousemove",function(n,r){const i=ee(this);e.services.events.dispatchEvent(z.Bar.BAR_MOUSEMOVE,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(z.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(z.Bar.BAR_CLICK,{event:n,element:ee(this),datum:r})}).on("mouseout",function(n,r){const i=ee(this);i.classed("hovered",!1),e.services.events.dispatchEvent(z.Bar.BAR_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(z.Tooltip.HIDE,{hoveredElement:i})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}getDataCorrespondingToLabel(e){return this.model.getDisplayData(this.configs.groups).filter(n=>{const r=this.services.cartesianScales.getDomainIdentifier(n);return n[r].toString()===e})}getGroupWidth(){const e=this.model.getGroupedData(this.configs.groups),n=this.getTotalGroupPadding();return this.getBarWidth()*e.length+n}getDomainScaleStep(){const e=this.services.cartesianScales.getDomainScale(),n=this.model.getGroupedData(this.configs.groups);let r=this.defaultStepFactor;if(typeof e.step=="function")r=e.step();else if(n.length>0){const i=n.find(s=>{var a;return((a=s.data)==null?void 0:a.length)>1});if(i){const s=this.services.cartesianScales.getDomainIdentifier(i.data[0]);r=Math.abs(e(i.data[1][s])-e(i.data[0][s]))}}return r}getTotalGroupPadding(){const e=this.model.getGroupedData(this.configs.groups);return e.length===1?0:Math.min(5,5*(this.getDomainScaleStep()/this.defaultStepFactor))*(e.length-1)}getBarWidth(){const e=this.getOptions(),n=D(e,"bars","width"),r=D(e,"bars","maxWidth");if(n!==null&&(r===null||n<=r))return n;const i=this.model.getGroupedData(this.configs.groups).length,s=this.getTotalGroupPadding();return Math.min(r,(this.getDomainScaleStep()-s)/i)}setGroupScale(){const e=this.model.getActiveDataGroupNames(this.configs.groups);this.groupScale=ga().domain(e).rangeRound([0,this.getGroupWidth()])}}class AU extends tt{constructor(){super(...arguments),this.type="heatmap",this.renderType=Me.SVG,this.matrix={},this.xBandwidth=0,this.yBandwidth=0,this.translationUnits={x:0,y:0},this.handleAxisOnHover=e=>{const{detail:n}=e,{datum:r}=n,i=this.model.getUniqueRanges(),s=this.model.getUniqueDomain(),a=this.services.cartesianScales.getDomainLabel(),o=this.services.cartesianScales.getRangeLabel(),l=this.services.cartesianScales.getMainXScale(),c=this.services.cartesianScales.getMainYScale();let u="",f=null,h=null,d=null;this.matrix[r]!==void 0?(u=a,i.forEach(m=>{if(typeof this.matrix[r][m].value=="number"){const v=this.matrix[r][m].value;if(f===null){f=v,h=v,d=v;return}f+=v,h=v<h?v:h,d=v>d?v:d}})):(u=o,s.forEach(m=>{if(typeof this.matrix[m][r].value=="number"){const v=this.matrix[m][r].value;if(f===null){f=v,h=v,d=v;return}f+=v,h=v<h?v:h,d=v>d?v:d}})),l(r)!==void 0?this.parent.select("g.multi-cell.column-highlight").classed("highlighter-hidden",!1).attr("transform",`translate(${l(r)}, ${Nr(c.range())})`):c(r)!==void 0&&this.parent.select("g.multi-cell.row-highlight").classed("highlighter-hidden",!1).attr("transform",`translate(${Nr(l.range())},${c(r)})`),this.services.events.dispatchEvent(z.Tooltip.SHOW,{event:n.event,hoveredElement:ee(e.detail.element),items:[{label:u,value:r,bold:!0},{label:"Min",value:h!==null?h:"-"},{label:"Max",value:d!==null?d:"-"},{label:"Average",value:f!==null?f/s.length:"-"}]})},this.handleAxisMouseOut=e=>{this.parent.selectAll("g.multi-cell").classed("highlighter-hidden",!0),this.services.events.dispatchEvent(z.Tooltip.HIDE,{event:e})}}init(){const e=this.services.events;e.addEventListener(z.Axis.LABEL_MOUSEOVER,this.handleAxisOnHover),e.addEventListener(z.Axis.LABEL_MOUSEOUT,this.handleAxisMouseOut),e.addEventListener(z.Axis.LABEL_FOCUS,this.handleAxisOnHover),e.addEventListener(z.Axis.LABEL_BLUR,this.handleAxisMouseOut)}render(e=!0){const n=this.getComponentContainer({withinChartClip:!0});n.lower();const{cartesianScales:r}=this.services;if(this.matrix=this.model.getMatrix(),n.html(""),D(this.getOptions(),"data","loading"))return;const i=r.getMainXScale(),s=r.getMainYScale(),a=r.getDomainIdentifier(),o=r.getRangeIdentifier(),l=this.model.getUniqueDomain(),c=this.model.getUniqueRanges(),u=this.model.getMatrixAsArray(),f=i.range(),h=s.range();this.xBandwidth=Math.abs((f[1]-f[0])/l.length),this.yBandwidth=Math.abs((h[1]-h[0])/c.length);const d=this.services.domUtils.generateElementIDString("heatmap-pattern-stripes");n.append("defs").append("pattern").attr("id",d).attr("width",3).attr("height",3).attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)").append("rect").classed("pattern-fill",!0).attr("width",.5).attr("height",8);const m=n.selectAll().data(u).enter().append("g").attr("class",v=>`heat-${v.index}`).classed("cell",!0).attr("transform",v=>`translate(${i(v[a])}, ${s(v[o])})`).append("rect").attr("class",v=>this.model.getColorClassName({value:v.value,originalClassName:`heat-${v.index}`})).classed("heat",!0).classed("null-state",v=>v.index===-1||v.value===null).attr("width",this.xBandwidth).attr("height",this.yBandwidth).style("fill",v=>v.index===-1||v.value===null?`url(#${d})`:this.model.getFillColor(Number(v.value))).attr("aria-label",v=>v.value);this.createOuterBox("g.cell-highlight",this.xBandwidth,this.yBandwidth),this.createOuterBox("g.multi-cell.column-highlight",this.xBandwidth,Math.abs(h[1]-h[0])),this.createOuterBox("g.multi-cell.row-highlight",Math.abs(f[1]-f[0]),this.yBandwidth),this.determineDividerStatus()&&(m.style("stroke-width","1px"),this.parent.select("g.cell-highlight").classed("cell-2",!0)),this.addEventListener()}createOuterBox(e,n,r){const i=J.appendOrSelect(this.parent,e).classed("shadows",!0).classed("highlighter-hidden",!0);J.appendOrSelect(i,"line.top").attr("x1",-1).attr("x2",n+1),J.appendOrSelect(i,"line.left").attr("x1",0).attr("y1",-1).attr("x2",0).attr("y2",r+1),J.appendOrSelect(i,"line.down").attr("x1",-1).attr("x2",n+1).attr("y1",r).attr("y2",r),J.appendOrSelect(i,"line.right").attr("x1",n).attr("x2",n).attr("y1",-1).attr("y2",r+1)}determineDividerStatus(){const e=D(this.getOptions(),"heatmap","divider","state");return e!==Us.OFF&&(e===Us.AUTO&&jp.minCellDividerDimension<=this.xBandwidth&&jp.minCellDividerDimension<=this.yBandwidth||e===Us.ON)}addEventListener(){const e=this,{cartesianScales:n}=this.services,r=this.getOptions(),i=wt(r,"tooltip.totalLabel"),s=n.getDomainIdentifier(),a=n.getRangeIdentifier(),o=n.getDomainLabel(),l=n.getRangeLabel();this.parent.selectAll("g.cell").on("mouseover",function(c,u){const f=ee(this),h=f.select("rect.heat");if(!h.classed("null-state")){const d=Ls(f.attr("transform"));e.parent.select("g.cell-highlight").attr("transform",`translate(${d.x+e.translationUnits.x}, ${d.y+e.translationUnits.y})`).classed("highlighter-hidden",!1),e.services.events.dispatchEvent(z.Heatmap.HEATMAP_MOUSEOVER,{event:c,element:h,datum:u}),e.services.events.dispatchEvent(z.Tooltip.SHOW,{event:c,items:[{label:o,value:u[s]},{label:l,value:u[a]},{label:i||"Total",value:u.value,color:h.style("fill")}]})}}).on("mousemove",function(c,u){e.services.events.dispatchEvent(z.Heatmap.HEATMAP_MOUSEMOVE,{event:c,element:ee(this),datum:u}),e.services.events.dispatchEvent(z.Tooltip.MOVE,{event:c})}).on("click",function(c,u){e.services.events.dispatchEvent(z.Heatmap.HEATMAP_CLICK,{event:c,element:ee(this),datum:u})}).on("mouseout",function(c,u){const f=ee(this).select("rect.heat"),h=f.classed("null-state");e.parent.select("g.cell-highlight").classed("highlighter-hidden",!0),h||(e.services.events.dispatchEvent(z.Heatmap.HEATMAP_MOUSEOUT,{event:c,element:f,datum:u}),e.services.events.dispatchEvent(z.Tooltip.HIDE,{event:c,hoveredElement:f}))})}destroy(){this.parent.selectAll("rect.heat").on("mouseover",null).on("mousemove",null).on("click",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(z.Legend.ITEM_HOVER,this.handleAxisOnHover),e.removeEventListener(z.Legend.ITEM_MOUSEOUT,this.handleAxisMouseOut)}}class IU extends tt{constructor(){super(...arguments),this.type="histogram",this.renderType=Me.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,r=this.getOptions(),{groupMapsTo:i}=r.data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(s=>this.services.transitions.setupTransition({transition:s,name:"legend-hover-bar"})).attr("opacity",s=>s[i]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getComponentContainer(),r=this.model.getOptions(),{groupIdentifier:i}=r,{groupMapsTo:s}=r.data,a=this.model.getBinnedStackedData(),o=this.services.cartesianScales.getMainXScale(),l=n.selectAll("g.bars").data(a,u=>wt(u,`0.${s}`));l.exit().attr("opacity",0).remove(),l.enter().append("g").classed("bars",!0).attr("role",Ye.GROUP);const c=n.selectAll("g.bars").selectAll("path.bar").data(u=>u);c.exit().remove(),c.enter().append("path").merge(c).classed("bar",!0).attr(i,(u,f)=>f).transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"histogram-bar-update-enter",animate:e})).attr("class",u=>this.model.getColorClassName({classNameTypes:[Le.FILL],dataGroupName:u[s],originalClassName:"bar"})).style("fill",u=>this.model.getFillColor(u[s])).attr("d",u=>{const f=wt(u,"data");if(!f)return;const h=o(f.x1)-o(f.x0)-1,d=this.services.cartesianScales.getDomainValue(f.x0),m=d+h,v=this.services.cartesianScales.getRangeValue(u[0]);let p=this.services.cartesianScales.getRangeValue(u[1]);return Math.abs(p-v)>0&&Math.abs(p-v)>r.bars.dividerSize&&(this.services.cartesianScales.getOrientation()===Ft.VERTICAL?p+=1:p-=1),tn({x0:d,x1:m,y0:v,y1:p},this.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",Ye.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",u=>D(u,"data",u[s])),this.addEventListeners()}addEventListeners(){const e=this.model.getOptions(),{groupMapsTo:n}=e.data,r=this;this.parent.selectAll("path.bar").on("mouseover",function(i,s){const a=ee(this);a.classed("hovered",!0);const o=parseFloat(wt(s,"data.x0")),l=parseFloat(wt(s,"data.x1")),c=r.services.cartesianScales.getRangeAxisPosition(),u=r.services.cartesianScales.getScaleLabel(c);r.services.events.dispatchEvent(z.Tooltip.SHOW,{event:i,hoveredElement:a,items:[{label:wt(e,"bins.rangeLabel")||"Range",value:`${o} â ${l}`},{label:e.tooltip.groupLabel||"Group",value:s[n],class:r.model.getColorClassName({classNameTypes:[Le.TOOLTIP],dataGroupName:s[n]})},{label:u,value:wt(s,`data.${s[n]}`)}]})}).on("mousemove",function(i){r.services.events.dispatchEvent(z.Tooltip.MOVE,{event:i})}).on("mouseout",function(){ee(this).classed("hovered",!1),r.services.events.dispatchEvent(z.Tooltip.HIDE)})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class DU extends Xn{constructor(){super(...arguments),this.type="lollipop",this.renderType=Me.SVG,this.handleScatterOnHover=e=>{const n=e.detail,r=this.getOptions(),{groupMapsTo:i}=r.data;this.parent.selectAll("line.line").attr("stroke-width",s=>s[i]!==n.datum[i]?lr.weight.unselected:lr.weight.selected)},this.handleScatterOnMouseOut=()=>{this.parent.selectAll("line.line").attr("stroke-width",lr.weight.unselected)},this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,r=this.getOptions(),{groupMapsTo:i}=r.data;this.parent.selectAll("line.line").transition("legend-hover-line").call(s=>this.services.transitions.setupTransition({transition:s,name:"legend-hover-line"})).attr("opacity",s=>s[i]!==n.datum().name?lr.opacity.unselected:lr.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("line.line").transition("legend-mouseout-line").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-line"})).attr("opacity",lr.opacity.selected)}}init(){const{events:e}=this.services;e.addEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getComponentContainer({withinChartClip:!0}),r=this.model.getOptions(),{groupMapsTo:i}=r.data,{cartesianScales:s}=this.services,a=s.getMainXScale(),o=s.getMainYScale(),l=s.getDomainIdentifier(),c=p=>s.getDomainValue(p),u=p=>s.getRangeValue(p),f=s.getOrientation(),[h,d]=hr(c,u,f),m=n.selectAll("line.line").data(this.getScatterData(),p=>`${p[i]}-${p[l]}`);m.exit().attr("opacity",0).remove();const v=m.enter().append("line").attr("opacity",0).merge(m).classed("line",!0).attr("class",p=>this.model.getColorClassName({classNameTypes:[Le.STROKE],dataGroupName:p[i],originalClassName:"line"})).transition().call(p=>this.services.transitions.setupTransition({transition:p,name:"lollipop-line-update-enter",animate:e})).style("stroke",p=>this.model.getFillColor(p[i],p[l],p)).attr("opacity",1);f===Ft.HORIZONTAL?v.attr("y1",d).attr("y2",d).attr("x1",a.range()[0]).attr("x2",p=>h(p)-r.points.radius):v.attr("x1",h).attr("x2",h).attr("y1",o.range()[0]).attr("y2",p=>d(p)+r.points.radius),this.addScatterPointEventListeners()}addScatterPointEventListeners(){this.services.events.addEventListener(z.Scatter.SCATTER_MOUSEOVER,this.handleScatterOnHover),this.services.events.addEventListener(z.Scatter.SCATTER_MOUSEOUT,this.handleScatterOnMouseOut)}destroy(){const e=this.services.events;e.removeEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),e.removeEventListener(z.Scatter.SCATTER_MOUSEOVER,this.handleScatterOnHover),e.removeEventListener(z.Scatter.SCATTER_MOUSEOUT,this.handleScatterOnMouseOut)}}class LU extends tt{constructor(){super(...arguments),this.type="meter",this.renderType=Me.SVG}getStackedBounds(e,n){let r=0;return e.map((i,s)=>s!==0?(r+=n(i.value),{...i,width:Math.abs(n(i.value)-jt.dividerWidth),x:r-n(i.value)}):(r=n(i.value),{...i,width:Math.abs(n(i.value)-jt.dividerWidth),x:0}))}render(e=!0){const n=this,r=this.getComponentContainer(),i=this.getOptions(),s=D(i,"meter","proportional"),a=this.model.getDisplayData(),o=this.model.getStatus(),{width:l}=J.getSVGElementSize(r,{useAttrs:!0}),{groupMapsTo:c}=i.data;let u;D(i,"meter","proportional")===null?u=100:u=D(i,"meter","proportional","total")||this.model.getMaximumDomain(this.model.getDisplayData());const f=Vn().domain([0,u]).range([0,l]),h=this.getStackedBounds(a,f),d=D(i,"meter","height");J.appendOrSelect(r,"rect.container").attr("x",0).attr("y",0).attr("width",l).attr("height",d||(s?jt.height.proportional:jt.height.default)),J.appendOrSelect(r,"line.rangeIndicator").attr("x1",l).attr("x2",l).attr("y1",0).attr("y2",d||(s?jt.height.proportional:jt.height.default));const m=r.selectAll("rect.value").data(h),v=o!=null&&!n.model.isUserProvidedColorScaleValid()&&!s?`value status--${o}`:"value";m.enter().append("rect").classed("value",!0).merge(m).attr("x",b=>b.x).attr("y",0).attr("height",()=>d||(s?jt.height.proportional:jt.height.default)).attr("class",b=>this.model.getColorClassName({classNameTypes:[Le.FILL],dataGroupName:b[c],originalClassName:v})).transition().call(b=>this.services.transitions.setupTransition({transition:b,name:"meter-bar-update",animate:e})).attr("width",b=>b.value>u?f(u):b.width).style("fill",b=>n.model.getFillColor(b[c])).attr("role",Ye.GRAPHICS_SYMBOL).attr("aria-roledescription","value").attr("aria-label",b=>b.value),m.exit().remove();const p=D(i,"meter","peak");let g=p;p!==null&&(p>u?g=u:p<a[0].value&&(g=a[0].value>u?u:a[0].value));const _=r.selectAll("line.peak").data(g==null?[]:[g]);_.enter().append("line").classed("peak",!0).merge(_).attr("y1",0).attr("y2",()=>d||(s?jt.height.proportional:jt.height.default)).transition().call(b=>this.services.transitions.setupTransition({transition:b,name:"peak-line-update",animate:e})).attr("x1",b=>f(b)).attr("x2",b=>f(b)).attr("role",Ye.GRAPHICS_SYMBOL).attr("aria-roledescription","peak").attr("aria-label",b=>b),_.exit().remove(),this.services.domUtils.setSVGMaxHeight(),this.addEventListeners()}addEventListeners(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this,i=D(e,"meter","proportional");this.parent.selectAll("rect.value").on("mouseover",function(s,a){const o=ee(this);r.services.events.dispatchEvent(z.Meter.METER_MOUSEOVER,{event:s,element:o,datum:a}),i&&(o.classed("hovered",!0),r.services.events.dispatchEvent(z.Tooltip.SHOW,{event:s,hoveredElement:o,items:[{label:a[n],value:a.value}]}))}).on("mousemove",function(s,a){const o=ee(this);r.services.events.dispatchEvent(z.Meter.METER_MOUSEMOVE,{event:s,element:o,datum:a}),i&&r.services.events.dispatchEvent(z.Tooltip.MOVE,{event:s})}).on("click",function(s,a){r.services.events.dispatchEvent(z.Meter.METER_CLICK,{event:s,element:ee(this),datum:a})}).on("mouseout",function(s,a){const o=ee(this);r.services.events.dispatchEvent(z.Meter.METER_MOUSEOUT,{event:s,element:o,datum:a}),i&&(o.classed("hovered",!1),r.services.events.dispatchEvent(z.Tooltip.HIDE,{hoveredElement:o}))})}destroy(){this.parent.selectAll("rect.value").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("click",null)}}class RU extends tt{constructor(){super(...arguments),this.type="radar",this.renderType=Me.SVG,this.getLabelDimensions=e=>{const n=J.appendOrSelect(this.getComponentContainer(),"g.tmp-tick"),r=J.appendOrSelect(n,"text").text(e),{width:i,height:s}=J.getSVGElementSize(r.node(),{useBBox:!0});return n.remove(),{width:i,height:s}},this.normalizeFlatData=e=>{const n=this.getOptions(),{angle:r,value:i}=D(n,"radar","axes"),s=D(n,"data","groupMapsTo"),a=q8(this.uniqueKeys.map(o=>this.uniqueGroups.map(l=>({[r]:o,[s]:l,[i]:null}))));return Ne(a,e)},this.normalizeGroupedData=e=>{const n=this.getOptions(),{angle:r,value:i}=D(n,"radar","axes"),s=D(n,"data","groupMapsTo");return e.map(({name:a,data:o})=>{const l=this.uniqueKeys.map(c=>({[s]:a,[r]:c,[i]:null}));return{name:a,data:Ne(l,o)}})},this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("g.blobs path").transition("legend-hover-blob").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-blob"})).style("fill-opacity",r=>r.name!==n.datum().name?Hr.opacity.unselected:Hr.opacity.selected).style("stroke-opacity",r=>r.name!==n.datum().name?Hr.opacity.unselected:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("g.blobs path").transition("legend-mouseout-blob").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-blob"})).style("fill-opacity",Hr.opacity.selected).style("stroke-opacity",1)}}init(){const{events:e}=this.services;e.addEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer(),{width:r,height:i}=J.getSVGElementSize(n,{useAttrs:!0}),s=this.model.getData(),a=this.model.getGroupedData(),o=this.getOptions(),l=D(o,"data","groupMapsTo"),c=D(o,"radar","axes","value"),{angle:u,value:f}=D(o,"radar","axes"),{xLabelPadding:h,yLabelPadding:d,yTicksNumber:m,minRange:v,xAxisRectHeight:p}=Hr;this.uniqueKeys=Array.from(new Set(s.map(O=>O[u]))),this.uniqueGroups=Array.from(new Set(s.map(O=>O[l]))),this.fullDataNormalized=this.normalizeFlatData(s),this.groupedDataNormalized=this.normalizeGroupedData(a);const g=2*(this.getLabelDimensions(this.uniqueKeys[0]).height+d),_=(Math.min(r,i)-g)/2;if(_<=0)return;const b=ga().domain(this.fullDataNormalized.map(O=>O[u])).range([0,2*Math.PI].map(O=>O-Math.PI/2)),y=Nr(this.fullDataNormalized.map(O=>O[f])),w=Vn().domain([y>=0?0:y,ti(this.fullDataNormalized.map(O=>O[f]))]).range([v,_]).nice(m),$=w.ticks(m),k=O=>this.model.getFillColor(O),C=FA().angle(O=>b(O[u])+Math.PI/2).radius(O=>w(O[f])).curve(r_),V=this.uniqueKeys.map(O=>{const R=this.getLabelDimensions(O).width,T=fV(b(O),_);return R+T}),I={x:ti(V)+h,y:i/2},S=J.appendOrSelect(n,"g.y-axes").attr("role",Ye.GROUP).selectAll("path").data($,O=>O),N=O=>this.uniqueKeys.map(R=>({[u]:R,[f]:O}));S.join(O=>O.append("path").attr("opacity",0).attr("transform",`translate(${I.x}, ${I.y})`).attr("fill","none").call(R=>R.transition().call(T=>this.services.transitions.setupTransition({transition:T,name:"radar_y_axes_enter",animate:e})).attr("opacity",1).attr("d",T=>C(N(T)))),O=>O.call(R=>R.transition().call(T=>this.services.transitions.setupTransition({transition:T,name:"radar_y_axes_update",animate:e})).attr("opacity",1).attr("transform",`translate(${I.x}, ${I.y})`).attr("d",T=>C(N(T)))),O=>O.call(R=>R.transition().call(T=>this.services.transitions.setupTransition({transition:T,name:"radar_y_axes_exit",animate:e})).attr("d",T=>C(N(T))).attr("opacity",0).remove())),J.appendOrSelect(n,"g.x-axes").attr("role",Ye.GROUP).selectAll("line").data(this.uniqueKeys,O=>O).join(O=>O.append("line").attr("opacity",0).attr("class",R=>`x-axis-${Oi(R)}`).attr("stroke-dasharray","0").attr("x1",R=>At(b(R),0,I).x).attr("y1",R=>At(b(R),0,I).y).attr("x2",R=>At(b(R),0,I).x).attr("y2",R=>At(b(R),0,I).y).call(R=>R.transition().call(T=>this.services.transitions.setupTransition({transition:T,name:"radar_x_axes_enter",animate:e})).attr("opacity",1).attr("x1",T=>At(b(T),w.range()[0],I).x).attr("y1",T=>At(b(T),w.range()[0],I).y).attr("x2",T=>At(b(T),w.range()[1],I).x).attr("y2",T=>At(b(T),w.range()[1],I).y)),O=>O.call(R=>R.transition().call(T=>this.services.transitions.setupTransition({transition:T,name:"radar_x_axes_update",animate:e})).attr("opacity",1).attr("x1",T=>At(b(T),w.range()[0],I).x).attr("y1",T=>At(b(T),w.range()[0],I).y).attr("x2",T=>At(b(T),w.range()[1],I).x).attr("y2",T=>At(b(T),w.range()[1],I).y)),O=>O.call(R=>R.transition().call(T=>this.services.transitions.setupTransition({transition:T,name:"radar_x_axes_exit",animate:e})).attr("opacity",0).remove())),J.appendOrSelect(n,"g.x-labels").attr("role",Ye.GROUP).selectAll("text").data(this.uniqueKeys).join(O=>O.append("text").text(R=>R).attr("opacity",0).attr("x",R=>At(b(R),w.range()[1]+h,I).x).attr("y",R=>At(b(R),w.range()[1]+h,I).y).style("text-anchor",R=>ig(b(R)).textAnchor).style("dominant-baseline",R=>ig(b(R)).dominantBaseline).call(R=>R.transition().call(T=>this.services.transitions.setupTransition({transition:T,name:"radar_x_labels_enter",animate:e})).attr("opacity",1)),O=>O.call(R=>R.transition().call(T=>this.services.transitions.setupTransition({transition:T,name:"radar_x_labels_update",animate:e})).attr("opacity",1).attr("x",T=>At(b(T),w.range()[1]+h,I).x).attr("y",T=>At(b(T),w.range()[1]+h,I).y).end().finally(()=>{const T=D(o,"radar","alignment"),F=this.getAlignmentXOffset(T,n,this.getParent());n.attr("x",F)})),O=>O.call(R=>R.transition().call(T=>this.services.transitions.setupTransition({transition:T,name:"radar_x_labels_exit",animate:e})).attr("opacity",0).remove())),J.appendOrSelect(n,"g.blobs").attr("role",Ye.GROUP).selectAll("path").data(this.groupedDataNormalized,O=>O.name).join(O=>O.append("path").attr("class",R=>this.model.getColorClassName({classNameTypes:[Le.FILL,Le.STROKE],dataGroupName:R.name,originalClassName:"blob"})).attr("role",Ye.GRAPHICS_SYMBOL).attr("aria-label",R=>R.name).attr("opacity",0).attr("transform",e?()=>`translate(${I.x}, ${I.y}) scale(${1+Math.random()*.35})`:`translate(${I.x}, ${I.y})`).style("fill",R=>k(R.name)).style("fill-opacity",Hr.opacity.selected).style("stroke",R=>k(R.name)).call(R=>{const T=R.transition().call(F=>this.services.transitions.setupTransition({transition:F,name:"radar_blobs_enter",animate:e}));e&&T.delay(()=>Math.random()*30).attr("transform",`translate(${I.x}, ${I.y})`),T.attr("opacity",1).attr("d",F=>C(F.data))}),O=>(O.attr("class",R=>this.model.getColorClassName({classNameTypes:[Le.FILL,Le.STROKE],dataGroupName:R.name,originalClassName:"blob"})).style("fill",R=>k(R.name)).style("stroke",R=>k(R.name)),O.call(R=>R.transition().call(T=>this.services.transitions.setupTransition({transition:T,name:"radar_blobs_update",animate:e})).attr("opacity",1).attr("transform",`translate(${I.x}, ${I.y})`).attr("d",T=>C(T.data))),O),O=>O.call(R=>{const T=R.transition().call(F=>this.services.transitions.setupTransition({transition:F,name:"radar_blobs_exit",animate:e}));e&&T.delay(()=>Math.random()*30).attr("transform",()=>`translate(${I.x}, ${I.y}) scale(${1+Math.random()*.35})`),T.attr("opacity",0).remove()})),J.appendOrSelect(n,"g.dots").attr("role",Ye.GROUP).selectAll("circle").data(this.fullDataNormalized.filter(O=>D(O,f)!==null)).join(O=>O.append("circle").attr("role",Ye.GRAPHICS_SYMBOL).attr("aria-label",R=>R[c]),O=>O,O=>O.remove()).attr("class",O=>this.model.getColorClassName({classNameTypes:[Le.FILL],dataGroupName:O[l],originalClassName:Oi(O[u])})).attr("cx",O=>At(b(O[u]),w(O[f]),I).x).attr("cy",O=>At(b(O[u]),w(O[f]),I).y).attr("r",0).attr("opacity",0).style("fill",O=>k(O[l])),J.appendOrSelect(n,"g.x-axes-rect").attr("role",Ye.GROUP).selectAll("rect").data(this.uniqueKeys).join(O=>O.append("rect"),O=>O,O=>O.remove()).attr("x",I.x).attr("y",I.y-p/2).attr("width",w.range()[1]).attr("height",p).style("fill","red").style("fill-opacity",0).attr("transform",O=>`rotate(${mb(b(O))}, ${I.x}, ${I.y})`),J.appendOrSelect(n,"g.y-labels").attr("role",Ye.GROUP).selectAll("text").data(Rn($)).join(O=>O.append("text").attr("opacity",0).text(R=>R).attr("x",R=>At(-Math.PI/2,w(R),I).x+d).attr("y",R=>At(-Math.PI/2,w(R),I).y).style("text-anchor","start").style("dominant-baseline","middle").call(R=>R.transition().call(T=>this.services.transitions.setupTransition({transition:T,name:"radar_y_labels_enter",animate:e})).attr("opacity",1)),O=>O.call(R=>R.transition().call(T=>this.services.transitions.setupTransition({transition:T,name:"radar_y_labels_update",animate:e})).text(T=>T).attr("opacity",1).attr("x",T=>At(-Math.PI/2,w(T),I).x+d).attr("y",T=>At(-Math.PI/2,w(T),I).y)),O=>O.call(R=>R.transition().call(T=>this.services.transitions.setupTransition({transition:T,name:"radar_y_labels_exit",animate:e})).attr("opacity",0).remove())),this.addEventListeners()}getAlignmentXOffset(e,n,r){const i=J.getSVGElementSize(n,{useBBox:!0}),{width:s}=J.getSVGElementSize(r,{useAttrs:!0});let a=0;return e===Ct.CENTER?a=Math.floor((s-i.width)/2):e===Ct.RIGHT&&(a=s-i.width),a}destroy(){this.parent.selectAll(".x-axes-rect > rect").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}addEventListeners(){const e=this,{axes:{angle:n}}=D(this.getOptions(),"radar");this.parent.selectAll(".x-axes-rect > rect").on("mouseover",function(r,i){const s=ee(this);e.services.events.dispatchEvent(z.Radar.X_AXIS_MOUSEOVER,{event:r,element:s,datum:i});const a=e.parent.select(`.x-axes .x-axis-${Oi(i)}`),o=e.parent.selectAll(`.dots circle.${Oi(i)}`),l=e.model.getActiveDataGroupNames(),c=e.getOptions(),{groupMapsTo:u}=c.data,f=D(c,"radar","axes","value");a.classed("hovered",!0).attr("stroke-dasharray","4 4"),o.classed("hovered",!0).attr("opacity",d=>l.indexOf(d[u])!==-1?1:0).attr("r",Hr.dotsRadius);const h=e.fullDataNormalized.filter(d=>d[n]===i&&l.indexOf(d[u])!==-1);e.services.events.dispatchEvent(z.Tooltip.SHOW,{event:r,hoveredElement:s,items:h.filter(d=>typeof d[f]=="number").map(d=>({label:d[u],value:d[f],color:e.model.getFillColor(d[u]),class:e.model.getColorClassName({classNameTypes:[Le.TOOLTIP],dataGroupName:d[u]})}))})}).on("mousemove",function(r,i){const s=ee(this);e.services.events.dispatchEvent(z.Radar.X_AXIS_MOUSEMOVE,{event:r,element:s,datum:i}),e.services.events.dispatchEvent(z.Tooltip.MOVE,{event:r})}).on("click",function(r,i){e.services.events.dispatchEvent(z.Radar.X_AXIS_CLICK,{event:r,element:ee(this),datum:i})}).on("mouseout",function(r,i){const s=ee(this),a=e.parent.select(`.x-axes .x-axis-${Oi(i)}`),o=e.parent.selectAll(`.dots circle.${Oi(i)}`);a.classed("hovered",!1).attr("stroke-dasharray","0"),o.classed("hovered",!1).attr("opacity",0).attr("r",0),e.services.events.dispatchEvent(z.Radar.X_AXIS_MOUSEOUT,{event:r,element:s,datum:i}),e.services.events.dispatchEvent(z.Tooltip.HIDE)})}}class Zb extends Qf{constructor(){super(...arguments),this.type="simple-bar",this.renderType=Me.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-simple-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-simple-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.getComponentContainer({withinChartClip:!0}),s=this.model.getDisplayData(this.configs.groups),a=this.services.cartesianScales.getOrientation(),o=i.selectAll("path.bar").data(s,l=>l[r]);o.exit().attr("opacity",0).remove(),o.enter().append("path").attr("opacity",0).merge(o).classed("bar",!0).attr("width",this.getBarWidth.bind(this)).transition().call(l=>this.services.transitions.setupTransition({transition:l,name:"bar-update-enter",animate:e})).attr("class",l=>this.model.getColorClassName({classNameTypes:[Le.FILL],dataGroupName:l[r],originalClassName:"bar"})).style("fill",l=>this.model.getFillColor(l[r])).attr("d",l=>{const c=this.services.cartesianScales.getRangeIdentifier(),u=this.getBarWidth(),f=l[c],h=this.services.cartesianScales.getDomainValue(l)-u/2,d=h+u;let m,v;if(Array.isArray(f)&&f.length===2)m=this.services.cartesianScales.getRangeValue(f[0]),v=this.services.cartesianScales.getRangeValue(f[1]);else{const g=this.services.cartesianScales.getRangeScale().domain()[0];m=this.services.cartesianScales.getRangeValue(Math.max(0,g)),v=this.services.cartesianScales.getRangeValue(l)}const p=Math.abs(v-m);if(p!==0&&p<2&&(f>0&&a===Ft.VERTICAL||f<0&&a===Ft.HORIZONTAL?v=m-2:v=m+2),!this.isOutsideZoomedDomain(h,d))return tn({x0:h,x1:d,y0:m,y1:v},a)}).attr("opacity",1).attr("role",Ye.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",l=>l.value),this.addEventListeners()}addEventListeners(){const e=this;this.parent.selectAll("path.bar").on("mouseover",function(n,r){const i=ee(this);i.classed("hovered",!0),e.services.events.dispatchEvent(z.Bar.BAR_MOUSEOVER,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(z.Tooltip.SHOW,{event:n,hoveredElement:i,data:[r]})}).on("mousemove",function(n,r){e.services.events.dispatchEvent(z.Bar.BAR_MOUSEMOVE,{event:n,element:ee(this),datum:r}),e.services.events.dispatchEvent(z.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(z.Bar.BAR_CLICK,{event:n,element:ee(this),datum:r})}).on("mouseout",function(n,r){const i=ee(this);i.classed("hovered",!1),e.services.events.dispatchEvent(z.Bar.BAR_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(z.Tooltip.HIDE,{hoveredElement:i})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class NU extends nn{constructor(){super(...arguments),this.type="skeleton-lines"}render(e=!0){const n=D(this.getOptions(),"data","loading"),r=!D(this.getOptions(),"grid","x","enabled")&&!D(this.getOptions(),"grid","y","enabled")&&!D(this.getOptions(),"axes","bottom","visible")&&!D(this.getOptions(),"axes","left","visible");n&&!r?super.renderGridSkeleton(n):n&&r?this.renderSparklineSkeleton(n):this.removeSkeleton()}renderSparklineSkeleton(e){this.setScales(),this.drawBackdrop(e),this.drawSparkline(e),this.updateBackdropStyle(),e&&this.setShimmerEffect("shimmer-lines")}drawSparkline(e){const n=this.backdrop.attr("width"),r=[100],i=J.appendOrSelect(this.backdrop,"g.y.skeleton"),s=i.selectAll("line").data(r);s.enter().append("line").merge(s).attr("x1",0).attr("x2",n).attr("y1",a=>a).attr("y2",a=>a),i.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?`url(#${this.services.domUtils.generateElementIDString("shimmer-lines")})`:null)}updateBackdropStyle(){const e=this.parent;this.backdrop=J.appendOrSelect(e,"svg.chart-skeleton.DAII"),J.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop").classed("shimmer-effect-lines",!1).classed("shimmer-effect-sparkline",!0).style("stroke",null)}}class Xb extends tt{constructor(){super(...arguments),this.type="area-stacked",this.renderType=Me.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,r=this.getOptions(),{groupMapsTo:i}=r.data;this.parent.selectAll("path.area").transition("legend-hover-area").call(s=>this.services.transitions.setupTransition({transition:s,name:"legend-hover-area"})).attr("opacity",s=>D(s,0,i)!==n.datum().name?cr.opacity.unselected:cr.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-area"})).attr("opacity",cr.opacity.selected)}}init(){const e=this.services.events;e.addEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({withinChartClip:!0}),r=this,i=this.getOptions(),{groupMapsTo:s}=i.data,a=Object.keys(i.axes).some(d=>i.axes[d].percentage),o=this.model.getStackedData({percentage:a,groups:this.configs.groups}),l=D(o,0,0),c=this.services.cartesianScales.getDomainAxisPosition({datum:l}),u=this.services.cartesianScales.getRangeAxisPosition({datum:l}),f=this.services.cartesianScales.getScaleByPosition(u),h=n.selectAll("path.area").data(o,d=>D(d,0,s));this.areaGenerator=kf().x(d=>this.services.cartesianScales.getValueThroughAxisPosition(c,d.data.sharedStackKey)).y0(d=>f(d[0])).y1(d=>f(d[1])).curve(this.services.curves.getD3Curve()),h.exit().attr("opacity",0).remove(),h.enter().append("path").attr("opacity",0).merge(h).data(o,d=>D(d,0,s)).attr("class","area").attr("class",d=>this.model.getColorClassName({classNameTypes:[Le.FILL],dataGroupName:D(d,0,s),originalClassName:"area"})).style("fill",d=>r.model.getFillColor(D(d,0,s))).attr("role",Ye.GRAPHICS_SYMBOL).attr("aria-roledescription","area").attr("aria-label",d=>D(d,0,s)).transition().call(d=>this.services.transitions.setupTransition({transition:d,name:"area-update-enter",animate:e})).attr("opacity",cr.opacity.selected).attr("d",this.areaGenerator)}}class Kb extends Qf{constructor(){super(...arguments),this.type="stacked-bar",this.renderType=Me.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.model.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getComponentContainer({withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,s=this.model.getStackedData({groups:this.configs.groups,divergent:!0}),a=this.model.getActiveDataGroupNames(),o=n.selectAll("g.bars").data(s,c=>D(c,0,i));o.exit().attr("opacity",0).remove(),o.enter().append("g").classed("bars",!0).attr("role",Ye.GROUP).attr("data-name","bars");const l=n.selectAll("g.bars").selectAll("path.bar").data(c=>c,c=>c.data.sharedStackKey);l.exit().remove(),l.enter().append("path").merge(l).classed("bar",!0).transition().call(c=>this.services.transitions.setupTransition({transition:c,name:"bar-update-enter",animate:e})).attr("class",c=>this.model.getColorClassName({classNameTypes:[Le.FILL],dataGroupName:c[i],originalClassName:"bar"})).style("fill",c=>this.model.getFillColor(c[i])).attr("d",c=>{const u=c.data.sharedStackKey,f=this.getBarWidth(),h=this.services.cartesianScales.getDomainValue(u)-f/2,d=h+f,m=this.services.cartesianScales.getRangeValue(c[0]);let v=this.services.cartesianScales.getRangeValue(c[1]);if(!this.isOutsideZoomedDomain(h,d)){if(Math.abs(v-m)>0&&Math.abs(v-m)>r.bars.dividerSize){const p=c[0]<0&&c[1]<=0;p&&a.length>1?this.services.cartesianScales.getOrientation()===Ft.VERTICAL?v+=c[1]===0?2:1:v-=1:p||(this.services.cartesianScales.getOrientation()===Ft.VERTICAL?v+=1:v-=1)}return tn({x0:h,x1:d,y0:m,y1:v},this.services.cartesianScales.getOrientation())}}).attr("opacity",1).attr("role",Ye.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",c=>c[1]-c[0]),this.addEventListeners()}addEventListeners(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this;this.parent.selectAll("path.bar").on("mouseover",function(i,s){const a=ee(this);a.classed("hovered",!0),r.services.events.dispatchEvent(z.Bar.BAR_MOUSEOVER,{event:i,element:a,datum:s});let o=r.model.getDisplayData(r.configs.groups).find(l=>{const c=r.services.cartesianScales.getDomainIdentifier(l),u=r.services.cartesianScales.getRangeIdentifier(l);return l[u]===s.data[s[n]]&&l[c].toString()===s.data.sharedStackKey&&l[n]===s[n]});if(o===void 0){const l=r.services.cartesianScales.getDomainIdentifier(),c=r.services.cartesianScales.getRangeIdentifier();o={[l]:s.data.sharedStackKey,[c]:s.data[s[n]],[n]:s[n]}}r.services.events.dispatchEvent(z.Tooltip.SHOW,{event:i,hoveredElement:a,data:[o]})}).on("mousemove",function(i,s){const a=ee(this);r.services.events.dispatchEvent(z.Bar.BAR_MOUSEMOVE,{event:i,element:a,datum:s}),r.services.events.dispatchEvent(z.Tooltip.MOVE,{event:i})}).on("click",function(i,s){r.services.events.dispatchEvent(z.Bar.BAR_CLICK,{event:i,element:ee(this),datum:s})}).on("mouseout",function(i,s){const a=ee(this);a.classed("hovered",!1),r.services.events.dispatchEvent(z.Bar.BAR_MOUSEOUT,{event:i,element:a,datum:s}),r.services.events.dispatchEvent(z.Tooltip.HIDE,{hoveredElement:a})})}getBarWidth(){const e=this.getOptions();if(D(e,"bars","width"))return e.bars.width;const n=this.services.cartesianScales.getMainXScale(),r=J.getSVGElementSize(this.parent,{useAttrs:!0}).width,i=this.model.getStackKeys().length,s=D(e,"bars","spacingFactor");return n.step?Math.min(e.bars.maxWidth,n.step()/2):Math.min(e.bars.maxWidth,r*s/i)}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class Qb extends Xn{constructor(){super(...arguments),this.type="scatter-stacked",this.renderType=Me.SVG}render(e){if(!D(this.getOptions(),"points","enabled"))return;const n=this.getComponentContainer({withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,s=Object.keys(r.axes).some(u=>r.axes[u].percentage),a=this.model.getStackedData({groups:this.configs.groups,percentage:s}),o=n.selectAll("g.dots").data(a,u=>D(u,0,i));o.exit().attr("opacity",0).remove();const l=o.enter().append("g").classed("dots",!0).attr("role",Ye.GROUP).merge(o).selectAll("circle.dot").data(u=>u);l.exit().attr("opacity",0).remove();const c=l.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(l).datum(u=>{const f=u[i],h=this.services.cartesianScales.getDomainIdentifier(u),d=this.services.cartesianScales.getRangeIdentifier(u);return{[i]:f,[h]:u.data.sharedStackKey,[d]:u[1]}});this.styleCircles(c,e),this.addEventListeners()}getTooltipData(e,n){const r=this.getOptions(),{groupMapsTo:i}=r.data,s=Object.keys(r.axes).some(l=>r.axes[l].percentage),a=this.model.getStackedData({groups:this.configs.groups,percentage:s}),o=[];return a.forEach((l,c)=>{l.forEach((u,f)=>{const h=u[i],d=u.data.sharedStackKey;let m=u.data[h];const v=u[1],p=this.services.cartesianScales.getDomainIdentifier(u),g=this.services.cartesianScales.getRangeIdentifier(u);m!=null&&e===this.services.cartesianScales.getDomainValue(d)&&n===this.services.cartesianScales.getRangeValue(v)&&(s&&(m=this.model.getStackedData({groups:this.configs.groups})[c][f].data[h]),m!==null&&o.push({[i]:h,[p]:d,[g]:m}))})}),this.model.getDisplayData(this.configs.groups).filter(l=>{const c=this.services.cartesianScales.getDomainIdentifier(l),u=this.services.cartesianScales.getRangeIdentifier(l);return o.find(f=>f[i]==l[i]&&f[c]==l[c]&&f[u]==l[u])!==void 0})}}const Ci=6;class PU extends tt{constructor(){super(...arguments),this.type="tree",this.renderType=Me.SVG}getLongestLabel(e){let n="";return e.forEach(r=>{const i=r.children?this.getLongestLabel(r.children):"";(i.length>n.length||r.name.length>n.length)&&(n=i.length>r.name.length?i:r.name)}),n}getMockLabelWidth(e,n){const r=e.append("text").attr("dy","0.31em").attr("x",0).attr("text-anchor","end").text(n),{width:i}=J.getSVGElementSize(r.node(),{useBBox:!0});return r.remove(),i}render(e=!0){const n=this.getComponentContainer();n.html("");const{width:r,height:i}=J.getSVGElementSize(this.parent,{useAttrs:!0});if(r<1||i<1)return;const s=this.model.getOptions(),a=this.model.getDisplayData(),o=D(s,"tree","rootTitle")||"Tree",l=this.getMockLabelWidth(n,o),c=this.getLongestLabel(a),u=this.getMockLabelWidth(n,c),f={top:0,right:0,bottom:0,left:l>0?l+Ci:30-Ci},h=pa({name:o,children:a}),d=10,m=r/6,v=$=>{const k=h.descendants().reverse(),C=h.links();let V=h,I=h;h.eachBefore(q=>{q.x<V.x&&(V=q),q.x>I.x&&(I=q)});const S=I.x-V.x,N=n.transition().call(q=>this.services.transitions.setupTransition({transition:q,name:"tree-update-viewbox",animate:!0})).attr("viewBox",[-f.left,V.x,r,S].join(" ")),O=w.selectAll("g").data(k,q=>q.id),R=this,T=O.enter().append("g").attr("transform",()=>`translate(${$.y0},${$.x0})`).attr("class",q=>q.depth!==0&&q.children&&q.children.length>0?"clickable":null).on("mouseover",function(q,Y){R.services.events.dispatchEvent(z.Tree.NODE_MOUSEOVER,{event:q,element:ee(this),datum:Y})}).on("click",function(q,Y){Y.depth!==0&&(Y.children=Y.children?null:Y._children,v(Y)),R.services.events.dispatchEvent(z.Tree.NODE_CLICK,{event:q,element:ee(this),datum:Y})}).on("mouseout",function(q,Y){R.services.events.dispatchEvent(z.Tree.NODE_MOUSEOUT,{event:q,element:ee(this),datum:Y})});T.append("circle").attr("r",2.5).attr("class",q=>q._children?"parent":"child").attr("stroke-width",10),T.append("text").attr("dy","0.31em").attr("x",q=>q._children?-Ci:Ci).attr("text-anchor",q=>q._children?"end":"start").text(q=>q.data.name).clone(!0).attr("class","text-stroke").lower(),O.merge(T).transition(N).attr("transform",q=>`translate(${q.y},${q.x})`).attr("fill-opacity",1).attr("stroke-opacity",1),O.exit().transition(N).remove().attr("transform",()=>`translate(${$.y},${$.x})`).attr("fill-opacity",0).attr("stroke-opacity",0);const F=y.selectAll("path").data(C,q=>q.target.id),G=F.enter().append("path").attr("d",()=>{const q={x:$.x0,y:$.y0};return b({source:q,target:q})});F.merge(G).transition(N).attr("d",b),F.exit().transition(N).remove().attr("d",()=>{const q={x:$.x,y:$.y};return b({source:q,target:q})}),h.eachBefore(q=>{q.x0=q.x,q.y0=q.y})},p=h.descendants(),g=p[p.length-1].depth,_=D(s,"tree","type")===Ju.DENDROGRAM?aC().size([i,r-u-g*Ci-l]):WC().nodeSize([d,m]).size([i,r-u-g*Ci-l]),b=ZA().x($=>$.y).y($=>$.x);h.x0=m/2,h.y0=0,h.descendants().forEach(($,k)=>{$.id=k,$._children=$.children}),_(h),n.attr("viewBox",[-f.left,-f.top,r,d]).style("user-select","none");const y=n.append("g").attr("class","links"),w=n.append("g").attr("class","nodes");v(h)}}var VU="#000000",BU="#ffffff",UU="#fcf4d6",HU="#fddc69",zU="#f1c21b",FU="#d2a106",GU="#b28600",qU="#8e6a00",jU="#684e00",WU="#483700",YU="#302400",ZU="#1c1500",XU={10:UU,20:HU,30:zU,40:FU,50:GU,60:qU,70:jU,80:WU,90:YU,100:ZU},KU="#fff2e8",QU="#ffd9be",JU="#ffb784",eH="#ff832b",tH="#eb6200",nH="#ba4e00",rH="#8a3800",iH="#5e2900",sH="#3e1a00",aH="#231000",oH={10:KU,20:QU,30:JU,40:eH,50:tH,60:nH,70:rH,80:iH,90:sH,100:aH},lH="#fff1f1",cH="#ffd7d9",uH="#ffb3b8",fH="#ff8389",hH="#fa4d56",dH="#da1e28",mH="#a2191f",pH="#750e13",gH="#520408",vH="#2d0709",_H={10:lH,20:cH,30:uH,40:fH,50:hH,60:dH,70:mH,80:pH,90:gH,100:vH},bH="#fff0f7",yH="#ffd6e8",wH="#ffafd2",EH="#ff7eb6",$H="#ee5396",TH="#d02670",SH="#9f1853",xH="#740937",kH="#510224",OH="#2a0a18",MH={10:bH,20:yH,30:wH,40:EH,50:$H,60:TH,70:SH,80:xH,90:kH,100:OH},CH="#f6f2ff",AH="#e8daff",IH="#d4bbff",DH="#be95ff",LH="#a56eff",RH="#8a3ffc",NH="#6929c4",PH="#491d8b",VH="#31135e",BH="#1c0f30",UH={10:CH,20:AH,30:IH,40:DH,50:LH,60:RH,70:NH,80:PH,90:VH,100:BH},HH="#edf5ff",zH="#d0e2ff",FH="#a6c8ff",GH="#78a9ff",qH="#4589ff",jH="#0f62fe",WH="#0043ce",YH="#002d9c",ZH="#001d6c",XH="#001141",KH={10:HH,20:zH,30:FH,40:GH,50:qH,60:jH,70:WH,80:YH,90:ZH,100:XH},QH="#e5f6ff",JH="#bae6ff",ez="#82cfff",tz="#33b1ff",nz="#1192e8",rz="#0072c3",iz="#00539a",sz="#003a6d",az="#012749",oz="#061727",lz={10:QH,20:JH,30:ez,40:tz,50:nz,60:rz,70:iz,80:sz,90:az,100:oz},cz="#d9fbfb",uz="#9ef0f0",fz="#3ddbd9",hz="#08bdba",dz="#009d9a",mz="#007d79",pz="#005d5d",gz="#004144",vz="#022b30",_z="#081a1c",bz={10:cz,20:uz,30:fz,40:hz,50:dz,60:mz,70:pz,80:gz,90:vz,100:_z},yz="#defbe6",wz="#a7f0ba",Ez="#6fdc8c",$z="#42be65",Tz="#24a148",Sz="#198038",xz="#0e6027",kz="#044317",Oz="#022d0d",Mz="#071908",Cz={10:yz,20:wz,30:Ez,40:$z,50:Tz,60:Sz,70:xz,80:kz,90:Oz,100:Mz},Az="#f2f4f8",Iz="#dde1e6",Dz="#c1c7cd",Lz="#a2a9b0",Rz="#878d96",Nz="#697077",Pz="#4d5358",Vz="#343a3f",Bz="#21272a",Uz="#121619",Hz={10:Az,20:Iz,30:Dz,40:Lz,50:Rz,60:Nz,70:Pz,80:Vz,90:Bz,100:Uz},zz="#f4f4f4",Fz="#e0e0e0",Gz="#c6c6c6",qz="#a8a8a8",jz="#8d8d8d",Wz="#6f6f6f",Yz="#525252",Zz="#393939",Xz="#262626",Kz="#161616",Qz={10:zz,20:Fz,30:Gz,40:qz,50:jz,60:Wz,70:Yz,80:Zz,90:Xz,100:Kz},Jz="#f7f3f2",e7="#e5e0df",t7="#cac5c4",n7="#ada8a8",r7="#8f8b8b",i7="#726e6e",s7="#565151",a7="#3c3838",o7="#272525",l7="#171414",c7={10:Jz,20:e7,30:t7,40:n7,50:r7,60:i7,70:s7,80:a7,90:o7,100:l7},Ag={black:{100:VU},blue:KH,coolGray:Hz,cyan:lz,gray:Qz,green:Cz,magenta:MH,orange:oH,purple:UH,red:_H,teal:bz,warmGray:c7,white:{0:BU},yellow:XU};const u7=t=>{if(!t)return null;for(const e of Object.keys(Ag)){const n=Ag[e];for(const r of Object.keys(n))if(n[+r]===t)return r}return null},Ig=function(){const t=ee(this.parentNode).select("rect.leaf"),e=getComputedStyle(t.node(),null).getPropertyValue("fill"),n=pr(e);let r;if(n&&(r=u7(n?n.hex():null)),r==null){const i=lf(n).l;r=Math.abs(i*100-100)}return r>50?"white":"black"};let f7=0;class h7 extends tt{constructor(){super(...arguments),this.type="treemap",this.renderType=Me.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("g[data-name='leaf']").transition("legend-hover-treemap").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-treemap"})).attr("opacity",r=>r.parent.data.name===n.datum().name?1:.3)},this.handleLegendMouseOut=()=>{this.parent.selectAll("g[data-name='leaf']").transition("legend-mouseout-treemap").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-treemap"})).attr("opacity",1)}}init(){const{events:e}=this.services;e.addEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer();this.model.getData();const r=this.model.getDisplayData(),i=this.model.getOptions(),s=D(window,"location"),{width:a,height:o}=J.getSVGElementSize(n,{useAttrs:!0}),l=pa({name:i.title||"Treemap",children:r}).sum(d=>d.value).sort((d,m)=>m.value-d.value),c=QC().size([a,o]).paddingInner(1).paddingOuter(0).round(!0)(l),u=n.selectAll("g[data-name='leaf']").data(c.leaves(),d=>d.data.name);u.exit().attr("opacity",0).remove();const f=u.enter().append("g").attr("data-name","leaf").attr("data-uid",()=>f7++).merge(u);f.attr("data-name","leaf").transition().call(d=>this.services.transitions.setupTransition({transition:d,name:"treemap-group-update",animate:e})).attr("transform",d=>`translate(${d.x0},${d.y0})`);const h=f.selectAll("rect.leaf").data(d=>[d]);h.exit().attr("width",0).attr("height",0).remove(),h.enter().append("rect").classed("leaf",!0).merge(h).attr("width",0).attr("height",0).attr("id",function(){const d=ee(this.parentNode).attr("data-uid");return`${i.style.prefix}-leaf-${d}`}).attr("class",d=>{for(;d.depth>1;)d=d.parent;return this.model.getColorClassName({classNameTypes:[Le.FILL],dataGroupName:d.data.name,originalClassName:"leaf"})}).transition().call(d=>this.services.transitions.setupTransition({transition:d,name:"treemap-leaf-update-enter",animate:e})).attr("width",d=>d.x1-d.x0).attr("height",d=>d.y1-d.y0).style("fill",d=>{for(;d.depth>1;)d=d.parent;return this.model.getFillColor(d.data.name)}),f.selectAll("clipPath").data(d=>d.data.showLabel!==!0?[]:[1],d=>d).join(d=>d.append("clipPath").attr("id",function(){const m=ee(this.parentNode).attr("data-uid");return`${i.style.prefix}-clip-${m}`}).append("use").attr("xlink:href",function(){const m=ee(this.parentNode.parentNode).attr("data-uid"),v=`${i.style.prefix}-leaf-${m}`;return new URL(`#${v}`,s)+""}),d=>null,d=>d.remove()),f.selectAll("text").data(d=>{if(d.data.showLabel!==!0)return[];let m=d;for(;m.depth>1;)m=m.parent;const v=lf(this.model.getFillColor(m.data.name));return[{text:d.data.name,color:v.l<.5?"white":"black"}]},d=>d).join(d=>{const m=d.append("text").text(v=>v.text).style("fill",Ig).attr("x",7).attr("y",18);return s&&m.attr("clip-path",function(){const v=ee(this.parentNode).attr("data-uid"),p=`${i.style.prefix}-clip-${v}`;return`url(${new URL(`#${p}`,s)+""})`}),m},d=>d.text(m=>m.text).style("fill",Ig),d=>d.remove()),this.addEventListeners()}addEventListeners(){const e=this;this.parent.selectAll("rect.leaf").on("mouseover",function(n,r){const i=ee(this);let s=getComputedStyle(this,null).getPropertyValue("fill"),a=r;for(;a.depth>1;)a=a.parent;i.transition("graph_element_mouseover_fill_update").call(o=>e.services.transitions.setupTransition({transition:o,name:"graph_element_mouseover_fill_update"})).style("fill",o=>{const l=e.model.getFillColor(o.parent.data.name);return l&&(s=l),pr(s).darker(.7).toString()}),e.services.events.dispatchEvent(z.Tooltip.SHOW,{event:n,hoveredElement:i,items:[{color:s,label:a.data.name,bold:!0},{label:r.data.name,value:r.data.value}]}),e.services.events.dispatchEvent(z.Treemap.LEAF_MOUSEOVER,{event:n,element:i,datum:r})}).on("mousemove",function(n,r){const i=ee(this);e.services.events.dispatchEvent(z.Treemap.LEAF_MOUSEMOVE,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(z.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(z.Treemap.LEAF_CLICK,{event:n,element:ee(this),datum:r})}).on("mouseout",function(n,r){const i=ee(this);i.classed("hovered",!1);let s=r;for(;s.depth>1;)s=s.parent;i.transition().call(a=>e.services.transitions.setupTransition({transition:a,name:"graph_element_mouseout_fill_update"})).style("fill",a=>e.model.getFillColor(a.parent.data.name)),e.services.events.dispatchEvent(z.Treemap.LEAF_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(z.Tooltip.HIDE,{hoveredElement:i})})}}class d7 extends tt{constructor(){super(...arguments),this.type="wordcloud",this.renderType=Me.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("text.word").transition("legend-hover-wordcloud").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-wordcloud"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("text.word").transition("legend-mouseout-wordcloud").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-wordcloud"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(z.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(z.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this,r=this.getComponentContainer().attr("width","100%").attr("height","100%"),i=this.model.getDisplayData(),s=this.getFontSizeScale(i),a=this.getOptions(),{fontSizeMapsTo:o,wordMapsTo:l}=a.wordCloud,{groupMapsTo:c}=a.data,{width:u,height:f}=J.getSVGElementSize(r,{useAttrs:!0});if(u===0||f===0)return;const h=KV().size([u,f]).words(i.map(function(m){const v=m[o];if(typeof m[o]!="number")throw Error("Badly formatted WordCloud data. `value` should only be an integer or float");return{[c]:m[c],text:m[l],size:v,value:v}})).padding(5).rotate(0).fontSize(m=>s(m.size)).on("end",d);h.start();function d(m){const v=J.appendOrSelect(r,"g.words");v.attr("transform",`translate(${h.size()[0]/2}, ${h.size()[1]/2})`);const p=v.selectAll("text").data(m,g=>`${g[c]}-${g.text}`);p.exit().attr("opacity",0).remove(),p.enter().append("text").attr("opacity",0).merge(p).style("font-size",g=>`${g.size}px`).text(function(g){return g.text}).attr("class",g=>n.model.getColorClassName({classNameTypes:[Le.FILL],dataGroupName:g[c],originalClassName:`word ${g.size>32?"light":""}`})).style("fill",g=>n.model.getFillColor(g[c],g.text,g)).attr("text-anchor","middle").transition().call(g=>n.services.transitions.setupTransition({transition:g,name:"wordcloud-text-update-enter",animate:e})).attr("transform",g=>`translate(${g.x}, ${g.y})`).attr("opacity",1)}this.addEventListeners()}getFontSizeScale(e){const n=this.getOptions(),{fontSizeMapsTo:r}=n.wordCloud,i=e.map(l=>l[r]).filter(l=>l),s=J.getHTMLElementSize(this.services.domUtils.getMainContainer()),a=i.length>0,o=a?Rn(i):[1,1];return Vn().domain(o).range(a?n.wordCloud.fontSizeRange(s,e):[4,4])}addEventListeners(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this,i=Qo(s=>{const a=r.parent.selectAll("text.word").transition("wordcloud-word-mouse-highlight").call(o=>r.services.transitions.setupTransition({transition:o,name:"wordcloud-word-mouse-highlight"}));s===null?a.attr("opacity",1):a.attr("opacity",function(){return s===this?1:.3})},6);this.parent.selectAll("text.word").on("mouseover",function(s,a){const o=this;i(o),r.services.events.dispatchEvent(z.WordCloud.WORD_MOUSEOVER,{event:s,element:ee(this),datum:a}),r.services.events.dispatchEvent(z.Tooltip.SHOW,{event:s,hoveredElement:o,items:[{label:e.tooltip.wordLabel,value:a.text},{label:e.tooltip.valueLabel,value:a.value},{label:e.tooltip.groupLabel,value:a[n],class:r.model.getColorClassName({classNameTypes:[Le.TOOLTIP],dataGroupName:a[n]})}]})}).on("mousemove",function(s,a){const o=ee(this);r.services.events.dispatchEvent(z.WordCloud.WORD_MOUSEMOVE,{element:o,datum:a}),r.services.events.dispatchEvent(z.Tooltip.MOVE,{event:s})}).on("click",function(s,a){r.services.events.dispatchEvent(z.WordCloud.WORD_CLICK,{event:s,element:ee(this),datum:a})}).on("mouseout",function(s,a){const o=ee(this);i(null),r.services.events.dispatchEvent(z.WordCloud.WORD_MOUSEOUT,{event:s,element:o,datum:a}),r.services.events.dispatchEvent(z.Tooltip.HIDE,{hoveredElement:o})})}}class m7 extends tt{constructor(){super(...arguments),this.type="geo",this.renderType=Me.SVG}render(){const e=this.getComponentContainer({withinChartClip:!0}),{width:n,height:r}=J.getSVGElementSize(e,{useAttrs:!0});if(n<1||r<1)return;const i=this.getProjection(),s=D(this.getOptions(),"geoData"),a=this.model.getCombinedData(),o={},l={};Object.keys(a).forEach(p=>{typeof a[p].value=="number"?o[p]=a[p]:l[p]=a[p]});const c=$U(s,Object.values(l)),u=yU(s,{type:"GeometryCollection",geometries:Object.values(o)}),f=i.fitSize([n,r],u),h=IM().projection(f);J.appendOrSelect(e,"g.geo").selectAll("path").data(u.features).join("path").attr("d",h);const d=this.services.domUtils.generateElementIDString("geo-pattern-stripes"),m=J.appendOrSelect(e,"defs");J.appendOrSelect(m,"pattern").attr("id",d).attr("width",5).attr("height",10).attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)").append("path").classed("pattern-fill",!0).attr("d",_a()([[0,0],[0,10]]));const v=J.appendOrSelect(e,"g.missing-data");J.appendOrSelect(v,"path").datum(c).attr("d",h).style("fill",`url(#${d})`)}getProjection(){let e=null;switch(D(this.getOptions(),"thematic","projection")){case or.geoEqualEarth:e=KM();break;case or.geoAlbers:e=GM();break;case or.geoConicEqualArea:e=O1();break;case or.geoConicEquidistant:e=ZM();break;case or.geoEquirectangular:e=WM();break;case or.geoMercator:e=qM();break;case or.geoNaturalEarth1:e=QM();break;default:throw new Error("Projection is not supported.")}return e}}class p7 extends m7{constructor(){super(...arguments),this.type="choropleth"}render(e=!0){super.render();const n=this.model.getCombinedData();this.getComponentContainer({withinChartClip:!0}).select("g.geo").selectAll("path").classed("border",!0).attr("class",r=>this.model.getColorClassName({value:n[r.properties.NAME].value,originalClassName:"border"})),this.addCountryAreaEventListener()}addCountryAreaEventListener(){const e=this,n=this.model.getCombinedData();this.parent.selectAll("path.border").on("mouseover",function(r,i){const s=ee(this);e.services.events.dispatchEvent(Pi.CHOROPLETH_MOUSEOVER,{event:r,element:s,datum:n[i.properties.NAME]}),e.services.events.dispatchEvent(Vs.SHOW,{event:r,hoveredElement:s,items:[{label:i.properties.NAME,value:n[i.properties.NAME].value}]})}).on("mousemove",function(r,i){e.services.events.dispatchEvent(Pi.CHOROPLETH_MOUSEMOVE,{event:r,element:ee(this),datum:n[i.properties.NAME]}),e.services.events.dispatchEvent(Vs.MOVE,{event:r})}).on("click",function(r,i){e.services.events.dispatchEvent(Pi.CHOROPLETH_CLICK,{event:r,element:ee(this),datum:n[i.properties.NAME]})}).on("mouseout",function(r,i){const s=ee(this);e.services.events.dispatchEvent(Pi.CHOROPLETH_MOUSEOUT,{event:r,element:s,datum:n[i.properties.NAME]}),e.services.events.dispatchEvent(Vs.HIDE,{event:r,hoveredElement:s})})}}function Jb(t,e){Ze(2,arguments);var n=at(t),r=Ut(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function Jf(t,e){Ze(2,arguments);var n=at(t),r=Ut(e);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),s=new Date(n.getTime());s.setMonth(n.getMonth()+r+1,0);var a=s.getDate();return i>=a?s:(n.setFullYear(s.getFullYear(),s.getMonth(),i),n)}var g7=36e5;function ey(t,e){Ze(2,arguments);var n=Ut(e);return Ol(t,n*g7)}function Dg(t){Ze(1,arguments);var e=at(t);return e.setHours(0,0,0,0),e}var v7=864e5;function _7(t,e){Ze(2,arguments);var n=Dg(t),r=Dg(e),i=n.getTime()-fu(n),s=r.getTime()-fu(r);return Math.round((i-s)/v7)}var b7=6e4;function Hu(t,e){Ze(2,arguments);var n=Ut(e);return Ol(t,n*b7)}function zu(t,e){Ze(2,arguments);var n=Ut(e);return Ol(t,n*1e3)}function ty(t,e){Ze(2,arguments);var n=Ut(e);return Jf(t,n*12)}function Ws(t,e){Ze(2,arguments);var n=at(t),r=at(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}var y7=6e4,w7=36e5;function E7(t,e){Ze(2,arguments);var n=at(t),r=at(e),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function $7(t,e){Ze(2,arguments);var n=at(t),r=at(e);return n.getFullYear()-r.getFullYear()}function Lg(t,e){var n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function T7(t,e){Ze(2,arguments);var n=at(t),r=at(e),i=Lg(n,r),s=Math.abs(_7(n,r));n.setDate(n.getDate()-i*s);var a=+(Lg(n,r)===-i),o=i*(s-a);return o===0?0:o}function eh(t,e){return Ze(2,arguments),at(t).getTime()-at(e).getTime()}var Rg={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},S7="trunc";function th(t){return t?Rg[t]:Rg[S7]}function x7(t,e,n){Ze(2,arguments);var r=eh(t,e)/w7;return th(n==null?void 0:n.roundingMethod)(r)}function Ng(t,e,n){Ze(2,arguments);var r=eh(t,e)/y7;return th(n==null?void 0:n.roundingMethod)(r)}function k7(t){Ze(1,arguments);var e=at(t);return e.setHours(23,59,59,999),e}function O7(t){Ze(1,arguments);var e=at(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function M7(t){Ze(1,arguments);var e=at(t);return k7(e).getTime()===O7(e).getTime()}function C7(t,e){Ze(2,arguments);var n=at(t),r=at(e),i=Ws(n,r),s=Math.abs(E7(n,r)),a;if(s<1)a=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*s);var o=Ws(n,r)===-i;M7(at(t))&&s===1&&Ws(t,r)===1&&(o=!1),a=i*(s-Number(o))}return a===0?0:a}function Pg(t,e,n){Ze(2,arguments);var r=eh(t,e)/1e3;return th(n==null?void 0:n.roundingMethod)(r)}function A7(t,e){Ze(2,arguments);var n=at(t),r=at(e),i=Ws(n,r),s=Math.abs($7(n,r));n.setFullYear(1584),r.setFullYear(1584);var a=Ws(n,r)===-i,o=i*(s-Number(a));return o===0?0:o}function I7(t,e){Ze(2,arguments);var n=Ut(e);return Jb(t,-n)}function D7(t,e){Ze(2,arguments);var n=Ut(e);return Jf(t,-n)}function L7(t,e){Ze(2,arguments);var n=Ut(e);return ey(t,-n)}function Vg(t,e){Ze(2,arguments);var n=Ut(e);return Hu(t,-n)}function Bg(t,e){Ze(2,arguments);var n=Ut(e);return zu(t,-n)}function R7(t,e){Ze(2,arguments);var n=Ut(e);return ty(t,-n)}function ny(t){var e=t==null?0:t.length;return e?Pl(t,1):[]}class N7 extends xr{zoomIn(e,n,r){let i,s,a;const o=r||Fi;e&&(i=e.x,s=e.y,a=2);const{width:l,height:c}=J.getSVGElementSize(this.services.domUtils.getHolder(),{useClientDimensions:!0});n.transition().duration(o.duration).ease(o.ease).attr("transform",`translate(${l/2}, ${c/2}) scale(${a}) translate(${-i},${-s})`),this.services.events.dispatchEvent(z.CanvasZoom.CANVAS_ZOOM_IN,{element:ee(e)})}zoomOut(e,n){const r=n||Fi;e.transition().duration(r.duration).ease(r.ease).attr("transform",""),this.services.events.dispatchEvent(z.CanvasZoom.CANVAS_ZOOM_OUT)}}class P7 extends xr{init(){this.documentFragment=document.createDocumentFragment()}addEventListener(e,n){this.documentFragment.addEventListener(e,n)}removeEventListener(e,n){this.documentFragment.removeEventListener(e,n)}dispatchEvent(e,n){let r;n?r=new CustomEvent(e,{detail:n}):(r=document.createEvent("Event"),r.initEvent(e,!1,!0)),this.documentFragment.dispatchEvent(r)}}class V7 extends xr{constructor(e,n){super(e,n)}downloadCSV(e,n){const r=document.createElement("a"),i="text/csv;encoding:utf-8";if(navigator.msSaveBlob)navigator.msSaveBlob(new Blob([e],{type:i}),n);else if(URL&&"download"in r){const s=URL.createObjectURL(new Blob([e],{type:i}));r.href=s,r.setAttribute("download",n),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)}else location.href=`data:application/octet-stream,${encodeURIComponent(e)}`}downloadImage(e,n){const r=document.createElement("a");r.download=n,r.href=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}class B7 extends xr{constructor(){super(...arguments),this.pendingTransitions={}}init(){var e;(e=this.services.events)==null||e.addEventListener(z.Model.UPDATE,()=>{this.pendingTransitions={}})}setupTransition({transition:e,name:n,animate:r}){return this.pendingTransitions[e._id]=e,e.on("end interrupt cancel",()=>{delete this.pendingTransitions[e._id]}),this.model.getOptions().animations===!1||r===!1?e.duration(0):e.duration(D(Yp,n,"duration")||Yp.default.duration)}getPendingTransitions(){return this.pendingTransitions}}let U7=class extends xr{constructor(){super(...arguments),this.scaleTypes={top:null,right:null,bottom:null,left:null},this.scales={top:null,right:null,bottom:null,left:null}}getDomainAxisPosition({datum:e=null}={}){if(this.dualAxes&&e){const n=this.model.getOptions(),{groupMapsTo:r}=n.data,i=D(n,"axes",this.secondaryDomainAxisPosition),s=e[r];if(i!=null&&i.correspondingDatasets&&i.correspondingDatasets.includes(s))return this.secondaryDomainAxisPosition}return this.domainAxisPosition}getRangeAxisPosition({datum:e=null,groups:n=null}={}){if(this.dualAxes){const r=this.model.getOptions(),{groupMapsTo:i}=r.data,s=D(r,"axes",this.secondaryRangeAxisPosition);let a;if(e!==null?a=e[i]:n&&n.length>0&&(a=n[0]),s!=null&&s.correspondingDatasets&&s.correspondingDatasets.includes(a))return this.secondaryRangeAxisPosition}return this.rangeAxisPosition}getAxisOptions(e){return D(this.model.getOptions(),"axes",e)}getDomainAxisOptions(){const e=this.getDomainAxisPosition();return this.getAxisOptions(e)}getRangeAxisOptions(){const e=this.getRangeAxisPosition();return this.getAxisOptions(e)}getScaleLabel(e){return this.getAxisOptions(e).title||(e===ae.BOTTOM||e===ae.TOP?"x-value":"y-value")}getDomainLabel(){return this.getScaleLabel(this.getDomainAxisPosition())}getRangeLabel(){return this.getScaleLabel(this.getRangeAxisPosition())}update(){this.determineAxisDuality(),this.findDomainAndRangeAxes(),this.determineOrientation(),Object.keys(ae).map(e=>ae[e]).forEach(e=>{this.scales[e]=this.createScale(e)})}findDomainAndRangeAxes(){const e=this.findVerticalAxesPositions(),n=this.findHorizontalAxesPositions(),r=this.findDomainAndRangeAxesPositions(e,n);this.domainAxisPosition=r.primaryDomainAxisPosition,this.rangeAxisPosition=r.primaryRangeAxisPosition,this.isDualAxes()&&(this.secondaryDomainAxisPosition=r.secondaryDomainAxisPosition,this.secondaryRangeAxisPosition=r.secondaryRangeAxisPosition)}determineOrientation(){(this.rangeAxisPosition===ae.LEFT||this.rangeAxisPosition===ae.RIGHT)&&(this.domainAxisPosition===ae.BOTTOM||this.domainAxisPosition===ae.TOP)?this.orientation=Ft.VERTICAL:this.orientation=Ft.HORIZONTAL}isDualAxes(){return this.dualAxes}determineAxisDuality(){var e,n,r,i;const s=this.model.getOptions(),a=D(s,"axes");((e=a[ae.LEFT])!=null&&e.correspondingDatasets&&a[ae.RIGHT]||(n=a[ae.RIGHT])!=null&&n.correspondingDatasets&&a[ae.LEFT]||(r=a[ae.TOP])!=null&&r.correspondingDatasets&&a[ae.BOTTOM]||(i=a[ae.BOTTOM])!=null&&i.correspondingDatasets&&a[ae.TOP])&&(this.dualAxes=!0)}getCustomDomainValuesByposition(e){const n=D(this.model.getOptions(),"axes",e,"domain");if(n&&!Array.isArray(n))throw new Error(`Domain in ${e} axis is not a valid array`);if(Array.isArray(n)&&(this.scaleTypes[e]===xe.LINEAR||this.scaleTypes[e]===xe.TIME)&&n.length!==2)throw new Error(`There can only be 2 elements in domain for scale type: ${this.scaleTypes[e]}`);return n}getOrientation(){return this.orientation}getScaleByPosition(e){return this.scales[e]}getScaleTypeByPosition(e){return this.scaleTypes[e]}getDomainAxisScaleType(){const e=this.getDomainAxisPosition();return this.getScaleTypeByPosition(e)}getRangeAxisScaleType(){const e=this.getRangeAxisPosition();return this.getScaleTypeByPosition(e)}getDomainScale(){return this.scales[this.domainAxisPosition]}getRangeScale(){return this.scales[this.rangeAxisPosition]}getMainXAxisPosition(){const e=[ae.BOTTOM,ae.TOP];return[this.domainAxisPosition,this.rangeAxisPosition].find(n=>e.indexOf(n)>-1)}getMainYAxisPosition(){const e=[ae.LEFT,ae.RIGHT];return[this.domainAxisPosition,this.rangeAxisPosition].find(n=>e.indexOf(n)>-1)}getMainXScale(){return this.scales[this.getMainXAxisPosition()]}getMainYScale(){return this.scales[this.getMainYAxisPosition()]}getValueFromScale(e,n,r,i){const s=this.model.getOptions(),a=D(s,"axes")[r],{mapsTo:o}=a,l=D(i,o)!==null?i[o]:i;let c;switch(n){case xe.LABELS:c=e(l)+e.step()/2;break;case xe.TIME:c=e(new Date(l));break;default:c=e(l)}return c}getBoundedScaledValues(e){const{bounds:n}=this.model.getOptions(),r=this.getRangeAxisPosition({datum:e}),i=this.scales[r],s=this.model.getOptions(),a=D(s,"axes")[r],{mapsTo:o}=a,l=e[o]!==void 0?e[o]:e;return[i(D(e,n.upperBoundMapsTo)!==null?e[n.upperBoundMapsTo]:l),i(D(e,n.lowerBoundMapsTo)!==null?e[n.lowerBoundMapsTo]:l)]}getValueThroughAxisPosition(e,n){const r=this.scaleTypes[e],i=this.scales[e];return this.getValueFromScale(i,r,e,n)}getDomainValue(e){const n=this.getDomainAxisPosition({datum:e});return this.getValueThroughAxisPosition(n,e)}getRangeValue(e){const n=this.getRangeAxisPosition({datum:e});return this.getValueThroughAxisPosition(n,e)}getMainXScaleType(){return this.getScaleTypeByPosition(this.getMainXAxisPosition())}getMainYScaleType(){return this.getScaleTypeByPosition(this.getMainYAxisPosition())}getDomainIdentifier(e){const n=this.model.getOptions();return D(n,"axes",this.getDomainAxisPosition({datum:e}),"mapsTo")}getRangeIdentifier(e){const n=this.model.getOptions();return D(n,"axes",this.getRangeAxisPosition({datum:e}),"mapsTo")}extendsDomain(e,n){const r=this.model.getOptions(),i=D(r,"axes",e);if(i.scaleType===xe.TIME){const s=D(r,"timeScale","addSpaceOnEdges");return H7(n,s)}else return z7(n,Dr.paddingRatio,i.scaleType)}findVerticalAxesPositions(){const e=this.model.getOptions(),n=D(e,"axes"),r=this.isDualAxes();return D(n,ae.LEFT)===null&&D(n,ae.RIGHT)!==null||D(n,ae.RIGHT,"main")===!0||r&&D(n,ae.LEFT,"correspondingDatasets")?{primary:ae.RIGHT,secondary:ae.LEFT}:{primary:ae.LEFT,secondary:ae.RIGHT}}findHorizontalAxesPositions(){const e=this.model.getOptions(),n=D(e,"axes"),r=this.isDualAxes();return D(n,ae.BOTTOM)===null&&D(n,ae.TOP)!==null||D(n,ae.TOP,"main")===!0||r&&D(n,ae.BOTTOM,"correspondingDatasets")?{primary:ae.TOP,secondary:ae.BOTTOM}:{primary:ae.BOTTOM,secondary:ae.TOP}}findDomainAndRangeAxesPositions(e,n){const r=this.model.getOptions(),i=D(r,"axes",e.primary),s=D(r,"axes",n.primary),a=i.scaleType||xe.LINEAR,o=s.scaleType||xe.LINEAR,l={primaryDomainAxisPosition:null,secondaryDomainAxisPosition:null,primaryRangeAxisPosition:null,secondaryRangeAxisPosition:null};return l.primaryDomainAxisPosition=n.primary,l.primaryRangeAxisPosition=e.primary,l.secondaryDomainAxisPosition=n.secondary,l.secondaryRangeAxisPosition=e.secondary,(!(o===xe.LABELS||o===xe.TIME)&&a===xe.LABELS||a===xe.TIME)&&(l.primaryDomainAxisPosition=e.primary,l.primaryRangeAxisPosition=n.primary,l.secondaryDomainAxisPosition=e.secondary,l.secondaryRangeAxisPosition=n.secondary),l}getScaleDomain(e){const n=this.model.getOptions(),r=D(n,"axes",e),i=D(n,"bounds"),{includeZero:s}=r,a=D(r,"scaleType")||xe.LINEAR;if(this.model.isDataEmpty())return[];if(r.binned){const{bins:g}=this.model.getBinConfigurations();return[0,ti(g,_=>_.length)]}else if(r.limitDomainToBins){const{bins:g}=this.model.getBinConfigurations(),_=this.model.getStackKeys({bins:g});return[_[0].split("-")[0],_[_.length-1].split("-")[1]]}const o=this.model.getDisplayData(),{extendLinearDomainBy:l,mapsTo:c,percentage:u,thresholds:f}=r,{reference:h,compareTo:d}=Dr.ratio;if(r.domain)return a===xe.LABELS?r.domain:(a===xe.TIME&&(r.domain=r.domain.map(g=>g.getTime===void 0?new Date(g):g)),this.extendsDomain(e,r.domain));if(u)return[0,100];if(r&&a===xe.LABELS)return oa(o.map(g=>g[c]));let m,v;const p=this.model.getDataGroupNames();if(a===xe.LABELS_RATIO)return o.map(g=>`${g[h]}/${g[d]}`);if(a===xe.TIME)v=o.map(g=>+new Date(g[c]));else if(i&&n.axes)v=[],o.forEach(g=>{v.push(g[c]),g[i.upperBoundMapsTo]&&v.push(g[i.upperBoundMapsTo]),g[i.lowerBoundMapsTo]&&v.push(g[i.lowerBoundMapsTo])});else if(r.stacked===!0&&p&&e===this.getRangeAxisPosition()){const{groupMapsTo:g}=n.data,_=this.model.getDataValuesGroupedByKeys({groups:p}),b=o.filter(w=>!p.includes(w[g])),y=[];_.forEach(w=>{const{...$}=w;let k=0,C=0;Object.values($).forEach(V=>{isNaN(V)||(V<0?C+=V:k+=V)}),y.push([C,k])}),v=[...ny(y),...b.map(w=>w[c])]}else v=[],o.forEach(g=>{const _=g[c];Array.isArray(_)&&_.length===2?(v.push(_[0]),v.push(_[1])):(l&&v.push(Math.max(g[c],g[l])),v.push(_))});return a!==xe.TIME&&a!==xe.LOG&&s&&v.push(0),f&&f.length>0&&f.forEach(g=>{const _=D(g,"value");_!==null&&v.push(_)}),m=Rn(v),m=this.extendsDomain(e,m),m}createScale(e){const n=this.model.getOptions(),r=D(n,"axes",e);if(!r)return null;const i=D(r,"scaleType")||xe.LINEAR;this.scaleTypes[e]=i;let s;return i===xe.TIME?s=j1():i===xe.LOG?s=V1().base(r.base||10):i===xe.LABELS||i===xe.LABELS_RATIO?s=ga():s=Vn(),s.domain(this.getScaleDomain(e)),s}getHighestDomainThreshold(){const e=D(this.model.getOptions(),"axes"),n=this.getDomainAxisPosition(),{thresholds:r}=e[n];if(!Array.isArray(r)||Array.isArray(r)&&!r.length)return null;const i=this.getDomainScale(),s=r.sort((a,o)=>o.value-a.value)[0];return this.getScaleTypeByPosition(n)===xe.TIME&&(typeof s.value=="string"||s.value.getTime===void 0)&&(s.value=new Date(s.value)),{threshold:s,scaleValue:i(s.value)}}getHighestRangeThreshold(){const e=D(this.model.getOptions(),"axes"),n=this.getRangeAxisPosition(),{thresholds:r}=e[n];if(!Array.isArray(r)||Array.isArray(r)&&!r.length)return null;const i=this.getRangeScale(),s=r.sort((a,o)=>o.value-a.value)[0];return{threshold:s,scaleValue:i(s.value)}}};function H7(t,e){const n=new Date(t[0]),r=new Date(t[1]);return A7(r,n)>1?[R7(n,e),ty(r,e)]:C7(r,n)>1?[D7(n,e),Jf(r,e)]:T7(r,n)>1?[I7(n,e),Jb(r,e)]:x7(r,n)>1?[L7(n,e),ey(r,e)]:Ng(r,n)>30?[Vg(n,e*30),Hu(r,e*30)]:Ng(r,n)>1?[Vg(n,e),Hu(r,e)]:Pg(r,n)>15?[Bg(n,e*15),zu(r,e*15)]:Pg(r,n)>1?[Bg(n,e),zu(r,e)]:[n,r]}function z7([t,e],n,r){const i=(e-t)*n,s=e<=0&&e+i>0?0:e+i;let a=t>=0&&t-i<0?0:t-i;if(r===xe.LOG&&a<=0){if(t<=0)throw Error("Data must have values greater than 0 if log scale type is used.");a=t}return[a,s]}let F7=class extends xr{constructor(){super(...arguments),this.curveTypes={curveLinear:Sl,curveLinearClosed:r_,curveBasis:XA,curveBasisClosed:KA,curveBasisOpen:QA,curveBundle:JA,curveCardinal:eI,curveCardinalClosed:tI,curveCardinalOpen:nI,curveCatmullRom:rI,curveCatmullRomClosed:iI,curveCatmullRomOpen:sI,curveMonotoneX:aI,curveMonotoneY:oI,curveNatural:lI,curveStep:cI,curveStepAfter:fI,curveStepBefore:uI}}getD3Curve(){let e="curveLinear";const n=this.model.getOptions().curve;if(n&&(typeof n=="string"?e=n:e=n.name),this.curveTypes[e]){let r=this.curveTypes[e];return n&&Object.keys(n).forEach(i=>{r[i]&&(r=r[i](n[i]))}),r}return console.warn(`The curve type '${e}' is invalid, using 'curveLinear' instead`),this.curveTypes.curveLinear}},G7=class extends xr{isZoomBarEnabled(){if(!this.services.cartesianScales||!D(this.model.getOptions(),"zoomBar","top","enabled"))return!1;this.services.cartesianScales.findDomainAndRangeAxes();const e=this.services.cartesianScales.getMainXAxisPosition(),n=D(this.model.getOptions(),"axes",e,"scaleType");return e===ae.BOTTOM&&n===xe.TIME}getZoomBarData(){const e=this.model.getZoomBarData();return e&&e.length>1?e:this.model.getDisplayData()}getDefaultZoomBarDomain(e){if(!this.services.zoom)throw new Error("Services zoom not defined");const n=e||this.services.zoom.getZoomBarData(),{cartesianScales:r}=this.services;if(!r)throw new Error("Services cartesianScales undefined");const i=r.getMainXAxisPosition(),s=r.getDomainIdentifier(),a=D(this.model.getOptions(),"axes",i,"domain");if(Array.isArray(a)&&a.length===2)return a;if(!i)throw new Error("Not defined: mainXAxisPosition");return r.extendsDomain(i,Rn(n,o=>o[s]))}handleDomainChange(e,n={dispatchEvent:!0}){var r;this.model.set({zoomDomain:e},{animate:!1}),n.dispatchEvent&&((r=this.services.events)==null||r.dispatchEvent(z.ZoomDomain.CHANGE,{newDomain:e}))}getZoomRatio(){return D(this.model.getOptions(),"zoomBar","zoomRatio")}filterDataForRangeAxis(e,n){var r;const i=this.model.get("zoomDomain"),s=Object.assign({stacked:!1},n),a=D(this.model.getOptions(),"zoomBar","updateRangeAxis");if(this.isZoomBarEnabled()&&a&&i){const o=s.stacked?"sharedStackKey":(r=this.services.cartesianScales)==null?void 0:r.getDomainIdentifier(),l=e.filter(c=>new Date(c[o])>=i[0]&&new Date(c[o])<=i[1]);if(l.length>0)return l}return e}zoomIn(e=this.getZoomRatio()){var n;const r=this.model.get("zoomDomain"),i=dn.handleWidth,s=(n=this.services.cartesianScales)==null?void 0:n.getMainXScale().copy();s.domain(this.getDefaultZoomBarDomain());const a=s(r[0]),o=s(r[1]);if(o-a<i+1)return;const l=s.range(),c=o-a,u=Math.min((l[1]-l[0])/2*(e/2),c/2);let f=a+u,h=o-u;f>=h&&(f=a+c/2-i/2,h=o-c/2+i/2);const d=[s.invert(f),s.invert(h)];(r[0].valueOf()!==d[0].valueOf()||r[1].valueOf()!==d[1].valueOf())&&this.handleDomainChange(d)}zoomOut(e=this.getZoomRatio()){const n=this.model.get("zoomDomain");if(!this.services.cartesianScales)throw new Error("Services cartesianScales undefined");const r=this.services.cartesianScales.getMainXScale().copy();r.domain(this.getDefaultZoomBarDomain());const i=r(n[0]),s=r(n[1]),a=r.range(),o=(a[1]-a[0])/2*(e/2),l=Math.max(i-o,a[0]),c=Math.min(s+o,a[1]),u=[r.invert(l),r.invert(c)];(n[0].valueOf()!==u[0].valueOf()||n[1].valueOf()!==u[1].valueOf())&&this.handleDomainChange(u)}resetZoomDomain(){const e=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();(e[0].valueOf()!==n[0].valueOf()||e[1].valueOf()!==n[1].valueOf())&&this.handleDomainChange(n)}isMinZoomDomain(){const e=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();if(!e||!n)return!1;const r=e[1].valueOf()-e[0].valueOf(),i=n[1].valueOf()-n[0].valueOf(),s=D(this.model.getOptions(),"zoomBar","minZoomRatio");return r/i<s}isMaxZoomDomain(){const e=this.model.get("zoomDomain"),n=this.getDefaultZoomBarDomain();return!!(e&&n&&e[0].valueOf()===n[0].valueOf()&&e[1].valueOf()===n[1].valueOf())}isEmptyState(){return this.getZoomBarData().length===0}isZoomBarLoading(e){return D(this.model.getOptions(),"zoomBar",e,"loading")}isZoomBarLocked(e){return D(this.model.getOptions(),"zoomBar",e,"locked")}};function q7(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}function j7(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:q7(t,e,n)}var W7="\\ud800-\\udfff",Y7="\\u0300-\\u036f",Z7="\\ufe20-\\ufe2f",X7="\\u20d0-\\u20ff",K7=Y7+Z7+X7,Q7="\\ufe0e\\ufe0f",J7="\\u200d",e9=RegExp("["+J7+W7+K7+Q7+"]");function ry(t){return e9.test(t)}function t9(t){return t.split("")}var iy="\\ud800-\\udfff",n9="\\u0300-\\u036f",r9="\\ufe20-\\ufe2f",i9="\\u20d0-\\u20ff",s9=n9+r9+i9,a9="\\ufe0e\\ufe0f",o9="["+iy+"]",Fu="["+s9+"]",Gu="\\ud83c[\\udffb-\\udfff]",l9="(?:"+Fu+"|"+Gu+")",sy="[^"+iy+"]",ay="(?:\\ud83c[\\udde6-\\uddff]){2}",oy="[\\ud800-\\udbff][\\udc00-\\udfff]",c9="\\u200d",ly=l9+"?",cy="["+a9+"]?",u9="(?:"+c9+"(?:"+[sy,ay,oy].join("|")+")"+cy+ly+")*",f9=cy+ly+u9,h9="(?:"+[sy+Fu+"?",Fu,ay,oy,o9].join("|")+")",d9=RegExp(Gu+"(?="+Gu+")|"+h9+f9,"g");function m9(t){return t.match(d9)||[]}function p9(t){return ry(t)?m9(t):t9(t)}function g9(t){return function(e){e=$a(e);var n=ry(e)?p9(e):void 0,r=n?n[0]:e.charAt(0),i=n?j7(n,1).join(""):e.slice(1);return r[t]()+i}}var v9=g9("toUpperCase");const _9=v9;function b9(t){return _9($a(t).toLowerCase())}var y9=Ib(function(t,e,n){return e=e.toLowerCase(),t+(n?b9(e):e)});const w9=y9;class Hn{constructor(e,n){this.components=[],this.services={canvasZoom:N7,domUtils:J,events:P7,files:V7,gradientUtils:Eu,transitions:B7},this.model=new er(this.services)}init(e,n){this.model.set({holder:e},{skipUpdate:!0}),Object.keys(this.services).forEach(r=>{const i=this.services[r];this.services[r]=new i(this.model,this.services)}),this.services.events.addEventListener(z.Model.UPDATE,r=>{const i=!!D(r,"detail","animate");this.update(i)}),this.model.setData(n.data),this.services.events.addEventListener(z.Chart.RESIZE,()=>{this.update(!1)}),this.components=this.getComponents(),this.update()}getComponents(){return console.error("getComponents() method is not implemented"),[]}update(e=!0){if(!this.components)return;Object.keys(this.services).forEach(i=>{this.services[i].update()}),this.components.forEach(i=>i.render(e));const n=this.services.transitions.getPendingTransitions(),r=Object.keys(n).map(i=>n[i].end().catch(s=>s));Promise.all(r).then(()=>this.services.events.dispatchEvent(z.Chart.RENDER_FINISHED))}destroy(){this.components.forEach(e=>e.destroy()),this.services.domUtils.getHolder().remove(),this.model.set({destroyed:!0},{skipUpdate:!0})}getChartComponents(e,n){const r=this.model.getOptions(),i=D(r,"toolbar","enabled"),s={id:"legend",components:[new Zf(this.model,this.services)],growth:Ge.PREFERRED},a=D(r,"canvasZoom","enabled");a&&a===!0&&e.push(new aU(this.model,this.services));const o=!!this.model.getOptions().title,l={id:"title",components:[new Sa(this.model,this.services)],growth:Ge.STRETCH},c={id:"toolbar",components:[new zl(this.model,this.services)],growth:Ge.PREFERRED},u={id:"header",components:[new pn(this.model,this.services,[l,...i?[c]:[]],{direction:Et.ROW,alignItems:fs.CENTER})],growth:Ge.PREFERRED},f={id:"graph-frame",components:e,growth:Ge.STRETCH,renderType:D(n,"graphFrameRenderType")||Me.SVG},h=D(n,"excludeLegend")!==!0&&r.legend.enabled!==!1;let d=Et.COLUMN;if(h){const g=D(r,"legend","position");g==="left"?(d=Et.ROW,r.legend.orientation||(r.legend.orientation=Zs.VERTICAL)):g==="right"?(d=Et.ROW_REVERSE,r.legend.orientation||(r.legend.orientation=Zs.VERTICAL)):g==="bottom"&&(d=Et.COLUMN_REVERSE)}const m={id:"spacer",components:[new wr(this.model,this.services)],growth:Ge.PREFERRED},v={id:"full-frame",components:[new pn(this.model,this.services,[...h?[s]:[],...h?[m]:[],f],{direction:d})],growth:Ge.STRETCH},p=[];if(o||i){p.push(u);const g={id:"spacer",components:[new wr(this.model,this.services,i?{size:15}:void 0)],growth:Ge.PREFERRED};p.push(g)}return p.push(v),[new Xf(this.model,this.services),new Fl(this.model,this.services),new pn(this.model,this.services,p,{direction:Et.COLUMN})]}}class fn extends Hn{constructor(e,n){super(e,n),this.services=Object.assign(this.services,{cartesianScales:U7,curves:F7,zoom:G7}),this.model=new wi(this.services)}getAxisChartComponents(e,n){const r=this.model.getOptions(),i=D(r,"zoomBar",ae.TOP,"enabled"),s=D(r,"toolbar","enabled");this.services.cartesianScales.determineAxisDuality(),this.services.cartesianScales.findDomainAndRangeAxes(),this.services.cartesianScales.determineOrientation();const a=this.services.cartesianScales.getMainXAxisPosition(),o=D(r,"axes",a,"scaleType"),l=i&&a===ae.BOTTOM&&o===xe.TIME,c=this.services.zoom.isZoomBarLocked(ae.TOP),u=!!this.model.getOptions().title,f={id:"title",components:[new Sa(this.model,this.services)],growth:Ge.STRETCH},h={id:"toolbar",components:[new zl(this.model,this.services)],growth:Ge.PREFERRED},d={id:"header",components:[new pn(this.model,this.services,[f,...s?[h]:[]],{direction:Et.ROW,alignItems:fs.CENTER})],growth:Ge.PREFERRED},m={id:"legend",components:[new Zf(this.model,this.services)],growth:Ge.PREFERRED};l&&!c&&e.push(new Hb(this.model,this.services),new oU(this.model,this.services)),e.push(new cU(this.model,this.services)),e.push(new uU(this.model,this.services));const v={id:"graph-frame",components:e,growth:Ge.STRETCH,renderType:Me.SVG},p=D(n,"legend","enabled")!==!1&&this.model.getOptions().legend.enabled!==!1;let g=Et.COLUMN;if(p){const $=D(this.model.getOptions(),"legend","position");$===Bs.LEFT?(g=Et.ROW,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=Zs.VERTICAL)):$===Bs.RIGHT?(g=Et.ROW_REVERSE,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=Zs.VERTICAL)):$===Bs.BOTTOM&&(g=Et.COLUMN_REVERSE)}const _={id:"spacer",components:[new wr(this.model,this.services)],growth:Ge.PREFERRED},b={id:"full-frame",components:[new pn(this.model,this.services,[...p?[m]:[],...p?[_]:[],v],{direction:g})],growth:Ge.STRETCH},y={id:"zoom-bar",components:[new lU(this.model,this.services)],growth:Ge.PREFERRED,renderType:Me.SVG},w=[];if(u||s){w.push(d);const $={id:"spacer",components:[new wr(this.model,this.services,s?{size:15}:void 0)],growth:Ge.PREFERRED};w.push($)}return l&&w.push(y),w.push(b),[new Fb(this.model,this.services),new Fl(this.model,this.services),new pn(this.model,this.services,w,{direction:Et.COLUMN})]}}class aj extends Hn{constructor(e,n){super(e,n),this.model=new jN(this.services),this.model.setOptions(xt(gt.alluvialChart,n.options)),this.init(e,n)}getComponents(){const e=[new fU(this.model,this.services)];return this.getChartComponents(e,{excludeLegend:!0})}}class oj extends fn{constructor(e,n){super(e,n),this.model.setOptions(xt(yr(gt.areaChart),n.options)),this.init(e,n)}getComponents(){const e=[new un(this.model,this.services),new bn(this.model,this.services),new Vr(this.model,this.services),new Zi(this.model,this.services),new Gb(this.model,this.services),new Xn(this.model,this.services,{fadeInOnChartHolderMouseover:!0,handleThresholds:!0}),new nn(this.model,this.services,{skeleton:Bt.GRID})];return this.getAxisChartComponents(e)}}class lj extends fn{constructor(e,n){super(e,n),this.model=new WN(this.services),this.model.setOptions(xt(gt.boxplotChart,n.options)),this.init(e,n)}getComponents(){const e=[new un(this.model,this.services),new bn(this.model,this.services),new mU(this.model,this.services),new ds(this.model,this.services),new nn(this.model,this.services,{skeleton:Bt.VERT_OR_HORIZ})];return this.getAxisChartComponents(e,{legend:{enabled:!1}})}}class cj extends fn{constructor(e,n){super(e,n),this.model.setOptions(xt(gt.bubbleChart,n.options)),this.init(e,n)}getComponents(){const e=[new un(this.model,this.services),new bn(this.model,this.services),new Vr(this.model,this.services),new pU(this.model,this.services),new nn(this.model,this.services,{skeleton:Bt.GRID})];return this.getAxisChartComponents(e)}}class uj extends fn{constructor(e,n){super(e,n),this.model=new YN(this.services),this.model.setOptions(xt(gt.bulletChart,n.options)),this.init(e,n)}getComponents(){const e=[new un(this.model,this.services),new bn(this.model,this.services),new gU(this.model,this.services),new nn(this.model,this.services,{skeleton:Bt.GRID})];return this.getAxisChartComponents(e)}}class fj extends Hn{constructor(e,n){super(e,n),this.model=new ZN(this.services),this.model.setOptions(xt(gt.choroplethChart,n.options)),this.init(e,n)}getChartComponents(e,n){const r=this.model.getOptions(),i=D(r,"toolbar","enabled"),s=!!this.model.getOptions().title,a={id:"title",components:[new Sa(this.model,this.services)],growth:Ge.STRETCH},o={id:"toolbar",components:[new zl(this.model,this.services)],growth:Ge.PREFERRED},l={id:"header",components:[new pn(this.model,this.services,[a,...i?[o]:[]],{direction:Et.ROW,alignItems:fs.CENTER})],growth:Ge.PREFERRED},c={id:"legend",components:[new jb(this.model,this.services,{chartType:"choropleth"})],growth:Ge.PREFERRED,renderType:Me.SVG},u={id:"graph-frame",components:e,growth:Ge.STRETCH,renderType:Me.SVG},f=D(n,"legend","enabled")!==!1&&this.model.getOptions().legend.enabled!==!1,h=Et.COLUMN_REVERSE,d={id:"spacer",components:[new wr(this.model,this.services,{size:15})],growth:Ge.PREFERRED},m={id:"full-frame",components:[new pn(this.model,this.services,[...f?[c]:[],...f?[d]:[],u],{direction:h})],growth:Ge.STRETCH},v=[];if(s||i){v.push(l);const p={id:"spacer",components:[new wr(this.model,this.services,i?{size:15}:void 0)],growth:Ge.PREFERRED};v.push(p)}return v.push(m),[new Xf(this.model,this.services),new Fl(this.model,this.services),new pn(this.model,this.services,v,{direction:Et.COLUMN})]}getComponents(){const e=[new p7(this.model,this.services)];return this.getChartComponents(e)}}class hj extends Hn{constructor(e,n){super(e,n),this.model=new XN(this.services),this.model.setOptions(xt(gt.circlePackChart,n.options)),this.init(e,n)}getComponents(){const e=[new kU(this.model,this.services)];return this.getChartComponents(e)}}const Ug={[wn.LINE]:[Zi,Xn],[wn.SCATTER]:[Xn],[wn.AREA]:[Gb,Zi,Xn],[wn.STACKED_AREA]:[Xb,Zi,Qb,ol],[wn.SIMPLE_BAR]:[Zb],[wn.GROUPED_BAR]:[Yb,ds],[wn.STACKED_BAR]:[Kb,ol]};class dj extends fn{constructor(e,n){super(e,n);const r=xt(gt.comboChart,n.options);n.options.comboChartTypes||(console.error("No comboChartTypes defined for the Combo Chart!"),r.comboChartTypes=[{type:wn.LINE,correspondingDatasets:[]}]),this.model.setOptions(r),this.init(e,n)}getGraphComponents(){const{comboChartTypes:e}=this.model.getOptions();let n=0;const r=e.map(i=>{const s=i.type;let a;if(typeof i.type=="string"){if(!Object.keys(Ug).includes(i.type))return console.error(`Invalid chart type "${i.type}" specified for combo chart. Please refer to the ComboChart tutorial for more guidance.`),null;let o=!1;const l=`${w9(i.type)}Chart`;return a=Ne({},gt[l],this.model.getOptions(),i.options),i.type===wn.STACKED_AREA&&(o=!0),Ug[i.type].map(c=>new c(this.model,this.services,{groups:i.correspondingDatasets,id:n++,options:a,stacked:o}))}else return a=Ne({},this.model.getOptions(),i.options),new s(this.model,this.services,{groups:i.correspondingDatasets,id:n++,options:a})}).filter(i=>i!==null);return ny(r)}getComponents(){const{comboChartTypes:e}=this.model.getOptions(),n=e.some(i=>i.type===wn.STACKED_BAR||i.type===wn.STACKED_AREA),r=[new un(this.model,this.services),new bn(this.model,this.services),new nn(this.model,this.services,{skeleton:Bt.GRID}),...n?[]:[new Vr(this.model,this.services)],...this.getGraphComponents()];return this.getAxisChartComponents(r)}}class E9 extends Hn{constructor(e,n,r=!1){super(e,n),this.model=new KN(this.services),!r&&(this.model.setOptions(xt(gt.pieChart,n.options)),this.init(e,n))}getComponents(){const e=[new Wb(this.model,this.services),new nn(this.model,this.services,{skeleton:Bt.PIE})];return this.getChartComponents(e)}}class mj extends E9{constructor(e,n){super(e,n,!0),this.model.setOptions(xt(gt.donutChart,n.options)),this.init(e,n)}getComponents(){const e=[new MU(this.model,this.services),new nn(this.model,this.services,{skeleton:Bt.DONUT})];return this.getChartComponents(e)}}class pj extends Hn{constructor(e,n){super(e,n),this.model=new QN(this.services),this.model.setOptions(xt(gt.gaugeChart,n.options)),this.init(e,n)}getComponents(){const e=[new CU(this.model,this.services)];return this.getChartComponents(e)}}class gj extends fn{constructor(e,n){super(e,n),this.model.setOptions(xt(gt.groupedBarChart,n.options)),this.init(e,n)}getComponents(){const e=[new un(this.model,this.services),new bn(this.model,this.services),new Yb(this.model,this.services),new ds(this.model,this.services),new nn(this.model,this.services,{skeleton:Bt.VERT_OR_HORIZ})];return this.getAxisChartComponents(e)}}class vj extends fn{constructor(e,n){super(e,n),this.model=new JN(this.services),this.model.setOptions(xt(gt.heatmapChart,n.options)),this.init(e,n)}getAxisChartComponents(e,n){const r=this.model.getOptions(),i=D(r,"toolbar","enabled");this.services.cartesianScales.determineAxisDuality(),this.services.cartesianScales.findDomainAndRangeAxes(),this.services.cartesianScales.determineOrientation();const s=!!this.model.getOptions().title,a={id:"title",components:[new Sa(this.model,this.services)],growth:Ge.STRETCH},o={id:"toolbar",components:[new zl(this.model,this.services)],growth:Ge.PREFERRED},l={id:"header",components:[new pn(this.model,this.services,[a,...i?[o]:[]],{direction:Et.ROW,alignItems:fs.CENTER})],growth:Ge.PREFERRED},c={id:"legend",components:[new jb(this.model,this.services,{chartType:"heatmap"})],growth:Ge.PREFERRED,renderType:Me.SVG},u={id:"graph-frame",components:e,growth:Ge.STRETCH,renderType:Me.SVG},f=D(n,"legend","enabled")!==!1&&this.model.getOptions().legend.enabled!==!1,h=Et.COLUMN_REVERSE,d={id:"spacer",components:[new wr(this.model,this.services,{size:15})],growth:Ge.PREFERRED},m={id:"full-frame",components:[new pn(this.model,this.services,[...f?[c]:[],...f?[d]:[],u],{direction:h})],growth:Ge.STRETCH},v=[];if(s||i){v.push(l);const p={id:"spacer",components:[new wr(this.model,this.services,i?{size:15}:void 0)],growth:Ge.PREFERRED};v.push(p)}return v.push(m),[new Fb(this.model,this.services),new Fl(this.model,this.services),new pn(this.model,this.services,v,{direction:Et.COLUMN})]}getComponents(){const e=[new un(this.model,this.services),new AU(this.model,this.services)];return this.getAxisChartComponents(e)}}class _j extends fn{constructor(e,n){super(e,n),this.model=new eP(this.services),this.model.setOptions(xt(gt.histogramChart,n.options)),this.init(e,n),this.update()}getComponents(){const e=[new un(this.model,this.services),new bn(this.model,this.services),new SU(this.model,this.services),new IU(this.model,this.services)];return this.getAxisChartComponents(e)}}class bj extends fn{constructor(e,n){super(e,n),this.model.setOptions(xt(gt.lineChart,n.options)),this.init(e,n)}getComponents(){const e=[new un(this.model,this.services),new bn(this.model,this.services),new Vr(this.model,this.services),new Zi(this.model,this.services),new Xn(this.model,this.services,{handleThresholds:!0}),new NU(this.model,this.services),new ds(this.model,this.services)];return this.getAxisChartComponents(e)}}class yj extends fn{constructor(e,n){super(e,n),this.model.setOptions(xt(gt.lollipopChart,n.options)),this.init(e,n)}getComponents(){const e=[new un(this.model,this.services),new bn(this.model,this.services),new Vr(this.model,this.services),new DU(this.model,this.services),new Xn(this.model,this.services),new nn(this.model,this.services,{skeleton:Bt.GRID})];return this.getAxisChartComponents(e)}}class wj extends Hn{constructor(e,n){var r;super(e,n),this.model=new tP(this.services);const i=(r=n.options.meter)!=null&&r.proportional?Ne(yr(gt.proportionalMeterChart),n.options):Ne(yr(gt.meterChart),n.options);this.model.setOptions(i),this.init(e,n)}getComponents(){const e=[...D(this.model.getOptions(),"meter","showLabels")?[{id:"meter-title",components:[new xU(this.model,this.services)],growth:Ge.STRETCH,renderType:Me.SVG},{id:"spacer",components:[new wr(this.model,this.services,{size:8})],growth:Ge.STRETCH}]:[],{id:"meter-graph",components:[new LU(this.model,this.services)],growth:Ge.STRETCH,renderType:Me.SVG}],n=[new pn(this.model,this.services,e,{direction:Et.COLUMN})];return this.getChartComponents(n,{graphFrameRenderType:Me.HTML})}}class Ej extends Hn{constructor(e,n){super(e,n),this.model=new nP(this.services),this.model.setOptions(xt(gt.radarChart,n.options)),this.init(e,n)}getComponents(){const e=[new RU(this.model,this.services)];return this.getChartComponents(e)}}class $j extends fn{constructor(e,n){super(e,n),this.model.setOptions(xt(gt.scatterChart,n.options)),this.init(e,n)}getComponents(){const e=[new un(this.model,this.services),new bn(this.model,this.services),new Vr(this.model,this.services),new Xn(this.model,this.services),new nn(this.model,this.services,{skeleton:Bt.GRID})];return this.getAxisChartComponents(e)}}class Tj extends Hn{constructor(e,n){super(e,n),this.model=new rP(this.services),this.model.setOptions(xt(gt.treeChart,n.options)),this.init(e,n)}getComponents(){const e=[new PU(this.model,this.services)];return this.getChartComponents(e,{excludeLegend:!0})}}class Sj extends Hn{constructor(e,n){super(e,n),this.model=new iP(this.services),this.model.setOptions(xt(gt.treemapChart,n.options)),this.init(e,n)}getComponents(){const e=[new h7(this.model,this.services)];return this.getChartComponents(e)}}class xj extends fn{constructor(e,n){super(e,n),this.model.setOptions(xt(gt.simpleBarChart,n.options)),this.init(e,n)}getComponents(){const e=[new un(this.model,this.services),new bn(this.model,this.services),new Zb(this.model,this.services),new ds(this.model,this.services),new nn(this.model,this.services,{skeleton:Bt.VERT_OR_HORIZ})];return this.getAxisChartComponents(e)}}class kj extends fn{constructor(e,n){super(e,n),this.model.setOptions(xt(gt.stackedAreaChart,n.options)),this.init(e,n)}getComponents(){const e=[new un(this.model,this.services),new bn(this.model,this.services),new ol(this.model,this.services),new Xb(this.model,this.services),new Zi(this.model,this.services,{stacked:!0}),new Qb(this.model,this.services,{fadeInOnChartHolderMouseover:!0,handleThresholds:!0,stacked:!0}),new nn(this.model,this.services,{skeleton:Bt.GRID})];return this.getAxisChartComponents(e)}}class Oj extends fn{constructor(e,n){super(e,n),this.model.setOptions(xt(gt.stackedBarChart,n.options)),this.init(e,n)}getComponents(){const e=[new un(this.model,this.services),new bn(this.model,this.services),new ol(this.model,this.services),new Kb(this.model,this.services),new nn(this.model,this.services,{skeleton:Bt.VERT_OR_HORIZ}),new ds(this.model,this.services)];return this.getAxisChartComponents(e)}}class Mj extends Hn{constructor(e,n){super(e,n),this.model=new sP(this.services),this.model.setOptions(xt(gt.wordCloudChart,n.options)),this.init(e,n)}getComponents(){const e=[new d7(this.model,this.services),new nn(this.model,this.services,{skeleton:Bt.PIE})];return this.getChartComponents(e)}}Ct.CENTER,Ct.CENTER;xe.LABELS;function $9(t){const e={axes:{left:{mapsTo:"value"},bottom:{mapsTo:"group",scaleType:xe.LABELS}},height:"400px"},n={resizable:!0,legend:{alignment:Ct.CENTER},pie:{alignment:Ct.CENTER},height:"400px"};return t&&(e.data={loading:!0},n.data={loading:!0}),{barOptions:e,pieOptions:n}}const ll=$r([]);function Hg(t,e,n){const r=t.slice();return r[10]=e[n],r}function zg(t,e,n){const r=t.slice();return r[13]=e[n],r}function T9(t){let e,n,r=t[6]("course.navItem.lessons.exercises.all_exercises.analytics.summary.question_chart")+"",i,s,a,o=Fe(t[1]),l=[];for(let u=0;u<o.length;u+=1)l[u]=qg(Hg(t,o,u));const c=u=>L(l[u],1,1,()=>{l[u]=null});return{c(){e=B("div"),n=B("p"),i=ne(r),s=j();for(let u=0;u<l.length;u+=1)l[u].c();this.h()},l(u){e=U(u,"DIV",{});var f=P(e);n=U(f,"P",{class:!0});var h=P(n);i=re(h,r),h.forEach(E),s=W(f);for(let d=0;d<l.length;d+=1)l[d].l(f);f.forEach(E),this.h()},h(){M(n,"class","text-2xl mb-3")},m(u,f){H(u,e,f),x(e,n),x(n,i),x(e,s);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(e,null);a=!0},p(u,f){if((!a||f&64)&&r!==(r=u[6]("course.navItem.lessons.exercises.all_exercises.analytics.summary.question_chart")+"")&&se(i,r),f&62){o=Fe(u[1]);let h;for(h=0;h<o.length;h+=1){const d=Hg(u,o,h);l[h]?(l[h].p(d,f),A(l[h],1)):(l[h]=qg(d),l[h].c(),A(l[h],1),l[h].m(e,null))}for(ye(),h=o.length;h<l.length;h+=1)c(h);we()}},i(u){if(!a){for(let f=0;f<o.length;f+=1)A(l[f]);a=!0}},o(u){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)L(l[f]);a=!1},d(u){u&&E(e),Gt(l,u)}}}function S9(t){let e,n;return e=new N0({props:{withOverlay:!0}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function x9(t){let e,n,r=[],i=new Map,s=Fe(t[10].chartData);const a=o=>o[13];for(let o=0;o<s.length;o+=1){let l=zg(t,s,o),c=a(l);i.set(c,r[o]=Gg(c,l))}return{c(){e=B("div"),n=B("ul");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=U(o,"DIV",{class:!0});var l=P(e);n=U(l,"UL",{});var c=P(n);for(let u=0;u<r.length;u+=1)r[u].l(c);c.forEach(E),l.forEach(E),this.h()},h(){M(e,"class","max-h-[250px] overflow-auto")},m(o,l){H(o,e,l),x(e,n);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(n,null)},p(o,l){l&2&&(s=Fe(o[10].chartData),r=ua(r,l,a,1,o,s,i,n,P0,Gg,null,zg))},i:he,o:he,d(o){o&&E(e);for(let l=0;l<r.length;l+=1)r[l].d()}}}function k9(t){let e,n,r;var i=t[2];function s(a,o){return{props:{data:a[10].chartData,options:a[5]}}}return i&&(e=Kn(i,s(t))),{c(){e&&Z(e.$$.fragment),n=fe()},l(a){e&&Q(e.$$.fragment,a),n=fe()},m(a,o){e&&X(e,a,o),H(a,n,o),r=!0},p(a,o){if(o&4&&i!==(i=a[2])){if(e){ye();const l=e;L(l.$$.fragment,1,0,()=>{K(l,1)}),we()}i?(e=Kn(i,s(a)),Z(e.$$.fragment),A(e.$$.fragment,1),X(e,n.parentNode,n)):e=null}else if(i){const l={};o&2&&(l.data=a[10].chartData),o&32&&(l.options=a[5]),e.$set(l)}},i(a){r||(e&&A(e.$$.fragment,a),r=!0)},o(a){e&&L(e.$$.fragment,a),r=!1},d(a){a&&E(n),e&&K(e,a)}}}function O9(t){let e,n,r;var i=t[3];function s(a,o){return{props:{data:a[10].chartData,options:a[4]}}}return i&&(e=Kn(i,s(t))),{c(){e&&Z(e.$$.fragment),n=fe()},l(a){e&&Q(e.$$.fragment,a),n=fe()},m(a,o){e&&X(e,a,o),H(a,n,o),r=!0},p(a,o){if(o&8&&i!==(i=a[3])){if(e){ye();const l=e;L(l.$$.fragment,1,0,()=>{K(l,1)}),we()}i?(e=Kn(i,s(a)),Z(e.$$.fragment),A(e.$$.fragment,1),X(e,n.parentNode,n)):e=null}else if(i){const l={};o&2&&(l.data=a[10].chartData),o&16&&(l.options=a[4]),e.$set(l)}},i(a){r||(e&&A(e.$$.fragment,a),r=!0)},o(a){e&&L(e.$$.fragment,a),r=!1},d(a){a&&E(n),e&&K(e,a)}}}function Fg(t){let e,n,r=t[13].group+"",i,s;return{c(){e=B("div"),n=B("li"),i=ne(r),s=j(),this.h()},l(a){e=U(a,"DIV",{class:!0});var o=P(e);n=U(o,"LI",{class:!0});var l=P(n);i=re(l,r),l.forEach(E),s=W(o),o.forEach(E),this.h()},h(){M(n,"class","text-base font-medium text-black"),M(e,"class","rounded bg-slate-100 dark:bg-slate-300 p-2 my-1 w-full")},m(a,o){H(a,e,o),x(e,n),x(n,i),x(e,s)},p(a,o){o&2&&r!==(r=a[13].group+"")&&se(i,r)},d(a){a&&E(e)}}}function Gg(t,e){let n,r,i=e[13].group&&Fg(e);return{key:t,first:null,c(){n=fe(),i&&i.c(),r=fe(),this.h()},l(s){n=fe(),i&&i.l(s),r=fe(),this.h()},h(){this.first=n},m(s,a){H(s,n,a),i&&i.m(s,a),H(s,r,a)},p(s,a){e=s,e[13].group?i?i.p(e,a):(i=Fg(e),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(s){s&&(E(n),E(r)),i&&i.d(s)}}}function qg(t){let e,n,r=t[10].title+"",i,s,a,o,l,c;const u=[O9,k9,x9],f=[];function h(d,m){return d[10].type===1?0:d[10].type===2?1:2}return a=h(t),o=f[a]=u[a](t),{c(){e=B("div"),n=B("p"),i=ne(r),s=j(),o.c(),l=j(),this.h()},l(d){e=U(d,"DIV",{class:!0});var m=P(e);n=U(m,"P",{});var v=P(n);i=re(v,r),v.forEach(E),s=W(m),o.l(m),l=W(m),m.forEach(E),this.h()},h(){M(e,"class","mb-4")},m(d,m){H(d,e,m),x(e,n),x(n,i),x(e,s),f[a].m(e,null),x(e,l),c=!0},p(d,m){(!c||m&2)&&r!==(r=d[10].title+"")&&se(i,r);let v=a;a=h(d),a===v?f[a].p(d,m):(ye(),L(f[v],1,1,()=>{f[v]=null}),we(),o=f[a],o?o.p(d,m):(o=f[a]=u[a](d),o.c()),A(o,1),o.m(e,l))},i(d){c||(A(o),c=!0)},o(d){L(o),c=!1},d(d){d&&E(e),f[a].d()}}}function M9(t){let e,n,r,i;const s=[S9,T9],a=[];function o(l,c){return l[0]?0:1}return~(e=o(t))&&(n=a[e]=s[e](t)),{c(){n&&n.c(),r=fe()},l(l){n&&n.l(l),r=fe()},m(l,c){~e&&a[e].m(l,c),H(l,r,c),i=!0},p(l,[c]){let u=e;e=o(l),e===u?~e&&a[e].p(l,c):(n&&(ye(),L(a[u],1,1,()=>{a[u]=null}),we()),~e?(n=a[e],n?n.p(l,c):(n=a[e]=s[e](l),n.c()),A(n,1),n.m(r.parentNode,r)):n=null)},i(l){i||(A(n),i=!0)},o(l){L(n),i=!1},d(l){l&&E(r),~e&&a[e].d(l)}}}function jg(t,e,n){let r=[];const i=n.answers.find(s=>s.question_id===t);if(i){const{answers:s,open_answer:a}=i;e?r=[a]:r=s}return r}function C9(t,e,n){let r,i,s;be(t,ll,d=>n(7,r=d)),be(t,Mt,d=>n(8,i=d)),be(t,Nt,d=>n(6,s=d));let{isLoading:a=!0}=e,o=[],l,c,u,f;const h=d=>{const m=[];i.questions.forEach(v=>{const p={title:v.title,type:v.question_type_id,chartData:[]};p.type===3?d.forEach(g=>{const _={group:jg(v.id,!0,g)[0],value:0};p.chartData.push(_)}):v.options.forEach(g=>{const{value:_,is_correct:b,label:y}=g,w={group:_w(y),value:0,isCorrect:b};d.forEach($=>{jg(v.id,!1,$).includes(_)&&(w.value+=1)}),p.chartData.push(w)}),m.push(p)}),n(1,o=[...m]),console.log({transformedQuestions:o})};return us(async()=>{const d=await Mn(()=>import("./index.8a393a55.js"),["./index.8a393a55.js","./scheduler.ee52cacd.js","./index.a2391391.js","./spread.5cc747ed.js"],import.meta.url);n(2,l=d.BarChartSimple),n(3,c=d.PieChart)}),t.$$set=d=>{"isLoading"in d&&n(0,a=d.isLoading)},t.$$.update=()=>{if(t.$$.dirty&128&&r!=null&&r.length&&h(r),t.$$.dirty&1){let d=$9(a);n(5,f=d.barOptions),n(4,u=d.pieOptions),console.log({chartOptions:d})}},[a,o,l,c,u,f,s,r]}class A9 extends Pe{constructor(e){super(),Ve(this,e,C9,M9,Ae,{isLoading:0})}}function Wg(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function Yg(t,e,n){const r=t.slice();return r[12]=e[n],r[11]=n,r}function Zg(t,e,n){const r=t.slice();return r[14]=e[n],r[11]=n,r}function I9(t){let e,n,r,i=t[3][t[1]].submitted_by.profile.fullname+"",s,a,o=t[2]("course.navItem.lessons.exercises.all_exercises.analytics.individual.answers")+"",l,c,u,f=Fe(t[3]),h=[];for(let m=0;m<f.length;m+=1)h[m]=Xg(Zg(t,f,m));let d=t[3][t[1]]&&Kg(t);return{c(){e=B("div");for(let m=0;m<h.length;m+=1)h[m].c();n=j(),r=B("p"),s=ne(i),a=ne("'s "),l=ne(o),c=j(),d&&d.c(),u=fe(),this.h()},l(m){e=U(m,"DIV",{class:!0});var v=P(e);for(let g=0;g<h.length;g+=1)h[g].l(v);v.forEach(E),n=W(m),r=U(m,"P",{class:!0});var p=P(r);s=re(p,i),a=re(p,"'s "),l=re(p,o),p.forEach(E),c=W(m),d&&d.l(m),u=fe(),this.h()},h(){M(e,"class","flex gap-1 w-full overflow-auto mt-2 mb-5"),M(r,"class","font-medium mb-2")},m(m,v){H(m,e,v);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(e,null);H(m,n,v),H(m,r,v),x(r,s),x(r,a),x(r,l),H(m,c,v),d&&d.m(m,v),H(m,u,v)},p(m,v){if(v&10){f=Fe(m[3]);let p;for(p=0;p<f.length;p+=1){const g=Zg(m,f,p);h[p]?h[p].p(g,v):(h[p]=Xg(g),h[p].c(),h[p].m(e,null))}for(;p<h.length;p+=1)h[p].d(1);h.length=f.length}v&10&&i!==(i=m[3][m[1]].submitted_by.profile.fullname+"")&&se(s,i),v&4&&o!==(o=m[2]("course.navItem.lessons.exercises.all_exercises.analytics.individual.answers")+"")&&se(l,o),m[3][m[1]]?d?d.p(m,v):(d=Kg(m),d.c(),d.m(u.parentNode,u)):d&&(d.d(1),d=null)},i:he,o:he,d(m){m&&(E(e),E(n),E(r),E(c),E(u)),Gt(h,m),d&&d.d(m)}}}function D9(t){let e,n;return e=new N0({props:{withOverlay:!0}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function Xg(t){let e,n,r,i,s,a,o,l=t[14].submitted_by.profile.fullname+"",c,u,f,h;function d(){return t[8](t[11])}return{c(){e=B("button"),n=B("div"),r=B("img"),a=j(),o=B("p"),c=ne(l),u=j(),this.h()},l(m){e=U(m,"BUTTON",{class:!0});var v=P(e);n=U(v,"DIV",{class:!0});var p=P(n);r=U(p,"IMG",{src:!0,alt:!0,class:!0}),p.forEach(E),a=W(v),o=U(v,"P",{class:!0});var g=P(o);c=re(g,l),g.forEach(E),u=W(v),v.forEach(E),this.h()},h(){mt(r.src,i=t[14].submitted_by.profile.avatar_url?t[14].submitted_by.profile.avatar_url:t0)||M(r,"src",i),M(r,"alt","student"),M(r,"class","w-10 max-h-10 rounded-full bg-white m-1"),M(n,"class",s=`flex items-center justify-center w-12 h-12 rounded-full ${t[1]==t[11]?"border-[3px] border-primary-700":""}`),M(o,"class","line-clamp-2 w-20 whitespace-pre-wrap leading-4"),M(e,"class","flex flex-col items-center w-20")},m(m,v){H(m,e,v),x(e,n),x(n,r),x(e,a),x(e,o),x(o,c),x(e,u),f||(h=qe(e,"click",d),f=!0)},p(m,v){t=m,v&8&&!mt(r.src,i=t[14].submitted_by.profile.avatar_url?t[14].submitted_by.profile.avatar_url:t0)&&M(r,"src",i),v&2&&s!==(s=`flex items-center justify-center w-12 h-12 rounded-full ${t[1]==t[11]?"border-[3px] border-primary-700":""}`)&&M(n,"class",s),v&8&&l!==(l=t[14].submitted_by.profile.fullname+"")&&se(c,l)},d(m){m&&E(e),f=!1,h()}}}function Kg(t){let e,n=t[4].questions&&Qg(t);return{c(){n&&n.c(),e=fe()},l(r){n&&n.l(r),e=fe()},m(r,i){n&&n.m(r,i),H(r,e,i)},p(r,i){r[4].questions?n?n.p(r,i):(n=Qg(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){r&&E(e),n&&n.d(r)}}}function Qg(t){let e,n=Fe(t[4].questions),r=[];for(let i=0;i<n.length;i+=1)r[i]=e0(Wg(t,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=fe()},l(i){for(let s=0;s<r.length;s+=1)r[s].l(i);e=fe()},m(i,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(i,s);H(i,e,s)},p(i,s){if(s&250){n=Fe(i[4].questions);let a;for(a=0;a<n.length;a+=1){const o=Wg(i,n,a);r[a]?r[a].p(o,s):(r[a]=e0(o),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(i){i&&E(e),Gt(r,i)}}}function L9(t){let e,n,r=t[7](t[3][t[1]],t[9])+"",i;return{c(){e=B("div"),n=B("span"),i=ne(r),this.h()},l(s){e=U(s,"DIV",{class:!0});var a=P(e);n=U(a,"SPAN",{class:!0});var o=P(n);i=re(o,r),o.forEach(E),a.forEach(E),this.h()},h(){M(n,"class","text-base font-medium text-black"),M(e,"class","rounded bg-slate-100 dark:bg-slate-300 p-2 my-1 w-full")},m(s,a){H(s,e,a),x(e,n),x(n,i)},p(s,a){a&26&&r!==(r=s[7](s[3][s[1]],s[9])+"")&&se(i,r)},d(s){s&&E(e)}}}function R9(t){let e,n=Fe(t[9].options),r=[];for(let i=0;i<n.length;i+=1)r[i]=Jg(Yg(t,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=fe()},l(i){for(let s=0;s<r.length;s+=1)r[s].l(i);e=fe()},m(i,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(i,s);H(i,e,s)},p(i,s){if(s&122){n=Fe(i[9].options);let a;for(a=0;a<n.length;a+=1){const o=Yg(i,n,a);r[a]?r[a].p(o,s):(r[a]=Jg(o),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(i){i&&E(e),Gt(r,i)}}}function Jg(t){let e,n,r,i,s,a=t[12].label+"",o,l,c;return{c(){e=B("div"),n=B("input"),i=j(),s=B("span"),o=ne(a),l=j(),this.h()},l(u){e=U(u,"DIV",{class:!0});var f=P(e);n=U(f,"INPUT",{type:!0,name:!0,id:!0,class:!0}),i=W(f),s=U(f,"SPAN",{class:!0});var h=P(s);o=re(h,a),h.forEach(E),l=W(f),f.forEach(E),this.h()},h(){M(n,"type","radio"),M(n,"name",""),M(n,"id",""),M(n,"class","form-radio"),n.checked=r=t[5](t[3][t[1]],t[12]),M(s,"class","dark:text-white"),M(e,"class",c=`flex gap-2 items-center my-2 border-2 border-gray-300 rounded-md p-2 ${t[6](t[3][t[1]],t[12])}`)},m(u,f){H(u,e,f),x(e,n),x(e,i),x(e,s),x(s,o),x(e,l)},p(u,f){f&26&&r!==(r=u[5](u[3][u[1]],u[12]))&&(n.checked=r),f&16&&a!==(a=u[12].label+"")&&se(o,a),f&26&&c!==(c=`flex gap-2 items-center my-2 border-2 border-gray-300 rounded-md p-2 ${u[6](u[3][u[1]],u[12])}`)&&M(e,"class",c)},d(u){u&&E(e)}}}function e0(t){let e,n,r=t[11]+1+"",i,s,a=t[9].title+"",o,l,c;function u(d,m){return d[9].question_type_id!==3?R9:L9}let f=u(t),h=f(t);return{c(){e=B("div"),n=B("h3"),i=ne(r),s=ne(". "),o=ne(a),l=j(),h.c(),c=j(),this.h()},l(d){e=U(d,"DIV",{class:!0});var m=P(e);n=U(m,"H3",{class:!0});var v=P(n);i=re(v,r),s=re(v,". "),o=re(v,a),v.forEach(E),l=W(m),h.l(m),c=W(m),m.forEach(E),this.h()},h(){M(n,"class","text-lg"),M(e,"class","pb-4")},m(d,m){H(d,e,m),x(e,n),x(n,i),x(n,s),x(n,o),x(e,l),h.m(e,null),x(e,c)},p(d,m){m&16&&a!==(a=d[9].title+"")&&se(o,a),f===(f=u(d))&&h?h.p(d,m):(h.d(1),h=f(d),h&&(h.c(),h.m(e,c)))},d(d){d&&E(e),h.d()}}}function N9(t){let e,n,r,i;const s=[D9,I9],a=[];function o(l,c){var u;return l[0]?0:(u=l[3])!=null&&u.length?1:-1}return~(e=o(t))&&(n=a[e]=s[e](t)),{c(){n&&n.c(),r=fe()},l(l){n&&n.l(l),r=fe()},m(l,c){~e&&a[e].m(l,c),H(l,r,c),i=!0},p(l,[c]){let u=e;e=o(l),e===u?~e&&a[e].p(l,c):(n&&(ye(),L(a[u],1,1,()=>{a[u]=null}),we()),~e?(n=a[e],n?n.p(l,c):(n=a[e]=s[e](l),n.c()),A(n,1),n.m(r.parentNode,r)):n=null)},i(l){i||(A(n),i=!0)},o(l){L(n),i=!1},d(l){l&&E(r),~e&&a[e].d(l)}}}const t0="https://images.unsplash.com/photo-1599566150163-29194dcaad36?auto=format&fit=crop&q=60&w=800&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8YXZhdGFyc3xlbnwwfHwwfHx8Mg%3D%3D";function P9(t,e,n){let r,i,s;be(t,Nt,h=>n(2,r=h)),be(t,ll,h=>n(3,i=h)),be(t,Mt,h=>n(4,s=h));let{isLoading:a=!1}=e,o=0;const l=(h,d)=>{if(i){let v=(h==null?void 0:h.answers).filter(p=>p.question_id===d.question_id);return v.map(p=>p.answers.length>1)?v.some(p=>p.answers.includes(d.value)):v.map(p=>p.answers)==d.value}},c=(h,d)=>{if(l(h,d))return d.is_correct?"border-green-700":"border-red-700"},u=(h,d)=>{let v=(h==null?void 0:h.answers).filter(p=>p.question_id===d.id);return v.some(p=>p.open_answer=="")?r("course.navItem.lessons.exercises.all_exercises.analytics.individual.no"):v.map(p=>p.open_answer)},f=h=>n(1,o=h);return t.$$set=h=>{"isLoading"in h&&n(0,a=h.isLoading)},[a,o,r,i,s,l,c,u,f]}class V9 extends Pe{constructor(e){super(),Ve(this,e,P9,N9,Ae,{isLoading:0})}}function n0(t,e,n){const r=t.slice();return r[10]=e[n],r}function r0(t){let e,n,r=t[10].label+"",i,s,a,o,l,c,u,f;return{c(){e=B("button"),n=B("div"),i=ne(r),s=j(),a=B("span"),l=j(),this.h()},l(h){e=U(h,"BUTTON",{class:!0});var d=P(e);n=U(d,"DIV",{class:!0});var m=P(n);i=re(m,r),m.forEach(E),s=W(d),a=U(d,"SPAN",{class:!0}),P(a).forEach(E),l=W(d),d.forEach(E),this.h()},h(){M(n,"class","flex items-center justify-center w-full text-center"),M(a,"class",o="absolute bottom-0 left-0 h-[2px] bg-primary-700 transition-all ease-in-out duration-500 "+(t[0]===t[10].value?"w-full":"w-0")),M(e,"class",c="relative "+(t[0]===t[10].value?"text-primary-700":"dark:bg-gray-500 dark:text-white")+" dark:bg-transparent font-semibold focus:outline-none w-fit mr-4 text-center py-3 px-2")},m(h,d){H(h,e,d),x(e,n),x(n,i),x(e,s),x(e,a),x(e,l),u||(f=qe(e,"click",t[5](t[10].value)),u=!0)},p(h,d){t=h,d&1&&o!==(o="absolute bottom-0 left-0 h-[2px] bg-primary-700 transition-all ease-in-out duration-500 "+(t[0]===t[10].value?"w-full":"w-0"))&&M(a,"class",o),d&1&&c!==(c="relative "+(t[0]===t[10].value?"text-primary-700":"dark:bg-gray-500 dark:text-white")+" dark:bg-transparent font-semibold focus:outline-none w-fit mr-4 text-center py-3 px-2")&&M(e,"class",c)},d(h){h&&E(e),u=!1,f()}}}function B9(t){let e,n,r;function i(a){t[8](a)}let s={};return t[1]!==void 0&&(s.isLoading=t[1]),e=new V9({props:s}),je.push(()=>et(e,"isLoading",i)),{c(){Z(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,o){X(e,a,o),r=!0},p(a,o){const l={};!n&&o&2&&(n=!0,l.isLoading=a[1],Je(()=>n=!1)),e.$set(l)},i(a){r||(A(e.$$.fragment,a),r=!0)},o(a){L(e.$$.fragment,a),r=!1},d(a){K(e,a)}}}function U9(t){let e,n,r;function i(a){t[7](a)}let s={};return t[1]!==void 0&&(s.isLoading=t[1]),e=new A9({props:s}),je.push(()=>et(e,"isLoading",i)),{c(){Z(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,o){X(e,a,o),r=!0},p(a,o){const l={};!n&&o&2&&(n=!0,l.isLoading=a[1],Je(()=>n=!1)),e.$set(l)},i(a){r||(A(e.$$.fragment,a),r=!0)},o(a){L(e.$$.fragment,a),r=!1},d(a){K(e,a)}}}function H9(t){let e,n,r,i,s=t[3].length+"",a,o,l=t[2]("course.navItem.lessons.exercises.all_exercises.analytics.submissions")+"",c,u,f,h,d,m,v,p=Fe(t[4]),g=[];for(let w=0;w<p.length;w+=1)g[w]=r0(n0(t,p,w));const _=[U9,B9],b=[];function y(w,$){return w[0]===w[4][0].value?0:1}return d=y(t),m=b[d]=_[d](t),{c(){e=B("div"),n=B("div"),r=B("div"),i=B("p"),a=ne(s),o=j(),c=ne(l),u=j(),f=B("div");for(let w=0;w<g.length;w+=1)g[w].c();h=j(),m.c(),this.h()},l(w){e=U(w,"DIV",{class:!0});var $=P(e);n=U($,"DIV",{class:!0});var k=P(n);r=U(k,"DIV",{class:!0});var C=P(r);i=U(C,"P",{class:!0});var V=P(i);a=re(V,s),o=W(V),c=re(V,l),V.forEach(E),C.forEach(E),u=W(k),f=U(k,"DIV",{class:!0});var I=P(f);for(let S=0;S<g.length;S+=1)g[S].l(I);I.forEach(E),k.forEach(E),h=W($),m.l($),$.forEach(E),this.h()},h(){M(i,"class","text-lg"),M(r,"class","mt-4"),M(f,"class","flex items-center justify-center overflow-x-auto"),M(n,"class","border rounded-md mb-2 px-4"),M(e,"class","w-full flex flex-col")},m(w,$){H(w,e,$),x(e,n),x(n,r),x(r,i),x(i,a),x(i,o),x(i,c),x(n,u),x(n,f);for(let k=0;k<g.length;k+=1)g[k]&&g[k].m(f,null);x(e,h),b[d].m(e,null),v=!0},p(w,[$]){if((!v||$&8)&&s!==(s=w[3].length+"")&&se(a,s),(!v||$&4)&&l!==(l=w[2]("course.navItem.lessons.exercises.all_exercises.analytics.submissions")+"")&&se(c,l),$&49){p=Fe(w[4]);let C;for(C=0;C<p.length;C+=1){const V=n0(w,p,C);g[C]?g[C].p(V,$):(g[C]=r0(V),g[C].c(),g[C].m(f,null))}for(;C<g.length;C+=1)g[C].d(1);g.length=p.length}let k=d;d=y(w),d===k?b[d].p(w,$):(ye(),L(b[k],1,1,()=>{b[k]=null}),we(),m=b[d],m?m.p(w,$):(m=b[d]=_[d](w),m.c()),A(m,1),m.m(e,null))},i(w){v||(A(m),v=!0)},o(w){L(m),v=!1},d(w){w&&E(e),Gt(g,w),b[d].d()}}}function z9(t,e,n){let r,i;be(t,Nt,d=>n(2,r=d)),be(t,ll,d=>n(3,i=d));let{exerciseId:s}=e;const a=[{label:r("course.navItem.lessons.exercises.all_exercises.analytics.summary.heading"),value:"summary"},{label:r("course.navItem.lessons.exercises.all_exercises.analytics.individual.heading"),value:"individual"}];let o=a[0].value,l=!0;const c=d=>()=>n(0,o=d);async function u(d){if(!d)return;n(1,l=!0);const{data:m}=await q0({exerciseId:d});m&&(ll.set(m),n(1,l=!1))}function f(d){l=d,n(1,l)}function h(d){l=d,n(1,l)}return t.$$set=d=>{"exerciseId"in d&&n(6,s=d.exerciseId)},t.$$.update=()=>{t.$$.dirty&64&&u(s)},[o,l,r,i,a,c,s,f,h]}class F9 extends Pe{constructor(e){super(),Ve(this,e,z9,H9,Ae,{exerciseId:6})}}function G9(t){let e=t[10]("course.navItem.lessons.exercises.all_exercises.heading")+"",n;return{c(){n=ne(e)},l(r){n=re(r,e)},m(r,i){H(r,n,i)},p(r,i){i&1024&&e!==(e=r[10]("course.navItem.lessons.exercises.all_exercises.heading")+"")&&se(n,e)},d(r){r&&E(n)}}}function q9(t){let e=t[4].title+"",n;return{c(){n=ne(e)},l(r){n=re(r,e)},m(r,i){H(r,n,i)},p(r,i){i&16&&e!==(e=r[4].title+"")&&se(n,e)},d(r){r&&E(n)}}}function j9(t){let e,n,r,i;return e=new Ac({props:{href:t[1],$$slots:{default:[G9]},$$scope:{ctx:t}}}),r=new Ac({props:{href:`${t[1]}${t[0]}`,isCurrentPage:!0,$$slots:{default:[q9]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment),n=j(),Z(r.$$.fragment)},l(s){Q(e.$$.fragment,s),n=W(s),Q(r.$$.fragment,s)},m(s,a){X(e,s,a),H(s,n,a),X(r,s,a),i=!0},p(s,a){const o={};a&2&&(o.href=s[1]),a&2098176&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&3&&(l.href=`${s[1]}${s[0]}`),a&2097168&&(l.$$scope={dirty:a,ctx:s}),r.$set(l)},i(s){i||(A(e.$$.fragment,s),A(r.$$.fragment,s),i=!0)},o(s){L(e.$$.fragment,s),L(r.$$.fragment,s),i=!1},d(s){s&&E(n),K(e,s),K(r,s)}}}function W9(t){let e,n,r,i;return e=new ph({props:{text:t[10]("course.navItem.lessons.exercises.all_exercises.questions")+" ("+t[4].questions.length+")"}}),r=new ph({props:{text:t[10]("course.navItem.lessons.exercises.all_exercises.submissions")+" ("+t[4].totalSubmissions+")"}}),{c(){Z(e.$$.fragment),n=j(),Z(r.$$.fragment)},l(s){Q(e.$$.fragment,s),n=W(s),Q(r.$$.fragment,s)},m(s,a){X(e,s,a),H(s,n,a),X(r,s,a),i=!0},p(s,a){const o={};a&1040&&(o.text=s[10]("course.navItem.lessons.exercises.all_exercises.questions")+" ("+s[4].questions.length+")"),e.$set(o);const l={};a&1040&&(l.text=s[10]("course.navItem.lessons.exercises.all_exercises.submissions")+" ("+s[4].totalSubmissions+")"),r.$set(l)},i(s){i||(A(e.$$.fragment,s),A(r.$$.fragment,s),i=!0)},o(s){L(e.$$.fragment,s),L(r.$$.fragment,s),i=!1},d(s){s&&E(n),K(e,s),K(r,s)}}}function i0(t){let e,n,r,i,s,a,o,l,c,u;return r=new dt({props:{className:"mr-2",variant:gn.CONTAINED,label:t[10]("course.navItem.lessons.exercises.all_exercises.save"),onClick:t[12],isLoading:t[7]}}),s=new cn({props:{onClick:t[14],contained:t[5],toolTipProps:{title:t[10]("course.navItem.lessons.exercises.all_exercises.preview"),direction:"bottom",hotkeys:[]},$$slots:{default:[X9]},$$scope:{ctx:t}}}),o=new cn({props:{onClick:t[15],size:"small",$$slots:{default:[K9]},$$scope:{ctx:t}}}),c=new bw({props:{flipped:!0,$$slots:{default:[Q9]},$$scope:{ctx:t}}}),{c(){e=B("div"),n=B("div"),Z(r.$$.fragment),i=j(),Z(s.$$.fragment),a=j(),Z(o.$$.fragment),l=j(),Z(c.$$.fragment),this.h()},l(f){e=U(f,"DIV",{class:!0});var h=P(e);n=U(h,"DIV",{class:!0});var d=P(n);Q(r.$$.fragment,d),i=W(d),Q(s.$$.fragment,d),a=W(d),Q(o.$$.fragment,d),l=W(d),Q(c.$$.fragment,d),d.forEach(E),h.forEach(E),this.h()},h(){M(n,"class","flex items-center"),M(e,"class","flex items-center justify-end right-0 w-full")},m(f,h){H(f,e,h),x(e,n),X(r,n,null),x(n,i),X(s,n,null),x(n,a),X(o,n,null),x(n,l),X(c,n,null),u=!0},p(f,h){const d={};h&1024&&(d.label=f[10]("course.navItem.lessons.exercises.all_exercises.save")),h&128&&(d.isLoading=f[7]),r.$set(d);const m={};h&32&&(m.onClick=f[14]),h&32&&(m.contained=f[5]),h&1024&&(m.toolTipProps={title:f[10]("course.navItem.lessons.exercises.all_exercises.preview"),direction:"bottom",hotkeys:[]}),h&2097184&&(m.$$scope={dirty:h,ctx:f}),s.$set(m);const v={};h&2097152&&(v.$$scope={dirty:h,ctx:f}),o.$set(v);const p={};h&2100288&&(p.$$scope={dirty:h,ctx:f}),c.$set(p)},i(f){u||(A(r.$$.fragment,f),A(s.$$.fragment,f),A(o.$$.fragment,f),A(c.$$.fragment,f),u=!0)},o(f){L(r.$$.fragment,f),L(s.$$.fragment,f),L(o.$$.fragment,f),L(c.$$.fragment,f),u=!1},d(f){f&&E(e),K(r),K(s),K(o),K(c)}}}function Y9(t){let e,n;return e=new K2({props:{size:24,class:"carbon-icon dark:text-white"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function Z9(t){let e,n;return e=new eE({props:{size:24,class:"carbon-icon dark:text-white"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function X9(t){let e,n,r,i;const s=[Z9,Y9],a=[];function o(l,c){return l[5]?0:1}return e=o(t),n=a[e]=s[e](t),{c(){n.c(),r=fe()},l(l){n.l(l),r=fe()},m(l,c){a[e].m(l,c),H(l,r,c),i=!0},p(l,c){let u=e;e=o(l),e!==u&&(ye(),L(a[u],1,1,()=>{a[u]=null}),we(),n=a[e],n||(n=a[e]=s[e](l),n.c()),A(n,1),n.m(r.parentNode,r))},i(l){i||(A(n),i=!0)},o(l){L(n),i=!1},d(l){l&&E(r),a[e].d(l)}}}function K9(t){let e,n;return e=new o2({props:{size:24,class:"carbon-icon dark:text-white"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function Q9(t){let e,n,r,i;return e=new lh({props:{text:t[10]("course.navItem.lessons.exercises.all_exercises.reorder")}}),e.$on("click",t[16]),r=new lh({props:{danger:!0,text:t[10]("course.navItem.lessons.exercises.all_exercises.delete_exercise")}}),r.$on("click",t[17]),{c(){Z(e.$$.fragment),n=j(),Z(r.$$.fragment)},l(s){Q(e.$$.fragment,s),n=W(s),Q(r.$$.fragment,s)},m(s,a){X(e,s,a),H(s,n,a),X(r,s,a),i=!0},p(s,a){const o={};a&1024&&(o.text=s[10]("course.navItem.lessons.exercises.all_exercises.reorder")),e.$set(o);const l={};a&1024&&(l.text=s[10]("course.navItem.lessons.exercises.all_exercises.delete_exercise")),r.$set(l)},i(s){i||(A(e.$$.fragment,s),A(r.$$.fragment,s),i=!0)},o(s){L(e.$$.fragment,s),L(r.$$.fragment,s),i=!1},d(s){s&&E(n),K(e,s),K(r,s)}}}function J9(t){let e,n,r,i,s;function a(c){t[13](c)}let o={class:"mb-2",$$slots:{default:[W9]},$$scope:{ctx:t}};t[8]!==void 0&&(o.selectedIndex=t[8]),e=new Yw({props:o}),je.push(()=>et(e,"selectedIndex",a));let l=t[8]===0&&i0(t);return{c(){Z(e.$$.fragment),r=j(),l&&l.c(),i=fe()},l(c){Q(e.$$.fragment,c),r=W(c),l&&l.l(c),i=fe()},m(c,u){X(e,c,u),H(c,r,u),l&&l.m(c,u),H(c,i,u),s=!0},p(c,u){const f={};u&2098192&&(f.$$scope={dirty:u,ctx:c}),!n&&u&256&&(n=!0,f.selectedIndex=c[8],Je(()=>n=!1)),e.$set(f),c[8]===0?l?(l.p(c,u),u&256&&A(l,1)):(l=i0(c),l.c(),A(l,1),l.m(i.parentNode,i)):l&&(ye(),L(l,1,1,()=>{l=null}),we())},i(c){s||(A(e.$$.fragment,c),A(l),s=!0)},o(c){L(e.$$.fragment,c),L(l),s=!1},d(c){c&&(E(r),E(i)),K(e,c),l&&l.d(c)}}}function eF(t){let e,n,r;function i(a){t[19](a)}let s={};return t[0]!==void 0&&(s.exerciseId=t[0]),e=new F9({props:s}),je.push(()=>et(e,"exerciseId",i)),{c(){Z(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,o){X(e,a,o),r=!0},p(a,o){const l={};!n&&o&1&&(n=!0,l.exerciseId=a[0],Je(()=>n=!1)),e.$set(l)},i(a){r||(A(e.$$.fragment,a),r=!0)},o(a){L(e.$$.fragment,a),r=!1},d(a){K(e,a)}}}function tF(t){let e,n,r,i,s,a;e=new di({props:{allowedRoles:[1,2],$$slots:{default:[nF]},$$scope:{ctx:t}}});const o=[iF,rF],l=[];function c(u,f){return!u[9].isStudent&&!u[5]?0:1}return r=c(t),i=l[r]=o[r](t),{c(){Z(e.$$.fragment),n=j(),i.c(),s=fe()},l(u){Q(e.$$.fragment,u),n=W(u),i.l(u),s=fe()},m(u,f){X(e,u,f),H(u,n,f),l[r].m(u,f),H(u,s,f),a=!0},p(u,f){const h={};f&2097184&&(h.$$scope={dirty:f,ctx:u}),e.$set(h);let d=r;r=c(u),r===d?l[r].p(u,f):(ye(),L(l[d],1,1,()=>{l[d]=null}),we(),i=l[r],i?i.p(u,f):(i=l[r]=o[r](u),i.c()),A(i,1),i.m(s.parentNode,s))},i(u){a||(A(e.$$.fragment,u),A(i),a=!0)},o(u){L(e.$$.fragment,u),L(i),a=!1},d(u){u&&(E(n),E(s)),K(e,u),l[r].d(u)}}}function nF(t){let e,n;return e=new PT({props:{preview:t[5]}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i&32&&(s.preview=r[5]),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function rF(t){let e,n;return e=new K$({props:{preview:t[5],exerciseId:t[0],isFetchingExercise:t[3]}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i&32&&(s.preview=r[5]),i&1&&(s.exerciseId=r[0]),i&8&&(s.isFetchingExercise=r[3]),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function iF(t){let e,n,r;function i(a){t[18](a)}let s={exerciseId:t[0],goBack:t[2]};return t[6]!==void 0&&(s.shouldDeleteExercise=t[6]),e=new AT({props:s}),je.push(()=>et(e,"shouldDeleteExercise",i)),{c(){Z(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,o){X(e,a,o),r=!0},p(a,o){const l={};o&1&&(l.exerciseId=a[0]),o&4&&(l.goBack=a[2]),!n&&o&64&&(n=!0,l.shouldDeleteExercise=a[6],Je(()=>n=!1)),e.$set(l)},i(a){r||(A(e.$$.fragment,a),r=!0)},o(a){L(e.$$.fragment,a),r=!1},d(a){K(e,a)}}}function sF(t){let e,n,r,i,s,a,o,l,c;n=new Y0({props:{noTrailingSlash:!0,$$slots:{default:[j9]},$$scope:{ctx:t}}}),i=new di({props:{allowedRoles:[1,2],$$slots:{default:[J9]},$$scope:{ctx:t}}});const u=[tF,eF],f=[];function h(d,m){return d[8]===0?0:d[8]===1?1:-1}return~(a=h(t))&&(o=f[a]=u[a](t)),{c(){e=B("div"),Z(n.$$.fragment),r=j(),Z(i.$$.fragment),s=j(),o&&o.c(),l=fe(),this.h()},l(d){e=U(d,"DIV",{class:!0});var m=P(e);Q(n.$$.fragment,m),r=W(m),Q(i.$$.fragment,m),m.forEach(E),s=W(d),o&&o.l(d),l=fe(),this.h()},h(){M(e,"class","bg-gray-100 dark:bg-neutral-800 top-0 z-10 sticky p-2 mb-3")},m(d,m){H(d,e,m),X(n,e,null),x(e,r),X(i,e,null),H(d,s,m),~a&&f[a].m(d,m),H(d,l,m),c=!0},p(d,m){const v={};m&2098195&&(v.$$scope={dirty:m,ctx:d}),n.$set(v);const p={};m&2100720&&(p.$$scope={dirty:m,ctx:d}),i.$set(p);let g=a;a=h(d),a===g?~a&&f[a].p(d,m):(o&&(ye(),L(f[g],1,1,()=>{f[g]=null}),we()),~a?(o=f[a],o?o.p(d,m):(o=f[a]=u[a](d),o.c()),A(o,1),o.m(l.parentNode,l)):o=null)},i(d){c||(A(n.$$.fragment,d),A(i.$$.fragment,d),A(o),c=!0)},o(d){L(n.$$.fragment,d),L(i.$$.fragment,d),L(o),c=!1},d(d){d&&(E(e),E(s),E(l)),K(n),K(i),~a&&f[a].d(d)}}}function aF(t){let e,n,r;function i(a){t[20](a)}let s={padding:"px-4 overflow-x-hidden",$$slots:{default:[sF]},$$scope:{ctx:t}};return t[9].isStudent!==void 0&&(s.isPageNavHidden=t[9].isStudent),e=new Yu({props:s}),je.push(()=>et(e,"isPageNavHidden",i)),{c(){Z(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,o){X(e,a,o),r=!0},p(a,[o]){const l={};o&2101247&&(l.$$scope={dirty:o,ctx:a}),!n&&o&512&&(n=!0,l.isPageNavHidden=a[9].isStudent,Je(()=>n=!1)),e.$set(l)},i(a){r||(A(e.$$.fragment,a),r=!0)},o(a){L(e.$$.fragment,a),r=!1},d(a){K(e,a)}}}function oF(t,e,n){let r,i,s,a;be(t,Mt,C=>n(4,r=C)),be(t,Xr,C=>n(9,i=C)),be(t,Nt,C=>n(10,s=C)),be(t,Ps,C=>n(11,a=C));let{exerciseId:o=""}=e,{path:l=""}=e,{goBack:c=()=>{}}=e,{isFetching:u=!1}=e,f=!1,h=!1,d=!1,m=0;async function v(){if(i.isStudent)return;const C=k$(r.questions);if(!(Object.values(C).length>0)){n(7,d=!0),cd();try{const V=await Ty(r,o);Mt.update(I=>({...I,is_title_dirty:!1,is_description_dirty:!1,questions:V})),Dn.success("snackbar.exercise.success"),qi(l)}catch(V){console.error(V),Dn.error()}n(7,d=!1)}}I0(()=>{cd()});function p(C){m=C,n(8,m)}const g=()=>n(5,f=!f),_=()=>ud(),b=()=>Se(Ps,a.open=!0,a),y=()=>n(6,h=!0);function w(C){h=C,n(6,h)}function $(C){o=C,n(0,o)}function k(C){t.$$.not_equal(i.isStudent,C)&&(i.isStudent=C,Xr.set(i))}return t.$$set=C=>{"exerciseId"in C&&n(0,o=C.exerciseId),"path"in C&&n(1,l=C.path),"goBack"in C&&n(2,c=C.goBack),"isFetching"in C&&n(3,u=C.isFetching)},t.$$.update=()=>{var C;t.$$.dirty&16&&((C=r==null?void 0:r.questions)==null?void 0:C.length)<1&&ud()},[o,l,c,u,r,f,h,d,m,i,s,a,v,p,g,_,b,y,w,$,k]}class lF extends Pe{constructor(e){super(),Ve(this,e,oF,aF,Ae,{exerciseId:0,path:1,goBack:2,isFetching:3})}}const Cj=[{id:1,label:"RADIO"},{id:2,label:"CHECKBOX"},{id:3,label:"TEXTAREA"}];function cF(t){let e=0;return t.questionnaire.questions.forEach(n=>{e+=n.points}),e}function uF(t){let e=t.length,n;for(;e>0;)n=Math.floor(Math.random()*e),e--,[t[e],t[n]]=[t[n],t[e]];return t}const fF={HTML:"HTML",CSS:"CSS",JS:"JS",Typescript:"Typescript",ReactJS:"ReactJS",VueJS:"VueJS",NodeJS:"NodeJS",Python:"Python",PHP:"PHP",GIT:"GIT"};async function hF(t,e){const n=[];for(const r in t){const i=t[r],s=await e[i]();s.questionnaire.questions=s.questionnaire.questions.map(a=>(a.options=uF(a.options),a)),n.push({id:i,title:s.title,questions:s.questionnaire.questions.length,points:cF(s),data:s})}return n}const dF=async()=>{const t={HTML:await Mn(()=>import("./index.18424c27.js"),["./index.18424c27.js","./preload-helper.0639fc73.js","./index.a2391391.js","./scheduler.ee52cacd.js"],import.meta.url),CSS:await Mn(()=>import("./index.762a8f35.js"),["./index.762a8f35.js","./preload-helper.0639fc73.js","./index.a2391391.js","./scheduler.ee52cacd.js"],import.meta.url),JS:await Mn(()=>import("./index.1ac24817.js"),["./index.1ac24817.js","./preload-helper.0639fc73.js","./index.a2391391.js","./scheduler.ee52cacd.js"],import.meta.url),Typescript:await Mn(()=>import("./index.0f4597e6.js"),["./index.0f4597e6.js","./preload-helper.0639fc73.js","./index.a2391391.js","./scheduler.ee52cacd.js"],import.meta.url),ReactJS:await Mn(()=>import("./index.614e521d.js"),["./index.614e521d.js","./preload-helper.0639fc73.js","./index.a2391391.js","./scheduler.ee52cacd.js"],import.meta.url),VueJS:await Mn(()=>import("./index.ba75205c.js"),["./index.ba75205c.js","./preload-helper.0639fc73.js","./index.a2391391.js","./scheduler.ee52cacd.js"],import.meta.url),NodeJS:await Mn(()=>import("./index.04ccfe8e.js"),["./index.04ccfe8e.js","./preload-helper.0639fc73.js","./index.a2391391.js","./scheduler.ee52cacd.js"],import.meta.url),Python:await Mn(()=>import("./index.fa688437.js"),["./index.fa688437.js","./preload-helper.0639fc73.js","./index.a2391391.js","./scheduler.ee52cacd.js"],import.meta.url),PHP:await Mn(()=>import("./index.1de85e78.js"),["./index.1de85e78.js","./preload-helper.0639fc73.js","./index.a2391391.js","./scheduler.ee52cacd.js"],import.meta.url),GIT:await Mn(()=>import("./index.9cebc195.js"),["./index.9cebc195.js","./preload-helper.0639fc73.js","./index.a2391391.js","./scheduler.ee52cacd.js"],import.meta.url)},e={};for(const n in t)try{const r=t[n],i=r[`${n.toUpperCase()}_IDS`],s=r[`${n.toUpperCase()}_TEMPLATES`];if(!s)throw"Templates not found";e[n]=await hF(i,s)}catch(r){console.error("error finding template",r)}return e};function s0(t,e,n){const r=t.slice();return r[43]=e[n],r}function a0(t,e,n){const r=t.slice();return r[46]=e[n],r}function o0(t,e,n){const r=t.slice();return r[40]=e[n],r}function l0(t){let e,n;return e=new Dy({}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function mF(t){let e,n,r,i;const s=[_F,vF,gF],a=[];function o(l,c){return l[6]===l[17].SCRATCH?0:l[6]===l[17].TEMPLATE?1:l[6]===l[17].AI?2:-1}return~(e=o(t))&&(n=a[e]=s[e](t)),{c(){n&&n.c(),r=fe()},l(l){n&&n.l(l),r=fe()},m(l,c){~e&&a[e].m(l,c),H(l,r,c),i=!0},p(l,c){let u=e;e=o(l),e===u?~e&&a[e].p(l,c):(n&&(ye(),L(a[u],1,1,()=>{a[u]=null}),we()),~e?(n=a[e],n?n.p(l,c):(n=a[e]=s[e](l),n.c()),A(n,1),n.m(r.parentNode,r)):n=null)},i(l){i||(A(n),i=!0)},o(l){L(n),i=!1},d(l){l&&E(r),~e&&a[e].d(l)}}}function pF(t){let e,n,r=t[16]("course.navItem.lessons.exercises.new_exercise_modal.how")+"",i,s,a,o,l,c,u,f,h=Fe(t[19]),d=[];for(let v=0;v<h.length;v+=1)d[v]=h0(o0(t,h,v));const m=v=>L(d[v],1,1,()=>{d[v]=null});return u=new dt({props:{className:"px-6 py-3",label:t[16]("course.navItem.lessons.exercises.new_exercise_modal.next"),onClick:t[23]}}),{c(){e=B("div"),n=B("h2"),i=ne(r),s=ne("?"),a=j(),o=B("div");for(let v=0;v<d.length;v+=1)d[v].c();l=j(),c=B("div"),Z(u.$$.fragment),this.h()},l(v){e=U(v,"DIV",{});var p=P(e);n=U(p,"H2",{class:!0});var g=P(n);i=re(g,r),s=re(g,"?"),g.forEach(E),a=W(p),o=U(p,"DIV",{class:!0});var _=P(o);for(let y=0;y<d.length;y+=1)d[y].l(_);_.forEach(E),l=W(p),c=U(p,"DIV",{class:!0});var b=P(c);Q(u.$$.fragment,b),b.forEach(E),p.forEach(E),this.h()},h(){M(n,"class","text-2xl font-medium my-5"),M(o,"class","flex gap-2 justify-between my-8"),M(c,"class","mt-8 flex items-center flex-row-reverse")},m(v,p){H(v,e,p),x(e,n),x(n,i),x(n,s),x(e,a),x(e,o);for(let g=0;g<d.length;g+=1)d[g]&&d[g].m(o,null);x(e,l),x(e,c),X(u,c,null),f=!0},p(v,p){if((!f||p[0]&65536)&&r!==(r=v[16]("course.navItem.lessons.exercises.new_exercise_modal.how")+"")&&se(i,r),p[0]&524352){h=Fe(v[19]);let _;for(_=0;_<h.length;_+=1){const b=o0(v,h,_);d[_]?(d[_].p(b,p),A(d[_],1)):(d[_]=h0(b),d[_].c(),A(d[_],1),d[_].m(o,null))}for(ye(),_=h.length;_<d.length;_+=1)m(_);we()}const g={};p[0]&65536&&(g.label=v[16]("course.navItem.lessons.exercises.new_exercise_modal.next")),u.$set(g)},i(v){if(!f){for(let p=0;p<h.length;p+=1)A(d[p]);A(u.$$.fragment,v),f=!0}},o(v){d=d.filter(Boolean);for(let p=0;p<d.length;p+=1)L(d[p]);L(u.$$.fragment,v),f=!1},d(v){v&&E(e),Gt(d,v),K(u)}}}function gF(t){let e,n,r,i,s,a,o,l,c,u,f,h,d,m,v,p,g,_;const b=[yF,bF],y=[];function w(V,I){return V[10].length?0:1}i=w(t),s=y[i]=b[i](t),l=new dt({props:{onClick:t[25],isLoading:t[15],isDisabled:t[15]||!t[10],variant:gn.OUTLINED,$$slots:{default:[wF]},$$scope:{ctx:t}}});const $=[TF,$F,EF],k=[];function C(V,I){return V[15]?0:V[9]?1:2}return f=C(t),h=k[f]=$[f](t),v=new dt({props:{className:"px-6 py-3",label:t[16]("course.navItem.lessons.exercises.new_exercise_modal.back"),variant:gn.TEXT,onClick:t[24]}}),g=new dt({props:{isDisabled:t[15]||!t[10],className:"px-6 py-3",label:t[16]("course.navItem.lessons.exercises.new_exercise_modal.finish"),onClick:t[2]}}),{c(){e=B("div"),n=B("div"),r=B("div"),s.c(),a=j(),o=B("div"),Z(l.$$.fragment),c=j(),u=B("div"),h.c(),d=j(),m=B("div"),Z(v.$$.fragment),p=j(),Z(g.$$.fragment),this.h()},l(V){e=U(V,"DIV",{});var I=P(e);n=U(I,"DIV",{class:!0});var S=P(n);r=U(S,"DIV",{class:!0});var N=P(r);s.l(N),a=W(N),o=U(N,"DIV",{class:!0});var O=P(o);Q(l.$$.fragment,O),O.forEach(E),N.forEach(E),c=W(S),u=U(S,"DIV",{class:!0});var R=P(u);h.l(R),R.forEach(E),S.forEach(E),d=W(I),m=U(I,"DIV",{class:!0});var T=P(m);Q(v.$$.fragment,T),p=W(T),Q(g.$$.fragment,T),T.forEach(E),I.forEach(E),this.h()},h(){M(o,"class","mt-5 flex items-center flex-row-reverse"),M(r,"class","w-[60%] mr-1 border px-3 py-2 rounded-md"),M(u,"class","w-[40%] px-5 py-3 border rounded-md overflow-y-auto flex justify-center items-center"),M(n,"class","flex flex-row justify-between max-h-[500px]"),M(m,"class","mt-5 flex items-center justify-between")},m(V,I){H(V,e,I),x(e,n),x(n,r),y[i].m(r,null),x(r,a),x(r,o),X(l,o,null),x(n,c),x(n,u),k[f].m(u,null),x(e,d),x(e,m),X(v,m,null),x(m,p),X(g,m,null),_=!0},p(V,I){let S=i;i=w(V),i===S?y[i].p(V,I):(ye(),L(y[S],1,1,()=>{y[S]=null}),we(),s=y[i],s?s.p(V,I):(s=y[i]=b[i](V),s.c()),A(s,1),s.m(r,a));const N={};I[0]&32768&&(N.isLoading=V[15]),I[0]&33792&&(N.isDisabled=V[15]||!V[10]),I[0]&65536|I[1]&262144&&(N.$$scope={dirty:I,ctx:V}),l.$set(N);let O=f;f=C(V),f===O?k[f].p(V,I):(ye(),L(k[O],1,1,()=>{k[O]=null}),we(),h=k[f],h?h.p(V,I):(h=k[f]=$[f](V),h.c()),A(h,1),h.m(u,null));const R={};I[0]&65536&&(R.label=V[16]("course.navItem.lessons.exercises.new_exercise_modal.back")),v.$set(R);const T={};I[0]&33792&&(T.isDisabled=V[15]||!V[10]),I[0]&65536&&(T.label=V[16]("course.navItem.lessons.exercises.new_exercise_modal.finish")),I[0]&4&&(T.onClick=V[2]),g.$set(T)},i(V){_||(A(s),A(l.$$.fragment,V),A(h),A(v.$$.fragment,V),A(g.$$.fragment,V),_=!0)},o(V){L(s),L(l.$$.fragment,V),L(h),L(v.$$.fragment,V),L(g.$$.fragment,V),_=!1},d(V){V&&E(e),y[i].d(),K(l),k[f].d(),K(v),K(g)}}}function vF(t){let e,n,r=t[16]("course.navItem.lessons.exercises.new_exercise_modal.select_template")+"",i,s,a,o,l,c,u,f,h,d,m,v,p=Fe(t[20]),g=[];for(let y=0;y<p.length;y+=1)g[y]=c0(a0(t,p,y));const _=y=>L(g[y],1,1,()=>{g[y]=null});let b=t[11]&&u0(t);return h=new dt({props:{className:"px-6 py-3",label:t[16]("course.navItem.lessons.exercises.new_exercise_modal.back"),variant:gn.OUTLINED,onClick:t[24]}}),m=new dt({props:{isDisabled:!t[13]||!t[11],className:"px-6 py-3",label:t[16]("course.navItem.lessons.exercises.new_exercise_modal.finish"),isLoading:t[14],onClick:t[33]}}),{c(){e=B("div"),n=B("h2"),i=ne(r),s=j(),a=B("div"),o=B("div");for(let y=0;y<g.length;y+=1)g[y].c();l=j(),c=B("div"),b&&b.c(),u=j(),f=B("div"),Z(h.$$.fragment),d=j(),Z(m.$$.fragment),this.h()},l(y){e=U(y,"DIV",{});var w=P(e);n=U(w,"H2",{class:!0});var $=P(n);i=re($,r),$.forEach(E),s=W(w),a=U(w,"DIV",{});var k=P(a);o=U(k,"DIV",{class:!0});var C=P(o);for(let S=0;S<g.length;S+=1)g[S].l(C);C.forEach(E),l=W(k),c=U(k,"DIV",{class:!0});var V=P(c);b&&b.l(V),V.forEach(E),u=W(k),f=U(k,"DIV",{class:!0});var I=P(f);Q(h.$$.fragment,I),d=W(I),Q(m.$$.fragment,I),I.forEach(E),k.forEach(E),w.forEach(E),this.h()},h(){M(n,"class","text-2xl font-medium mb-2 m-0"),M(o,"class","mb-5 flex items-center gap-2"),M(c,"class","flex flex-wrap items-start gap-2"),M(f,"class","mt-5 flex items-center justify-between")},m(y,w){H(y,e,w),x(e,n),x(n,i),x(e,s),x(e,a),x(a,o);for(let $=0;$<g.length;$+=1)g[$]&&g[$].m(o,null);x(a,l),x(a,c),b&&b.m(c,null),x(a,u),x(a,f),X(h,f,null),x(f,d),X(m,f,null),v=!0},p(y,w){if((!v||w[0]&65536)&&r!==(r=y[16]("course.navItem.lessons.exercises.new_exercise_modal.select_template")+"")&&se(i,r),w[0]&1060864){p=Fe(y[20]);let C;for(C=0;C<p.length;C+=1){const V=a0(y,p,C);g[C]?(g[C].p(V,w),A(g[C],1)):(g[C]=c0(V),g[C].c(),A(g[C],1),g[C].m(o,null))}for(ye(),C=p.length;C<g.length;C+=1)_(C);we()}y[11]?b?b.p(y,w):(b=u0(y),b.c(),b.m(c,null)):b&&(b.d(1),b=null);const $={};w[0]&65536&&($.label=y[16]("course.navItem.lessons.exercises.new_exercise_modal.back")),h.$set($);const k={};w[0]&10240&&(k.isDisabled=!y[13]||!y[11]),w[0]&65536&&(k.label=y[16]("course.navItem.lessons.exercises.new_exercise_modal.finish")),w[0]&16384&&(k.isLoading=y[14]),w[0]&30736&&(k.onClick=y[33]),m.$set(k)},i(y){if(!v){for(let w=0;w<p.length;w+=1)A(g[w]);A(h.$$.fragment,y),A(m.$$.fragment,y),v=!0}},o(y){g=g.filter(Boolean);for(let w=0;w<g.length;w+=1)L(g[w]);L(h.$$.fragment,y),L(m.$$.fragment,y),v=!1},d(y){y&&E(e),Gt(g,y),b&&b.d(),K(h),K(m)}}}function _F(t){let e,n,r,i=t[16]("course.navItem.lessons.exercises.new_exercise_modal.title")+"",s,a,o,l,c,u,f,h,d,m;function v(g){t[30](g)}let p={autoFocus:!0,placeholder:t[16]("course.navItem.lessons.exercises.new_exercise_modal.title_placeholder"),className:"my-4"};return t[1]!==void 0&&(p.value=t[1]),o=new mr({props:p}),je.push(()=>et(o,"value",v)),f=new dt({props:{className:"px-6 py-3",label:t[16]("course.navItem.lessons.exercises.new_exercise_modal.back"),variant:gn.OUTLINED,onClick:t[24]}}),d=new dt({props:{className:"px-6 py-3",label:t[16]("course.navItem.lessons.exercises.new_exercise_modal.finish"),onClick:t[2]}}),{c(){e=B("div"),n=B("div"),r=B("h2"),s=ne(i),a=j(),Z(o.$$.fragment),c=j(),u=B("div"),Z(f.$$.fragment),h=j(),Z(d.$$.fragment),this.h()},l(g){e=U(g,"DIV",{class:!0});var _=P(e);n=U(_,"DIV",{class:!0});var b=P(n);r=U(b,"H2",{class:!0});var y=P(r);s=re(y,i),y.forEach(E),a=W(b),Q(o.$$.fragment,b),c=W(b),u=U(b,"DIV",{class:!0});var w=P(u);Q(f.$$.fragment,w),h=W(w),Q(d.$$.fragment,w),w.forEach(E),b.forEach(E),_.forEach(E),this.h()},h(){M(r,"class","text-2xl font-medium my-5"),M(u,"class","mt-5 flex items-center justify-between"),M(n,"class","w-full"),M(e,"class","flex items-center justify-center w-96 m-auto min-h-[300px]")},m(g,_){H(g,e,_),x(e,n),x(n,r),x(r,s),x(n,a),X(o,n,null),x(n,c),x(n,u),X(f,u,null),x(u,h),X(d,u,null),m=!0},p(g,_){(!m||_[0]&65536)&&i!==(i=g[16]("course.navItem.lessons.exercises.new_exercise_modal.title")+"")&&se(s,i);const b={};_[0]&65536&&(b.placeholder=g[16]("course.navItem.lessons.exercises.new_exercise_modal.title_placeholder")),!l&&_[0]&2&&(l=!0,b.value=g[1],Je(()=>l=!1)),o.$set(b);const y={};_[0]&65536&&(y.label=g[16]("course.navItem.lessons.exercises.new_exercise_modal.back")),f.$set(y);const w={};_[0]&65536&&(w.label=g[16]("course.navItem.lessons.exercises.new_exercise_modal.finish")),_[0]&4&&(w.onClick=g[2]),d.$set(w)},i(g){m||(A(o.$$.fragment,g),A(f.$$.fragment,g),A(d.$$.fragment,g),m=!0)},o(g){L(o.$$.fragment,g),L(f.$$.fragment,g),L(d.$$.fragment,g),m=!1},d(g){g&&E(e),K(o),K(f),K(d)}}}function bF(t){let e,n=t[16]("course.navItem.lessons.exercises.new_exercise_modal.add_note")+"",r;return{c(){e=B("h3"),r=ne(n)},l(i){e=U(i,"H3",{});var s=P(e);r=re(s,n),s.forEach(E)},m(i,s){H(i,e,s),x(e,r)},p(i,s){s[0]&65536&&n!==(n=i[16]("course.navItem.lessons.exercises.new_exercise_modal.add_note")+"")&&se(r,n)},i:he,o:he,d(i){i&&E(e)}}}function yF(t){let e,n=t[16]("course.navItem.lessons.exercises.new_exercise_modal.create_exercises")+"",r,i,s,a=t[16]("course.navItem.lessons.exercises.new_exercise_modal.choose_questions")+"",o,l,c,u,f,h,d,m;function v(b){t[34](b)}let p={label:t[16]("course.navItem.lessons.exercises.new_exercise_modal.how_many_questions"),type:"number",placeholder:"5",className:"mb-2",isRequired:!0};t[7]!==void 0&&(p.value=t[7]),c=new mr({props:p}),je.push(()=>et(c,"value",v));function g(b){t[35](b)}let _={label:t[16]("course.navItem.lessons.exercises.new_exercise_modal.how_many_options"),type:"number",placeholder:"5",isRequired:!0};return t[8]!==void 0&&(_.value=t[8]),h=new mr({props:_}),je.push(()=>et(h,"value",g)),{c(){e=B("h3"),r=ne(n),i=j(),s=B("p"),o=ne(a),l=j(),Z(c.$$.fragment),f=j(),Z(h.$$.fragment),this.h()},l(b){e=U(b,"H3",{});var y=P(e);r=re(y,n),y.forEach(E),i=W(b),s=U(b,"P",{class:!0});var w=P(s);o=re(w,a),w.forEach(E),l=W(b),Q(c.$$.fragment,b),f=W(b),Q(h.$$.fragment,b),this.h()},h(){M(s,"class","text-sm mb-4")},m(b,y){H(b,e,y),x(e,r),H(b,i,y),H(b,s,y),x(s,o),H(b,l,y),X(c,b,y),H(b,f,y),X(h,b,y),m=!0},p(b,y){(!m||y[0]&65536)&&n!==(n=b[16]("course.navItem.lessons.exercises.new_exercise_modal.create_exercises")+"")&&se(r,n),(!m||y[0]&65536)&&a!==(a=b[16]("course.navItem.lessons.exercises.new_exercise_modal.choose_questions")+"")&&se(o,a);const w={};y[0]&65536&&(w.label=b[16]("course.navItem.lessons.exercises.new_exercise_modal.how_many_questions")),!u&&y[0]&128&&(u=!0,w.value=b[7],Je(()=>u=!1)),c.$set(w);const $={};y[0]&65536&&($.label=b[16]("course.navItem.lessons.exercises.new_exercise_modal.how_many_options")),!d&&y[0]&256&&(d=!0,$.value=b[8],Je(()=>d=!1)),h.$set($)},i(b){m||(A(c.$$.fragment,b),A(h.$$.fragment,b),m=!0)},o(b){L(c.$$.fragment,b),L(h.$$.fragment,b),m=!1},d(b){b&&(E(e),E(i),E(s),E(l),E(f)),K(c,b),K(h,b)}}}function wF(t){let e=t[16]("course.navItem.lessons.exercises.new_exercise_modal.generate")+"",n;return{c(){n=ne(e)},l(r){n=re(r,e)},m(r,i){H(r,n,i)},p(r,i){i[0]&65536&&e!==(e=r[16]("course.navItem.lessons.exercises.new_exercise_modal.generate")+"")&&se(n,e)},d(r){r&&E(n)}}}function EF(t){let e,n=t[16]("course.navItem.lessons.exercises.new_exercise_modal.click_generate")+"",r;return{c(){e=B("p"),r=ne(n),this.h()},l(i){e=U(i,"P",{class:!0});var s=P(e);r=re(s,n),s.forEach(E),this.h()},h(){M(e,"class","max-h-[200px] leading-7 text-sm")},m(i,s){H(i,e,s),x(e,r)},p(i,s){s[0]&65536&&n!==(n=i[16]("course.navItem.lessons.exercises.new_exercise_modal.click_generate")+"")&&se(r,n)},i:he,o:he,d(i){i&&E(e)}}}function $F(t){let e,n=t[16]("course.navItem.lessons.exercises.new_exercise_modal.completion")+"",r;return{c(){e=B("p"),r=ne(n),this.h()},l(i){e=U(i,"P",{class:!0});var s=P(e);r=re(s,n),s.forEach(E),this.h()},h(){M(e,"class","max-h-[200px] leading-7 text-sm")},m(i,s){H(i,e,s),x(e,r)},p(i,s){s[0]&65536&&n!==(n=i[16]("course.navItem.lessons.exercises.new_exercise_modal.completion")+"")&&se(r,n)},i:he,o:he,d(i){i&&E(e)}}}function TF(t){let e,n;return e=new rE({props:{size:"60",unit:"px",duration:"1s"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function SF(t){let e=t[46]+"",n;return{c(){n=ne(e)},l(r){n=re(r,e)},m(r,i){H(r,n,i)},p:he,d(r){r&&E(n)}}}function c0(t){let e,n;function r(){return t[31](t[46])}return e=new Qu({props:{type:t[12]===t[46]?"warm-gray":"outline",class:t[12]===t[46]?"bg-primary-400":"",interactive:!0,$$slots:{default:[SF]},$$scope:{ctx:t}}}),e.$on("click",r),{c(){Z(e.$$.fragment)},l(i){Q(e.$$.fragment,i)},m(i,s){X(e,i,s),n=!0},p(i,s){t=i;const a={};s[0]&4096&&(a.type=t[12]===t[46]?"warm-gray":"outline"),s[0]&4096&&(a.class=t[12]===t[46]?"bg-primary-400":""),s[1]&262144&&(a.$$scope={dirty:s,ctx:t}),e.$set(a)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){K(e,i)}}}function u0(t){let e,n=Fe(t[11][t[12]]),r=[];for(let i=0;i<n.length;i+=1)r[i]=f0(s0(t,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=fe()},l(i){for(let s=0;s<r.length;s+=1)r[s].l(i);e=fe()},m(i,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(i,s);H(i,e,s)},p(i,s){if(s[0]&79872){n=Fe(i[11][i[12]]);let a;for(a=0;a<n.length;a+=1){const o=s0(i,n,a);r[a]?r[a].p(o,s):(r[a]=f0(o),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(i){i&&E(e),Gt(r,i)}}}function f0(t){let e,n,r,i=t[43].title+"",s,a,o,l,c=t[43].questions+"",u,f,h=t[16]("course.navItem.lessons.exercises.new_exercise_modal.questions")+"",d,m,v,p=t[43].points+"",g,_,b=t[16]("course.navItem.lessons.exercises.new_exercise_modal.points")+"",y,w,$,k,C;function V(){return t[32](t[43])}return{c(){e=B("button"),n=B("div"),r=B("p"),s=ne(i),a=j(),o=B("div"),l=B("p"),u=ne(c),f=j(),d=ne(h),m=j(),v=B("p"),g=ne(p),_=j(),y=ne(b),w=j(),this.h()},l(I){e=U(I,"BUTTON",{class:!0,type:!0});var S=P(e);n=U(S,"DIV",{class:!0});var N=P(n);r=U(N,"P",{class:!0});var O=P(r);s=re(O,i),O.forEach(E),a=W(N),o=U(N,"DIV",{class:!0});var R=P(o);l=U(R,"P",{class:!0});var T=P(l);u=re(T,c),f=W(T),d=re(T,h),T.forEach(E),m=W(R),v=U(R,"P",{class:!0});var F=P(v);g=re(F,p),_=W(F),y=re(F,b),F.forEach(E),R.forEach(E),N.forEach(E),w=W(S),S.forEach(E),this.h()},h(){M(r,"class","font-bold text-sm text-start flex items-center"),M(l,"class","text-xs font-normal"),M(v,"class","text-xs font-normal text-start"),M(o,"class","flex flex-col items-start justify-between gap-1"),M(n,"class","flex flex-col justify-evenly h-full"),M(e,"class",$="w-[161px] h-[140px] hover:scale-95 p-5 rounded-md dark:bg-neutral-700 border-2 "+(t[43].id===t[13]?"border-primary-400":"border-gray-200 dark:border-neutral-600 ")+" flex flex-col transition-all ease-in-out"),M(e,"type","button")},m(I,S){H(I,e,S),x(e,n),x(n,r),x(r,s),x(n,a),x(n,o),x(o,l),x(l,u),x(l,f),x(l,d),x(o,m),x(o,v),x(v,g),x(v,_),x(v,y),x(e,w),k||(C=qe(e,"click",V),k=!0)},p(I,S){t=I,S[0]&6144&&i!==(i=t[43].title+"")&&se(s,i),S[0]&6144&&c!==(c=t[43].questions+"")&&se(u,c),S[0]&65536&&h!==(h=t[16]("course.navItem.lessons.exercises.new_exercise_modal.questions")+"")&&se(d,h),S[0]&6144&&p!==(p=t[43].points+"")&&se(g,p),S[0]&65536&&b!==(b=t[16]("course.navItem.lessons.exercises.new_exercise_modal.points")+"")&&se(y,b),S[0]&14336&&$!==($="w-[161px] h-[140px] hover:scale-95 p-5 rounded-md dark:bg-neutral-700 border-2 "+(t[43].id===t[13]?"border-primary-400":"border-gray-200 dark:border-neutral-600 ")+" flex flex-col transition-all ease-in-out")&&M(e,"class",$)},d(I){I&&E(e),k=!1,C()}}}function xF(t){let e,n;return e=new fl({props:{size:16,class:"carbon-icon"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function kF(t){let e,n;return e=new hl({props:{size:16,class:"carbon-icon text-primary-600 dark:text-primary-200"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function OF(t){let e,n;return e=new yw({}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function h0(t){let e,n,r,i,s,a,o,l,c=t[40].title+"",u,f,h,d,m=t[40].subtitle+"",v,p,g,_,b,y;const w=[kF,xF],$=[];function k(I,S){return I[40].type===I[6]?0:I[40].isDisabled?-1:1}~(r=k(t))&&(i=$[r]=w[r](t));let C=t[40].isDisabled&&OF();function V(){return t[29](t[40])}return{c(){e=B("button"),n=B("div"),i&&i.c(),s=j(),a=B("div"),o=B("p"),l=B("span"),u=ne(c),f=j(),C&&C.c(),h=j(),d=B("p"),v=ne(m),p=j(),this.h()},l(I){e=U(I,"BUTTON",{class:!0,type:!0});var S=P(e);n=U(S,"DIV",{class:!0});var N=P(n);i&&i.l(N),N.forEach(E),s=W(S),a=U(S,"DIV",{});var O=P(a);o=U(O,"P",{class:!0});var R=P(o);l=U(R,"SPAN",{class:!0});var T=P(l);u=re(T,c),T.forEach(E),f=W(R),C&&C.l(R),R.forEach(E),h=W(O),d=U(O,"P",{class:!0});var F=P(d);v=re(F,m),F.forEach(E),O.forEach(E),p=W(S),S.forEach(E),this.h()},h(){M(n,"class","w-full flex flex-row-reverse h-[70%]"),M(l,"class","mr-2 text-sm"),M(o,"class","font-bold text-start flex items-center"),M(d,"class","text-xs font-light text-start"),M(e,"class",g="w-[261px] h-[240px] p-5 rounded-md dark:bg-neutral-700 border-2 "+(t[40].type===t[6]?"border-primary-400":`border-gray-200 dark:border-neutral-600 ${!t[40].isDisabled&&"hover:scale-95"}`)+" flex flex-col "+(t[40].isDisabled&&"cursor-not-allowed opacity-60")+" transition-all ease-in-out"),M(e,"type","button")},m(I,S){H(I,e,S),x(e,n),~r&&$[r].m(n,null),x(e,s),x(e,a),x(a,o),x(o,l),x(l,u),x(o,f),C&&C.m(o,null),x(a,h),x(a,d),x(d,v),x(e,p),_=!0,b||(y=qe(e,"click",function(){L0(t[40].isDisabled?void 0:V)&&(t[40].isDisabled?void 0:V).apply(this,arguments)}),b=!0)},p(I,S){t=I;let N=r;r=k(t),r!==N&&(i&&(ye(),L($[N],1,1,()=>{$[N]=null}),we()),~r?(i=$[r],i||(i=$[r]=w[r](t),i.c()),A(i,1),i.m(n,null)):i=null),(!_||S[0]&64&&g!==(g="w-[261px] h-[240px] p-5 rounded-md dark:bg-neutral-700 border-2 "+(t[40].type===t[6]?"border-primary-400":`border-gray-200 dark:border-neutral-600 ${!t[40].isDisabled&&"hover:scale-95"}`)+" flex flex-col "+(t[40].isDisabled&&"cursor-not-allowed opacity-60")+" transition-all ease-in-out"))&&M(e,"class",g)},i(I){_||(A(i),A(C),_=!0)},o(I){L(i),L(C),_=!1},d(I){I&&E(e),~r&&$[r].d(),C&&C.d(),b=!1,y()}}}function MF(t){let e,n,r,i,s,a=!t[15]&&t[9]&&l0();const o=[pF,mF],l=[];function c(u,f){return u[5]===0?0:u[5]===1?1:-1}return~(n=c(t))&&(r=l[n]=o[n](t)),{c(){a&&a.c(),e=j(),r&&r.c(),i=fe()},l(u){a&&a.l(u),e=W(u),r&&r.l(u),i=fe()},m(u,f){a&&a.m(u,f),H(u,e,f),~n&&l[n].m(u,f),H(u,i,f),s=!0},p(u,f){!u[15]&&u[9]?a?f[0]&33280&&A(a,1):(a=l0(),a.c(),A(a,1),a.m(e.parentNode,e)):a&&(ye(),L(a,1,1,()=>{a=null}),we());let h=n;n=c(u),n===h?~n&&l[n].p(u,f):(r&&(ye(),L(l[h],1,1,()=>{l[h]=null}),we()),~n?(r=l[n],r?r.p(u,f):(r=l[n]=o[n](u),r.c()),A(r,1),r.m(i.parentNode,i)):r=null)},i(u){s||(A(a),A(r),s=!0)},o(u){L(a),L(r),s=!1},d(u){u&&(E(e),E(i)),a&&a.d(u),~n&&l[n].d(u)}}}function CF(t){let e,n,r;function i(a){t[36](a)}let s={onClose:t[3],modalHeading:t[16]("course.navItem.lessons.exercises.new_exercise_modal.heading"),maxWidth:"max-w-4xl",width:"w-4/5",$$slots:{default:[MF]},$$scope:{ctx:t}};return t[0]!==void 0&&(s.open=t[0]),e=new fa({props:s}),je.push(()=>et(e,"open",i)),{c(){Z(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,o){X(e,a,o),r=!0},p(a,o){const l={};o[0]&8&&(l.onClose=a[3]),o[0]&65536&&(l.modalHeading=a[16]("course.navItem.lessons.exercises.new_exercise_modal.heading")),o[0]&131062|o[1]&262144&&(l.$$scope={dirty:o,ctx:a}),!n&&o[0]&1&&(n=!0,l.open=a[0],Je(()=>n=!1)),e.$set(l)},i(a){r||(A(e.$$.fragment,a),r=!0)},o(a){L(e.$$.fragment,a),r=!1},d(a){K(e,a)}}}function AF(t,e,n){let r,i,s,a,o,l,c;be(t,pt,oe=>n(27,i=oe)),be(t,ji,oe=>n(28,s=oe)),be(t,Nt,oe=>n(16,c=oe));let{open:u=!1}=e,{handleAddExercise:f=()=>{}}=e,{handleCancelAddExercise:h=()=>{}}=e,{handleTemplateCreate:d}=e,{title:m=""}=e;var v=(oe=>(oe[oe.SCRATCH=0]="SCRATCH",oe[oe.TEMPLATE=1]="TEMPLATE",oe[oe.AI=2]="AI",oe))(v||{});let p=0,g=0,_=5,b=5,y=$r(!1);be(t,y,oe=>n(15,a=oe));let w=!1,$="",k;const C=[{title:c("course.navItem.lessons.exercises.new_exercise_modal.options.from_scratch"),subtitle:c("course.navItem.lessons.exercises.new_exercise_modal.options.from_scratch_subtitle"),type:0,isDisabled:!1},{title:c("course.navItem.lessons.exercises.new_exercise_modal.options.use_template"),subtitle:c("course.navItem.lessons.exercises.new_exercise_modal.options.use_template_subtitle"),type:1,isDisabled:!1},{title:c("course.navItem.lessons.exercises.new_exercise_modal.options.use_ai"),subtitle:c("course.navItem.lessons.exercises.new_exercise_modal.options.use_ai_subtitle"),type:2,isDisabled:!1}],V=Object.values(fF);let I=V[0],S="",N=!1;const{input:O,handleSubmit:R,completion:T}=B0({api:"/api/completion/exerciseprompt",onFinish:async(oe,it)=>{if(!i.id)return;ih();const ve=l.replace("```json","").replace("```",""),ke=JSON.parse(ve);await d(ke),ih(),Se(y,a=!1,a)}});be(t,O,oe=>n(37,o=oe)),be(t,T,oe=>n(38,l=oe));function F(){n(5,p=p+1)}function G(){n(5,p=p-1)}function q(){Se(O,o=JSON.stringify({questionNumber:_,optionNumber:b,lessonNote:$}),o),setTimeout(()=>{n(9,w=!0),Se(y,a=!0,a),R({preventDefault:()=>{}})},500)}us(async()=>{n(11,k=await dF())});const Y=oe=>n(6,g=oe.type);function te(oe){m=oe,n(1,m)}const ie=oe=>{n(12,I=oe),n(13,S="")},pe=oe=>n(13,S=oe.id),Re=async()=>{n(14,N=!0);const oe=k[I].find(it=>it.id===S);oe&&(console.log("Selected template",oe),await d(oe.data),n(14,N=!0))};function ce(oe){_=oe,n(7,_)}function ge(oe){b=oe,n(8,b)}function Ue(oe){u=oe,n(0,u)}return t.$$set=oe=>{"open"in oe&&n(0,u=oe.open),"handleAddExercise"in oe&&n(2,f=oe.handleAddExercise),"handleCancelAddExercise"in oe&&n(3,h=oe.handleCancelAddExercise),"handleTemplateCreate"in oe&&n(4,d=oe.handleTemplateCreate),"title"in oe&&n(1,m=oe.title)},t.$$.update=()=>{t.$$.dirty[0]&402653184&&n(26,r=Ku(i.materials.note,s[i.id||""],i.locale)),t.$$.dirty[0]&67108864&&n(10,$=Ky(r))},[u,m,f,h,d,p,g,_,b,w,$,k,I,S,N,a,c,v,y,C,V,O,T,F,G,q,r,i,s,Y,te,ie,pe,Re,ce,ge,Ue]}class IF extends Pe{constructor(e){super(),Ve(this,e,AF,CF,Ae,{open:0,handleAddExercise:2,handleCancelAddExercise:3,handleTemplateCreate:4,title:1},null,[-1,-1])}}function d0(t,e,n){const r=t.slice();return r[20]=e[n],r}function m0(t){let e,n;return e=new Ly({props:{$$slots:{default:[DF]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function DF(t){let e,n;return e=new ew({props:{size:"60",color:"#1d4ed8",unit:"px",duration:"1s"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function LF(t){let e,n,r,i,s,a,o;function l(d){t[14](d)}function c(d){t[15](d)}let u={handleCancelAddExercise:t[10],handleAddExercise:t[9],handleTemplateCreate:t[8]};t[2]!==void 0&&(u.open=t[2]),t[4].title!==void 0&&(u.title=t[4].title),e=new IF({props:u}),je.push(()=>et(e,"open",l)),je.push(()=>et(e,"title",c));function f(d){t[17](d)}let h={$$slots:{header:[FF],default:[BF]},$$scope:{ctx:t}};return t[6].isStudent!==void 0&&(h.isPageNavHidden=t[6].isStudent),s=new Yu({props:h}),je.push(()=>et(s,"isPageNavHidden",f)),{c(){Z(e.$$.fragment),i=j(),Z(s.$$.fragment)},l(d){Q(e.$$.fragment,d),i=W(d),Q(s.$$.fragment,d)},m(d,m){X(e,d,m),H(d,i,m),X(s,d,m),o=!0},p(d,m){const v={};!n&&m&4&&(n=!0,v.open=d[2],Je(()=>n=!1)),!r&&m&16&&(r=!0,v.title=d[4].title,Je(()=>r=!1)),e.$set(v);const p={};m&8388837&&(p.$$scope={dirty:m,ctx:d}),!a&&m&64&&(a=!0,p.isPageNavHidden=d[6].isStudent,Je(()=>a=!1)),s.$set(p)},i(d){o||(A(e.$$.fragment,d),A(s.$$.fragment,d),o=!0)},o(d){L(e.$$.fragment,d),L(s.$$.fragment,d),o=!1},d(d){d&&E(i),K(e,d),K(s,d)}}}function RF(t){let e,n,r;function i(a){t[13](a)}let s={exerciseId:t[1],goBack:t[11],isFetching:t[3]};return t[0]!==void 0&&(s.path=t[0]),e=new lF({props:s}),je.push(()=>et(e,"path",i)),{c(){Z(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,o){X(e,a,o),r=!0},p(a,o){const l={};o&2&&(l.exerciseId=a[1]),o&8&&(l.isFetching=a[3]),!n&&o&1&&(n=!0,l.path=a[0],Je(()=>n=!1)),e.$set(l)},i(a){r||(A(e.$$.fragment,a),r=!0)},o(a){L(e.$$.fragment,a),r=!1},d(a){K(e,a)}}}function p0(t){let e,n;return e=new Zu({props:{className:"mt-3 text-center",$$slots:{default:[VF]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i&8388800&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function NF(t){let e=t[7]("course.navItem.lessons.exercises.add_exercise")+"",n;return{c(){n=ne(e)},l(r){n=re(r,e)},m(r,i){H(r,n,i)},p(r,i){i&128&&e!==(e=r[7]("course.navItem.lessons.exercises.add_exercise")+"")&&se(n,e)},d(r){r&&E(n)}}}function PF(t){let e=t[7]("course.navItem.lessons.exercises.no_assigned_exercises")+"",n,r,i,s=t[7]("course.navItem.lessons.exercises.chill")+"",a,o;return{c(){n=ne(e),r=j(),i=B("strong"),a=ne(s),o=ne(" :)")},l(l){n=re(l,e),r=W(l),i=U(l,"STRONG",{});var c=P(i);a=re(c,s),o=re(c," :)"),c.forEach(E)},m(l,c){H(l,n,c),H(l,r,c),H(l,i,c),x(i,a),x(i,o)},p(l,c){c&128&&e!==(e=l[7]("course.navItem.lessons.exercises.no_assigned_exercises")+"")&&se(n,e),c&128&&s!==(s=l[7]("course.navItem.lessons.exercises.chill")+"")&&se(a,s)},d(l){l&&(E(n),E(r),E(i))}}}function VF(t){let e,n,r,i,s,a=t[7]("course.navItem.lessons.exercises.no_exercises")+"",o,l,c,u;function f(m,v){return m[6].isStudent?PF:NF}let h=f(t),d=h(t);return{c(){e=B("div"),n=B("img"),i=j(),s=B("h2"),o=ne(a),l=j(),c=B("p"),d.c(),u=j(),this.h()},l(m){e=U(m,"DIV",{class:!0});var v=P(e);n=U(v,"IMG",{src:!0,alt:!0,class:!0}),i=W(v),s=U(v,"H2",{class:!0});var p=P(s);o=re(p,a),p.forEach(E),l=W(v),c=U(v,"P",{class:!0});var g=P(c);d.l(g),g.forEach(E),v.forEach(E),u=W(m),this.h()},h(){mt(n.src,r="/images/empty-exercise-icon.svg")||M(n,"src",r),M(n,"alt","Exercise"),M(n,"class","my-2.5 mx-auto"),M(s,"class","text-xl my-1.5 font-normal"),M(c,"class","text-sm text-center text-slate-500"),M(e,"class","flex justify-between flex-col items-center w-[80%] md:w-96")},m(m,v){H(m,e,v),x(e,n),x(e,i),x(e,s),x(s,o),x(e,l),x(e,c),d.m(c,null),H(m,u,v)},p(m,v){v&128&&a!==(a=m[7]("course.navItem.lessons.exercises.no_exercises")+"")&&se(o,a),h===(h=f(m))&&d?d.p(m,v):(d.d(1),d=h(m),d&&(d.c(),d.m(c,null)))},d(m){m&&(E(e),E(u)),d.d()}}}function g0(t){let e,n,r=t[20].title+"",i,s,a,o=ch(t[20].created_at)+"",l,c,u;return{c(){e=B("a"),n=B("h3"),i=ne(r),s=j(),a=B("p"),l=ne(o),c=j(),this.h()},l(f){e=U(f,"A",{class:!0,href:!0});var h=P(e);n=U(h,"H3",{class:!0});var d=P(n);i=re(d,r),d.forEach(E),s=W(h),a=U(h,"P",{class:!0});var m=P(a);l=re(m,o),m.forEach(E),c=W(h),h.forEach(E),this.h()},h(){M(n,"class","dark:text-white text-xl"),M(a,"class","dark:text-white mt-4 text-sm"),M(e,"class","w-52 bg-gray-100 dark:bg-neutral-800 px-4 py-7 mr-4 mb-4 rounded-lg"),M(e,"href",u=t[0]+"/"+t[20].id)},m(f,h){H(f,e,h),x(e,n),x(n,i),x(e,s),x(e,a),x(a,l),x(e,c)},p(f,h){h&32&&r!==(r=f[20].title+"")&&se(i,r),h&32&&o!==(o=ch(f[20].created_at)+"")&&se(l,o),h&33&&u!==(u=f[0]+"/"+f[20].id)&&M(e,"href",u)},d(f){f&&E(e)}}}function BF(t){let e,n=Fe(t[5].exercises),r=[];for(let s=0;s<n.length;s+=1)r[s]=g0(d0(t,n,s));let i=null;return n.length||(i=p0(t)),{c(){e=B("div");for(let s=0;s<r.length;s+=1)r[s].c();i&&i.c(),this.h()},l(s){e=U(s,"DIV",{class:!0});var a=P(e);for(let o=0;o<r.length;o+=1)r[o].l(a);i&&i.l(a),a.forEach(E),this.h()},h(){M(e,"class","flex flex-wrap mt-5")},m(s,a){H(s,e,a);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);i&&i.m(e,null)},p(s,a){if(a&225){n=Fe(s[5].exercises);let o;for(o=0;o<n.length;o+=1){const l=d0(s,n,o);r[o]?r[o].p(l,a):(r[o]=g0(l),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length,!n.length&&i?i.p(s,a):n.length?i&&(ye(),L(i,1,1,()=>{i=null}),we()):(i=p0(s),i.c(),A(i,1),i.m(e,null))}},i:he,o:he,d(s){s&&E(e),Gt(r,s),i&&i.d()}}}function UF(t){let e=t[7]("course.navItem.lessons.exercises.heading")+"",n;return{c(){n=ne(e)},l(r){n=re(r,e)},m(r,i){H(r,n,i)},p(r,i){i&128&&e!==(e=r[7]("course.navItem.lessons.exercises.heading")+"")&&se(n,e)},d(r){r&&E(n)}}}function HF(t){let e,n;return e=new Ac({props:{href:t[0],$$slots:{default:[UF]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i&1&&(s.href=r[0]),i&8388736&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function zF(t){let e,n;return e=new dt({props:{className:"mr-2 my-2",label:t[7]("course.navItem.lessons.exercises.add_button"),onClick:t[16]}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i&128&&(s.label=r[7]("course.navItem.lessons.exercises.add_button")),i&4&&(s.onClick=r[16]),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function FF(t){let e,n,r,i,s;return n=new Y0({props:{class:"my-2",$$slots:{default:[HF]},$$scope:{ctx:t}}}),i=new di({props:{allowedRoles:[1,2],$$slots:{default:[zF]},$$scope:{ctx:t}}}),{c(){e=B("slot:fragment"),Z(n.$$.fragment),r=j(),Z(i.$$.fragment),this.h()},l(a){e=U(a,"SLOT:FRAGMENT",{slot:!0});var o=P(e);Q(n.$$.fragment,o),r=W(o),Q(i.$$.fragment,o),o.forEach(E),this.h()},h(){M(e,"slot","header")},m(a,o){H(a,e,o),X(n,e,null),x(e,r),X(i,e,null),s=!0},p(a,o){const l={};o&8388737&&(l.$$scope={dirty:o,ctx:a}),n.$set(l);const c={};o&8388740&&(c.$$scope={dirty:o,ctx:a}),i.$set(c)},i(a){s||(A(n.$$.fragment,a),A(i.$$.fragment,a),s=!0)},o(a){L(n.$$.fragment,a),L(i.$$.fragment,a),s=!1},d(a){a&&E(e),K(n),K(i)}}}function GF(t){let e,n,r,i,s,a=t[3]&&m0(t);const o=[RF,LF],l=[];function c(u,f){return u[1]?0:1}return n=c(t),r=l[n]=o[n](t),{c(){a&&a.c(),e=j(),r.c(),i=fe()},l(u){a&&a.l(u),e=W(u),r.l(u),i=fe()},m(u,f){a&&a.m(u,f),H(u,e,f),l[n].m(u,f),H(u,i,f),s=!0},p(u,[f]){u[3]?a?f&8&&A(a,1):(a=m0(u),a.c(),A(a,1),a.m(e.parentNode,e)):a&&(ye(),L(a,1,1,()=>{a=null}),we());let h=n;n=c(u),n===h?l[n].p(u,f):(ye(),L(l[h],1,1,()=>{l[h]=null}),we(),r=l[n],r?r.p(u,f):(r=l[n]=o[n](u),r.c()),A(r,1),r.m(i.parentNode,i))},i(u){s||(A(a),A(r),s=!0)},o(u){L(a),L(r),s=!1},d(u){u&&(E(e),E(i)),a&&a.d(u),l[n].d(u)}}}function qF(t,e,n){let r,i,s;be(t,pt,k=>n(5,r=k)),be(t,Xr,k=>n(6,i=k)),be(t,Nt,k=>n(7,s=k));let{path:a=""}=e,{exerciseId:o=""}=e,{lessonId:l=""}=e,c=!1,u=!1,f={id:1,title:"",description:""};async function h(k){const C=await Sy(l,k);console.log("newExercise",C),C&&(pt.update(V=>({...V,exercises:[...V.exercises,C]})),m(),qi(a+"/"+C.id))}async function d(){const{data:k,error:C}=await xy({title:f.title,lesson_id:l});console.log("data, error ",k,C),pt.update(V=>({...V,exercises:[...V.exercises,k[0]]})),m()}function m(){n(2,c=!1),n(4,f={id:new Date().getTime(),title:"",description:""})}async function v(){if(!l)return;n(3,u=!0);const k=await Lr.from("exercise").select("id, title, created_at").match({lesson_id:l});Se(pt,r.exercises=k.data,r),n(3,u=!1)}async function p(k){var I,S;if(!k)return;n(3,u=!0),ld.update(()=>!0);let{data:C,error:V}=await Lr.from("exercise").select(`
        id, title, description, due_by,
        totalSubmissions:submission(count),
        questions:question(
          *,
          options:option(*),
          question_type:question_type_id(id, label)
        )
      `).eq("id",k).single();V||(C&&Array.isArray(C.questions)?(C.questions.forEach(N=>(N.question_type=co.find(O=>O.id===N.question_type.id),N)),C.questions=C.questions.sort((N,O)=>N.order-O.order)):C&&(C.questions=[]),Mt.set({...C||{},is_title_dirty:!1,is_description_dirty:!1,is_due_by_dirty:!1,questions:Array.isArray(C.questions)?C.questions:[],totalSubmissions:((S=(I=C==null?void 0:C.totalSubmissions)==null?void 0:I[0])==null?void 0:S.count)||0}),ld.update(()=>!1),n(3,u=!1))}function g(){qi(a)}us(()=>{v()});function _(k){a=k,n(0,a)}function b(k){c=k,n(2,c)}function y(k){t.$$.not_equal(f.title,k)&&(f.title=k,n(4,f))}const w=()=>n(2,c=!c);function $(k){t.$$.not_equal(i.isStudent,k)&&(i.isStudent=k,Xr.set(i))}return t.$$set=k=>{"path"in k&&n(0,a=k.path),"exerciseId"in k&&n(1,o=k.exerciseId),"lessonId"in k&&n(12,l=k.lessonId)},t.$$.update=()=>{t.$$.dirty&2&&p(o)},[a,o,c,u,f,r,i,s,h,d,m,g,l,_,b,y,w,$]}class jF extends Pe{constructor(e){super(),Ve(this,e,qF,GF,Ae,{path:0,exerciseId:1,lessonId:12})}}function Br(){}Br.prototype={diff:function(e,n){var r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.callback;typeof i=="function"&&(s=i,i={}),this.options=i;var a=this;function o(y){return s?(setTimeout(function(){s(void 0,y)},0),!0):y}e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var l=n.length,c=e.length,u=1,f=l+c;i.maxEditLength&&(f=Math.min(f,i.maxEditLength));var h=(r=i.timeout)!==null&&r!==void 0?r:1/0,d=Date.now()+h,m=[{oldPos:-1,lastComponent:void 0}],v=this.extractCommon(m[0],n,e,0);if(m[0].oldPos+1>=c&&v+1>=l)return o([{value:this.join(n),count:n.length}]);var p=-1/0,g=1/0;function _(){for(var y=Math.max(p,-u);y<=Math.min(g,u);y+=2){var w=void 0,$=m[y-1],k=m[y+1];$&&(m[y-1]=void 0);var C=!1;if(k){var V=k.oldPos-y;C=k&&0<=V&&V<l}var I=$&&$.oldPos+1<c;if(!C&&!I){m[y]=void 0;continue}if(!I||C&&$.oldPos+1<k.oldPos?w=a.addToPath(k,!0,void 0,0):w=a.addToPath($,void 0,!0,1),v=a.extractCommon(w,n,e,y),w.oldPos+1>=c&&v+1>=l)return o(WF(a,w.lastComponent,n,e,a.useLongestToken));m[y]=w,w.oldPos+1>=c&&(g=Math.min(g,y-1)),v+1>=l&&(p=Math.max(p,y+1))}u++}if(s)(function y(){setTimeout(function(){if(u>f||Date.now()>d)return s();_()||y()},0)})();else for(;u<=f&&Date.now()<=d;){var b=_();if(b)return b}},addToPath:function(e,n,r,i){var s=e.lastComponent;return s&&s.added===n&&s.removed===r?{oldPos:e.oldPos+i,lastComponent:{count:s.count+1,added:n,removed:r,previousComponent:s.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:n,removed:r,previousComponent:s}}},extractCommon:function(e,n,r,i){for(var s=n.length,a=r.length,o=e.oldPos,l=o-i,c=0;l+1<s&&o+1<a&&this.equals(n[l+1],r[o+1]);)l++,o++,c++;return c&&(e.lastComponent={count:c,previousComponent:e.lastComponent}),e.oldPos=o,l},equals:function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},removeEmpty:function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function WF(t,e,n,r,i){for(var s=[],a;e;)s.push(e),a=e.previousComponent,delete e.previousComponent,e=a;s.reverse();for(var o=0,l=s.length,c=0,u=0;o<l;o++){var f=s[o];if(f.removed){if(f.value=t.join(r.slice(u,u+f.count)),u+=f.count,o&&s[o-1].added){var d=s[o-1];s[o-1]=s[o],s[o]=d}}else{if(!f.added&&i){var h=n.slice(c,c+f.count);h=h.map(function(v,p){var g=r[u+p];return g.length>v.length?g:v}),f.value=t.join(h)}else f.value=t.join(n.slice(c,c+f.count));c+=f.count,f.added||(u+=f.count)}}var m=s[l-1];return l>1&&typeof m.value=="string"&&(m.added||m.removed)&&t.equals("",m.value)&&(s[l-2].value+=m.value,s.pop()),s}var v0=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,_0=/\S/,uy=new Br;uy.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!_0.test(t)&&!_0.test(e)};uy.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&v0.test(e[n])&&v0.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};var nh=new Br;nh.tokenize=function(t){this.options.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};function YF(t,e,n){return nh.diff(t,e,n)}var ZF=new Br;ZF.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var XF=new Br;XF.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function lo(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lo=function(e){return typeof e}:lo=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lo(t)}var KF=Object.prototype.toString,ca=new Br;ca.useLongestToken=!0;ca.tokenize=nh.tokenize;ca.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(s,a){return typeof a>"u"?n:a}:r;return typeof t=="string"?t:JSON.stringify(qu(t,null,null,i),i,"  ")};ca.equals=function(t,e){return Br.prototype.equals.call(ca,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function qu(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var s;for(s=0;s<e.length;s+=1)if(e[s]===t)return n[s];var a;if(KF.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),n.push(a),s=0;s<t.length;s+=1)a[s]=qu(t[s],e,n,r,i);return e.pop(),n.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),lo(t)==="object"&&t!==null){e.push(t),a={},n.push(a);var o=[],l;for(l in t)t.hasOwnProperty(l)&&o.push(l);for(o.sort(),s=0;s<o.length;s+=1)l=o[s],a[l]=qu(t[l],e,n,r,l);e.pop(),n.pop()}else a=t;return a}var ju=new Br;ju.tokenize=function(t){return t.slice()};ju.join=ju.removeEmpty=function(t){return t};function b0(t,e,n){const r=t.slice();return r[21]=e[n],r[23]=n,r}function QF(t){let e,n;return e=new ww({}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function y0(t){let e,n,r;return n=new dt({props:{isLoading:t[5],onClick:t[10],$$slots:{default:[JF]},$$scope:{ctx:t}}}),{c(){e=B("div"),Z(n.$$.fragment),this.h()},l(i){e=U(i,"DIV",{class:!0});var s=P(e);Q(n.$$.fragment,s),s.forEach(E),this.h()},h(){M(e,"class","")},m(i,s){H(i,e,s),X(n,e,null),r=!0},p(i,s){const a={};s&32&&(a.isLoading=i[5]),s&16777344&&(a.$$scope={dirty:s,ctx:i}),n.$set(a)},i(i){r||(A(n.$$.fragment,i),r=!0)},o(i){L(n.$$.fragment,i),r=!1},d(i){i&&E(e),K(n)}}}function JF(t){let e=t[7]("course.navItem.lessons.version_history.restore_version")+"",n;return{c(){n=ne(e)},l(r){n=re(r,e)},m(r,i){H(r,n,i)},p(r,i){i&128&&e!==(e=r[7]("course.navItem.lessons.version_history.restore_version")+"")&&se(n,e)},d(r){r&&E(n)}}}function eG(t){let e,n;return{c(){e=B("h1"),n=ne(t[2]),this.h()},l(r){e=U(r,"H1",{class:!0});var i=P(e);n=re(i,t[2]),i.forEach(E),this.h()},h(){M(e,"class","text-2xl md:text-4xl mt-0 capitalize")},m(r,i){H(r,e,i),x(e,n)},p(r,i){i&4&&se(n,r[2])},d(r){r&&E(e)}}}function tG(t){let e,n;return{c(){e=B("div"),n=new cl(!1),this.h()},l(r){e=U(r,"DIV",{class:!0});var i=P(e);n=ul(i,!1),i.forEach(E),this.h()},h(){n.a=null,M(e,"class","amen")},m(r,i){H(r,e,i),n.m(sG,e)},p:he,d(r){r&&E(e)}}}function w0(t){let e,n;return e=new ml({props:{id:"display",className:"m-auto",$$slots:{content:[tG]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i&16777216&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function nG(t){let e,n=t[7]("course.navItem.lessons.version_history.current_version")+"",r;return{c(){e=B("span"),r=ne(n),this.h()},l(i){e=U(i,"SPAN",{class:!0});var s=P(e);r=re(s,n),s.forEach(E),this.h()},h(){M(e,"class","block italic text-xs text-start")},m(i,s){H(i,e,s),x(e,r)},p(i,s){s&128&&n!==(n=i[7]("course.navItem.lessons.version_history.current_version")+"")&&se(r,n)},d(i){i&&E(e)}}}function E0(t){let e,n,r,i,s,a=$0(t[21].timestamp)+"",o,l,c,u,f,h;n=new g2({props:{class:"mt-1"}});let d=t[23]==0&&nG(t);function m(){return t[15](t[21],t[23])}return{c(){e=B("button"),Z(n.$$.fragment),r=j(),i=B("div"),s=B("span"),o=ne(a),l=j(),d&&d.c(),this.h()},l(v){e=U(v,"BUTTON",{class:!0});var p=P(e);Q(n.$$.fragment,p),r=W(p),i=U(p,"DIV",{});var g=P(i);s=U(g,"SPAN",{class:!0});var _=P(s);o=re(_,a),_.forEach(E),l=W(g),d&&d.l(g),g.forEach(E),p.forEach(E),this.h()},h(){M(s,"class","inline-block font-medium text-base"),M(e,"class",c="hover:bg-gray-200 dark:hover:bg-neutral-700 cursor-pointer p-4 w-full px-10 flex items-start "+(t[23]==t[4]?"bg-gray-200 dark:bg-neutral-700":""))},m(v,p){H(v,e,p),X(n,e,null),x(e,r),x(e,i),x(i,s),x(s,o),x(i,l),d&&d.m(i,null),u=!0,f||(h=qe(e,"click",m),f=!0)},p(v,p){t=v,(!u||p&8)&&a!==(a=$0(t[21].timestamp)+"")&&se(o,a),t[23]==0&&d.p(t,p),(!u||p&16&&c!==(c="hover:bg-gray-200 dark:hover:bg-neutral-700 cursor-pointer p-4 w-full px-10 flex items-start "+(t[23]==t[4]?"bg-gray-200 dark:bg-neutral-700":"")))&&M(e,"class",c)},i(v){u||(A(n.$$.fragment,v),u=!0)},o(v){L(n.$$.fragment,v),u=!1},d(v){v&&E(e),K(n),d&&d.d(),f=!1,h()}}}function rG(t){let e=t[7]("course.navItem.lessons.version_history.fetch_more_versions")+"",n;return{c(){n=ne(e)},l(r){n=re(r,e)},m(r,i){H(r,n,i)},p(r,i){i&128&&e!==(e=r[7]("course.navItem.lessons.version_history.fetch_more_versions")+"")&&se(n,e)},d(r){r&&E(n)}}}function iG(t){let e,n,r,i,s,a,o,l,c,u,f=t[1],h,d,m,v=t[7]("course.navItem.lessons.version_history.title")+"",p,g,_,b,y,w,$;s=new dt({props:{variant:gn.OUTLINED,onClick:t[8],$$slots:{default:[QF]},$$scope:{ctx:t}}});let k=t[4]!=0&&y0(t);c=new ml({props:{className:"m-auto text-center mt-6 flex items-center justify-center",$$slots:{content:[eG]},$$scope:{ctx:t}}});let C=w0(t),V=Fe(t[3]),I=[];for(let N=0;N<V.length;N+=1)I[N]=E0(b0(t,V,N));const S=N=>L(I[N],1,1,()=>{I[N]=null});return w=new dt({props:{className:"h-full",isLoading:t[6],onClick:t[11],$$slots:{default:[rG]},$$scope:{ctx:t}}}),{c(){e=B("aside"),n=B("div"),r=B("div"),i=B("div"),Z(s.$$.fragment),a=j(),k&&k.c(),o=j(),l=B("div"),Z(c.$$.fragment),u=j(),C.c(),h=j(),d=B("div"),m=B("p"),p=ne(v),g=j(),_=B("div");for(let N=0;N<I.length;N+=1)I[N].c();b=j(),y=B("div"),Z(w.$$.fragment),this.h()},l(N){e=U(N,"ASIDE",{class:!0});var O=P(e);n=U(O,"DIV",{class:!0});var R=P(n);r=U(R,"DIV",{class:!0});var T=P(r);i=U(T,"DIV",{class:!0});var F=P(i);Q(s.$$.fragment,F),a=W(F),k&&k.l(F),F.forEach(E),o=W(T),l=U(T,"DIV",{class:!0});var G=P(l);Q(c.$$.fragment,G),u=W(G),C.l(G),G.forEach(E),T.forEach(E),R.forEach(E),h=W(O),d=U(O,"DIV",{id:!0,class:!0});var q=P(d);m=U(q,"P",{class:!0});var Y=P(m);p=re(Y,v),Y.forEach(E),g=W(q),_=U(q,"DIV",{});var te=P(_);for(let pe=0;pe<I.length;pe+=1)I[pe].l(te);b=W(te),y=U(te,"DIV",{class:!0});var ie=P(y);Q(w.$$.fragment,ie),ie.forEach(E),te.forEach(E),q.forEach(E),O.forEach(E),this.h()},h(){M(i,"class","flex items-start gap-x-10"),M(l,"class","w-full h-full flex flex-col items-start"),M(r,"class","p-10 w-full pr-80"),M(n,"class","panel bg-white dark:bg-black svelte-1tfmdrx"),M(m,"class","font-medium text-xl text-left flex items-start justify-start px-10"),M(y,"class","flex items-center justify-start px-10 mt-2 h-10"),M(d,"id","scroll-container"),M(d,"class","w-80 fixed right-0 top-0 min-h-screen h-full z-10 overflow-x-auto overflow-y-scroll bg-gray-100 dark:bg-neutral-800 py-10 space-y-6"),M(e,"class","drawer bg-gray-100 dark:bg-neutral-800 svelte-1tfmdrx"),Oe(e,"open",t[0])},m(N,O){H(N,e,O),x(e,n),x(n,r),x(r,i),X(s,i,null),x(i,a),k&&k.m(i,null),x(r,o),x(r,l),X(c,l,null),x(l,u),C.m(l,null),x(e,h),x(e,d),x(d,m),x(m,p),x(d,g),x(d,_);for(let R=0;R<I.length;R+=1)I[R]&&I[R].m(_,null);x(_,b),x(_,y),X(w,y,null),$=!0},p(N,[O]){const R={};O&16777216&&(R.$$scope={dirty:O,ctx:N}),s.$set(R),N[4]!=0?k?(k.p(N,O),O&16&&A(k,1)):(k=y0(N),k.c(),A(k,1),k.m(i,null)):k&&(ye(),L(k,1,1,()=>{k=null}),we());const T={};if(O&16777220&&(T.$$scope={dirty:O,ctx:N}),c.$set(T),O&2&&Ae(f,f=N[1])?(ye(),L(C,1,1,he),we(),C=w0(N),C.c(),A(C,1),C.m(l,null)):C.p(N,O),(!$||O&128)&&v!==(v=N[7]("course.navItem.lessons.version_history.title")+"")&&se(p,v),O&664){V=Fe(N[3]);let G;for(G=0;G<V.length;G+=1){const q=b0(N,V,G);I[G]?(I[G].p(q,O),A(I[G],1)):(I[G]=E0(q),I[G].c(),A(I[G],1),I[G].m(_,b))}for(ye(),G=V.length;G<I.length;G+=1)S(G);we()}const F={};O&64&&(F.isLoading=N[6]),O&16777344&&(F.$$scope={dirty:O,ctx:N}),w.$set(F),(!$||O&1)&&Oe(e,"open",N[0])},i(N){if(!$){A(s.$$.fragment,N),A(k),A(c.$$.fragment,N),A(C);for(let O=0;O<V.length;O+=1)A(I[O]);A(w.$$.fragment,N),$=!0}},o(N){L(s.$$.fragment,N),L(k),L(c.$$.fragment,N),L(C),I=I.filter(Boolean);for(let O=0;O<I.length;O+=1)L(I[O]);L(w.$$.fragment,N),$=!1},d(N){N&&E(e),K(s),k&&k.d(),K(c),C.d(N),Gt(I,N),K(w)}}}let sG="";function $0(t){const e={month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0},n=new Date(t+"Z");return new Intl.DateTimeFormat("en-US",e).format(n)}function T0(t){return new Date(t).getMinutes()}function aG(t){return t.filter((e,n,r)=>r.findIndex(i=>T0(i.timestamp)===T0(e.timestamp))===n)}function oG(t,e,n){let r,i,s;be(t,pt,C=>n(13,r=C)),be(t,fo,C=>n(14,i=C)),be(t,Nt,C=>n(7,s=C));let{open:a=!1}=e,o="",l="",c=[],u={new_content:"",old_content:"",timestamp:new Date,locale:cw.EN,lesson_id:""},f=0,h=!1,d=9,m=!1,v=!1;const p=C0();function g(C){if(v){const V=document.querySelector("body");if(!V)return;V.style.overflow=C?"hidden":"auto"}}function _(){p("close")}async function b(C,V,I){try{n(6,m=!0);const{data:S,error:N}=await ky(C,V,I);if(!S)throw N;const O=new Set(c.map(T=>new Date(T.timestamp).getMinutes())),R=S.filter(T=>!O.has(new Date(T.timestamp).getMinutes()));n(3,c=aG([...c,...R])),y(c[0],0)}catch(S){console.error(S),Dn.error("Failed to fetch history")}finally{n(6,m=!1)}}us(()=>{v=!0,g(a)});function y(C,V){n(4,f=V),u=C;const I=document.getElementById("display");I.innerHTML="";const S=YF(C.old_content,C.new_content),N=document.createDocumentFragment();S.forEach(O=>{const R=document.createElement("span");O.added?R.classList.add("text-green-500"):O.removed?R.classList.add("text-red-500","line-through"):R.classList.add("text-black","dark:text-white"),R.innerHTML=O.value,N.appendChild(R)}),I.appendChild(N)}async function w(){try{n(5,h=!0),await Lr.from("lesson_language").update({content:u.new_content}).eq("lesson_id",u.lesson_id).eq("locale",u.locale)}catch(C){console.error(C),Dn.error("Failed to restore")}finally{n(5,h=!1),p("restore")}}function $(){n(12,d+=10)}const k=(C,V)=>y(C,V);return t.$$set=C=>{"open"in C&&n(0,a=C.open)},t.$$.update=()=>{var C;t.$$.dirty&24576&&n(2,o=((C=i.find(V=>V.id===r.id))==null?void 0:C.title)||""),t.$$.dirty&8192&&n(1,l=r.id||""),t.$$.dirty&1&&g(a),t.$$.dirty&12290&&b(l,r.locale,d)},[a,l,o,c,f,h,m,s,_,y,w,$,d,r,i,k]}class lG extends Pe{constructor(e){super(),Ve(this,e,oG,iG,Ae,{open:0})}}function S0(t){let e,n,r,i,s,a,o,l,c,u,f,h,d=t[3]===zt.edit&&window.innerWidth>=1024&&x0(t);r=new cn({props:{onClick:t[19],buttonClassName:"",$$slots:{default:[uG]},$$scope:{ctx:t}}}),a=new cn({props:{onClick:t[27],disabled:t[7],$$slots:{default:[dG]},$$scope:{ctx:t}}});let m=t[12].metadata.lessonDownload&&!!Ys.PUBLIC_SERVER_URL&&k0(t);function v(g){t[28](g)}let p={items:Tw,class:"h-full"};return t[1].locale!==void 0&&(p.selectedId=t[1].locale),u=new Ow({props:p}),je.push(()=>et(u,"selectedId",v)),{c(){d&&d.c(),e=j(),n=B("div"),Z(r.$$.fragment),i=j(),s=B("div"),Z(a.$$.fragment),o=j(),m&&m.c(),c=j(),Z(u.$$.fragment),this.h()},l(g){d&&d.l(g),e=W(g),n=U(g,"DIV",{class:!0});var _=P(n);Q(r.$$.fragment,_),_.forEach(E),i=W(g),s=U(g,"DIV",{class:!0});var b=P(s);Q(a.$$.fragment,b),o=W(b),m&&m.l(b),b.forEach(E),c=W(g),Q(u.$$.fragment,g),this.h()},h(){M(n,"class","tab svelte-1df378g"),M(s,"class",l=Ni(`flex-row ${t[14].dropdown&&t[14].open?"absolute lg:relative top-[85px] lg:top-0 right-14 lg:right-0 z-40 rounded-md bg-gray-100 dark:bg-neutral-800 p-3 lg:p-0":"hidden"} lg:flex items-center`)+" svelte-1df378g")},m(g,_){d&&d.m(g,_),H(g,e,_),H(g,n,_),X(r,n,null),H(g,i,_),H(g,s,_),X(a,s,null),x(s,o),m&&m.m(s,null),H(g,c,_),X(u,g,_),h=!0},p(g,_){g[3]===zt.edit&&window.innerWidth>=1024?d?(d.p(g,_),_[0]&8&&A(d,1)):(d=x0(g),d.c(),A(d,1),d.m(e.parentNode,e)):d&&(ye(),L(d,1,1,()=>{d=null}),we());const b={};_[1]&131072&&(b.$$scope={dirty:_,ctx:g}),r.$set(b);const y={};_[0]&16384&&(y.onClick=g[27]),_[0]&128&&(y.disabled=g[7]),_[0]&8|_[1]&131072&&(y.$$scope={dirty:_,ctx:g}),a.$set(y),g[12].metadata.lessonDownload&&Ys.PUBLIC_SERVER_URL?m?(m.p(g,_),_[0]&4096&&A(m,1)):(m=k0(g),m.c(),A(m,1),m.m(s,null)):m&&(ye(),L(m,1,1,()=>{m=null}),we()),(!h||_[0]&16384&&l!==(l=Ni(`flex-row ${g[14].dropdown&&g[14].open?"absolute lg:relative top-[85px] lg:top-0 right-14 lg:right-0 z-40 rounded-md bg-gray-100 dark:bg-neutral-800 p-3 lg:p-0":"hidden"} lg:flex items-center`)+" svelte-1df378g"))&&M(s,"class",l);const w={};!f&&_[0]&2&&(f=!0,w.selectedId=g[1].locale,Je(()=>f=!1)),u.$set(w)},i(g){h||(A(d),A(r.$$.fragment,g),A(a.$$.fragment,g),A(m),A(u.$$.fragment,g),h=!0)},o(g){L(d),L(r.$$.fragment,g),L(a.$$.fragment,g),L(m),L(u.$$.fragment,g),h=!1},d(g){g&&(E(e),E(n),E(i),E(s),E(c)),d&&d.d(g),K(r),K(a),m&&m.d(),K(u,g)}}}function x0(t){let e,n;return e=new cn({props:{onClick:t[26],$$slots:{default:[cG]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i[0]&512&&(s.onClick=r[26]),i[1]&131072&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function cG(t){let e,n;return e=new F2({props:{size:24}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function uG(t){let e,n;return e=new P2({props:{size:24}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function fG(t){let e,n;return e=new S2({props:{size:24}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function hG(t){let e,n;return e=new kw({props:{size:24}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function dG(t){let e,n,r,i;const s=[hG,fG],a=[];function o(l,c){return l[3]===zt.edit?0:1}return e=o(t),n=a[e]=s[e](t),{c(){n.c(),r=fe()},l(l){n.l(l),r=fe()},m(l,c){a[e].m(l,c),H(l,r,c),i=!0},p(l,c){let u=e;e=o(l),e!==u&&(ye(),L(a[u],1,1,()=>{a[u]=null}),we(),n=a[e],n||(n=a[e]=s[e](l),n.c()),A(n,1),n.m(r.parentNode,r))},i(l){i||(A(n),i=!0)},o(l){L(n),i=!1},d(l){l&&E(r),a[e].d(l)}}}function k0(t){let e,n;return e=new dt({props:{className:"mr-",variant:gn.OUTLINED,onClick:t[18],isLoading:t[6],$$slots:{default:[mG]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i[0]&64&&(s.isLoading=r[6]),i[1]&131072&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function mG(t){let e,n;return e=new Ew({props:{size:16}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p:he,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function pG(t){let e,n,r=t[0].isMaterialsTabActive&&S0(t);return{c(){r&&r.c(),e=fe()},l(i){r&&r.l(i),e=fe()},m(i,s){r&&r.m(i,s),H(i,e,s),n=!0},p(i,s){i[0].isMaterialsTabActive?r?(r.p(i,s),s[0]&1&&A(r,1)):(r=S0(i),r.c(),A(r,1),r.m(e.parentNode,e)):r&&(ye(),L(r,1,1,()=>{r=null}),we())},i(i){n||(A(r),n=!0)},o(i){L(r),n=!1},d(i){i&&E(e),r&&r.d(i)}}}function gG(t){let e,n,r;return n=new di({props:{allowedRoles:[1,2],$$slots:{default:[pG]},$$scope:{ctx:t}}}),{c(){e=B("div"),Z(n.$$.fragment),this.h()},l(i){e=U(i,"DIV",{class:!0});var s=P(e);Q(n.$$.fragment,s),s.forEach(E),this.h()},h(){M(e,"class","flex items-center gap-1")},m(i,s){H(i,e,s),X(n,e,null),r=!0},p(i,s){const a={};s[0]&21195|s[1]&131072&&(a.$$scope={dirty:s,ctx:i}),n.$set(a)},i(i){r||(A(n.$$.fragment,i),r=!0)},o(i){L(n.$$.fragment,i),r=!1},d(i){i&&E(e),K(n)}}}function vG(t){let e,n,r;function i(a){t[32](a)}let s={onClick:t[31],width:"lg:w-full xl:w-11/12",className:"overflow-x-hidden",$$slots:{default:[bG]},$$scope:{ctx:t}};return t[13].isStudent!==void 0&&(s.isPageNavHidden=t[13].isStudent),e=new Yu({props:s}),je.push(()=>et(e,"isPageNavHidden",i)),{c(){Z(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,o){X(e,a,o),r=!0},p(a,o){const l={};o[0]&16384&&(l.onClick=a[31]),o[0]&8345|o[1]&131072&&(l.$$scope={dirty:o,ctx:a}),!n&&o[0]&8192&&(n=!0,l.isPageNavHidden=a[13].isStudent,Je(()=>n=!1)),e.$set(l)},i(a){r||(A(e.$$.fragment,a),r=!0)},o(a){L(e.$$.fragment,a),r=!1},d(a){K(e,a)}}}function _G(t){let e,n;return e=new jF({props:{lessonId:t[0].lessonId,exerciseId:t[0].exerciseId,path:`${t[2]}/exercises`}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i[0]&1&&(s.lessonId=r[0].lessonId),i[0]&1&&(s.exerciseId=r[0].exerciseId),i[0]&4&&(s.path=`${r[2]}/exercises`),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function bG(t){let e,n,r;function i(a){t[30](a)}let s={lessonId:t[0].lessonId,mode:t[3],prevMode:t[4],toggleMode:t[20],isStudent:t[13].isStudent};return t[7]!==void 0&&(s.isSaving=t[7]),e=new S$({props:s}),je.push(()=>et(e,"isSaving",i)),{c(){Z(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,o){X(e,a,o),r=!0},p(a,o){const l={};o[0]&1&&(l.lessonId=a[0].lessonId),o[0]&8&&(l.mode=a[3]),o[0]&16&&(l.prevMode=a[4]),o[0]&8192&&(l.isStudent=a[13].isStudent),!n&&o[0]&128&&(n=!0,l.isSaving=a[7],Je(()=>n=!1)),e.$set(l)},i(a){r||(A(e.$$.fragment,a),r=!0)},o(a){L(e.$$.fragment,a),r=!1},d(a){K(e,a)}}}function yG(t){let e,n,r,i,s;return n=new Iy({}),{c(){e=B("button"),Z(n.$$.fragment),this.h()},l(a){e=U(a,"BUTTON",{class:!0});var o=P(e);Q(n.$$.fragment,o),o.forEach(E),this.h()},h(){M(e,"class","px-2 my-2 pr-4 border-t-0 border-b-0 border-l-0 border border-gray-300 flex items-center")},m(a,o){H(a,e,o),X(n,e,null),r=!0,i||(s=qe(e,"click",t[35]),i=!0)},p:he,i(a){r||(A(n.$$.fragment,a),r=!0)},o(a){L(n.$$.fragment,a),r=!1},d(a){a&&E(e),K(n),i=!1,s()}}}function wG(t){let e,n,r,i,s=t[1].totalExercises+"",a,o,l,c;return n=new vy({props:{size:24,class:"carbon-icon"}}),{c(){e=B("button"),Z(n.$$.fragment),r=j(),i=B("span"),a=ne(s),this.h()},l(u){e=U(u,"BUTTON",{class:!0});var f=P(e);Q(n.$$.fragment,f),r=W(f),i=U(f,"SPAN",{class:!0});var h=P(i);a=re(h,s),h.forEach(E),f.forEach(E),this.h()},h(){M(i,"class","ml-1"),M(e,"class","px-2 my-2 pr-4 border-t-0 border-b-0 border-l-0 border border-gray-300 flex items-center")},m(u,f){H(u,e,f),X(n,e,null),x(e,r),x(e,i),x(i,a),o=!0,l||(c=qe(e,"click",t[34]),l=!0)},p(u,f){(!o||f[0]&2)&&s!==(s=u[1].totalExercises+"")&&se(a,s)},i(u){o||(A(n.$$.fragment,u),o=!0)},o(u){L(n.$$.fragment,u),o=!1},d(u){u&&E(e),K(n),l=!1,c()}}}function EG(t){let e,n;return e=new fl({props:{size:24,class:"carbon-icon"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function $G(t){let e,n;return e=new hl({props:{size:24,class:"carbon-icon text-primary-600"}}),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function O0(t){let e,n;return e=new lG({props:{open:t[9]}}),e.$on("close",t[39]),e.$on("restore",t[23]),{c(){Z(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,i){X(e,r,i),n=!0},p(r,i){const s={};i[0]&512&&(s.open=r[9]),e.$set(s)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){K(e,r)}}}function TG(t){let e,n,r,i,s,a,o,l,c,u,f,h,d=t[16]("course.navItem.lessons.prev")+"",m,v,p,g,_,b,y,w,$,k,C=t[1].totalComments+"",V,I,S,N,O,R,T,F,G,q=t[16]("course.navItem.lessons.next")+"",Y,te,ie,pe,Re,ce,ge,Ue,oe;function it(ue){t[29](ue)}let ve={navItems:[{label:t[16]("course.navItem.lessons.lesson_nav.materials"),isActive:t[0].isMaterialsTabActive,href:t[2]},{label:t[16]("course.navItem.lessons.lesson_nav.exercises"),badgeValue:t[0].isMaterialsTabActive?t[1].totalExercises:t[1].exercises.length,isActive:!t[0].isMaterialsTabActive,href:`${t[2]}/exercises`}],$$slots:{widget:[gG]},$$scope:{ctx:t}};t[13].isStudent!==void 0&&(ve.hideOnMobile=t[13].isStudent),e=new Ry({props:ve}),je.push(()=>et(e,"hideOnMobile",it));const ke=[_G,vG],Ie=[];function le(ue,He){return ue[0].isMaterialsTabActive?ue[0].lessonId?1:-1:0}~(i=le(t))&&(s=Ie[i]=ke[i](t)),u=new Sw({props:{size:24}});const lt=[wG,yG],We=[];function de(ue,He){return ue[0].isMaterialsTabActive?0:1}g=de(t),_=We[g]=lt[g](t),w=new Ay({props:{size:24,class:"carbon-icon"}});const Be=[$G,EG],_e=[];function De(ue,He){return ue[8]?0:1}O=De(t),R=_e[O]=Be[O](t),ie=new xw({props:{size:24}});let Ce=t[9]&&window.innerWidth>=1024&&O0(t);return{c(){Z(e.$$.fragment),r=j(),s&&s.c(),a=j(),o=B("div"),l=B("div"),c=B("button"),Z(u.$$.fragment),f=j(),h=B("span"),m=ne(d),p=j(),_.c(),b=j(),y=B("button"),Z(w.$$.fragment),$=j(),k=B("span"),V=ne(C),S=j(),N=B("button"),R.c(),T=j(),F=B("button"),G=B("span"),Y=ne(q),te=j(),Z(ie.$$.fragment),Re=j(),Ce&&Ce.c(),ce=fe(),this.h()},l(ue){Q(e.$$.fragment,ue),r=W(ue),s&&s.l(ue),a=W(ue),o=U(ue,"DIV",{class:!0});var He=P(o);l=U(He,"DIV",{class:!0});var St=P(l);c=U(St,"BUTTON",{class:!0});var Pt=P(c);Q(u.$$.fragment,Pt),f=W(Pt),h=U(Pt,"SPAN",{class:!0});var zn=P(h);m=re(zn,d),zn.forEach(E),Pt.forEach(E),p=W(St),_.l(St),b=W(St),y=U(St,"BUTTON",{class:!0});var Fn=P(y);Q(w.$$.fragment,Fn),$=W(Fn),k=U(Fn,"SPAN",{class:!0});var xa=P(k);V=re(xa,C),xa.forEach(E),Fn.forEach(E),S=W(St),N=U(St,"BUTTON",{class:!0});var ka=P(N);R.l(ka),ka.forEach(E),T=W(St),F=U(St,"BUTTON",{class:!0});var Ei=P(F);G=U(Ei,"SPAN",{class:!0});var me=P(G);Y=re(me,q),me.forEach(E),te=W(Ei),Q(ie.$$.fragment,Ei),Ei.forEach(E),St.forEach(E),He.forEach(E),Re=W(ue),Ce&&Ce.l(ue),ce=fe(),this.h()},h(){M(h,"class","hidden md:block"),c.disabled=t[11],M(c,"class",v=Ni(`px-2 my-2 pr-4 border-t-0 border-b-0 border-l-0 border border-gray-300 flex items-center ${t[11]&&"opacity-25 cursor-not-allowed"}`)+" svelte-1df378g"),M(k,"class","ml-1"),M(y,"class","px-2 my-2 pr-4 border-t-0 border-b-0 border-l-0 border border-gray-300 flex items-center disabled:opacity-10 disabled:cursor-not-allowed"),y.disabled=I=t[13].isStudent&&!t[15].customization.apps.comments,M(N,"class","px-2 my-2 pr-4 border-t-0 border-b-0 border-l-0 border border-gray-300 flex items-center"),N.disabled=t[5],M(G,"class","hidden md:block"),F.disabled=t[10],M(F,"class",pe=Ni(`px-2 my-2 flex items-center ${t[10]&&"opacity-25 cursor-not-allowed"}`)+" svelte-1df378g"),M(l,"class","flex items-center gap-2 w-fit rounded-full shadow-xl bg-gray-100 dark:bg-neutral-700 px-5 py-1"),M(o,"class","absolute w-full bottom-5 flex items-center justify-center")},m(ue,He){X(e,ue,He),H(ue,r,He),~i&&Ie[i].m(ue,He),H(ue,a,He),H(ue,o,He),x(o,l),x(l,c),X(u,c,null),x(c,f),x(c,h),x(h,m),x(l,p),We[g].m(l,null),x(l,b),x(l,y),X(w,y,null),x(y,$),x(y,k),x(k,V),x(l,S),x(l,N),_e[O].m(N,null),x(l,T),x(l,F),x(F,G),x(G,Y),x(F,te),X(ie,F,null),H(ue,Re,He),Ce&&Ce.m(ue,He),H(ue,ce,He),ge=!0,Ue||(oe=[qe(c,"click",t[33]),qe(y,"click",t[36]),qe(N,"click",t[37]),qe(F,"click",t[38])],Ue=!0)},p(ue,He){const St={};He[0]&65543&&(St.navItems=[{label:ue[16]("course.navItem.lessons.lesson_nav.materials"),isActive:ue[0].isMaterialsTabActive,href:ue[2]},{label:ue[16]("course.navItem.lessons.lesson_nav.exercises"),badgeValue:ue[0].isMaterialsTabActive?ue[1].totalExercises:ue[1].exercises.length,isActive:!ue[0].isMaterialsTabActive,href:`${ue[2]}/exercises`}]),He[0]&21195|He[1]&131072&&(St.$$scope={dirty:He,ctx:ue}),!n&&He[0]&8192&&(n=!0,St.hideOnMobile=ue[13].isStudent,Je(()=>n=!1)),e.$set(St);let Pt=i;i=le(ue),i===Pt?~i&&Ie[i].p(ue,He):(s&&(ye(),L(Ie[Pt],1,1,()=>{Ie[Pt]=null}),we()),~i?(s=Ie[i],s?s.p(ue,He):(s=Ie[i]=ke[i](ue),s.c()),A(s,1),s.m(a.parentNode,a)):s=null),(!ge||He[0]&65536)&&d!==(d=ue[16]("course.navItem.lessons.prev")+"")&&se(m,d),(!ge||He[0]&2048)&&(c.disabled=ue[11]),(!ge||He[0]&2048&&v!==(v=Ni(`px-2 my-2 pr-4 border-t-0 border-b-0 border-l-0 border border-gray-300 flex items-center ${ue[11]&&"opacity-25 cursor-not-allowed"}`)+" svelte-1df378g"))&&M(c,"class",v);let zn=g;g=de(ue),g===zn?We[g].p(ue,He):(ye(),L(We[zn],1,1,()=>{We[zn]=null}),we(),_=We[g],_?_.p(ue,He):(_=We[g]=lt[g](ue),_.c()),A(_,1),_.m(l,b)),(!ge||He[0]&2)&&C!==(C=ue[1].totalComments+"")&&se(V,C),(!ge||He[0]&40960&&I!==(I=ue[13].isStudent&&!ue[15].customization.apps.comments))&&(y.disabled=I);let Fn=O;O=De(ue),O!==Fn&&(ye(),L(_e[Fn],1,1,()=>{_e[Fn]=null}),we(),R=_e[O],R||(R=_e[O]=Be[O](ue),R.c()),A(R,1),R.m(N,null)),(!ge||He[0]&32)&&(N.disabled=ue[5]),(!ge||He[0]&65536)&&q!==(q=ue[16]("course.navItem.lessons.next")+"")&&se(Y,q),(!ge||He[0]&1024)&&(F.disabled=ue[10]),(!ge||He[0]&1024&&pe!==(pe=Ni(`px-2 my-2 flex items-center ${ue[10]&&"opacity-25 cursor-not-allowed"}`)+" svelte-1df378g"))&&M(F,"class",pe),ue[9]&&window.innerWidth>=1024?Ce?(Ce.p(ue,He),He[0]&512&&A(Ce,1)):(Ce=O0(ue),Ce.c(),A(Ce,1),Ce.m(ce.parentNode,ce)):Ce&&(ye(),L(Ce,1,1,()=>{Ce=null}),we())},i(ue){ge||(A(e.$$.fragment,ue),A(s),A(u.$$.fragment,ue),A(_),A(w.$$.fragment,ue),A(R),A(ie.$$.fragment,ue),A(Ce),ge=!0)},o(ue){L(e.$$.fragment,ue),L(s),L(u.$$.fragment,ue),L(_),L(w.$$.fragment,ue),L(R),L(ie.$$.fragment,ue),L(Ce),ge=!1},d(ue){ue&&(E(r),E(a),E(o),E(Re),E(ce)),K(e,ue),~i&&Ie[i].d(ue),K(u),We[g].d(),K(w),_e[O].d(),K(ie),Ce&&Ce.d(ue),Ue=!1,Er(oe)}}}function SG(t){let e,n,r;function i(a){t[40](a)}let s={path:t[2],isExercisePage:!t[0].isMaterialsTabActive&&!!t[0].exerciseId,containerClass:"relative",$$slots:{default:[TG]},$$scope:{ctx:t}};return t[0].courseId!==void 0&&(s.courseId=t[0].courseId),e=new py({props:s}),je.push(()=>et(e,"courseId",i)),{c(){Z(e.$$.fragment)},l(a){Q(e.$$.fragment,a)},m(a,o){X(e,a,o),r=!0},p(a,o){const l={};o[0]&4&&(l.path=a[2]),o[0]&1&&(l.isExercisePage=!a[0].isMaterialsTabActive&&!!a[0].exerciseId),o[0]&131071|o[1]&131072&&(l.$$scope={dirty:o,ctx:a}),!n&&o[0]&1&&(n=!0,l.courseId=a[0].courseId,Je(()=>n=!1)),e.$set(l)},i(a){r||(A(e.$$.fragment,a),r=!0)},o(a){L(e.$$.fragment,a),r=!1},d(a){K(e,a)}}}function xG(t,e,n){let r,i,s,a,o,l,c,u,f,h,d,m;be(t,W0,de=>n(24,s=de)),be(t,pt,de=>n(1,a=de)),be(t,my,de=>n(25,o=de)),be(t,Xu,de=>n(12,l=de)),be(t,Xr,de=>n(13,c=de)),be(t,qy,de=>n(41,u=de)),be(t,fo,de=>n(42,f=de)),be(t,tr,de=>n(14,h=de)),be(t,jy,de=>n(15,d=de)),be(t,Nt,de=>n(16,m=de));let{data:v}=e,p="",g=zt.view,_="",b=!1,y=!1,w=!1,$=!1,k=!1;function C(de){const Be=f.findIndex(_e=>_e.id===de);return Be<10?"0"+(Be+1):Be+1}async function V(de="",Be){var He,St;const _e=setTimeout(()=>{Se(pt,a.isFetching=!0,a)},1e3);let De;Be&&(De=(await Oy(de)).data,clearTimeout(_e)),console.log({lessonData:De});const Ce=((He=De==null?void 0:De.totalExercises)==null?void 0:He[0])&&De.totalExercises[0].count,ue=((St=De==null?void 0:De.totalComments)==null?void 0:St[0])&&De.totalComments[0].count;N(De,Ce||0,ue||0),Se(pt,a.isFetching=!1,a)}async function I(de){n(5,b=!0);let Be={is_complete:!0,profile_id:s.id||"",lesson_id:de,created_at:new Date().toDateString(),updated_at:new Date().toDateString()},_e;const De=a.lesson_completion.map(Ce=>(Ce.profile_id===s.id&&(console.log("shouldUpdate"),Ce={...Ce,is_complete:!Ce.is_complete},_e=Ce),Ce));_e?await rh(_e,!0):(De.push(Be),await rh(Be,!1)),Se(pt,a.lesson_completion=De,a),Se(fo,f=f.map(Ce=>(Ce.id===a.id&&(Ce.lesson_completion=De),Ce)),f),Dn.success("snackbar.lessons.success.complete_marked"),n(5,b=!1)}const S=async()=>{const de=f.find(Be=>Be.id===(a==null?void 0:a.id));if(de){n(6,y=!0);try{const Be=a.materials.videos.map(zn=>zn.link),_e=C(de.id),De=a.materials.slide_url||"",Ce=await fetch(Ys.PUBLIC_SERVER_URL+"/downloadLesson",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({title:de.title,number:_e,orgName:d.name,note:a.materials.note,slideUrl:De,video:Be,courseTitle:l.title})});if(!Ce.ok)throw new Error(await Ce.text());const ue=await Ce.blob();console.log(ue);const He=new Blob([ue],{type:"application/pdf"}),St=URL.createObjectURL(He);let Pt=document.createElement("a");document.body.append(Pt),Pt.download=l.title+" - Lesson "+_e,Pt.href=St,Pt.click(),Pt.remove(),Dn.success("snackbar.lessons.success.complete_download")}catch(Be){console.log("error downloading lesson",Be),Dn.error("snackbar.lessons.error.try_later")}n(6,y=!1)}};function N(de,Be,_e){if(!de)return;let De=[];Array.isArray(de.lesson_completion)&&(De=[...de.lesson_completion]),pt.update(Ce=>({...Ce,id:v.lessonId,title:de.title,totalExercises:Be,totalComments:_e,materials:{videos:de.videos,note:de.note,slide_url:de.slide_url},lesson_completion:De,exercises:[],locale:s.locale})),Array.isArray(de.lesson_language)&&ji.update(Ce=>({...Ce,[v.lessonId]:de.lesson_language.reduce((ue,He)=>(ue[He.locale]=He.content,ue),{en:""})}))}const O=()=>{Se(tr,h.open=!h.open,h)};function R(){n(4,_=g),n(3,g=g===zt.edit?zt.view:zt.edit)}function T(de){if(h.selectedApp===de){Se(tr,h.selectedApp=void 0,h),Se(tr,h.open=!1,h);return}Se(tr,h.selectedApp=de,h),Se(tr,h.open=!0,h)}const F=()=>{if(l.version===uw.V1)return f;{const de=[];return u.forEach(Be=>{de.push(...Be.lessons)}),de}},G=(de,Be)=>{const _e=F(),De=_e.findIndex(Ce=>Ce.id===de);return Be?!_e[De-1]:!_e[De+1]},q=(de,Be)=>{const _e=F();if(G(de,Be))return;const Ce=_e.findIndex(Pt=>Pt.id===de),ue=Be?_e[Ce-1]:_e[Ce+1];if(c.isStudent&&!ue.is_unlocked)return;const St=`/courses/${l.id}/lessons/${ue.id}`;qi(St)},Y=()=>{n(9,k=!1),v.courseId&&uh&&(n(3,g=zt.view),V(v.lessonId,v.isMaterialsTabActive)),Dn.success("snackbar.lessons.success.version_restored")},te=()=>n(9,k=!0),ie=()=>{Se(tr,h.dropdown=!1,h),R()};function pe(de){t.$$.not_equal(a.locale,de)&&(a.locale=de,pt.set(a))}function Re(de){t.$$.not_equal(c.isStudent,de)&&(c.isStudent=de,Xr.set(c))}function ce(de){w=de,n(7,w)}const ge=()=>{Se(tr,h.open=!1,h),Se(tr,h.dropdown=!1,h)};function Ue(de){t.$$.not_equal(c.isStudent,de)&&(c.isStudent=de,Xr.set(c))}const oe=()=>q(v.lessonId,!0),it=()=>qi(`${p}/exercises`),ve=()=>qi(p),ke=()=>T($w.APPS.COMMENTS),Ie=()=>I(v.lessonId),le=()=>q(v.lessonId,!1),lt=()=>n(9,k=!1);function We(de){t.$$.not_equal(v.courseId,de)&&(v.courseId=de,n(0,v))}return t.$$set=de=>{"data"in de&&n(0,v=de.data)},t.$$.update=()=>{var de,Be;t.$$.dirty[0]&33554432&&n(2,p=(Be=(de=o.url)==null?void 0:de.pathname)==null?void 0:Be.replace(/\/exercises[\/ 0-9 a-z -]*/,"")),t.$$.dirty[0]&1&&v.courseId&&uh&&(n(3,g=zt.view),V(v.lessonId,v.isMaterialsTabActive)),t.$$.dirty[0]&16777218&&n(8,$=gy(a.lesson_completion,s.id)),t.$$.dirty[0]&1&&n(11,r=G(v.lessonId,!0)),t.$$.dirty[0]&1&&n(10,i=G(v.lessonId,!1))},[v,a,p,g,_,b,y,w,$,k,i,r,l,c,h,d,m,I,S,O,R,T,q,Y,s,o,te,ie,pe,Re,ce,ge,Ue,oe,it,ve,ke,Ie,le,lt,We]}class Aj extends Pe{constructor(e){super(),Ve(this,e,xG,SG,Ae,{data:0},null,[-1,-1])}}export{$j as A,fj as C,xj as D,gj as E,kj as F,Oj as L,yj as O,Mj as P,Cj as Q,vj as R,Ej as S,_j as T,E9 as X,xv as a,bj as b,aj as c,uj as d,xe as e,wj as f,mj as g,Aj as h,Ct as k,lj as l,oj as m,cj as p,hj as u,dj as v,pj as w,Tj as x,Sj as y};
//# sourceMappingURL=15.329399bd.js.map
