{"version":3,"file":"Dropdown.2e34ff7a.js","sources":["../../../../../../../../node_modules/.pnpm/carbon-components-svelte@0.79.0/node_modules/carbon-components-svelte/src/Dropdown/Dropdown.svelte"],"sourcesContent":["<script>\n  /**\n   * @typedef {any} DropdownItemId\n   * @typedef {string} DropdownItemText\n   * @typedef {{ id: DropdownItemId; text: DropdownItemText; disabled?: boolean; }} DropdownItem\n   * @event {{ selectedId: DropdownItemId, selectedItem: DropdownItem }} select\n   * @slot {{ item: DropdownItem; index: number; }}\n   */\n\n  /**\n   * Set the dropdown items\n   * @type {ReadonlyArray<DropdownItem>}\n   */\n  export let items = [];\n\n  /**\n   * Override the display of a dropdown item\n   * @type {(item: DropdownItem) => string}\n   */\n  export let itemToString = (item) => item.text || item.id;\n\n  /**\n   * Specify the selected item id\n   * @type {DropdownItemId}\n   */\n  export let selectedId;\n\n  /**\n   * Specify the type of dropdown\n   * @type {\"default\" | \"inline\"}\n   */\n  export let type = \"default\";\n\n  /**\n   * Specify the direction of the dropdown menu\n   * @type {\"bottom\" | \"top\"}\n   */\n  export let direction = \"bottom\";\n\n  /**\n   * Specify the size of the dropdown field\n   * @type {\"sm\" | \"lg\" | \"xl\"}\n   */\n  export let size = undefined;\n\n  /** Set to `true` to open the dropdown */\n  export let open = false;\n\n  /** Set to `true` to enable the light variant */\n  export let light = false;\n\n  /** Set to `true` to disable the dropdown */\n  export let disabled = false;\n\n  /** Specify the title text */\n  export let titleText = \"\";\n\n  /** Set to `true` to indicate an invalid state */\n  export let invalid = false;\n\n  /** Specify the invalid state text */\n  export let invalidText = \"\";\n\n  /** Set to `true` to indicate an warning state */\n  export let warn = false;\n\n  /** Specify the warning state text */\n  export let warnText = \"\";\n\n  /** Specify the helper text */\n  export let helperText = \"\";\n\n  /**\n   * Specify the list box label\n   * @type {string}\n   */\n  export let label = undefined;\n\n  /** Set to `true` to visually hide the label text */\n  export let hideLabel = false;\n\n  /**\n   * Override the chevron icon label based on the open state.\n   * Defaults to \"Open menu\" when closed and \"Close menu\" when open\n   * @type {(id: import(\"../ListBox/ListBoxMenuIcon.svelte\").ListBoxMenuIconTranslationId) => string}\n   */\n  export let translateWithId = undefined;\n\n  /** Set an id for the list box component */\n  export let id = \"ccs-\" + Math.random().toString(36);\n\n  /**\n   * Specify a name attribute for the list box\n   * @type {string}\n   */\n  export let name = undefined;\n\n  /** Obtain a reference to the button HTML element */\n  export let ref = null;\n\n  import { createEventDispatcher, onMount } from \"svelte\";\n  import WarningFilled from \"../icons/WarningFilled.svelte\";\n  import WarningAltFilled from \"../icons/WarningAltFilled.svelte\";\n  import {\n    ListBox,\n    ListBoxMenu,\n    ListBoxMenuIcon,\n    ListBoxMenuItem,\n  } from \"../ListBox\";\n\n  const dispatch = createEventDispatcher();\n\n  let highlightedIndex = -1;\n\n  $: inline = type === \"inline\";\n  $: selectedItem = items.find((item) => item.id === selectedId);\n  $: if (!open) {\n    highlightedIndex = -1;\n  }\n\n  function change(dir) {\n    let index = highlightedIndex + dir;\n\n    if (items.length === 0) return;\n    if (index < 0) {\n      index = items.length - 1;\n    } else if (index >= items.length) {\n      index = 0;\n    }\n\n    let disabled = items[index].disabled;\n\n    while (disabled) {\n      index = index + dir;\n\n      if (index < 0) {\n        index = items.length - 1;\n      } else if (index >= items.length) {\n        index = 0;\n      }\n\n      disabled = items[index].disabled;\n    }\n\n    highlightedIndex = index;\n  }\n\n  const dispatchSelect = () => {\n    dispatch(\"select\", {\n      selectedId,\n      selectedItem: items.find((item) => item.id === selectedId),\n    });\n  };\n\n  const pageClickHandler = ({ target }) => {\n    if (open && ref && !ref.contains(target)) {\n      open = false;\n    }\n  };\n\n  onMount(() => {\n    if (parent) {\n      parent.addEventListener(\"click\", pageClickHandler);\n    }\n\n    return () => {\n      if (parent) {\n        parent.removeEventListener(\"click\", pageClickHandler);\n      }\n    };\n  });\n</script>\n\n<svelte:window on:click=\"{pageClickHandler}\" />\n\n<div\n  class:bx--dropdown__wrapper=\"{true}\"\n  class:bx--list-box__wrapper=\"{true}\"\n  class:bx--dropdown__wrapper--inline=\"{inline}\"\n  class:bx--list-box__wrapper--inline=\"{inline}\"\n  class:bx--dropdown__wrapper--inline--invalid=\"{inline && invalid}\"\n  {...$$restProps}\n>\n  {#if titleText}\n    <label\n      for=\"{id}\"\n      class:bx--label=\"{true}\"\n      class:bx--label--disabled=\"{disabled}\"\n      class:bx--visually-hidden=\"{hideLabel}\"\n    >\n      {titleText}\n    </label>\n  {/if}\n  <ListBox\n    role=\"{undefined}\"\n    type=\"{type}\"\n    size=\"{size}\"\n    name=\"{name}\"\n    aria-label=\"{$$props['aria-label']}\"\n    class=\"bx--dropdown \n      {direction === 'top' && 'bx--list-box--up'} \n      {invalid && 'bx--dropdown--invalid'} \n      {!invalid && warn && 'bx--dropdown--warning'} \n      {open && 'bx--dropdown--open'}\n      {size === 'sm' && 'bx--dropdown--sm'}\n      {size === 'xl' && 'bx--dropdown--xl'}\n      {inline && 'bx--dropdown--inline'}\n      {disabled && 'bx--dropdown--disabled'}\n      {light && 'bx--dropdown--light'}\"\n    on:click=\"{({ target }) => {\n      if (disabled) return;\n      open = ref.contains(target) ? !open : false;\n    }}\"\n    disabled=\"{disabled}\"\n    open=\"{open}\"\n    invalid=\"{invalid}\"\n    invalidText=\"{invalidText}\"\n    light=\"{light}\"\n    warn=\"{warn}\"\n    warnText=\"{warnText}\"\n  >\n    {#if invalid}\n      <WarningFilled class=\"bx--list-box__invalid-icon\" />\n    {/if}\n    {#if !invalid && warn}\n      <WarningAltFilled\n        class=\"bx--list-box__invalid-icon bx--list-box__invalid-icon--warning\"\n      />\n    {/if}\n    <button\n      bind:this=\"{ref}\"\n      type=\"button\"\n      class:bx--list-box__field=\"{true}\"\n      tabindex=\"0\"\n      aria-expanded=\"{open}\"\n      on:keydown=\"{(e) => {\n        const { key } = e;\n        if (['Enter', 'ArrowDown', 'ArrowUp'].includes(key)) {\n          e.preventDefault();\n        }\n        if (key === 'Enter') {\n          open = !open;\n          if (\n            highlightedIndex > -1 &&\n            items[highlightedIndex].id !== selectedId\n          ) {\n            selectedId = items[highlightedIndex].id;\n            dispatchSelect();\n            open = false;\n          }\n        } else if (key === 'Tab') {\n          open = false;\n          ref.blur();\n        } else if (key === 'ArrowDown') {\n          if (!open) open = true;\n          change(1);\n        } else if (key === 'ArrowUp') {\n          if (!open) open = true;\n          change(-1);\n        } else if (key === 'Escape') {\n          open = false;\n        }\n      }}\"\n      on:keyup=\"{(e) => {\n        const { key } = e;\n        if ([' '].includes(key)) {\n          e.preventDefault();\n        } else {\n          return;\n        }\n        open = !open;\n\n        if (\n          highlightedIndex > -1 &&\n          items[highlightedIndex].id !== selectedId\n        ) {\n          selectedId = items[highlightedIndex].id;\n          dispatchSelect();\n          open = false;\n        }\n      }}\"\n      disabled=\"{disabled}\"\n      translateWithId=\"{translateWithId}\"\n      id=\"{id}\"\n    >\n      <span class:bx--list-box__label=\"{true}\">\n        {#if selectedItem}{itemToString(selectedItem)}{:else}{label}{/if}\n      </span>\n      <ListBoxMenuIcon\n        on:click=\"{(e) => {\n          e.stopPropagation();\n          if (disabled) return;\n          open = !open;\n        }}\"\n        translateWithId=\"{translateWithId}\"\n        open=\"{open}\"\n      />\n    </button>\n    {#if open}\n      <ListBoxMenu aria-labelledby=\"{id}\" id=\"{id}\">\n        {#each items as item, i (item.id)}\n          <ListBoxMenuItem\n            id=\"{item.id}\"\n            active=\"{selectedId === item.id}\"\n            highlighted=\"{highlightedIndex === i}\"\n            disabled=\"{item.disabled}\"\n            on:click=\"{(e) => {\n              if (item.disabled) {\n                e.stopPropagation();\n                return;\n              }\n              selectedId = item.id;\n              dispatchSelect();\n              ref.focus();\n            }}\"\n            on:mouseenter=\"{() => {\n              if (item.disabled) return;\n              highlightedIndex = i;\n            }}\"\n          >\n            <slot item=\"{item}\" index=\"{i}\">\n              {itemToString(item)}\n            </slot>\n          </ListBoxMenuItem>\n        {/each}\n      </ListBoxMenu>\n    {/if}\n  </ListBox>\n  {#if !inline && !invalid && !warn && helperText}\n    <div\n      class:bx--form__helper-text=\"{true}\"\n      class:bx--form__helper-text--disabled=\"{disabled}\"\n    >\n      {helperText}\n    </div>\n  {/if}\n</div>\n"],"names":["t_value","ctx","dirty","set_data","t","listboxmenuitem_changes","get_key","if_block1","create_if_block_3","create_if_block","toggle_class","div","listbox_changes","type","$$props","direction","size","open","light","disabled","titleText","invalid","invalidText","warn","warnText","helperText","label","hideLabel","translateWithId","name","ref","dispatch","createEventDispatcher","highlightedIndex","change","dir","index","items","$$invalidate","pageClickHandler","target","e","key","selectedId","item","i","inline","selectedItem"],"mappings":"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","x_google_ignoreList":[0]}