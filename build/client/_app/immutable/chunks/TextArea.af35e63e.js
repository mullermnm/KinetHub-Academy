import{s as de,g as ce,a as J,c as x,b as I,d as g,e as m,h as pe,i as z,f as y,n as U,j as ve,k as ge,t as V,l as F,m as j,I as ze,V as qe,a8 as He,C as M,D as T,p as le,w as oe,x as B,z as W,A as Te,E as Ke,N as X,a1 as ae,a4 as he,G as be,q as Be,H as We,u as Ve,r as Fe,v as je,X as Ue}from"./scheduler.ee52cacd.js";import{S as me,i as _e,b as $,d as ee,m as te,t as R,a as S,e as re,f as De,g as ne,c as ie}from"./index.a2391391.js";import{w as ue}from"./index.45ef5fca.js";import{g as Xe}from"./spread.5cc747ed.js";import{I as Ye}from"./index.e68f3ff9.js";import{H as Ze}from"./HTMLRender.93b52c11.js";import{t as Ne}from"./translations.f943b7b3.js";import{P as Ge}from"./Popover.d830a8b5.js";import{L as Je}from"./index.550ce75a.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="37dd9bad-b4c5-4daf-a103-afc87a126cdd",t._sentryDebugIdIdentifier="sentry-dbid-37dd9bad-b4c5-4daf-a103-afc87a126cdd")}catch{}})();function we(t){let e,r;return{c(){e=J("title"),r=V(t[1])},l(s){e=x(s,"title",{});var l=I(e);r=F(l,t[1]),l.forEach(g)},m(s,l){z(s,e,l),y(e,r)},p(s,l){l&2&&j(r,s[1])},d(s){s&&g(e)}}}function xe(t){let e,r,s,l,c,n=t[1]&&we(t),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],i={};for(let a=0;a<o.length;a+=1)i=ce(i,o[a]);return{c(){e=J("svg"),n&&n.c(),r=J("path"),s=J("path"),l=J("path"),c=J("path"),this.h()},l(a){e=x(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var u=I(e);n&&n.l(u),r=x(u,"path",{d:!0}),I(r).forEach(g),s=x(u,"path",{d:!0,transform:!0}),I(s).forEach(g),l=x(u,"path",{d:!0,transform:!0}),I(l).forEach(g),c=x(u,"path",{d:!0,transform:!0}),I(c).forEach(g),u.forEach(g),this.h()},h(){m(r,"d","M29.4141,24,12,6.5859a2.0476,2.0476,0,0,0-2.8281,0l-2.586,2.586a2.0021,2.0021,0,0,0,0,2.8281L23.999,29.4141a2.0024,2.0024,0,0,0,2.8281,0l2.587-2.5865a1.9993,1.9993,0,0,0,0-2.8281ZM8,10.5859,10.5859,8l5,5-2.5866,2.5869-5-5Z"),m(s,"d","M2.586 14.586H5.414V17.414H2.586z"),m(s,"transform","rotate(-45 4 16)"),m(l,"d","M14.586 2.586H17.414V5.414H14.586z"),m(l,"transform","rotate(-45 16 4)"),m(c,"d","M2.586 2.586H5.414V5.414H2.586z"),m(c,"transform","rotate(-45 4 4)"),pe(e,i)},m(a,u){z(a,e,u),n&&n.m(e,null),y(e,r),y(e,s),y(e,l),y(e,c)},p(a,[u]){a[1]?n?n.p(a,u):(n=we(a),n.c(),n.m(e,r)):n&&(n.d(1),n=null),pe(e,i=Xe(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},u&1&&{width:a[0]},u&1&&{height:a[0]},u&4&&a[2],u&8&&a[3]]))},i:U,o:U,d(a){a&&g(e),n&&n.d()}}}function Qe(t,e,r){let s,l;const c=["size","title"];let n=ve(e,c),{size:o=16}=e,{title:i=void 0}=e;return t.$$set=a=>{r(5,e=ce(ce({},e),ge(a))),r(3,n=ve(e,c)),"size"in a&&r(0,o=a.size),"title"in a&&r(1,i=a.title)},t.$$.update=()=>{r(4,s=e["aria-label"]||e["aria-labelledby"]||i),r(2,l={"aria-hidden":s?void 0:!0,role:s?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=ge(e),[o,i,l,n,s]}class $e extends me{constructor(e){super(),_e(this,e,Qe,xe,de,{size:0,title:1})}}var et=Object.defineProperty,tt=(t,e,r)=>e in t?et(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,se=(t,e,r)=>(tt(t,typeof e!="symbol"?e+"":e,r),r),Re=class{constructor(){se(this,"listeners",new Map)}subscribe(t,e){this.listeners.has(t)||this.listeners.set(t,[]),!this.listeners.get(t).includes(e)&&this.listeners.get(t).push(e)}unsubscribe(t,e){this.listeners.has(t)&&this.listeners.get(t).includes(e)&&(this.listeners.get(t).splice(this.listeners.get(t).indexOf(e),1),this.listeners.get(t).length===0&&this.listeners.delete(t))}emit(t,e){this.listeners.has(t)&&this.listeners.get(t).forEach(r=>r(e))}},rt={broadcast:!1},st={broadcast:!1},ke=class{constructor({data:t,expiresAt:e=null}){se(this,"data"),se(this,"expiresAt"),this.data=t,this.expiresAt=e}isResolving(){return this.data instanceof Promise}hasExpired(){return this.expiresAt===null||this.expiresAt<new Date}expiresIn(t){return this.expiresAt=new Date,this.expiresAt.setMilliseconds(this.expiresAt.getMilliseconds()+t),this}},lt=class{constructor(){se(this,"elements",new Map),se(this,"event",new Re)}resolve(t,e){Promise.resolve(e.data).then(r=>{if(r==null)return this.remove(t);e.data=r,this.broadcast(t,r)})}get(t){return this.elements.get(t)}set(t,e){this.elements.set(t,e),this.resolve(t,e)}remove(t,e){const{broadcast:r}={...rt,...e};r&&this.broadcast(t,void 0),this.elements.delete(t)}clear(t){const{broadcast:e}={...st,...t};if(e)for(const r of this.elements.keys())this.broadcast(r,void 0);this.elements.clear()}has(t){return this.elements.has(t)}subscribe(t,e){this.event.subscribe(t,e)}unsubscribe(t,e){this.event.unsubscribe(t,e)}broadcast(t,e){this.event.emit(t,e)}},Le={cache:new lt,errors:new Re,fetcher:async t=>{const e=await fetch(t);if(!e.ok)throw Error("Not a 2XX response.");return e.json()},fallbackData:void 0,loadInitialCache:!0,revalidateOnStart:!0,dedupingInterval:2e3,revalidateOnFocus:!0,focusThrottleInterval:5e3,revalidateOnReconnect:!0,reconnectWhen:(t,{enabled:e})=>e&&typeof window<"u"?(window.addEventListener("online",t),()=>window.removeEventListener("online",t)):()=>{},focusWhen:(t,{enabled:e,throttleInterval:r})=>{if(e&&typeof window<"u"){let s=null;const l=()=>{const c=Date.now();(s===null||c-s>r)&&(s=c,t())};return window.addEventListener("focus",l),()=>window.removeEventListener("focus",l)}return()=>{}},revalidateFunction:void 0},Oe={...Le,force:!1},nt={revalidate:!0,revalidateOptions:{...Oe},revalidateFunction:void 0},it={broadcast:!1},at=class{constructor(t){se(this,"options"),this.options={...Le,...t}}get cache(){return this.options.cache}get errors(){return this.options.errors}async requestData(t,e){return await Promise.resolve(e(t)).catch(r=>{throw this.errors.emit(t,r),r})}resolveKey(t){if(typeof t=="function")try{return t()}catch{return}return t}clear(t,e){const r={...it,...e};if(t==null)return this.cache.clear(r);if(!Array.isArray(t))return this.cache.remove(t,r);for(const s of t)this.cache.remove(s,r)}async revalidate(t,e){if(!t)throw new Error("[Revalidate] Key issue: ${key}");const{fetcher:r,dedupingInterval:s}=this.options,{force:l,fetcher:c,dedupingInterval:n}={...Oe,fetcher:r,dedupingInterval:s,...e};if(l||!this.cache.has(t)||this.cache.has(t)&&this.cache.get(t).hasExpired()){const o=this.requestData(t,c),i=o.catch(()=>{});return this.cache.set(t,new ke({data:i}).expiresIn(n)),await o}return this.getWait(t)}async mutate(t,e,r){var s;if(!t)throw new Error("[Mutate] Key issue: ${key}");const{revalidate:l,revalidateOptions:c,revalidateFunction:n}={...nt,...r};let o;if(typeof e=="function"){let i;if(this.cache.has(t)){const a=this.cache.get(t);a.isResolving()||(i=a.data)}o=e(i)}else o=e;return this.cache.set(t,new ke({data:o})),l?await((s=n==null?void 0:n(t,c))!=null?s:this.revalidate(t,c)):o}subscribeData(t,e){if(t){const r=s=>e(s);return this.cache.subscribe(t,r),()=>this.cache.unsubscribe(t,r)}return()=>{}}subscribeErrors(t,e){if(t){const r=s=>e(s);return this.errors.subscribe(t,r),()=>this.errors.unsubscribe(t,r)}return()=>{}}get(t){if(t&&this.cache.has(t)){const e=this.cache.get(t);if(!e.isResolving())return e.data}}getWait(t){return new Promise((e,r)=>{const s=this.subscribeData(t,n=>{if(s(),n!==void 0)return e(n)}),l=this.subscribeErrors(t,n=>{if(l(),n!==void 0)return r(n)}),c=this.get(t);if(c!==void 0)return e(c)})}subscribe(t,e,r,s){const{fetcher:l,fallbackData:c,loadInitialCache:n,revalidateOnStart:o,dedupingInterval:i,revalidateOnFocus:a,focusThrottleInterval:u,revalidateOnReconnect:d,reconnectWhen:b,focusWhen:P,revalidateFunction:h}={...this.options,...s},v=H=>{var A;return(A=h==null?void 0:h(this.resolveKey(t),H))!=null?A:this.revalidate(this.resolveKey(t),H)},_=()=>v({fetcher:l,dedupingInterval:i}),w=n?this.get(this.resolveKey(t)):c??void 0,p=o?_():Promise.resolve(void 0),D=w?Promise.resolve(w):p;w&&(e==null||e(w));const C=e?this.subscribeData(this.resolveKey(t),e):void 0,q=r?this.subscribeErrors(this.resolveKey(t),r):void 0,K=P(_,{throttleInterval:u,enabled:a}),N=b(_,{enabled:d});return{unsubscribe:()=>{C==null||C(),q==null||q(),K==null||K(),N==null||N()},dataPromise:D,revalidatePromise:p}}};function Q(){}function ot(t){return t()}function ut(t){t.forEach(ot)}function ct(t){return typeof t=="function"}function ft(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function dt(t,...e){if(t==null){for(const s of e)s(void 0);return Q}const r=t.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}var G=[];function ht(t,e){return{subscribe:fe(t,e).subscribe}}function fe(t,e=Q){let r;const s=new Set;function l(o){if(ft(t,o)&&(t=o,r)){const i=!G.length;for(const a of s)a[1](),G.push(a,t);if(i){for(let a=0;a<G.length;a+=2)G[a][0](G[a+1]);G.length=0}}}function c(o){l(o(t))}function n(o,i=Q){const a=[o,i];return s.add(a),s.size===1&&(r=e(l,c)||Q),o(t),()=>{s.delete(a),s.size===0&&r&&(r(),r=null)}}return{set:l,update:c,subscribe:n}}function ye(t,e,r){const s=!Array.isArray(t),l=s?[t]:t;if(!l.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const c=e.length<2;return ht(r,(n,o)=>{let i=!1;const a=[];let u=0,d=Q;const b=()=>{if(u)return;d();const h=e(s?a[0]:a,n,o);c?n(h):d=ct(h)?h:Q},P=l.map((h,v)=>dt(h,_=>{a[v]=_,u&=~(1<<v),i&&b()},()=>{u|=1<<v}));return i=!0,b(),function(){ut(P),d(),i=!1}})}var bt=class extends at{useSWR(t,e){let r;const s=fe(void 0,()=>()=>r==null?void 0:r()),l=fe(void 0,()=>()=>r==null?void 0:r());qe(()=>{const u=b=>{l.set(void 0),s.set(b)},d=b=>l.set(b);r||(r=this.subscribe(t,u,d,{loadInitialCache:!0,...e}).unsubscribe)}),He(()=>r==null?void 0:r());const c=(u,d)=>this.mutate(this.resolveKey(t),u,{revalidateOptions:e,...d}),n=u=>this.revalidate(this.resolveKey(t),{...e,...u}),o=u=>this.clear(this.resolveKey(t),u),i=ye([s,l],([u,d])=>u===void 0&&d===void 0),a=ye([s,l],([u,d])=>u!==void 0&&d===void 0);return{data:s,error:l,mutate:c,revalidate:n,clear:o,isLoading:i,isValid:a}}},mt=t=>new bt(t),_t=mt(),pt=(t,e)=>_t.useSWR(t,e);function vt(){const t=new TextDecoder;return function(e){return e?t.decode(e,{stream:!0}):""}}var gt=0,Ee={};function wt({api:t="/api/completion",id:e,initialCompletion:r="",initialInput:s="",credentials:l,headers:c,body:n,onResponse:o,onFinish:i,onError:a}={}){const u=e||`completion-${gt++}`,d=`${t}|${u}`,{data:b,mutate:P,isLoading:h}=pt(d,{fetcher:()=>Ee[d]||r,fallbackData:r}),v=ue(!1);b.set(r);const _=f=>(Ee[d]=f,P(f)),w=b,p=ue(void 0);let D=null;async function C(f,E){try{v.set(!0),D=new AbortController,_("");const L=await fetch(t,{method:"POST",body:JSON.stringify({prompt:f,...n,...E==null?void 0:E.body}),headers:{...c,...E==null?void 0:E.headers},signal:D.signal,credentials:l}).catch(Z=>{throw Z});if(o)try{await o(L)}catch(Z){throw Z}if(!L.ok)throw new Error(await L.text()||"Failed to fetch the chat response.");if(!L.body)throw new Error("The response body is empty.");let O="";const Y=L.body.getReader(),k=vt();for(;;){const{done:Z,value:Se}=await Y.read();if(Z)break;if(O+=k(Se),_(O),D===null){Y.cancel();break}}return i&&i(f,O),D=null,O}catch(L){if(L.name==="AbortError")return D=null,null;a&&p instanceof Error&&a(p),p.set(L)}finally{v.set(!1)}}const q=async(f,E)=>C(f,E),K=()=>{D&&(D.abort(),D=null)},N=f=>{_(f)},H=ue(s);return{completion:w,complete:q,error:p,stop:K,setCompletion:N,input:H,handleSubmit:f=>{f.preventDefault();const E=ze(H);if(E)return q(E)},isLoading:h||v}}function kt(t){let e,r,s=t[9]("ai.help_me")+"",l,c,n,o,i,a,u=t[9]("ai.text")+"",d,b,P;return{c(){e=M("div"),r=M("p"),l=V(s),c=B(),n=M("textarea"),i=B(),a=M("button"),d=V(u),this.h()},l(h){e=T(h,"DIV",{class:!0});var v=I(e);r=T(v,"P",{class:!0});var _=I(r);l=F(_,s),_.forEach(g),c=W(v),n=T(v,"TEXTAREA",{class:!0,placeholder:!0}),I(n).forEach(g),i=W(v),a=T(v,"BUTTON",{class:!0,type:!0});var w=I(a);d=F(w,u),w.forEach(g),v.forEach(g),this.h()},h(){m(r,"class","text-sm font-medium mb-2 ml-1"),m(n,"class","w-full border-0 rounded-lg h-[65%] text-sm m-0 dark:text-black"),m(n,"placeholder",o=t[9]("ai.placeholder")),m(a,"class","flex text-xs px-4 py-2 m-0 border rounded-md font-medium"),m(a,"type","button"),m(e,"class","h-full")},m(h,v){z(h,e,v),y(e,r),y(r,l),y(e,c),y(e,n),ae(n,t[7]),y(e,i),y(e,a),y(a,d),b||(P=[X(n,"input",t[21]),X(a,"click",he(t[22]))],b=!0)},p(h,v){v&512&&s!==(s=h[9]("ai.help_me")+"")&&j(l,s),v&512&&o!==(o=h[9]("ai.placeholder"))&&m(n,"placeholder",o),v&128&&ae(n,h[7]),v&512&&u!==(u=h[9]("ai.text")+"")&&j(d,u)},i:U,o:U,d(h){h&&g(e),b=!1,be(P)}}}function yt(t){let e,r,s,l,c,n,o,i,a,u,d,b=t[9]("ai.rephrase")+"",P,h,v,_,w,p;const D=[Pt,Et],C=[];function q(f,E){return f[3]?0:1}s=q(t),l=C[s]=D[s](t);const K=[At,It],N=[];function H(f,E){return f[10]?0:1}i=H(t),a=N[i]=K[i](t);let A=!t[10]&&Pe(t);return{c(){e=M("div"),r=M("div"),l.c(),c=B(),n=M("div"),o=M("button"),a.c(),u=B(),d=M("button"),P=V(b),v=B(),A&&A.c(),this.h()},l(f){e=T(f,"DIV",{class:!0});var E=I(e);r=T(E,"DIV",{class:!0});var L=I(r);l.l(L),L.forEach(g),c=W(E),n=T(E,"DIV",{class:!0});var O=I(n);o=T(O,"BUTTON",{class:!0,type:!0});var Y=I(o);a.l(Y),Y.forEach(g),u=W(O),d=T(O,"BUTTON",{class:!0,type:!0});var k=I(d);P=F(k,b),k.forEach(g),v=W(O),A&&A.l(O),O.forEach(g),E.forEach(g),this.h()},h(){m(r,"class","h-[82%] bg-white dark:bg-neutral-700 p-2 overflow-y-auto text-sm text-start w-full my-1"),m(o,"class","text-xs px-4 py-2 border-[1px] cursor-pointer rounded-md font-medium"),m(o,"type","button"),o.disabled=t[10],m(d,"class",h="text-xs px-4 py-2 border-[1px] cursor-pointer rounded-md font-medium "+(t[10]&&"opacity-25 cursor-not-allowed")),m(d,"type","button"),d.disabled=t[10],m(n,"class","flex gap-5 ml-2"),m(e,"class","h-[200px]")},m(f,E){z(f,e,E),y(e,r),C[s].m(r,null),t[18](r),y(e,c),y(e,n),y(n,o),N[i].m(o,null),y(n,u),y(n,d),y(d,P),y(n,v),A&&A.m(n,null),_=!0,w||(p=[X(o,"click",t[19]),X(d,"click",he(t[20]))],w=!0)},p(f,E){let L=s;s=q(f),s===L?C[s].p(f,E):(ne(),S(C[L],1,1,()=>{C[L]=null}),ie(),l=C[s],l?l.p(f,E):(l=C[s]=D[s](f),l.c()),R(l,1),l.m(r,null));let O=i;i=H(f),i===O?N[i].p(f,E):(ne(),S(N[O],1,1,()=>{N[O]=null}),ie(),a=N[i],a?a.p(f,E):(a=N[i]=K[i](f),a.c()),R(a,1),a.m(o,null)),(!_||E&1024)&&(o.disabled=f[10]),(!_||E&512)&&b!==(b=f[9]("ai.rephrase")+"")&&j(P,b),(!_||E&1024&&h!==(h="text-xs px-4 py-2 border-[1px] cursor-pointer rounded-md font-medium "+(f[10]&&"opacity-25 cursor-not-allowed")))&&m(d,"class",h),(!_||E&1024)&&(d.disabled=f[10]),f[10]?A&&(A.d(1),A=null):A?A.p(f,E):(A=Pe(f),A.c(),A.m(n,null))},i(f){_||(R(l),R(a),_=!0)},o(f){S(l),S(a),_=!1},d(f){f&&g(e),C[s].d(),t[18](null),N[i].d(),A&&A.d(),w=!1,be(p)}}}function Et(t){let e,r;return{c(){e=M("p"),r=V(t[5]),this.h()},l(s){e=T(s,"P",{class:!0});var l=I(e);r=F(l,t[5]),l.forEach(g),this.h()},h(){m(e,"class","font-normal")},m(s,l){z(s,e,l),y(e,r)},p(s,l){l&32&&j(r,s[5])},i:U,o:U,d(s){s&&g(e)}}}function Pt(t){let e,r;return e=new Ze({props:{content:t[5]}}),{c(){$(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,l){te(e,s,l),r=!0},p(s,l){const c={};l&32&&(c.content=s[5]),e.$set(c)},i(s){r||(R(e.$$.fragment,s),r=!0)},o(s){S(e.$$.fragment,s),r=!1},d(s){re(e,s)}}}function It(t){let e=t[9]("ai.insert")+"",r;return{c(){r=V(e)},l(s){r=F(s,e)},m(s,l){z(s,r,l)},p(s,l){l&512&&e!==(e=s[9]("ai.insert")+"")&&j(r,e)},i:U,o:U,d(s){s&&g(r)}}}function At(t){let e,r;return e=new Je({props:{withOverlay:!1,small:!0}}),{c(){$(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,l){te(e,s,l),r=!0},p:U,i(s){r||(R(e.$$.fragment,s),r=!0)},o(s){S(e.$$.fragment,s),r=!1},d(s){re(e,s)}}}function Pe(t){let e,r=t[9]("ai.reset")+"",s,l,c;return{c(){e=M("button"),s=V(r),this.h()},l(n){e=T(n,"BUTTON",{class:!0,type:!0});var o=I(e);s=F(o,r),o.forEach(g),this.h()},h(){m(e,"class","text-xs px-4 py-2 border-[1px] cursor-pointer rounded-md font-medium"),m(e,"type","button")},m(n,o){z(n,e,o),y(e,s),l||(c=X(e,"click",he(t[14])),l=!0)},p(n,o){o&512&&r!==(r=n[9]("ai.reset")+"")&&j(s,r)},d(n){n&&g(e),l=!1,c()}}}function Ct(t){let e,r,s,l,c,n;const o=[yt,kt],i=[];function a(u,d){return u[8]?0:1}return r=a(t),s=i[r]=o[r](t),{c(){e=M("button"),s.c(),this.h()},l(u){e=T(u,"BUTTON",{class:!0,type:!0});var d=I(e);s.l(d),d.forEach(g),this.h()},h(){m(e,"class","p-2 w-[300px] h-[220px] text-start"),m(e,"type","button")},m(u,d){z(u,e,d),i[r].m(e,null),l=!0,c||(n=X(e,"click",Dt),c=!0)},p(u,d){let b=r;r=a(u),r===b?i[r].p(u,d):(ne(),S(i[b],1,1,()=>{i[b]=null}),ie(),s=i[r],s?s.p(u,d):(s=i[r]=o[r](u),s.c()),R(s,1),s.m(e,null))},i(u){l||(R(s),l=!0)},o(u){S(s),l=!1},d(u){u&&g(e),i[r].d(),c=!1,n()}}}function Mt(t){let e,r,s,l,c;e=new $e({props:{size:16,class:"carbon-icon"}});function n(i){t[23](i)}let o={caret:!0,align:t[2],$$slots:{default:[Ct]},$$scope:{ctx:t}};return t[4]!==void 0&&(o.open=t[4]),s=new Ge({props:o}),oe.push(()=>De(s,"open",n)),{c(){$(e.$$.fragment),r=B(),$(s.$$.fragment)},l(i){ee(e.$$.fragment,i),r=W(i),ee(s.$$.fragment,i)},m(i,a){te(e,i,a),z(i,r,a),te(s,i,a),c=!0},p(i,a){const u={};a&4&&(u.align=i[2]),a&268437498&&(u.$$scope={dirty:a,ctx:i}),!l&&a&16&&(l=!0,u.open=i[4],Te(()=>l=!1)),s.$set(u)},i(i){c||(R(e.$$.fragment,i),R(s.$$.fragment,i),c=!0)},o(i){S(e.$$.fragment,i),S(s.$$.fragment,i),c=!1},d(i){i&&g(r),re(e,i),re(s,i)}}}function Tt(t){let e,r,s,l;return r=new Ye({props:{contained:!0,color:"text-primary-700 dark:bg-neutral-500 dark:text-white",size:"large",onClick:t[24],$$slots:{default:[Mt]},$$scope:{ctx:t}}}),{c(){e=M("div"),$(r.$$.fragment),this.h()},l(c){e=T(c,"DIV",{class:!0});var n=I(e);ee(r.$$.fragment,n),n.forEach(g),this.h()},h(){m(e,"class",s=t[0]+" relative z-[100]")},m(c,n){z(c,e,n),te(r,e,null),l=!0},p(c,[n]){const o={};n&16&&(o.onClick=c[24]),n&268437502&&(o.$$scope={dirty:n,ctx:c}),r.$set(o),(!l||n&1&&s!==(s=c[0]+" relative z-[100]"))&&m(e,"class",s)},i(c){l||(R(r.$$.fragment,c),l=!0)},o(c){S(r.$$.fragment,c),l=!1},d(c){c&&g(e),re(r)}}}const Dt=t=>t.stopPropagation();function Nt(t,e,r){let s,l,c,n;le(t,Ne,k=>r(9,l=k));let{className:o=""}=e,{handleInsert:i=k=>{}}=e,{defaultPrompt:a=""}=e,{alignPopover:u="left"}=e,{isHTML:d=!1}=e,b=!1,P="",h,v=a,_=!1;const{input:w,handleSubmit:p,completion:D,isLoading:C}=wt({api:"/api/completion/customprompt"});le(t,w,k=>r(25,c=k)),le(t,D,k=>r(17,s=k)),le(t,C,k=>r(10,n=k));function q(){r(8,_=!1),r(5,P="")}function K(k){r(5,P=k),h&&r(6,h.scrollTop=h.scrollHeight,h)}function N(k,Z){r(8,_=!0),Ke(w,c=Z?`${l("ai.can_you")}: ${P}`:k,c),setTimeout(()=>{p({preventDefault:()=>{}})},500)}function H(k){oe[k?"unshift":"push"](()=>{h=k,r(6,h)})}const A=()=>{i(P),r(4,b=!1)},f=()=>N(v,!0);function E(){v=this.value,r(7,v),r(16,a)}const L=()=>N(v,!1);function O(k){b=k,r(4,b)}const Y=()=>r(4,b=!b);return t.$$set=k=>{"className"in k&&r(0,o=k.className),"handleInsert"in k&&r(1,i=k.handleInsert),"defaultPrompt"in k&&r(16,a=k.defaultPrompt),"alignPopover"in k&&r(2,u=k.alignPopover),"isHTML"in k&&r(3,d=k.isHTML)},t.$$.update=()=>{t.$$.dirty&131072&&K(s),t.$$.dirty&65536&&r(7,v=a)},[o,i,u,d,b,P,h,v,_,l,n,w,D,C,q,N,a,s,H,A,f,E,L,O,Y]}class Rt extends me{constructor(e){super(),_e(this,e,Nt,Tt,de,{className:0,handleInsert:1,defaultPrompt:16,alignPopover:2,isHTML:3})}}const Lt=t=>({}),Ie=t=>({});function Ae(t){let e,r,s,l,c,n,o,i=t[12]&&Ce(),a=t[14]&&Me(t);return{c(){e=M("p"),r=M("span"),s=V(t[3]),l=B(),i&&i.c(),c=B(),a&&a.c(),this.h()},l(u){e=T(u,"P",{class:!0});var d=I(e);r=T(d,"SPAN",{});var b=I(r);s=F(b,t[3]),l=W(b),i&&i.l(b),b.forEach(g),c=W(d),a&&a.l(d),d.forEach(g),this.h()},h(){m(e,"class",n="dark:text-white text-left w-full flex items-center justify-between "+t[8]+" svelte-8xff7c")},m(u,d){z(u,e,d),y(e,r),y(r,s),y(r,l),i&&i.m(r,null),y(e,c),a&&a.m(e,null),o=!0},p(u,d){(!o||d&8)&&j(s,u[3]),u[12]?i||(i=Ce(),i.c(),i.m(r,null)):i&&(i.d(1),i=null),u[14]?a?(a.p(u,d),d&16384&&R(a,1)):(a=Me(u),a.c(),R(a,1),a.m(e,null)):a&&(ne(),S(a,1,1,()=>{a=null}),ie()),(!o||d&256&&n!==(n="dark:text-white text-left w-full flex items-center justify-between "+u[8]+" svelte-8xff7c"))&&m(e,"class",n)},i(u){o||(R(a),o=!0)},o(u){S(a),o=!1},d(u){u&&g(e),i&&i.d(),a&&a.d()}}}function Ce(t){let e,r="*";return{c(){e=M("span"),e.textContent=r,this.h()},l(s){e=T(s,"SPAN",{class:!0,"data-svelte-h":!0}),Ue(e)!=="svelte-1qj2sto"&&(e.textContent=r),this.h()},h(){m(e,"class","text-red-700")},m(s,l){z(s,e,l)},d(s){s&&g(e)}}}function Me(t){let e,r,s;function l(n){t[19](n)}let c={alignPopover:t[15],handleInsert:t[18]};return t[2]!==void 0&&(c.defaultPrompt=t[2]),e=new Rt({props:c}),oe.push(()=>De(e,"defaultPrompt",l)),{c(){$(e.$$.fragment)},l(n){ee(e.$$.fragment,n)},m(n,o){te(e,n,o),s=!0},p(n,o){const i={};o&32768&&(i.alignPopover=n[15]),o&1&&(i.handleInsert=n[18]),!r&&o&4&&(r=!0,i.defaultPrompt=n[2],Te(()=>r=!1)),e.$set(i)},i(n){s||(R(e.$$.fragment,n),s=!0)},o(n){S(e.$$.fragment,n),s=!1},d(n){re(e,n)}}}function Ot(t){let e,r;return{c(){e=M("p"),r=V(t[10]),this.h()},l(s){e=T(s,"P",{class:!0});var l=I(e);r=F(l,t[10]),l.forEach(g),this.h()},h(){m(e,"class","text-sm text-gray-500 dark:text-white")},m(s,l){z(s,e,l),y(e,r)},p(s,l){l&1024&&j(r,s[10])},d(s){s&&g(e)}}}function St(t){let e,r;return{c(){e=M("p"),r=V(t[11]),this.h()},l(s){e=T(s,"P",{class:!0});var l=I(e);r=F(l,t[11]),l.forEach(g),this.h()},h(){m(e,"class","text-sm text-red-500")},m(s,l){z(s,e,l),y(e,r)},p(s,l){l&2048&&j(r,s[11])},d(s){s&&g(e)}}}function zt(t){let e,r,s,l,c,n,o,i,a,u,d=t[3]&&Ae(t);function b(w,p){if(w[11])return St;if(w[10])return Ot}let P=b(t),h=P&&P(t);const v=t[17].iconbutton,_=Be(v,t,t[16],Ie);return{c(){e=M("label"),d&&d.c(),r=B(),s=M("textarea"),c=B(),h&&h.c(),n=B(),_&&_.c(),this.h()},l(w){e=T(w,"LABEL",{for:!0,class:!0});var p=I(e);d&&d.l(p),r=W(p),s=T(p,"TEXTAREA",{rows:!0,placeholder:!0,class:!0}),I(s).forEach(g),c=W(p),h&&h.l(p),n=W(p),_&&_.l(p),p.forEach(g),this.h()},h(){s.disabled=t[4],m(s,"rows",t[6]),m(s,"placeholder",t[5]),s.required=t[12],m(s,"class",l="form-textarea border-l-0 border-r-0 border-t-0 border-b-2 border-gray-200 dark:border-neutral-600 focus:border-l-0 focus:border-r-0 rounded-t-md focus:border-t-0 focus:border-b-2 focus:border-primary-600 mt-1 block w-full "+t[9]+" "+(t[11]?"border-red-500":"border-gray-300")+" svelte-8xff7c"),m(e,"for","text-field"),m(e,"class",o="block w-full relative "+t[7]+" svelte-8xff7c")},m(w,p){z(w,e,p),d&&d.m(e,null),y(e,r),y(e,s),ae(s,t[0]),t[21](s),y(e,c),h&&h.m(e,null),y(e,n),_&&_.m(e,null),i=!0,a||(u=[X(s,"input",t[20]),X(s,"change",function(){We(t[13])&&t[13].apply(this,arguments)})],a=!0)},p(w,[p]){t=w,t[3]?d?(d.p(t,p),p&8&&R(d,1)):(d=Ae(t),d.c(),R(d,1),d.m(e,r)):d&&(ne(),S(d,1,1,()=>{d=null}),ie()),(!i||p&16)&&(s.disabled=t[4]),(!i||p&64)&&m(s,"rows",t[6]),(!i||p&32)&&m(s,"placeholder",t[5]),(!i||p&4096)&&(s.required=t[12]),(!i||p&2560&&l!==(l="form-textarea border-l-0 border-r-0 border-t-0 border-b-2 border-gray-200 dark:border-neutral-600 focus:border-l-0 focus:border-r-0 rounded-t-md focus:border-t-0 focus:border-b-2 focus:border-primary-600 mt-1 block w-full "+t[9]+" "+(t[11]?"border-red-500":"border-gray-300")+" svelte-8xff7c"))&&m(s,"class",l),p&1&&ae(s,t[0]),P===(P=b(t))&&h?h.p(t,p):(h&&h.d(1),h=P&&P(t),h&&(h.c(),h.m(e,n))),_&&_.p&&(!i||p&65536)&&Ve(_,v,t,t[16],i?je(v,t[16],p,Lt):Fe(t[16]),Ie),(!i||p&128&&o!==(o="block w-full relative "+t[7]+" svelte-8xff7c"))&&m(e,"class",o)},i(w){i||(R(d),R(_,w),i=!0)},o(w){S(d),S(_,w),i=!1},d(w){w&&g(e),d&&d.d(),t[21](null),h&&h.d(),_&&_.d(w),a=!1,be(u)}}}function qt(t,e,r){let s;le(t,Ne,f=>r(22,s=f));let{$$slots:l={},$$scope:c}=e,{label:n=""}=e,{disabled:o=!1}=e,{placeholder:i=s("course.navItem.lessons.exercises.all_exercises.write_your_answer")}=e,{value:a=""}=e,{rows:u=3}=e,{className:d=""}=e,{labelClassName:b=""}=e,{bgColor:P="bg-gray-50 focus:bg-primary-50 dark:bg-neutral-700 dark:text-white"}=e,{helperMessage:h=""}=e,{errorMessage:v=""}=e,{isRequired:_=!1}=e,{onChange:w=()=>{}}=e,{ref:p=null}=e,{isAIEnabled:D=!1}=e,{initAIPrompt:C=""}=e,{aiAlignPopover:q="left"}=e;const K=f=>{r(0,a=f)};function N(f){C=f,r(2,C)}function H(){a=this.value,r(0,a)}function A(f){oe[f?"unshift":"push"](()=>{p=f,r(1,p)})}return t.$$set=f=>{"label"in f&&r(3,n=f.label),"disabled"in f&&r(4,o=f.disabled),"placeholder"in f&&r(5,i=f.placeholder),"value"in f&&r(0,a=f.value),"rows"in f&&r(6,u=f.rows),"className"in f&&r(7,d=f.className),"labelClassName"in f&&r(8,b=f.labelClassName),"bgColor"in f&&r(9,P=f.bgColor),"helperMessage"in f&&r(10,h=f.helperMessage),"errorMessage"in f&&r(11,v=f.errorMessage),"isRequired"in f&&r(12,_=f.isRequired),"onChange"in f&&r(13,w=f.onChange),"ref"in f&&r(1,p=f.ref),"isAIEnabled"in f&&r(14,D=f.isAIEnabled),"initAIPrompt"in f&&r(2,C=f.initAIPrompt),"aiAlignPopover"in f&&r(15,q=f.aiAlignPopover),"$$scope"in f&&r(16,c=f.$$scope)},[a,p,C,n,o,i,u,d,b,P,h,v,_,w,D,q,c,l,K,N,H,A]}class Yt extends me{constructor(e){super(),_e(this,e,qt,zt,de,{label:3,disabled:4,placeholder:5,value:0,rows:6,className:7,labelClassName:8,bgColor:9,helperMessage:10,errorMessage:11,isRequired:12,onChange:13,ref:1,isAIEnabled:14,initAIPrompt:2,aiAlignPopover:15})}}export{Rt as C,$e as M,Yt as T,wt as u};
//# sourceMappingURL=TextArea.af35e63e.js.map
