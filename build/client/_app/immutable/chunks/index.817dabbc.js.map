{"version":3,"file":"index.817dabbc.js","sources":["../../../../../../src/lib/components/AuthUI/index.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { page } from '$app/stores';\n  import PrimaryButton from '$lib/components/PrimaryButton/index.svelte';\n  import { VARIANTS } from '$lib/components/PrimaryButton/constants';\n  import GoogleIconColored from '../Icons/GoogleIconColored.svelte';\n  import Avatar from '$lib/components/Avatar/index.svelte';\n  import { currentOrg } from '$lib/utils/store/org';\n  import type { SupabaseClient } from '@supabase/supabase-js';\n\n  export let supabase: SupabaseClient;\n  export let handleSubmit = () => {};\n  export let isLogin = true;\n  export let showOnlyContent = false;\n  export let isLoading = false;\n  export let showLogo = false;\n  export let formRef;\n  export let hideGoogleAuth = false;\n\n  async function signInWithGoogle() {\n    if (isLoading) {\n      return;\n    }\n\n    const params = new URLSearchParams(window.location.search);\n    console.log({ params });\n    // const redirectTo = `https://app.classroomio.com?forwardTo=${\n    //   window.location.origin + params.get('redirect')\n    // }`;\n    const redirectTo = `${window.location.origin + params.get('redirect')}`;\n\n    console.log({ redirectTo });\n\n    try {\n      console.log('signInWithGoogle');\n      const { error, data } = await supabase.auth.signInWithOAuth({\n        provider: 'google',\n        options: {\n          redirectTo\n        }\n      });\n\n      console.log('data', data);\n      console.log('error', error);\n    } catch (error) {\n      console.log('catch error', error);\n    }\n  }\n</script>\n\n<div class=\"app-background w-full min-h-screen flex items-center justify-center\">\n  <div class=\"container border border-gray bg-white dark:bg-black\">\n    <div class=\"flex items-center flex-col p-2 lg:px-8 lg:py-3\">\n      {#if !showOnlyContent || showLogo}\n        <div class=\"flex flex-col items-center justify-center w-full pt-2\">\n          <Avatar\n            src={$currentOrg.avatar_url ? $currentOrg.avatar_url : '/logo-192.png'}\n            name={$currentOrg.name ? $currentOrg.name : 'KinetsHub'}\n            shape=\"rounded-md\"\n            width=\"w-20\"\n            height=\"max-h-10\"\n            className=\"mr-2\"\n          />\n          <a href=\"/\">\n            <h4 class=\"dark:text-white text-xl mt-0\">\n              {$currentOrg.name ? $currentOrg.name : 'KinetsHub'}\n            </h4>\n          </a>\n        </div>\n      {/if}\n      <form\n        bind:this={formRef}\n        on:submit|preventDefault={handleSubmit}\n        class=\"flex items-center flex-col w-10/12\"\n      >\n        <slot />\n      </form>\n      <!-- {#if !showOnlyContent && !hideGoogleAuth}\n        <div class=\"w-10/12 mb-3\">\n          <p class=\"dark:text-white text-sm mb-5\">or sign up with:</p>\n          <PrimaryButton\n            variant={VARIANTS.OUTLINED}\n            onClick={signInWithGoogle}\n            isDisabled={isLoading}\n            className=\"py-3 sm:w-full w-full\"\n          >\n            <GoogleIconColored />\n            <span class=\"ml-2\">{isLogin ? 'Sign in' : 'Sign up'} with Google</span>\n          </PrimaryButton>\n        </div>\n      {/if} -->\n    </div>\n    {#if !showOnlyContent}\n      <div class=\"w-full p-6 border-t border-grey text-center\">\n        {#if isLogin}\n          Not registered yet? <a\n            class=\"hover:underline text-primary-700\"\n            href=\"/signup{$page.url.search}\">Sign up</a\n          >\n        {:else}\n          Already have an account? <a\n            class=\"hover:underline text-primary-700\"\n            href=\"/login{$page.url.search}\">Log In</a\n          >\n        {/if}\n      </div>\n    {/if}\n  </div>\n</div>\n\n<style>\n  .container {\n    width: 450px;\n  }\n</style>\n"],"names":["t1_value","ctx","dirty","avatar_changes","current","if_block0","create_if_block_2","is_function","supabase","$$props","handleSubmit","formRef"],"mappings":"mvBAgEeA,GAAAC,EAAA,CAAA,EAAA,KAAmBA,EAAA,CAAA,EAAA,iDATjB,IAAAA,EAAA,CAAA,EAAA,WAAyBA,EAAA,CAAA,EAAA,2BACxB,KAAAA,EAAA,CAAA,EAAA,KAAmBA,EAAA,CAAA,EAAA,sjBADpBC,EAAA,KAAAC,EAAA,IAAAF,EAAA,CAAA,EAAA,WAAyBA,EAAA,CAAA,EAAA,4BACxBC,EAAA,KAAAC,EAAA,KAAAF,EAAA,CAAA,EAAA,KAAmBA,EAAA,CAAA,EAAA,6BAQtB,CAAAG,GAAAF,EAAA,KAAAF,KAAAA,GAAAC,EAAA,CAAA,EAAA,KAAmBA,EAAA,CAAA,EAAA,m2CAZtBI,GAAA,CAAAJ,EAAA,CAAA,GAAAA,EAAA,CAAA,IAAAK,EAAAL,CAAA,00BAmBsBM,EAAAN,EAAA,CAAA,CAAA,GAAAA,EAAA,CAAA,EAAA,MAAA,KAAA,SAAA,yBAnBtB,CAAAA,EAAA,CAAA,GAAAA,EAAA,CAAA,ubA3CC,CAAA,SAAAO,CAAA,EAAAC,EACA,CAAA,aAAAC,EAAA,IAAA,qFAKA,CAAA,QAAAC,CAAA,EAAAF"}