import{s as oe,w as ee,A as ie,p as H,B as ue,C as $,D as k,b as y,d as h,e as d,i as D,E as W,x as U,z as T,f as g,t as C,l as P,L as ce,N as j,m as z,a1 as J,a4 as fe,G as pe,J as Q}from"./scheduler.ee52cacd.js";import{S as de,i as _e,f as me,b as M,d as N,m as O,t as R,a as q,e as B}from"./index.a2391391.js";import{e as K,u as ge,d as he}from"./each.4f9c2159.js";import{T as be,a as X}from"./index.79d3b1ae.js";import{s as ve,a as we}from"./supabase.2c784bff.js";import{s as G}from"./store.21c1b842.js";import{M as $e}from"./index.bf0b6763.js";import{w as te}from"./index.45ef5fca.js";import{P as ke}from"./index.550ce75a.js";import{t as ye}from"./translations.f943b7b3.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[e]="ce693fd2-3623-4108-acb6-911a891597f4",r._sentryDebugIdIdentifier="sentry-dbid-ce693fd2-3623-4108-acb6-911a891597f4")}catch{}})();const We=te({open:!1});let L=te({open:!1});async function Ie(r){var n;const{data:e}=await ve.auth.getSession(),t=((n=e.session)==null?void 0:n.access_token)||"";try{const s=await fetch("/api/unsplash",{method:"POST",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify({searchQuery:r})});if(!s.ok)throw new Error(await s.text());return(await s.json()).photos}catch(s){console.error("Error sending fetch request",s)}}function Y(r,e,t){const n=r.slice();return n[7]=e[t],n}function Ee(r){let e,t,n,s,o,a,l=r[6]("course.navItem.landing_page.upload_widget.width")+"",i,b,w,I=r[6]("course.navItem.landing_page.upload_widget.size")+"",v,u,f,p;return s=new ke({props:{label:r[4],onClick:r[12],isLoading:r[0],className:"w-full font-semibold m-auto"}}),{c(){e=$("div"),t=$("input"),n=U(),M(s.$$.fragment),o=U(),a=$("p"),i=C(l),b=U(),w=$("p"),v=C(I),this.h()},l(_){e=k(_,"DIV",{class:!0});var m=y(e);t=k(m,"INPUT",{type:!0,style:!0}),n=T(m),N(s.$$.fragment,m),o=T(m),a=k(m,"P",{class:!0});var E=y(a);i=P(E,l),E.forEach(h),b=T(m),w=k(m,"P",{class:!0});var S=y(w);v=P(S,I),S.forEach(h),m.forEach(h),this.h()},h(){d(t,"type","file"),ce(t,"display","none"),t.disabled=r[0],d(a,"class","text-center text-sm text-gray-500 my-2"),d(w,"class","text-center text-sm text-gray-500"),d(e,"class","w-full")},m(_,m){D(_,e,m),g(e,t),r[15](t),g(e,n),O(s,e,null),g(e,o),g(e,a),g(a,i),g(e,b),g(e,w),g(w,v),u=!0,f||(p=j(t,"change",r[11]),f=!0)},p(_,m){(!u||m&1)&&(t.disabled=_[0]);const E={};m&16&&(E.label=_[4]),m&1&&(E.isLoading=_[0]),s.$set(E),(!u||m&64)&&l!==(l=_[6]("course.navItem.landing_page.upload_widget.width")+"")&&z(i,l),(!u||m&64)&&I!==(I=_[6]("course.navItem.landing_page.upload_widget.size")+"")&&z(v,I)},i(_){u||(R(s.$$.fragment,_),u=!0)},o(_){q(s.$$.fragment,_),u=!1},d(_){_&&h(e),r[15](null),B(s),f=!1,p()}}}function Ue(r){let e,t=r[6]("course.navItem.landing_page.upload_widget.no_images")+"",n;return{c(){e=$("p"),n=C(t),this.h()},l(s){e=k(s,"P",{class:!0});var o=y(e);n=P(o,t),o.forEach(h),this.h()},h(){d(e,"class","text-center pt-7")},m(s,o){D(s,e,o),g(e,n)},p(s,o){o&64&&t!==(t=s[6]("course.navItem.landing_page.upload_widget.no_images")+"")&&z(n,t)},d(s){s&&h(e)}}}function Te(r){let e,t=[],n=new Map,s=K(r[7]);const o=a=>a[7].id;for(let a=0;a<s.length;a+=1){let l=Y(r,s,a),i=o(l);n.set(i,t[a]=x(i,l))}return{c(){e=$("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=k(a,"DIV",{class:!0});var l=y(e);for(let i=0;i<t.length;i+=1)t[i].l(l);l.forEach(h),this.h()},h(){d(e,"class","flex flex-row items-center flex-wrap gap-2 px-[10px] max-h-[300px] hide-scrollbar svelte-12qjvsn")},m(a,l){D(a,e,l);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null)},p(a,l){l&1152&&(s=K(a[7]),t=ge(t,l,o,1,a,s,n,e,he,x,null,Y))},d(a){a&&h(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function Z(r){let e,t,n,s=r[7].user.name+"",o,a;return{c(){e=$("p"),t=C("By "),n=$("a"),o=C(s),this.h()},l(l){e=k(l,"P",{class:!0});var i=y(e);t=P(i,"By "),n=k(i,"A",{href:!0,target:!0,class:!0});var b=y(n);o=P(b,s),b.forEach(h),i.forEach(h),this.h()},h(){d(n,"href",a=`https://unsplash.com/@${r[7].user.username}`),d(n,"target","_blank"),d(n,"class","hover:text-red-700"),d(e,"class","text-center text-xs mt-1 text-gray-500 font-light")},m(l,i){D(l,e,i),g(e,t),g(e,n),g(n,o)},p(l,i){i&128&&s!==(s=l[7].user.name+"")&&z(o,s),i&128&&a!==(a=`https://unsplash.com/@${l[7].user.username}`)&&d(n,"href",a)},d(l){l&&h(e)}}}function x(r,e){let t,n,s,o,a,l,i,b,w,I;function v(){return e[17](e[7])}let u=e[7].user.name&&Z(e);return{key:r,first:null,c(){t=$("div"),n=$("div"),s=$("button"),o=$("img"),i=U(),u&&u.c(),b=U(),this.h()},l(f){t=k(f,"DIV",{});var p=y(t);n=k(p,"DIV",{class:!0});var _=y(n);s=k(_,"BUTTON",{});var m=y(s);o=k(m,"IMG",{src:!0,alt:!0,class:!0}),m.forEach(h),_.forEach(h),i=T(p),u&&u.l(p),b=T(p),p.forEach(h),this.h()},h(){Q(o.src,a=e[7].urls.regular)||d(o,"src",a),d(o,"alt",l=e[7].alt_description),d(o,"class","w-full h-full object-cover rounded-md hover:opacity-80 cursor-pointer"),d(n,"class","w-[195px] h-[130px] overflow-hidden relative"),this.first=t},m(f,p){D(f,t,p),g(t,n),g(n,s),g(s,o),g(t,i),u&&u.m(t,null),g(t,b),w||(I=j(s,"click",v),w=!0)},p(f,p){e=f,p&128&&!Q(o.src,a=e[7].urls.regular)&&d(o,"src",a),p&128&&l!==(l=e[7].alt_description)&&d(o,"alt",l),e[7].user.name?u?u.p(e,p):(u=Z(e),u.c(),u.m(t,b)):u&&(u.d(1),u=null)},d(f){f&&h(t),u&&u.d(),w=!1,I()}}}function De(r){let e,t,n,s,o,a=r[6]("course.navItem.landing_page.upload_widget.submit")+"",l,i,b,w;function I(f,p){return f[7]&&f[7].length>0?Te:Ue}let v=I(r),u=v(r);return{c(){e=$("div"),t=$("form"),n=$("input"),s=U(),o=$("button"),l=C(a),i=U(),u.c(),this.h()},l(f){e=k(f,"DIV",{class:!0});var p=y(e);t=k(p,"FORM",{class:!0});var _=y(t);n=k(_,"INPUT",{type:!0,name:!0,id:!0,class:!0}),s=T(_),o=k(_,"BUTTON",{type:!0,class:!0});var m=y(o);l=P(m,a),m.forEach(h),_.forEach(h),i=T(p),u.l(p),p.forEach(h),this.h()},h(){d(n,"type","text"),d(n,"name",""),d(n,"id",""),d(n,"class","rounded-lg w-[85%] ml-2 dark:text-black"),d(o,"type","submit"),d(o,"class","px-3 py-1 bg-white rounded-lg border-[1px] border-gray-500 text-black"),d(t,"class","flex gap-2 pb-3 mt-1"),d(e,"class","h-full overflow-y-scroll")},m(f,p){D(f,e,p),g(e,t),g(t,n),J(n,r[2]),g(t,s),g(t,o),g(o,l),g(e,i),u.m(e,null),b||(w=[j(n,"input",r[16]),j(t,"submit",fe(r[13]))],b=!0)},p(f,p){p&4&&n.value!==f[2]&&J(n,f[2]),p&64&&a!==(a=f[6]("course.navItem.landing_page.upload_widget.submit")+"")&&z(l,a),v===(v=I(f))&&u?u.p(f,p):(u.d(1),u=v(f),u&&(u.c(),u.m(e,null)))},d(f){f&&h(e),u.d(),b=!1,pe(w)}}}function Ce(r){let e,t,n,s,o;return t=new X({props:{value:r[8][1].value,index:r[1],$$slots:{default:[Ee]},$$scope:{ctx:r}}}),s=new X({props:{value:r[8][0].value,index:r[1],$$slots:{default:[De]},$$scope:{ctx:r}}}),{c(){e=$("slot:fragment"),M(t.$$.fragment),n=U(),M(s.$$.fragment),this.h()},l(a){e=k(a,"SLOT:FRAGMENT",{slot:!0});var l=y(e);N(t.$$.fragment,l),n=T(l),N(s.$$.fragment,l),l.forEach(h),this.h()},h(){d(e,"slot","content")},m(a,l){D(a,e,l),O(t,e,null),g(e,n),O(s,e,null),o=!0},p(a,l){const i={};l&2&&(i.index=a[1]),l&16777305&&(i.$$scope={dirty:l,ctx:a}),t.$set(i);const b={};l&2&&(b.index=a[1]),l&16777412&&(b.$$scope={dirty:l,ctx:a}),s.$set(b)},i(a){o||(R(t.$$.fragment,a),R(s.$$.fragment,a),o=!0)},o(a){q(t.$$.fragment,a),q(s.$$.fragment,a),o=!1},d(a){a&&h(e),B(t),B(s)}}}function Pe(r){let e,t,n;return t=new be({props:{tabs:r[8],currentTab:r[1],onChange:r[9],$$slots:{content:[Ce]},$$scope:{ctx:r}}}),{c(){e=$("div"),M(t.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=y(e);N(t.$$.fragment,o),o.forEach(h),this.h()},h(){d(e,"class","w-full bg-white dark:bg-inherit p-5")},m(s,o){D(s,e,o),O(t,e,null),n=!0},p(s,o){const a={};o&2&&(a.currentTab=s[1]),o&16777439&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(R(t.$$.fragment,s),n=!0)},o(s){q(t.$$.fragment,s),n=!1},d(s){s&&h(e),B(t)}}}function Se(r){let e,t,n;function s(a){r[19](a)}let o={onClose:r[18],width:"w-3/5",maxWidth:"",modalHeading:r[6]("course.navItem.landing_page.upload_widget.title"),$$slots:{default:[Pe]},$$scope:{ctx:r}};return r[5].open!==void 0&&(o.open=r[5].open),e=new $e({props:o}),ee.push(()=>me(e,"open",s)),{c(){M(e.$$.fragment)},l(a){N(e.$$.fragment,a)},m(a,l){O(e,a,l),n=!0},p(a,[l]){const i={};l&32&&(i.onClose=a[18]),l&64&&(i.modalHeading=a[6]("course.navItem.landing_page.upload_widget.title")),l&16777439&&(i.$$scope={dirty:l,ctx:a}),!t&&l&32&&(t=!0,i.open=a[5].open,ie(()=>t=!1)),e.$set(i)},i(a){n||(R(e.$$.fragment,a),n=!0)},o(a){q(e.$$.fragment,a),n=!1},d(a){B(e,a)}}}function Le(r,e,t){let n,s;H(r,L,c=>t(5,n=c)),H(r,ye,c=>t(6,s=c));let{imageURL:o=""}=e;const a=we(),l=[{label:"Unsplash",value:"unsplash"},{label:"Upload",value:"upload"}];let i=!1,b=l[0].value,w="",I=[],v,u=s("snackbar.landing_page_settings.error.label");const f=c=>()=>t(1,b=c);async function p(c){t(14,o=c),W(L,n.open=!1,n)}const _=()=>{var V;const c=(V=v==null?void 0:v.files)==null?void 0:V[0];if((c==null?void 0:c.size)/1024>500){G.error("snackbar.landing_page_settings.error.file_size"),t(4,u=s("snackbar.landing_page_settings.error.try_again"));return}if(c){let A=new FileReader;A.readAsDataURL(c),A.onload=ze=>{m(c)}}},m=async c=>{if(t(0,i=!0),!c)return;const F=`uploadwidget/${Date.now()}`+c.name,{data:V}=await a.storage.from("avatars").upload(F,c,{cacheControl:"3600",upsert:!1});if(V){const{data:A}=await a.storage.from("avatars").getPublicUrl(F);t(14,o=A.publicUrl)}t(0,i=!1),G.success("snackbar.landing_page_settings.success.complete"),W(L,n.open=!1,n)};function E(){v.click()}async function S(){try{t(7,I=await Ie(w||"rocks"))}catch(c){G.error("snackbar.landing_page_settings.error.fetch_error"),console.error("Error fetching images from Unsplash:",c)}}ue(S);function ae(c){ee[c?"unshift":"push"](()=>{v=c,t(3,v)})}function se(){w=this.value,t(2,w)}const ne=c=>p(c.urls.regular),le=()=>W(L,n.open=!1,n);function re(c){r.$$.not_equal(n.open,c)&&(n.open=c,L.set(n))}return r.$$set=c=>{"imageURL"in c&&t(14,o=c.imageURL)},[i,b,w,v,u,n,s,I,l,f,p,_,E,S,o,ae,se,ne,le,re]}class Ge extends de{constructor(e){super(),_e(this,e,Le,Se,oe,{imageURL:14})}}export{Ge as U,L as h,We as r};
//# sourceMappingURL=index.99ecf054.js.map
