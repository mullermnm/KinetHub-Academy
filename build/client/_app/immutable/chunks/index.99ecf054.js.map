{"version":3,"file":"index.99ecf054.js","sources":["../../../../../../src/lib/components/CourseLandingPage/store.js","../../../../../../src/lib/components/UploadWidget/utils.ts","../../../../../../src/lib/components/UploadWidget/index.svelte"],"sourcesContent":["import { writable } from 'svelte/store';\n\nexport const landingPageStore = writable({\n  header: {\n    title: 'Online Business Masterclass: Sell Your Own Digital Products',\n    description:\n      'Create, Launch & Market Your Own Online Business w/ Digital Products such as Online Courses, Coaching, eBooks, Webinars+',\n    duration: 'Estimated 8 weeks',\n    cost: 300,\n    currency: '$',\n    buttonLabel: 'Enrol'\n  },\n  requirement: {\n    content:\n      \"You don't need any experience creating an online business or digital product. \\nYou don't need an online presence, website, or following - but it will help kickstart your online business if you do.\"\n  },\n  description: {\n    content:\n      \"### Have you ever dreamed of starting your own online business?. \\n\\nOf course I know that :-) I was just thinking if there is some way to do same as getStaticProps for other components too. I don't think such feature is completely necessary, though. \\n### Enroll today and get instant access to. \\n\\nOf course I know that :-) I was just thinking if there is some way to do same as getStaticProps for other components too. I don't think such feature is completely necessary, though.\\n ### You will learn many types of digital marketing:\\n\\n Of course I know that :-) I was just thinking if there is some way to do same as getStaticProps for other components too. I don't think such feature is completely necessary, though. Hello, thank you for reply. Of course I know that :-) I was just thinking if there is some way to do same as getStaticProps for other components too. I don't think such feature is completely necessary, though. Hello, thank you for reply. Of course I know that :-) I was just thinking if there is some way to do same as getStaticProps for other components too. I don't think such feature is completely necessary, though. Hello, thank you for reply. Of course I know that :-) I was just thinking if there is some way to do same as getStaticProps for other components too. I don't think such feature is completely necessary, though. Hello, thank you for reply. Of course I know that :-) I was just thinking if there is some way to do same as getStaticProps for other components too. I don't think such feature is completely necessary, though.\"\n  },\n  syllabus: {\n    lessons: [\n      {\n        title: 'What is FinTech?'\n      },\n      {\n        title: 'Payments, Cryptocurrencies and Blockchain'\n      },\n      {\n        title: 'Digital Finance and Alternative Finance'\n      },\n      {\n        title: 'FinTech Regulation and RegTech'\n      },\n      {\n        title: 'Data & TechFin'\n      }\n    ]\n  },\n  aboutUs: {\n    companyName: 'The Brad School',\n    logoUrl: 'https://img-c.udemycdn.com/user/200_H/19701574_95d1_13.jpg',\n    description:\n      '*Learn creative skills, from absolute beginner to advanced mastery.*\\nVideo School exists to help you succeed in life. Each course has been hand-tailored to teach a specific skill from photography and video to art, design and business.\\n**Whether you’re trying to learn a new skill from scratch, or want to refresh your memory on something you’ve learned in the past, you’ve come to the right place.**\\nEducation makes the world a better place. Make your world better with new skills!\\nOur courses can be watched 24/7 wherever you are. Most are fully downloadable so you can take them with you. You can also view them on mobile devices with the Udemy mobile app.\\nAll courses have a 30-day money-back guarantee so that you can check it out, make sure it’s the right course for you, and get a refund if it’s not!'\n  },\n  reviews: [\n    {\n      id: 1,\n      show: true,\n      name: 'Adeyemi Adetunji',\n      avatar_url: '/logo-192.png',\n      rating: 1,\n      created_at: new Date(),\n      description: 'rice ventore officiis maxime laudantium recusandae sit dolor.'\n    }\n  ]\n});\n\nexport const reviewsModalStore = writable({\n  open: false\n});\n\nexport let handleOpenWidget = writable({\n  open: false\n});\n","import { supabase } from '$lib/utils/functions/supabase';\n\nexport async function queryUnsplash(searchQuery: string) {\n  const { data } = await supabase.auth.getSession();\n  const accessToken = data.session?.access_token || '';\n\n  try {\n    const response = await fetch('/api/unsplash', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: accessToken\n      },\n      body: JSON.stringify({ searchQuery })\n    });\n    if (!response.ok) {\n      throw new Error(await response.text());\n    }\n    const result = await response.json();\n    return result.photos;\n  } catch (error) {\n    console.error('Error sending fetch request', error);\n  }\n}\n","<script lang=\"ts\">\n  import { onMount } from 'svelte';\n  import Tabs from '$lib/components/Tabs/index.svelte';\n  import { getSupabase } from '$lib/utils/functions/supabase';\n  import TabContent from '$lib/components/TabContent/index.svelte';\n  import { snackbar } from '../Snackbar/store';\n  import Modal from '$lib/components/Modal/index.svelte';\n  import { handleOpenWidget } from '$lib/components/CourseLandingPage/store';\n  import { queryUnsplash } from './utils';\n  import PrimaryButton from '$lib/components/PrimaryButton/index.svelte';\n  import { t } from '$lib/utils/functions/translations';\n\n  export let imageURL = '';\n\n  const supabase = getSupabase();\n  const tabs = [\n    { label: 'Unsplash', value: 'unsplash' },\n    { label: 'Upload', value: 'upload' }\n  ];\n\n  let isUploading = false;\n  let currentTab = tabs[0].value;\n  let searchQuery = '';\n  let unsplashImages: {\n    id: string | number;\n    user: {\n      name: string;\n      username: string;\n    };\n    urls: {\n      regular: string;\n    };\n    alt_description: string;\n  }[] = [];\n  let fileInput: HTMLInputElement;\n\n  let label = $t('snackbar.landing_page_settings.error.label');\n\n  const onChange = (tabValue: string) => () => (currentTab = tabValue);\n\n  async function handleImageClick(img: string) {\n    imageURL = img;\n    $handleOpenWidget.open = false;\n  }\n\n  const onFileSelected = () => {\n    const file = fileInput?.files?.[0];\n    const sizeInkb = file?.size! / 1024;\n    if (sizeInkb > 500) {\n      snackbar.error('snackbar.landing_page_settings.error.file_size');\n      label = $t('snackbar.landing_page_settings.error.try_again');\n      return;\n    }\n    if (file) {\n      let reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = (e) => {\n        uploadImage(file);\n      };\n    }\n  };\n\n  const uploadImage = async (image: File) => {\n    isUploading = true;\n    if (!image) {\n      return;\n    }\n    const filename = `uploadwidget/${Date.now()}` + image.name;\n    const { data } = await supabase.storage.from('avatars').upload(filename, image, {\n      cacheControl: '3600',\n      upsert: false\n    });\n\n    if (data) {\n      const { data: response } = await supabase.storage.from('avatars').getPublicUrl(filename);\n      imageURL = response.publicUrl;\n    }\n    isUploading = false;\n\n    snackbar.success(`snackbar.landing_page_settings.success.complete`);\n    $handleOpenWidget.open = false;\n  };\n\n  function handleUpload() {\n    fileInput.click();\n  }\n\n  async function handleSubmit() {\n    try {\n      unsplashImages = await queryUnsplash(searchQuery || 'rocks');\n    } catch (error) {\n      snackbar.error('snackbar.landing_page_settings.error.fetch_error');\n      console.error('Error fetching images from Unsplash:', error);\n    }\n  }\n\n  onMount(handleSubmit);\n</script>\n\n<Modal\n  onClose={() => ($handleOpenWidget.open = false)}\n  bind:open={$handleOpenWidget.open}\n  width=\"w-3/5\"\n  maxWidth=\"\"\n  modalHeading={$t('course.navItem.landing_page.upload_widget.title')}\n>\n  <div class=\"w-full bg-white dark:bg-inherit p-5\">\n    <Tabs {tabs} {currentTab} {onChange}>\n      <slot:fragment slot=\"content\">\n        <TabContent value={tabs[1].value} index={currentTab}>\n          <!-- Your Upload content here -->\n          <div class=\"w-full\">\n            <input\n              type=\"file\"\n              style=\"display: none;\"\n              bind:this={fileInput}\n              on:change={onFileSelected}\n              disabled={isUploading}\n            />\n            <PrimaryButton\n              {label}\n              onClick={handleUpload}\n              isLoading={isUploading}\n              className=\"w-full font-semibold m-auto\"\n            />\n            <p class=\"text-center text-sm text-gray-500 my-2\">\n              {$t('course.navItem.landing_page.upload_widget.width')}\n            </p>\n            <p class=\"text-center text-sm text-gray-500\">\n              {$t('course.navItem.landing_page.upload_widget.size')}\n            </p>\n          </div>\n        </TabContent>\n        <TabContent value={tabs[0].value} index={currentTab}>\n          <!-- Your Images content here -->\n          <div class=\"h-full overflow-y-scroll\">\n            <form on:submit|preventDefault={handleSubmit} class=\"flex gap-2 pb-3 mt-1\">\n              <input\n                type=\"text\"\n                bind:value={searchQuery}\n                name=\"\"\n                id=\"\"\n                class=\"rounded-lg w-[85%] ml-2 dark:text-black\"\n              />\n              <button\n                type=\"submit\"\n                class=\"px-3 py-1 bg-white rounded-lg border-[1px] border-gray-500 text-black\"\n                >{$t('course.navItem.landing_page.upload_widget.submit')}</button\n              >\n            </form>\n            {#if unsplashImages && unsplashImages.length > 0}\n              <div\n                class=\"flex flex-row items-center flex-wrap gap-2 px-[10px] max-h-[300px] hide-scrollbar\"\n              >\n                {#each unsplashImages as unsplashImages (unsplashImages.id)}\n                  <div>\n                    <div class=\"w-[195px] h-[130px] overflow-hidden relative\">\n                      <button on:click={() => handleImageClick(unsplashImages.urls.regular)}>\n                        <img\n                          src={unsplashImages.urls.regular}\n                          alt={unsplashImages.alt_description}\n                          class=\"w-full h-full object-cover rounded-md hover:opacity-80 cursor-pointer\"\n                        />\n                      </button>\n                    </div>\n                    {#if unsplashImages.user.name}\n                      <p class=\"text-center text-xs mt-1 text-gray-500 font-light\">\n                        By <a\n                          href={`https://unsplash.com/@${unsplashImages.user.username}`}\n                          target=\"_blank\"\n                          class=\"hover:text-red-700\">{unsplashImages.user.name}</a\n                        >\n                      </p>\n                    {/if}\n                  </div>\n                {/each}\n              </div>\n            {:else}\n              <p class=\"text-center pt-7\">\n                {$t('course.navItem.landing_page.upload_widget.no_images')}\n              </p>\n            {/if}\n          </div>\n        </TabContent>\n      </slot:fragment>\n    </Tabs>\n  </div>\n</Modal>\n\n<style>\n  .hide-scrollbar {\n    width: 100%;\n    overflow: auto;\n    scrollbar-width: none;\n    -ms-overflow-style: none;\n  }\n  .hide-scrollbar::-webkit-scrollbar {\n    width: 0;\n    background: transparent;\n  }\n</style>\n"],"names":["reviewsModalStore","writable","handleOpenWidget","queryUnsplash","searchQuery","data","supabase","accessToken","_a","response","error","t2_value","ctx","t4_value","current","dirty","set_data","t2","t4","t_1_value","t_1","get_key","attr","img","img_alt_value","t1_value","create_if_block","t1","modal_props","modal_changes","tabs","unsplashImages","fileInput","label","$t","onChange","tabValue","$$invalidate","currentTab","set_store_value","$handleOpenWidget","onFileSelected","file","snackbar","reader","e","uploadImage","image","filename","imageURL","handleUpload","handleSubmit","onMount","click_handler","handleImageClick","$$self","value"],"mappings":"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"}