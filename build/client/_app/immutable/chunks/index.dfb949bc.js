import{s as oe,g as _e,a as ae,c as ne,b as k,d,e as b,h as we,i as j,f as h,n as K,j as ye,k as ke,t as F,l as Z,m as J,C as V,x as S,D as C,z as A,w as Ie,A as Ee,p as ee,o as De,Q as Le}from"./scheduler.ee52cacd.js";import{S as ie,i as fe,b as L,d as q,m as P,t as E,a as D,e as N,f as xe,g as he,c as pe}from"./index.a2391391.js";import{e as Ve}from"./each.4f9c2159.js";import{g as qe}from"./navigation.4bf4851d.js";import{g as Pe}from"./spread.5cc747ed.js";import{S as de}from"./SkeletonPlaceholder.85251fa5.js";import{S as Ce}from"./SkeletonText.4f748957.js";import{V as Ne}from"./index.9237e2d9.js";import{B as Be}from"./index.6649ce47.js";import{C as He}from"./CoursesEmptyIcon.6beb1fc2.js";import{h as Oe,j as Re}from"./org.1ee4885a.js";import{s as Te}from"./supabase.2c784bff.js";import{c as Qe}from"./date.4043184d.js";import{b as Ye}from"./index.523fac41.js";import{p as Fe}from"./user.9ccdc884.js";import{t as Ze}from"./translations.f943b7b3.js";import{c as Ge}from"./store.9800a6a8.js";import{S as Je}from"./Search.5626c3fe.js";import{D as Ke}from"./Dropdown.2e34ff7a.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="b847981a-f65b-4287-93cf-abfd018fe0fe",n._sentryDebugIdIdentifier="sentry-dbid-b847981a-f65b-4287-93cf-abfd018fe0fe")}catch{}})();function Se(n){let e,r;return{c(){e=ae("title"),r=F(n[1])},l(a){e=ne(a,"title",{});var l=k(e);r=Z(l,n[1]),l.forEach(d)},m(a,l){j(a,e,l),h(e,r)},p(a,l){l&2&&J(r,a[1])},d(a){a&&d(e)}}}function Ue(n){let e,r,a,l=n[1]&&Se(n),f=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],i={};for(let s=0;s<f.length;s+=1)i=_e(i,f[s]);return{c(){e=ae("svg"),l&&l.c(),r=ae("path"),a=ae("path"),this.h()},l(s){e=ne(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var o=k(e);l&&l.l(o),r=ne(o,"path",{d:!0}),k(r).forEach(d),a=ne(o,"path",{d:!0}),k(a).forEach(d),o.forEach(d),this.h()},h(){b(r,"d","M17.74,30,16,29l4-7h6a2,2,0,0,0,2-2V8a2,2,0,0,0-2-2H6A2,2,0,0,0,4,8V20a2,2,0,0,0,2,2h9v2H6a4,4,0,0,1-4-4V8A4,4,0,0,1,6,4H26a4,4,0,0,1,4,4V20a4,4,0,0,1-4,4H21.16Z"),b(a,"d","M17 9L15 9 15 13 11 13 11 15 15 15 15 19 17 19 17 15 21 15 21 13 17 13 17 9z"),we(e,i)},m(s,o){j(s,e,o),l&&l.m(e,null),h(e,r),h(e,a)},p(s,[o]){s[1]?l?l.p(s,o):(l=Se(s),l.c(),l.m(e,r)):l&&(l.d(1),l=null),we(e,i=Pe(f,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},o&1&&{width:s[0]},o&1&&{height:s[0]},o&4&&s[2],o&8&&s[3]]))},i:K,o:K,d(s){s&&d(e),l&&l.d()}}}function We(n,e,r){let a,l;const f=["size","title"];let i=ye(e,f),{size:s=16}=e,{title:o=void 0}=e;return n.$$set=t=>{r(5,e=_e(_e({},e),ke(t))),r(3,i=ye(e,f)),"size"in t&&r(0,s=t.size),"title"in t&&r(1,o=t.title)},n.$$.update=()=>{r(4,a=e["aria-label"]||e["aria-labelledby"]||o),r(2,l={"aria-hidden":a?void 0:!0,role:a?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=ke(e),[s,o,l,i,a]}class Xe extends ie{constructor(e){super(),fe(this,e,We,Ue,oe,{size:0,title:1})}}function et(n){let e,r,a,l,f,i,s,o,t,m,p,c,g,I,B;return a=new de({props:{style:"width: 100%; height: 40%; border-radius: 4px;"}}),f=new de({props:{style:"width: 100%; height: 40%; border-radius: 4px;"}}),t=new Ce({props:{style:"height: 50%; border-radius: 4px;"}}),p=new Ce({props:{style:"width: 10%; height: 50%; border-radius: 4px;"}}),I=new de({props:{style:"width: 100%; height: 41%; border-radius: 4px;"}}),{c(){e=V("div"),r=V("div"),L(a.$$.fragment),l=S(),L(f.$$.fragment),i=S(),s=V("div"),o=V("div"),L(t.$$.fragment),m=S(),L(p.$$.fragment),c=S(),g=V("div"),L(I.$$.fragment),this.h()},l(v){e=C(v,"DIV",{class:!0});var y=k(e);r=C(y,"DIV",{class:!0});var _=k(r);q(a.$$.fragment,_),l=A(_),q(f.$$.fragment,_),_.forEach(d),i=A(y),s=C(y,"DIV",{class:!0});var u=k(s);o=C(u,"DIV",{class:!0});var $=k(o);q(t.$$.fragment,$),$.forEach(d),m=A(u),q(p.$$.fragment,u),u.forEach(d),c=A(y),g=C(y,"DIV",{class:!0});var M=k(g);q(I.$$.fragment,M),M.forEach(d),y.forEach(d),this.h()},h(){b(r,"class","w-10 flex justify-evenly flex-col px-1 mr-2 rounded-md"),b(o,"class","w-3/6 h-full"),b(s,"class","w-9/12 mt-1.5 flex justify-evenly flex-col rounded-md"),b(g,"class","w-10 justify-evenly flex-col px-1 mt-1.5 ml-auto rounded-md"),b(e,"class","h-[70px] w-full border border-gray-100 dark:border-neutral-600 dark:bg-neutral-800 mx-4 my-2 rounded-md transition ease-in-out relative flex pt-3 px-3")},m(v,y){j(v,e,y),h(e,r),P(a,r,null),h(r,l),P(f,r,null),h(e,i),h(e,s),h(s,o),P(t,o,null),h(s,m),P(p,s,null),h(e,c),h(e,g),P(I,g,null),B=!0},p:K,i(v){B||(E(a.$$.fragment,v),E(f.$$.fragment,v),E(t.$$.fragment,v),E(p.$$.fragment,v),E(I.$$.fragment,v),B=!0)},o(v){D(a.$$.fragment,v),D(f.$$.fragment,v),D(t.$$.fragment,v),D(p.$$.fragment,v),D(I.$$.fragment,v),B=!1},d(v){v&&d(e),N(a),N(f),N(t),N(p),N(I)}}}class se extends ie{constructor(e){super(),fe(this,e,null,et,oe,{})}}function tt(n){let e;return{c(){e=V("div"),this.h()},l(r){e=C(r,"DIV",{class:!0}),k(e).forEach(d),this.h()},h(){b(e,"class","actions svelte-1n945m1")},m(r,a){j(r,e,a)},p:K,i:K,o:K,d(r){r&&d(e)}}}class rt extends ie{constructor(e){super(),fe(this,e,null,tt,oe,{})}}function Ae(n,e,r){const a=n.slice();return a[15]=e[r],a}function lt(n){let e,r,a=Ve(n[5]),l=[];for(let s=0;s<a.length;s+=1)l[s]=Me(Ae(n,a,s));const f=s=>D(l[s],1,1,()=>{l[s]=null});let i=null;return a.length||(i=ze(n)),{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=De(),i&&i.c()},l(s){for(let o=0;o<l.length;o+=1)l[o].l(s);e=De(),i&&i.l(s)},m(s,o){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(s,o);j(s,e,o),i&&i.m(s,o),r=!0},p(s,o){if(o&225){a=Ve(s[5]);let t;for(t=0;t<a.length;t+=1){const m=Ae(s,a,t);l[t]?(l[t].p(m,o),E(l[t],1)):(l[t]=Me(m),l[t].c(),E(l[t],1),l[t].m(e.parentNode,e))}for(he(),t=a.length;t<l.length;t+=1)f(t);pe(),!a.length&&i?i.p(s,o):a.length?i&&(he(),D(i,1,1,()=>{i=null}),pe()):(i=ze(s),i.c(),E(i,1),i.m(e.parentNode,e))}},i(s){if(!r){for(let o=0;o<a.length;o+=1)E(l[o]);r=!0}},o(s){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)D(l[o]);r=!1},d(s){s&&d(e),Le(l,s),i&&i.d(s)}}}function st(n){let e,r,a,l,f,i,s,o;return e=new se({}),a=new se({}),f=new se({}),s=new se({}),{c(){L(e.$$.fragment),r=S(),L(a.$$.fragment),l=S(),L(f.$$.fragment),i=S(),L(s.$$.fragment)},l(t){q(e.$$.fragment,t),r=A(t),q(a.$$.fragment,t),l=A(t),q(f.$$.fragment,t),i=A(t),q(s.$$.fragment,t)},m(t,m){P(e,t,m),j(t,r,m),P(a,t,m),j(t,l,m),P(f,t,m),j(t,i,m),P(s,t,m),o=!0},p:K,i(t){o||(E(e.$$.fragment,t),E(a.$$.fragment,t),E(f.$$.fragment,t),E(s.$$.fragment,t),o=!0)},o(t){D(e.$$.fragment,t),D(a.$$.fragment,t),D(f.$$.fragment,t),D(s.$$.fragment,t),o=!1},d(t){t&&(d(r),d(l),d(i)),N(e,t),N(a,t),N(f,t),N(s,t)}}}function ze(n){let e,r;return e=new Be({props:{className:"w-screen",$$slots:{default:[at]},$$scope:{ctx:n}}}),{c(){L(e.$$.fragment)},l(a){q(e.$$.fragment,a)},m(a,l){P(e,a,l),r=!0},p(a,l){const f={};l&262272&&(f.$$scope={dirty:l,ctx:a}),e.$set(f)},i(a){r||(E(e.$$.fragment,a),r=!0)},o(a){D(e.$$.fragment,a),r=!1},d(a){N(e,a)}}}function at(n){let e,r,a,l=n[7]("community.no_question")+"",f,i,s,o=n[7]("community.ask_a_question")+"",t,m,p;return e=new He({}),{c(){L(e.$$.fragment),r=S(),a=V("h3"),f=F(l),i=S(),s=V("p"),t=F(o),m=S(),this.h()},l(c){q(e.$$.fragment,c),r=A(c),a=C(c,"H3",{class:!0});var g=k(a);f=Z(g,l),g.forEach(d),i=A(c),s=C(c,"P",{class:!0});var I=k(s);t=Z(I,o),I.forEach(d),m=A(c),this.h()},h(){b(a,"class","dark:text-white text-2xl my-5"),b(s,"class","dark:text-white w-1/3 text-center")},m(c,g){P(e,c,g),j(c,r,g),j(c,a,g),h(a,f),j(c,i,g),j(c,s,g),h(s,t),j(c,m,g),p=!0},p(c,g){(!p||g&128)&&l!==(l=c[7]("community.no_question")+"")&&J(f,l),(!p||g&128)&&o!==(o=c[7]("community.ask_a_question")+"")&&J(t,o)},i(c){p||(E(e.$$.fragment,c),p=!0)},o(c){D(e.$$.fragment,c),p=!1},d(c){c&&(d(r),d(a),d(i),d(s),d(m)),N(e,c)}}}function Me(n){let e,r,a,l,f,i,s=n[15].title+"",o,t,m,p,c=n[15].author+"",g,I,B=n[15].createdAt+"",v,y,_,u,$,M=n[15].courseTitle+"",H,O,z,Q,U,R,Y,ue,W,X=n[15].comments+"",te,me,T;return r=new Ne({props:{value:n[15].votes}}),Q=new rt({}),Y=new Xe({props:{size:20}}),{c(){e=V("div"),L(r.$$.fragment),a=S(),l=V("div"),f=V("h4"),i=V("a"),o=F(s),m=S(),p=V("span"),g=F(c),I=F(" asked "),v=F(B),y=S(),_=V("a"),u=V("span"),$=F("#"),H=F(M),z=S(),L(Q.$$.fragment),U=S(),R=V("div"),L(Y.$$.fragment),ue=S(),W=V("span"),te=F(X),me=S(),this.h()},l(w){e=C(w,"DIV",{class:!0});var x=k(e);q(r.$$.fragment,x),a=A(x),l=C(x,"DIV",{class:!0});var G=k(l);f=C(G,"H4",{class:!0});var ge=k(f);i=C(ge,"A",{class:!0,href:!0});var ve=k(i);o=Z(ve,s),ve.forEach(d),ge.forEach(d),m=A(G),p=C(G,"SPAN",{class:!0});var re=k(p);g=Z(re,c),I=Z(re," asked "),v=Z(re,B),re.forEach(d),y=A(G),_=C(G,"A",{class:!0,href:!0});var $e=k(_);u=C($e,"SPAN",{class:!0});var ce=k(u);$=Z(ce,"#"),H=Z(ce,M),ce.forEach(d),$e.forEach(d),G.forEach(d),z=A(x),q(Q.$$.fragment,x),U=A(x),R=C(x,"DIV",{class:!0});var le=k(R);q(Y.$$.fragment,le),ue=A(le),W=C(le,"SPAN",{class:!0});var be=k(W);te=Z(be,X),be.forEach(d),le.forEach(d),me=A(x),x.forEach(d),this.h()},h(){b(i,"class","text-black dark:text-white"),b(i,"href",t=(n[0]?"/lms":n[6])+"/community/"+n[15].slug),b(f,"class","mt-0 svelte-ha2sdg"),b(p,"class","text-gray-600 dark:text-white"),b(u,"class","text-xs text-primary-200 dark:text-black text-primary-700 p-0"),b(_,"class","m-0"),b(_,"href",O="/courses/"+n[15].courseId),b(l,"class","text-sm flex flex-col gap-y-0.5"),b(W,"class","ml-1"),b(R,"class","flex items-center"),b(e,"class","w-full flex border-bottom-c p-3")},m(w,x){j(w,e,x),P(r,e,null),h(e,a),h(e,l),h(l,f),h(f,i),h(i,o),h(l,m),h(l,p),h(p,g),h(p,I),h(p,v),h(l,y),h(l,_),h(_,u),h(u,$),h(u,H),h(e,z),P(Q,e,null),h(e,U),h(e,R),P(Y,R,null),h(R,ue),h(R,W),h(W,te),h(e,me),T=!0},p(w,x){const G={};x&32&&(G.value=w[15].votes),r.$set(G),(!T||x&32)&&s!==(s=w[15].title+"")&&J(o,s),(!T||x&97&&t!==(t=(w[0]?"/lms":w[6])+"/community/"+w[15].slug))&&b(i,"href",t),(!T||x&32)&&c!==(c=w[15].author+"")&&J(g,c),(!T||x&32)&&B!==(B=w[15].createdAt+"")&&J(v,B),(!T||x&32)&&M!==(M=w[15].courseTitle+"")&&J(H,M),(!T||x&32&&O!==(O="/courses/"+w[15].courseId))&&b(_,"href",O),(!T||x&32)&&X!==(X=w[15].comments+"")&&J(te,X)},i(w){T||(E(r.$$.fragment,w),E(Q.$$.fragment,w),E(Y.$$.fragment,w),T=!0)},o(w){D(r.$$.fragment,w),D(Q.$$.fragment,w),D(Y.$$.fragment,w),T=!1},d(w){w&&d(e),N(r),N(Q),N(Y)}}}function nt(n){let e,r,a,l,f,i,s,o,t,m,p;function c(u){n[11](u)}let g={placeholder:n[7]("community.find_question"),searchClass:"mr-2",class:" bg-gray-100 dark:bg-neutral-800"};n[1]!==void 0&&(g.value=n[1]),r=new Je({props:g}),Ie.push(()=>xe(r,"value",c));function I(u){n[12](u)}let B={class:"w-[25%] h-full",size:"xl",label:n[7]("community.ask.select_course"),items:[{id:"",text:n[7]("community.all")},...n[4].map(je)]};n[2]!==void 0&&(B.selectedId=n[2]),f=new Ke({props:B}),Ie.push(()=>xe(f,"selectedId",I));const v=[st,lt],y=[];function _(u,$){return u[3]?0:1}return t=_(n),m=y[t]=v[t](n),{c(){e=V("div"),L(r.$$.fragment),l=S(),L(f.$$.fragment),s=S(),o=V("div"),m.c(),this.h()},l(u){e=C(u,"DIV",{class:!0});var $=k(e);q(r.$$.fragment,$),l=A($),q(f.$$.fragment,$),$.forEach(d),s=A(u),o=C(u,"DIV",{class:!0});var M=k(o);m.l(M),M.forEach(d),this.h()},h(){b(e,"class","flex justify-between"),b(o,"class","flex items-center justify-center lg:justify-start flex-wrap my-4 m-auto border-c rounded bg-gray-100 dark:bg-neutral-800")},m(u,$){j(u,e,$),P(r,e,null),h(e,l),P(f,e,null),j(u,s,$),j(u,o,$),y[t].m(o,null),p=!0},p(u,[$]){const M={};$&128&&(M.placeholder=u[7]("community.find_question")),!a&&$&2&&(a=!0,M.value=u[1],Ee(()=>a=!1)),r.$set(M);const H={};$&128&&(H.label=u[7]("community.ask.select_course")),$&144&&(H.items=[{id:"",text:u[7]("community.all")},...u[4].map(je)]),!i&&$&4&&(i=!0,H.selectedId=u[2],Ee(()=>i=!1)),f.$set(H);let O=t;t=_(u),t===O?y[t].p(u,$):(he(),D(y[O],1,1,()=>{y[O]=null}),pe(),m=y[t],m?m.p(u,$):(m=y[t]=v[t](u),m.c()),E(m,1),m.m(o,null))},i(u){p||(E(r.$$.fragment,u),E(f.$$.fragment,u),E(m),p=!0)},o(u){D(r.$$.fragment,u),D(f.$$.fragment,u),D(m),p=!1},d(u){u&&(d(e),d(s),d(o)),N(r),N(f),y[t].d()}}}const je=n=>({id:n.id,text:n.title});function ot(n,e,r){let a,l,f,i,s,o;ee(n,Fe,_=>r(9,l=_)),ee(n,Oe,_=>r(10,f=_)),ee(n,Re,_=>r(6,i=_)),ee(n,Ge,_=>r(13,s=_)),ee(n,Ze,_=>r(7,o=_));let{isLMS:t=!1}=e,m=!1,p=[],c="",g=[],I="";async function B(_,u){if(!_||!u)return;if(r(3,m=!0),s.length)r(4,g=[...s]);else{const z=await Ye(u,_)||{allCourses:[]};r(4,g=z.allCourses)}const M=`(${g.map(z=>z.id).join(",")})`,{data:H,error:O}=await Te.from("community_question").select(`
        organization_id,
        course_id,
        title,
        votes,
        created_at,
        slug,
        comments:community_answer(count),
        author:profile(
          fullname
        ),
        course!inner (
          title
        )
      `).filter("course_id","in",M).order("created_at",{ascending:!1});if(console.log("data",H),console.log("error",O),r(3,m=!1),O)return console.error("Error loading community",O),qe(t?"/lms":i);r(8,p=(H==null?void 0:H.map(z=>{var Q,U,R,Y;return{title:z.title,courseId:z.course_id,courseTitle:(Q=z.course)==null?void 0:Q.title,slug:z.slug,author:(U=z==null?void 0:z.author)==null?void 0:U.fullname,comments:((Y=(R=z.comments)==null?void 0:R[0])==null?void 0:Y.count)||0,votes:z.votes,createdAt:Qe(z.created_at)}}))||[])}function v(_){c=_,r(1,c)}function y(_){I=_,r(2,I)}return n.$$set=_=>{"isLMS"in _&&r(0,t=_.isLMS)},n.$$.update=()=>{n.$$.dirty&1536&&B(f.id,l.id),n.$$.dirty&262&&r(5,a=p.filter(_=>_.title.toLowerCase().includes(c.toLowerCase())&&(!I||_.courseId===I)))},[t,c,I,m,g,a,i,o,p,l,f,v,y]}class xt extends ie{constructor(e){super(),fe(this,e,ot,nt,oe,{isLMS:0})}}export{xt as C};
//# sourceMappingURL=index.dfb949bc.js.map
