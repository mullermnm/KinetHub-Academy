{"version":3,"file":"index.f360203c.js","sources":["../../../../../../../../node_modules/.pnpm/carbon-icons-svelte@12.3.0/node_modules/carbon-icons-svelte/lib/Camera.svelte","../../../../../../src/lib/components/UploadImage/index.svelte"],"sourcesContent":["<script>\n  export let size = 16;\n\n  export let title = undefined;\n\n  $: labelled = $$props[\"aria-label\"] || $$props[\"aria-labelledby\"] || title;\n  $: attributes = {\n    \"aria-hidden\": labelled ? undefined : true,\n    role: labelled ? \"img\" : undefined,\n    focusable: Number($$props[\"tabindex\"]) === 0 ? true : undefined\n  };\n</script>\n\n<svg\n  xmlns=\"http://www.w3.org/2000/svg\"\n  viewBox=\"0 0 32 32\"\n  fill=\"currentColor\"\n  preserveAspectRatio=\"xMidYMid meet\"\n  width={size}\n  height={size}\n  {...attributes}\n  {...$$restProps}>\n  {#if title}<title>{title}</title>{/if}\n  <path d=\"M29,26H3a1,1,0,0,1-1-1V8A1,1,0,0,1,3,7H9.46l1.71-2.55A1,1,0,0,1,12,4h8a1,1,0,0,1,.83.45L22.54,7H29a1,1,0,0,1,1,1V25A1,1,0,0,1,29,26ZM4,24H28V9H22a1,1,0,0,1-.83-.45L19.46,6H12.54L10.83,8.55A1,1,0,0,1,10,9H4Z\"></path><path d=\"M16,22a6,6,0,1,1,6-6A6,6,0,0,1,16,22Zm0-10a4,4,0,1,0,4,4A4,4,0,0,0,16,12Z\"></path>\n</svg>","<script lang=\"ts\">\n  import Camera from 'carbon-icons-svelte/lib/Camera.svelte';\n  import { Loading } from 'carbon-components-svelte';\n  import { t } from '$lib/utils/functions/translations';\n\n  export let avatar: string | undefined;\n  export let src: string | undefined;\n  export let widthHeight = '';\n  export let shape = 'rounded-full';\n  export let errorMessage: string | null = null;\n  export let isDisabled = false;\n  export let maxFileSizeInMb: number = 2; // Default max file size 2MB\n  export let flexDirection = 'flex-col';\n  export let isUploading = false;\n\n  let fileinput: HTMLInputElement;\n\n  const onFileSelected = (e: Event<HTMLInputElement>) => {\n    const image = e.target.files[0];\n    const maxFileSize = maxFileSizeInMb * 1024 * 1024;\n    if (image.size > maxFileSize) {\n      errorMessage = `${$t('settings.profile.profile_picture.validation_error')} ${\n        maxFileSize / (1024 * 1024)\n      } MB`;\n      return;\n    }\n    let reader = new FileReader();\n    reader.readAsDataURL(image);\n    reader.onload = (e) => {\n      avatar = image;\n      // @ts-ignore\n      src = e.target?.result || undefined;\n      errorMessage = null; // Clear error message on successful load\n    };\n  };\n</script>\n\n<section class=\"width-fit p-3 flex {flexDirection} items-center justify-between gap-5\">\n  <div\n    class=\"avatar-container {widthHeight ||\n      'setwidthheight'} pointer border-2 border-gray-200 dark:border-neutral-600 relative {shape}\"\n  >\n    {#if src}\n      <img class=\"w-full h-full {shape}\" {src} alt=\"Avatar\" />\n    {:else if avatar}\n      <img class=\"w-full h-full {shape}\" src={avatar} alt=\"Avatar\" />\n    {:else}\n      <img\n        class=\"w-full h-full {shape}\"\n        src=\"https://cdn4.iconfinder.com/data/icons/small-n-flat/24/user-alt-512.png\"\n        alt=\"\"\n      />\n    {/if}\n  </div>\n\n  <div class=\"flex flex-col items-center\">\n    <button\n      class=\"width-fit text-primary-700 flex flex-col items-center text-sm {isDisabled ||\n      isUploading\n        ? 'opacity-50 cursor-not-allowed'\n        : 'cursor-pointer'}\"\n      on:click={() => {\n        if (!isDisabled || isUploading) {\n          fileinput.click();\n        }\n      }}\n      disabled={isDisabled || isUploading}\n    >\n      {#if isUploading}\n        <Loading withOverlay={false} small />\n      {:else}\n        <Camera size={20} />\n      {/if}\n      <span class=\"ml-2\">{$t('settings.profile.profile_picture.upload_image')}</span>\n    </button>\n    <p class=\"text-xs text-center text-gray-500\">\n      {$t('settings.profile.profile_picture.file_size')}\n      {maxFileSizeInMb}MB<br />\n      {$t('settings.profile.profile_picture.accepted')}: jpeg, jpg, png, webp\n    </p>\n    {#if errorMessage}\n      <p class=\"text-sm text-red-500\">{errorMessage}</p>\n    {/if}\n  </div>\n\n  <input\n    style=\"display:none\"\n    type=\"file\"\n    accept=\".jpg, .jpeg, .png, .webp\"\n    on:change={(e) => onFileSelected(e)}\n    bind:this={fileinput}\n  />\n</section>\n\n<style>\n  .width-fit {\n    width: fit-content;\n  }\n\n  .avatar-container.setwidthheight {\n    height: 128px;\n    width: 128px;\n  }\n\n  .upload-icon {\n    display: none;\n  }\n</style>\n"],"names":["size","$$props","title","$$invalidate","attributes","labelled","t2_value","ctx","t4_value","t9_value","attr","button","button_class_value","button_disabled_value","current","dirty","set_data","t2","t4","t9","avatar","src","fileinput","maxFileSize","maxFileSizeInMb","image","errorMessage","$t","reader","e2","isDisabled","isUploading"],"mappings":"0pEACa,CAAA,KAAAA,EAAA,EAAA,EAAAC,EAEA,CAAA,MAAAC,EAAA,MAAA,EAAAD,sLAGXE,EAAA,EAAAC,EAAA,CACE,cAAAC,EAAA,OAAA,GACA,KAAAA,EAAA,MAAA,+8DCiEsBC,EAAAC,EAAA,EAAA,EAAA,+CAAA,EAAA,aAGnBC,EAAAD,EAAA,EAAA,EAAA,4CAAA,EAAA,eAEAE,EAAAF,EAAA,EAAA,EAAA,2CAAA,EAAA,ynCArBqEG,EAAAC,EAAA,QAAAC,EAAA,kEAAAL,EAAA,CAAA,GAAAA,EAAA,CAAA,uEAS5DI,EAAA,SAAAE,EAAAN,EAAA,CAAA,GAAAA,EAAA,CAAA,84BAOU,CAAAO,GAAAC,EAAA,OAAAT,KAAAA,EAAAC,EAAA,EAAA,EAAA,+CAAA,EAAA,KAAAS,EAAAC,EAAAX,CAAA,GAhBkD,CAAAQ,GAAAC,EAAA,KAAAH,KAAAA,EAAA,kEAAAL,EAAA,CAAA,GAAAA,EAAA,CAAA,yFAS5D,CAAAO,GAAAC,EAAA,KAAAF,KAAAA,EAAAN,EAAA,CAAA,GAAAA,EAAA,CAAA,qBAUT,CAAAO,GAAAC,EAAA,OAAAP,KAAAA,EAAAD,EAAA,EAAA,EAAA,4CAAA,EAAA,KAAAS,EAAAE,EAAAV,CAAA,yBAEA,CAAAM,GAAAC,EAAA,OAAAN,KAAAA,EAAAF,EAAA,EAAA,EAAA,2CAAA,EAAA,KAAAS,EAAAG,EAAAV,CAAA,6UAzEM,GAAA,CAAA,OAAAW,CAAA,EAAAnB,EACA,CAAA,IAAAoB,CAAA,EAAApB,0KASPqB,wCAIIC,EAAAC,EAAA,KAAA,KACF,GAAAC,EAAA,KAAAF,EAAA,CACFpB,EAAA,EAAAuB,EAAA,GAAAC,EAAA,mDAAA,CAAA,IAAAJ,GAAA,KAAA,KAAA,KAAA,8BAMFK,EAAA,cAAAH,CAAA,EACAG,EAAA,OAAAC,GAAA,0FAkCS,CAAAC,GAAAC,IACHT,EAAA,MAAA","x_google_ignoreList":[0]}