{"version":3,"file":"logout.796ba466.js","sources":["../../../../../../src/lib/utils/functions/logout.ts"],"sourcesContent":["import posthog from 'posthog-js';\nimport { supabase } from '$lib/utils/functions/supabase';\nimport { capturePosthogEvent } from '$lib/utils/services/posthog';\nimport { currentOrg, orgs, defaultCurrentOrgState } from '$lib/utils/store/org';\nimport { user, profile, defaultProfileState, defaultUserState } from '$lib/utils/store/user';\nimport { goto } from '$app/navigation';\n\nexport async function logout(redirect = true) {\n  const { error } = await supabase.auth.signOut();\n\n  if (error) {\n    console.error('Error logging out: ', error);\n  }\n\n  currentOrg.set(defaultCurrentOrgState);\n  orgs.set([]);\n  user.set(defaultUserState);\n  profile.set(defaultProfileState);\n\n  capturePosthogEvent('user_logged_out');\n  posthog.reset();\n\n  if (redirect) {\n    goto('/login');\n  }\n}\n"],"names":["logout","redirect","error","supabase","currentOrg","defaultCurrentOrgState","orgs","user","defaultUserState","profile","defaultProfileState","capturePosthogEvent","os","goto"],"mappings":"sjBAOA,eAAAA,EAAAC,EAAA,GAAA,CACA,KAAA,CAAA,MAAAC,CAAA,EAAA,MAAAC,EAAA,KAAA,QAAA,EAEAD,GACA,QAAA,MAAA,sBAAAA,CAAA,EAGAE,EAAA,IAAAC,CAAA,EACAC,EAAA,IAAA,CAAA,CAAA,EACAC,EAAA,IAAAC,CAAA,EACAC,EAAA,IAAAC,CAAA,EAEAC,EAAA,iBAAA,EACAC,EAAA,MAAA,EAEAX,GACAY,EAAA,QAAA,CAEA"}