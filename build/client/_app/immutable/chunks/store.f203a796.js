import{w as i}from"./index.45ef5fca.js";import{d as _,u,e as g,g as w,h as b,i as S}from"./index.523fac41.js";import{L as h,C as y,a as L}from"./index.89e0ac82.js";import{s as a}from"./store.21c1b842.js";import{l as f}from"./validator.b0d7db8b.js";import"./index.a2391391.js";import{R as D}from"./org.1ee4885a.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="b1d3ea53-6d57-4a6e-82e5-3900a8d0ba59",e._sentryDebugIdIdentifier="sentry-dbid-b1d3ea53-6d57-4a6e-82e5-3900a8d0ba59")}catch{}})();const R=i({isModalOpen:!1}),l=i([]),c=i([]),v=i({id:null,locale:h.EN,title:"",totalExercises:0,totalComments:0,isSaving:!1,isFetching:!1,materials:{note:"",slide_url:"",videos:[]},exercises:[],lesson_completion:[]}),x=i({}),q=i(!1);async function M(e){if(!e)return;const{error:s}=await _(e);if(s)return a.error(s.message),console.error("Error deleting course",s);l.update(t=>t.filter(o=>o.id!==e)),c.update(t=>t.map(o=>(o.lessons=o.lessons.filter(r=>r.id!==e),o))),a.success("snackbar.generic.success_delete"),console.log("lessonId",e)}async function B(e){if(!e)return;const{error:s}=await S(e);if(s)return a.error(s.message),console.error("Error deleting course",s);c.update(t=>t.filter(o=>o.id!==e)),l.update(t=>t.filter(o=>o.section_id!==e)),a.success("snackbar.generic.success_delete"),console.log("sectionId",e)}async function F(e,s){const t=f(e);if(Object.keys(t).length)return t;console.log("handleSaveLesson lesson",e);const o={title:e.title,lesson_at:e==null?void 0:e.lesson_at,call_url:e==null?void 0:e.call_url,teacher_id:e!=null&&e.profile?e==null?void 0:e.profile.id:void 0,course_id:s,is_unlocked:e.is_unlocked,section_id:e.section_id};let r=null;if(e.id)await u(o,e.id);else{const{data:n}=await g(o);r=n}return r}async function P(e,s){const t=f(e);if(Object.keys(t).length)return t;console.log("handleSaveLessonSection lesson",e);const o={id:e.id,title:e.title,course_id:s};let r=null;if(o.id)await w(o,o.id);else{const{data:n}=await b(o);r=n}return r}async function Y(e,s){const t={...e.materials};return delete t.lesson_completion,delete t.profile,await u(t,s)}const z=e=>{v.update(s=>({...s,materials:{...s.materials,videos:s.materials.videos.filter((t,o)=>o!==e)}}))},E={id:"",title:"",description:"",type:y.LIVE_CLASS,cost:0,currency:"",status:"ACTIVE",is_certificate_downloadable:!1,certificate_theme:"professional",is_published:!1,created_at:new Date().toDateString(),updated_at:new Date().toDateString(),attendance:[],polls:[],version:L.V2,metadata:{requirements:"",description:"",goals:"",videoUrl:"",showDiscount:!1,discount:0,paymentLink:"",reward:{show:!1,description:""},instructor:{name:"",role:"",coursesNo:0,description:"",imgUrl:""},lessonTabsOrder:[{id:1,name:"course.navItem.lessons.materials.tabs.note.title"},{id:2,name:"course.navItem.lessons.materials.tabs.slide.title"},{id:3,name:"course.navItem.lessons.materials.tabs.video.title"}],grading:!1,lessonDownload:!0,allowNewStudent:!1}},O=i({...E}),k=i({id:"",tutors:[],students:[],people:[]});async function G(e,s=!0){var t;if(!(!e||!(Object.values(e)&&Object.values(e).length))){if(e.group){const o=Object.assign(e.group,{tutors:[],students:[],people:[]});if(Array.isArray(o.members)){for(const r of o.members)r.role_id===D.STUDENT?o.students.push(r):r.profile&&o.tutors.push({...r.profile,memberId:r.id});o.people=o.members}delete o.members,k.set(o)}if(s){const o=d(e.lessons);if(l.set(o),e.lesson_section){const r=(t=e.lesson_section)==null?void 0:t.map(n=>{const m=(e.lessons||[]).filter(p=>p.section_id===n.id);return n.lessons=d(m),n});c.set(C(r))}}delete e.lessons,e==null||delete e.lesson_section,e.metadata&&!Object.values(e.metadata)&&(e.metadata={requirements:"",description:"",goals:"",videoUrl:"",showDiscount:!1,discount:0,reward:{show:!1,description:""},instructor:{name:"",role:"",coursesNo:0,description:"",imgUrl:""},allowNewStudent:!1}),e.certificate_theme||(e.certificate_theme="professional"),O.set(e)}}function d(e=[]){return e.sort((s,t)=>new Date(s.created_at).getTime()-new Date(t.created_at).getTime()).sort((s,t)=>(s.order??0)-(t.order??0))}function C(e=[]){return e.sort((s,t)=>new Date(s.created_at).getTime()-new Date(t.created_at).getTime()).sort((s,t)=>(s.order??0)-(t.order??0))}export{c as a,P as b,O as c,B as d,M as e,E as f,k as g,F as h,v as i,q as j,z as k,l,x as m,Y as n,G as s,R as u};
//# sourceMappingURL=store.f203a796.js.map
