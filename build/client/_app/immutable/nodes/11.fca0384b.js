import{S as Se,i as Ee,f as ve,b as w,d as I,m as k,t as $,a as p,e as S,g as te,c as re}from"../chunks/index.a2391391.js";import{s as Ce,w as we,A as Ie,p as G,E as ae,x as y,z as L,i as E,d as _,C as A,t as R,D as O,b as T,l as q,e as j,f as D,m as K,o as W,Q as fe}from"../chunks/scheduler.ee52cacd.js";import{e as X}from"../chunks/each.4f9c2159.js";import{A as Pe}from"../chunks/AudioConsole.57dcd3bb.js";import{C as De,P as ye}from"../chunks/index.fc85f1f4.js";import{P as Le}from"../chunks/index.691cdcca.js";import{B as Ne}from"../chunks/index.6649ce47.js";import{c as Be,g as Ae,l as Oe}from"../chunks/store.f203a796.js";import{g as Te}from"../chunks/function.53788a56.js";import{R as Ve}from"../chunks/org.1ee4885a.js";import{s as je}from"../chunks/supabase.2c784bff.js";import{s as ze}from"../chunks/store.21c1b842.js";import{w as Re}from"../chunks/index.45ef5fca.js";import{p as qe}from"../chunks/user.9ccdc884.js";import{g as He}from"../chunks/app.bd3189d3.js";import{t as Qe}from"../chunks/translations.f943b7b3.js";import{C as ce}from"../chunks/Checkbox.daccd4f6.js";import{S as Me}from"../chunks/Search.5626c3fe.js";import{b as Ue,c as Fe,S as ke,d as Ge,a as oe}from"../chunks/StructuredListRow.04a31b56.js";import{P as Je}from"../chunks/Pagination.7daeef77.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[e]="48add21c-cffc-46d5-9f3d-f0543d633442",a._sentryDebugIdIdentifier="sentry-dbid-48add21c-cffc-46d5-9f3d-f0543d633442")}catch{}})();const Ke=({params:a={id:""}})=>({courseId:a.id}),Lt=Object.freeze(Object.defineProperty({__proto__:null,load:Ke},Symbol.toStringTag,{value:"Module"}));async function We(a){return je.from("group_attendance").upsert(a).select()}const ee=Re({});function ie(a,e,s){const t=a.slice();return t[16]=e[s],t}function de(a,e,s){const t=a.slice();return t[19]=e[s],t}function $e(a,e,s){const t=a.slice();return t[19]=e[s],t[23]=s,t}function Xe(a){let e=a[5]("course.navItem.attendance.student")+"",s;return{c(){s=R(e)},l(t){s=q(t,e)},m(t,o){E(t,s,o)},p(t,o){o&32&&e!==(e=t[5]("course.navItem.attendance.student")+"")&&K(s,e)},d(t){t&&_(s)}}}function Ye(a){let e=a[5]("course.navItem.attendance.lesson")+"",s,t,o=Te(a[23]+1)+"",l;return{c(){s=R(e),t=R(" 0"),l=R(o)},l(r){s=q(r,e),t=q(r," 0"),l=q(r,o)},m(r,f){E(r,s,f),E(r,t,f),E(r,l,f)},p(r,f){f&32&&e!==(e=r[5]("course.navItem.attendance.lesson")+"")&&K(s,e)},d(r){r&&(_(s),_(t),_(l))}}}function me(a){let e,s;return e=new oe({props:{head:!0,class:"text-primary-600 py-3",$$slots:{default:[Ye]},$$scope:{ctx:a}}}),{c(){w(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){k(e,t,o),s=!0},p(t,o){const l={};o&16777248&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function Ze(a){let e,s,t,o;e=new oe({props:{head:!0,class:"text-primary-600 py-3",$$slots:{default:[Xe]},$$scope:{ctx:a}}});let l=X(a[6]),r=[];for(let n=0;n<l.length;n+=1)r[n]=me($e(a,l,n));const f=n=>p(r[n],1,1,()=>{r[n]=null});return{c(){w(e.$$.fragment),s=y();for(let n=0;n<r.length;n+=1)r[n].c();t=W()},l(n){I(e.$$.fragment,n),s=L(n);for(let c=0;c<r.length;c+=1)r[c].l(n);t=W()},m(n,c){k(e,n,c),E(n,s,c);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(n,c);E(n,t,c),o=!0},p(n,c){const d={};if(c&16777248&&(d.$$scope={dirty:c,ctx:n}),e.$set(d),c&96){l=X(n[6]);let u;for(u=0;u<l.length;u+=1){const C=$e(n,l,u);r[u]?(r[u].p(C,c),$(r[u],1)):(r[u]=me(C),r[u].c(),$(r[u],1),r[u].m(t.parentNode,t))}for(te(),u=l.length;u<r.length;u+=1)f(u);re()}},i(n){if(!o){$(e.$$.fragment,n);for(let c=0;c<l.length;c+=1)$(r[c]);o=!0}},o(n){p(e.$$.fragment,n),r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)p(r[c]);o=!1},d(n){n&&(_(s),_(t)),S(e,n),fe(r,n)}}}function xe(a){let e,s;return e=new ke({props:{head:!0,class:"mx-7",$$slots:{default:[Ze]},$$scope:{ctx:a}}}),{c(){w(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){k(e,t,o),s=!0},p(t,o){const l={};o&16777312&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function et(a){let e,s,t=a[16].profile.fullname+"",o;return{c(){e=A("div"),s=A("p"),o=R(t),this.h()},l(l){e=O(l,"DIV",{class:!0});var r=T(e);s=O(r,"P",{class:!0});var f=T(s);o=q(f,t),f.forEach(_),r.forEach(_),this.h()},h(){j(s,"class","dark:text-white font-semibold"),j(e,"class","w-1/4 flex items-center")},m(l,r){E(l,e,r),D(e,s),D(s,o)},p(l,r){r&12&&t!==(t=l[16].profile.fullname+"")&&K(o,t)},d(l){l&&_(e)}}}function tt(a){let e,s,t;function o(...l){return a[12](a[16],a[19],...l)}return e=new ce({props:{class:a[1].isStudent?"cursor-not-allowed":"",disabled:a[1].isStudent,checked:a[4][a[16].id]&&a[4][a[16].id][a[19].id]?a[4][a[16].id][a[19].id].is_present:!1}}),e.$on("change",o),{c(){w(e.$$.fragment),s=y()},l(l){I(e.$$.fragment,l),s=L(l)},m(l,r){k(e,l,r),E(l,s,r),t=!0},p(l,r){a=l;const f={};r&2&&(f.class=a[1].isStudent?"cursor-not-allowed":""),r&2&&(f.disabled=a[1].isStudent),r&92&&(f.checked=a[4][a[16].id]&&a[4][a[16].id][a[19].id]?a[4][a[16].id][a[19].id].is_present:!1),e.$set(f)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){p(e.$$.fragment,l),t=!1},d(l){l&&_(s),S(e,l)}}}function _e(a){let e,s;return e=new oe({props:{class:"",$$slots:{default:[tt]},$$scope:{ctx:a}}}),{c(){w(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){k(e,t,o),s=!0},p(t,o){const l={};o&16777310&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function rt(a){let e,s,t,o;e=new oe({props:{$$slots:{default:[et]},$$scope:{ctx:a}}});let l=X(a[6]),r=[];for(let n=0;n<l.length;n+=1)r[n]=_e(de(a,l,n));const f=n=>p(r[n],1,1,()=>{r[n]=null});return{c(){w(e.$$.fragment),s=y();for(let n=0;n<r.length;n+=1)r[n].c();t=W()},l(n){I(e.$$.fragment,n),s=L(n);for(let c=0;c<r.length;c+=1)r[c].l(n);t=W()},m(n,c){k(e,n,c),E(n,s,c);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(n,c);E(n,t,c),o=!0},p(n,c){const d={};if(c&16777228&&(d.$$scope={dirty:c,ctx:n}),e.$set(d),c&222){l=X(n[6]);let u;for(u=0;u<l.length;u+=1){const C=de(n,l,u);r[u]?(r[u].p(C,c),$(r[u],1)):(r[u]=_e(C),r[u].c(),$(r[u],1),r[u].m(t.parentNode,t))}for(te(),u=l.length;u<r.length;u+=1)f(u);re()}},i(n){if(!o){$(e.$$.fragment,n);for(let c=0;c<l.length;c+=1)$(r[c]);o=!0}},o(n){p(e.$$.fragment,n),r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)p(r[c]);o=!1},d(n){n&&(_(s),_(t)),S(e,n),fe(r,n)}}}function nt(a){let e,s,t;return e=new ke({props:{$$slots:{default:[rt]},$$scope:{ctx:a}}}),{c(){w(e.$$.fragment),s=y()},l(o){I(e.$$.fragment,o),s=L(o)},m(o,l){k(e,o,l),E(o,s,l),t=!0},p(o,l){const r={};l&16777310&&(r.$$scope={dirty:l,ctx:o}),e.$set(r)},i(o){t||($(e.$$.fragment,o),t=!0)},o(o){p(e.$$.fragment,o),t=!1},d(o){o&&_(s),S(e,o)}}}function pe(a){let e,s;return e=new Ge({props:{$$slots:{default:[nt]},$$scope:{ctx:a}}}),{c(){w(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){k(e,t,o),s=!0},p(t,o){const l={};o&16777310&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function st(a){let e,s,t,o;e=new Fe({props:{class:"bg-primary-100",$$slots:{default:[xe]},$$scope:{ctx:a}}});let l=X(be(a[3],a[2])),r=[];for(let n=0;n<l.length;n+=1)r[n]=pe(ie(a,l,n));const f=n=>p(r[n],1,1,()=>{r[n]=null});return{c(){w(e.$$.fragment),s=y();for(let n=0;n<r.length;n+=1)r[n].c();t=W()},l(n){I(e.$$.fragment,n),s=L(n);for(let c=0;c<r.length;c+=1)r[c].l(n);t=W()},m(n,c){k(e,n,c),E(n,s,c);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(n,c);E(n,t,c),o=!0},p(n,c){const d={};if(c&16777312&&(d.$$scope={dirty:c,ctx:n}),e.$set(d),c&222){l=X(be(n[3],n[2]));let u;for(u=0;u<l.length;u+=1){const C=ie(n,l,u);r[u]?(r[u].p(C,c),$(r[u],1)):(r[u]=pe(C),r[u].c(),$(r[u],1),r[u].m(t.parentNode,t))}for(te(),u=l.length;u<r.length;u+=1)f(u);re()}},i(n){if(!o){$(e.$$.fragment,n);for(let c=0;c<l.length;c+=1)$(r[c]);o=!0}},o(n){p(e.$$.fragment,n),r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)p(r[c]);o=!1},d(n){n&&(_(s),_(t)),S(e,n),fe(r,n)}}}function ge(a){let e,s;return e=new Ne({props:{className:"h-[300px] w-full",$$slots:{default:[lt]},$$scope:{ctx:a}}}),{c(){w(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){k(e,t,o),s=!0},p(t,o){const l={};o&16777248&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function lt(a){let e,s,t,o=a[5]("course.navItem.attendance.no_student")+"",l,r;return e=new Pe({props:{size:32,class:"carbon-icon w-80"}}),{c(){w(e.$$.fragment),s=y(),t=A("h3"),l=R(o),this.h()},l(f){I(e.$$.fragment,f),s=L(f),t=O(f,"H3",{class:!0});var n=T(t);l=q(n,o),n.forEach(_),this.h()},h(){j(t,"class","text-3xl text-gray-500 dark:text-white text-center")},m(f,n){k(e,f,n),E(f,s,n),E(f,t,n),D(t,l),r=!0},p(f,n){(!r||n&32)&&o!==(o=f[5]("course.navItem.attendance.no_student")+"")&&K(l,o)},i(f){r||($(e.$$.fragment,f),r=!0)},o(f){p(e.$$.fragment,f),r=!1},d(f){f&&(_(s),_(t)),S(e,f)}}}function he(a){let e,s;return e=new Je({props:{totalItems:10,pageSizes:[10,15,20]}}),{c(){w(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){k(e,t,o),s=!0},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){S(e,t)}}}function at(a){let e,s,t,o,l,r,f=a[5]("course.navItem.attendance.present")+"",n,c,d,u,C,H=a[5]("course.navItem.attendance.absent")+"",Q,Y,M,B,Z,i,g,h,U,V,N;l=new ce({props:{checked:!0,disabled:!0}}),u=new ce({props:{disabled:!0}});function ne(m){a[11](m)}let x={class:"dark:text-slate-950",placeholder:a[5]("course.navItem.attendance.search_students")};a[3]!==void 0&&(x.value=a[3]),B=new Me({props:x}),we.push(()=>ve(B,"value",ne)),h=new Ue({props:{class:"m-0 relative",$$slots:{default:[st]},$$scope:{ctx:a}}});let b=a[2].length===0&&ge(a),v=a[2].length!==0&&he();return{c(){e=A("section"),s=A("div"),t=A("div"),o=A("p"),w(l.$$.fragment),r=y(),n=R(f),c=y(),d=A("p"),w(u.$$.fragment),C=y(),Q=R(H),Y=y(),M=A("div"),w(B.$$.fragment),i=y(),g=A("section"),w(h.$$.fragment),U=y(),b&&b.c(),V=y(),v&&v.c(),this.h()},l(m){e=O(m,"SECTION",{class:!0});var P=T(e);s=O(P,"DIV",{class:!0});var z=T(s);t=O(z,"DIV",{class:!0});var F=T(t);o=O(F,"P",{class:!0});var se=T(o);I(l.$$.fragment,se),r=L(se),n=q(se,f),se.forEach(_),c=L(F),d=O(F,"P",{class:!0});var le=T(d);I(u.$$.fragment,le),C=L(le),Q=q(le,H),le.forEach(_),F.forEach(_),Y=L(z),M=O(z,"DIV",{});var ue=T(M);I(B.$$.fragment,ue),ue.forEach(_),z.forEach(_),P.forEach(_),i=L(m),g=O(m,"SECTION",{class:!0});var J=T(g);I(h.$$.fragment,J),U=L(J),b&&b.l(J),V=L(J),v&&v.l(J),J.forEach(_),this.h()},h(){j(o,"class","flex items-center mr-5"),j(d,"class","flex items-center"),j(t,"class","flex"),j(s,"class","flex flex-col lg:flex-row items-start gap-2 lg:items-center justify-between w-full"),j(e,"class","flex items-center mx-2 lg:mx-9 my-5"),j(g,"class","my-5 mx-2 lg:mx-9")},m(m,P){E(m,e,P),D(e,s),D(s,t),D(t,o),k(l,o,null),D(o,r),D(o,n),D(t,c),D(t,d),k(u,d,null),D(d,C),D(d,Q),D(s,Y),D(s,M),k(B,M,null),E(m,i,P),E(m,g,P),k(h,g,null),D(g,U),b&&b.m(g,null),D(g,V),v&&v.m(g,null),N=!0},p(m,P){(!N||P&32)&&f!==(f=m[5]("course.navItem.attendance.present")+"")&&K(n,f),(!N||P&32)&&H!==(H=m[5]("course.navItem.attendance.absent")+"")&&K(Q,H);const z={};P&32&&(z.placeholder=m[5]("course.navItem.attendance.search_students")),!Z&&P&8&&(Z=!0,z.value=m[3],Ie(()=>Z=!1)),B.$set(z);const F={};P&16777342&&(F.$$scope={dirty:P,ctx:m}),h.$set(F),m[2].length===0?b?(b.p(m,P),P&4&&$(b,1)):(b=ge(m),b.c(),$(b,1),b.m(g,V)):b&&(te(),p(b,1,1,()=>{b=null}),re()),m[2].length!==0?v?P&4&&$(v,1):(v=he(),v.c(),$(v,1),v.m(g,null)):v&&(te(),p(v,1,1,()=>{v=null}),re())},i(m){N||($(l.$$.fragment,m),$(u.$$.fragment,m),$(B.$$.fragment,m),$(h.$$.fragment,m),$(b),$(v),N=!0)},o(m){p(l.$$.fragment,m),p(u.$$.fragment,m),p(B.$$.fragment,m),p(h.$$.fragment,m),p(b),p(v),N=!1},d(m){m&&(_(e),_(i),_(g)),S(l),S(u),S(B),S(h),b&&b.d(),v&&v.d()}}}function ot(a){let e,s,t,o;return e=new Le({props:{title:a[5]("course.navItem.attendance.title")}}),t=new ye({props:{width:"w-full max-w-6xl md:w-11/12",$$slots:{default:[at]},$$scope:{ctx:a}}}),{c(){w(e.$$.fragment),s=y(),w(t.$$.fragment)},l(l){I(e.$$.fragment,l),s=L(l),I(t.$$.fragment,l)},m(l,r){k(e,l,r),E(l,s,r),k(t,l,r),o=!0},p(l,r){const f={};r&32&&(f.title=l[5]("course.navItem.attendance.title")),e.$set(f);const n={};r&16777342&&(n.$$scope={dirty:r,ctx:l}),t.$set(n)},i(l){o||($(e.$$.fragment,l),$(t.$$.fragment,l),o=!0)},o(l){p(e.$$.fragment,l),p(t.$$.fragment,l),o=!1},d(l){l&&_(s),S(e,l),S(t,l)}}}function ct(a){let e,s,t;function o(r){a[13](r)}let l={$$slots:{default:[ot]},$$scope:{ctx:a}};return a[0].courseId!==void 0&&(l.courseId=a[0].courseId),e=new De({props:l}),we.push(()=>ve(e,"courseId",o)),{c(){w(e.$$.fragment)},l(r){I(e.$$.fragment,r)},m(r,f){k(e,r,f),t=!0},p(r,[f]){const n={};f&16777342&&(n.$$scope={dirty:f,ctx:r}),!s&&f&1&&(s=!0,n.courseId=r[0].courseId,Ie(()=>s=!1)),e.$set(n)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){p(e.$$.fragment,r),t=!1},d(r){S(e,r)}}}function be(a,e){const s=a.toLowerCase();return e.filter(t=>{var o,l,r;return(r=(l=(o=t.profile)==null?void 0:o.fullname)==null?void 0:l.toLowerCase())==null?void 0:r.includes(s)})}function ft(a,e,s){let t,o,l,r,f,n,c;G(a,Be,i=>s(8,t=i)),G(a,Ae,i=>s(9,o=i)),G(a,qe,i=>s(10,l=i)),G(a,He,i=>s(1,r=i)),G(a,ee,i=>s(4,f=i)),G(a,Qe,i=>s(5,n=i)),G(a,Oe,i=>s(6,c=i));let{data:d}=e,u=[],C="";function H(i){for(const g of i.attendance){const{student_id:h,lesson_id:U,is_present:V,id:N}=g;f[h]?ae(ee,f[h]={...f[h],[U]:{id:N,is_present:V}},f):ae(ee,f[h]={[U]:{id:N,is_present:V}},f)}}function Q(i,g,h){if(r.isStudent)return;const V={id:(f[g.id]?f[g.id][h.id]||{id:void 0}:{id:void 0}).id,student_id:g.id,is_present:i.target.checked,lesson_id:h.id,course_id:d.courseId};We(V).then(N=>{if(N.error)console.error("res.error",N.error),ze.error("snackbar.attendance.error.reload");else{const{id:ne,is_present:x}=N.data[0];f[g.id]?ae(ee,f[g.id][h.id]={id:ne,is_present:x},f):ae(ee,f[g.id]={[h.id]:{id:ne,is_present:x}},f)}})}async function Y(i){if(i){Object.keys(f).length||H(t);return}}function M(i){C=i,s(3,C)}const B=(i,g,h)=>Q(h,i,g);function Z(i){a.$$.not_equal(d.courseId,i)&&(d.courseId=i,s(0,d))}return a.$$set=i=>{"data"in i&&s(0,d=i.data)},a.$$.update=()=>{a.$$.dirty&1538&&s(2,u=r.isStudent?o.people.filter(i=>!!i.profile&&i.profile.id===l.id):o.people.filter(i=>!!i.profile&&i.role_id===Ve.STUDENT)),a.$$.dirty&256&&t.id&&Y(t.id)},[d,r,u,C,f,n,c,Q,t,o,l,M,B,Z]}class Nt extends Se{constructor(e){super(),Ee(this,e,ft,ct,Ce,{data:0})}}export{Nt as component,Lt as universal};
//# sourceMappingURL=11.fca0384b.js.map
