import{S as De,i as Ee,f as oe,b as L,d as C,m as V,t as w,a as I,e as T,g as fe,c as ue}from"../chunks/index.a2391391.js";import{s as Me,g as Fe,a as Ne,c as Oe,b as O,d as $,e as E,h as Xe,i as j,f as b,n as ae,j as xe,k as et,t as X,l as x,m as ee,w as re,A as ie,p as Z,C as A,x as R,D as H,z as F,a6 as Ue,N as we,H as Be,G as qe,J as Ge,E as te,a4 as Lt,o as Ae}from"../chunks/scheduler.ee52cacd.js";import{p as We}from"../chunks/stores.5de49fb7.js";import{P as Ct}from"../chunks/index.691cdcca.js";import{R as He}from"../chunks/index.f39bbea9.js";import{B as Ye}from"../chunks/index.6649ce47.js";import{P as de,V as Ie}from"../chunks/index.550ce75a.js";import{h as be,C as Vt,P as Tt}from"../chunks/index.fc85f1f4.js";import{l as ge,c as ze,h as Ve,a as ne,b as ht,d as zt,e as vt}from"../chunks/store.f203a796.js";import{M as Ze}from"../chunks/index.bf0b6763.js";import{t as Le}from"../chunks/translations.f943b7b3.js";import{g as je}from"../chunks/navigation.4bf4851d.js";import{C as tt,a as ke}from"../chunks/index.89e0ac82.js";import{p as Nt}from"../chunks/user.9ccdc884.js";import{e as ye,u as Je,o as bt,f as Ot}from"../chunks/each.4f9c2159.js";import{d as Qe,f as At,c as Ht,a as Pt}from"../chunks/index.fb010e26.js";import{T as Pe}from"../chunks/TextField.05bb724d.js";import{T as kt}from"../chunks/Text.40bcd65a.js";import{g as wt}from"../chunks/app.bd3189d3.js";import{g as Rt}from"../chunks/spread.5cc747ed.js";import{u as It,g as Ft}from"../chunks/index.523fac41.js";import{O as Ke,a as $e}from"../chunks/OverflowMenuItem.fb1aab9d.js";import{A as jt}from"../chunks/Add.efc40c97.js";import{I as Ut}from"../chunks/index.e68f3ff9.js";import{s as Dt}from"../chunks/store.21c1b842.js";import{s as Bt}from"../chunks/supabase.2c784bff.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="bc0f6102-c7e1-41da-abc1-0304382beba3",n._sentryDebugIdIdentifier="sentry-dbid-bc0f6102-c7e1-41da-abc1-0304382beba3")}catch{}})();function st(n){let e,s;return{c(){e=Ne("title"),s=X(n[1])},l(t){e=Oe(t,"title",{});var o=O(e);s=x(o,n[1]),o.forEach($)},m(t,o){j(t,e,o),b(e,s)},p(t,o){o&2&&ee(s,t[1])},d(t){t&&$(e)}}}function qt(n){let e,s,t,o=n[1]&&st(n),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],r={};for(let l=0;l<a.length;l+=1)r=Fe(r,a[l]);return{c(){e=Ne("svg"),o&&o.c(),s=Ne("path"),t=Ne("path"),this.h()},l(l){e=Oe(l,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=O(e);o&&o.l(i),s=Oe(i,"path",{d:!0}),O(s).forEach($),t=Oe(i,"path",{d:!0}),O(t).forEach($),i.forEach($),this.h()},h(){E(s,"d","M22 25H30V27H22zM22 21H30V23H22zM18.4141 11L23 11 23 9 15 9 15 17 17 17 17 12.4141 23.5859 19 25 17.5859 18.4141 11z"),E(t,"d","M28,3H4c-1.1028,0-2,.8975-2,2V21c0,1.1025,.8972,2,2,2H12v4h-4v2h12v-8H4V5H28v14h2V5c0-1.1025-.8972-2-2-2Zm-10,24h-4v-4h4v4Z"),Xe(e,r)},m(l,i){j(l,e,i),o&&o.m(e,null),b(e,s),b(e,t)},p(l,[i]){l[1]?o?o.p(l,i):(o=st(l),o.c(),o.m(e,s)):o&&(o.d(1),o=null),Xe(e,r=Rt(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:l[0]},i&1&&{height:l[0]},i&4&&l[2],i&8&&l[3]]))},i:ae,o:ae,d(l){l&&$(e),o&&o.d()}}}function Gt(n,e,s){let t,o;const a=["size","title"];let r=xe(e,a),{size:l=16}=e,{title:i=void 0}=e;return n.$$set=u=>{s(5,e=Fe(Fe({},e),et(u))),s(3,r=xe(e,a)),"size"in u&&s(0,l=u.size),"title"in u&&s(1,i=u.title)},n.$$.update=()=>{s(4,t=e["aria-label"]||e["aria-labelledby"]||i),s(2,o={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=et(e),[l,i,o,r,t]}class Et extends De{constructor(e){super(),Ee(this,e,Gt,qt,Me,{size:0,title:1})}}const Wt=({params:n={id:""}})=>({courseId:n.id}),_n=Object.freeze(Object.defineProperty({__proto__:null,load:Wt},Symbol.toStringTag,{value:"Module"}));function Yt(n){let e,s,t=n[1]("delete_modal.content")+"",o,a,r,l,i,u,f,c;return i=new de({props:{className:"px-6 py-3",variant:Ie.OUTLINED,label:n[1]("delete_modal.no"),onClick:n[4]}}),f=new de({props:{className:"px-6 py-3",variant:Ie.OUTLINED,label:n[1]("delete_modal.yes"),onClick:n[2]}}),{c(){e=A("div"),s=A("h1"),o=X(t),a=X("?"),r=R(),l=A("div"),L(i.$$.fragment),u=R(),L(f.$$.fragment),this.h()},l(d){e=H(d,"DIV",{});var p=O(e);s=H(p,"H1",{class:!0});var _=O(s);o=x(_,t),a=x(_,"?"),_.forEach($),r=F(p),l=H(p,"DIV",{class:!0});var m=O(l);C(i.$$.fragment,m),u=F(m),C(f.$$.fragment,m),m.forEach($),p.forEach($),this.h()},h(){E(s,"class","dark:text-white text-lg"),E(l,"class","mt-5 flex items-center justify-between")},m(d,p){j(d,e,p),b(e,s),b(s,o),b(s,a),b(e,r),b(e,l),V(i,l,null),b(l,u),V(f,l,null),c=!0},p(d,p){(!c||p&2)&&t!==(t=d[1]("delete_modal.content")+"")&&ee(o,t);const _={};p&2&&(_.label=d[1]("delete_modal.no")),p&1&&(_.onClick=d[4]),i.$set(_);const m={};p&2&&(m.label=d[1]("delete_modal.yes")),f.$set(m)},i(d){c||(w(i.$$.fragment,d),w(f.$$.fragment,d),c=!0)},o(d){I(i.$$.fragment,d),I(f.$$.fragment,d),c=!1},d(d){d&&$(e),T(i),T(f)}}}function Zt(n){let e,s,t;function o(r){n[6](r)}let a={onClose:n[5],width:"w-96",containerClass:"px-6 pt-2 pb-6",modalHeading:n[1]("delete_modal.label"),$$slots:{default:[Yt]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.open=n[0]),e=new Ze({props:a}),re.push(()=>oe(e,"open",o)),{c(){L(e.$$.fragment)},l(r){C(e.$$.fragment,r)},m(r,l){V(e,r,l),t=!0},p(r,[l]){const i={};l&1&&(i.onClose=r[5]),l&2&&(i.modalHeading=r[1]("delete_modal.label")),l&131&&(i.$$scope={dirty:l,ctx:r}),!s&&l&1&&(s=!0,i.open=r[0],ie(()=>s=!1)),e.$set(i)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){T(e,r)}}}function Jt(n,e,s){let t;Z(n,Le,f=>s(1,t=f));let{openDeleteModal:o=!1}=e,{deleteLesson:a=()=>{}}=e;async function r(){a(),s(0,o=!1)}const l=()=>s(0,o=!1),i=()=>s(0,o=!1);function u(f){o=f,s(0,o)}return n.$$set=f=>{"openDeleteModal"in f&&s(0,o=f.openDeleteModal),"deleteLesson"in f&&s(3,a=f.deleteLesson)},[o,t,r,a,l,i,u]}class Mt extends De{constructor(e){super(),Ee(this,e,Jt,Zt,Me,{openDeleteModal:0,deleteLesson:3})}}function nt(n,e,s){const t=n.slice();return t[18]=e[s],t[19]=e,t[20]=s,t}function lt(n){let e,s;return e=new Ye({props:{$$slots:{default:[Qt]},$$scope:{ctx:n}}}),{c(){L(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,o){V(e,t,o),s=!0},p(t,o){const a={};o&2097664&&(a.$$scope={dirty:o,ctx:t}),e.$set(a)},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){T(e,t)}}}function Qt(n){let e,s,t,o,a,r=n[9]("course.navItem.lessons.body_header")+"",l,i,u,f=n[9]("course.navItem.lessons.body_content")+"",c,d;return{c(){e=A("div"),s=A("img"),o=R(),a=A("h2"),l=X(r),i=R(),u=A("p"),c=X(f),d=R(),this.h()},l(p){e=H(p,"DIV",{class:!0});var _=O(e);s=H(_,"IMG",{src:!0,alt:!0,class:!0}),o=F(_),a=H(_,"H2",{class:!0});var m=O(a);l=x(m,r),m.forEach($),i=F(_),u=H(_,"P",{class:!0});var g=O(u);c=x(g,f),g.forEach($),_.forEach($),d=F(p),this.h()},h(){Ge(s.src,t="/images/empty-lesson-icon.svg")||E(s,"src",t),E(s,"alt","Lesson"),E(s,"class","my-2.5 mx-auto"),E(a,"class","text-xl my-1.5 font-normal"),E(u,"class","text-sm text-center text-slate-500"),E(e,"class","flex justify-between flex-col items-center w-[90%] md:w-96")},m(p,_){j(p,e,_),b(e,s),b(e,o),b(e,a),b(a,l),b(e,i),b(e,u),b(u,c),j(p,d,_)},p(p,_){_&512&&r!==(r=p[9]("course.navItem.lessons.body_header")+"")&&ee(l,r),_&512&&f!==(f=p[9]("course.navItem.lessons.body_content")+"")&&ee(c,f)},d(p){p&&($(e),$(d))}}}function Kt(n){let e,s,t=n[18].title+"",o,a,r;return{c(){e=A("h3"),s=A("a"),o=X(t),this.h()},l(l){e=H(l,"H3",{class:!0});var i=O(e);s=H(i,"A",{href:!0,class:!0});var u=O(s);o=x(u,t),u.forEach($),i.forEach($),this.h()},h(){E(s,"href",a=n[6].isStudent&&!n[18].is_unlocked?n[7].url.pathname:`/courses/${n[8].id}/lessons/${n[18].id}`),E(s,"class",r="font-medium text-black no-underline hover:underline dark:text-white "+(n[6].isStudent&&!n[18].is_unlocked?"cursor-not-allowed":"")),E(e,"class","m-0 flex items-center text-lg dark:text-white")},m(l,i){j(l,e,i),b(e,s),b(s,o)},p(l,i){i&32&&t!==(t=l[18].title+"")&&ee(o,t),i&480&&a!==(a=l[6].isStudent&&!l[18].is_unlocked?l[7].url.pathname:`/courses/${l[8].id}/lessons/${l[18].id}`)&&E(s,"href",a),i&96&&r!==(r="font-medium text-black no-underline hover:underline dark:text-white "+(l[6].isStudent&&!l[18].is_unlocked?"cursor-not-allowed":""))&&E(s,"class",r)},i:ae,o:ae,d(l){l&&$(e)}}}function Xt(n){var r;let e,s,t;function o(l){n[14](l,n[18])}let a={autoFocus:!0,className:"max-w-lg",errorMessage:(r=n[4])==null?void 0:r.title};return n[18].title!==void 0&&(a.value=n[18].title),e=new Pe({props:a}),re.push(()=>oe(e,"value",o)),{c(){L(e.$$.fragment)},l(l){C(e.$$.fragment,l)},m(l,i){V(e,l,i),t=!0},p(l,i){var f;n=l;const u={};i&16&&(u.errorMessage=(f=n[4])==null?void 0:f.title),!s&&i&32&&(s=!0,u.value=n[18].title,ie(()=>s=!1)),e.$set(u)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function xt(n){let e,s,t,o,a,r;function l(){return n[15](n[18],n[19],n[20])}e=new $e({props:{text:n[18].is_unlocked?n[9]("course.navItem.lessons.add_lesson.lock"):n[9]("course.navItem.lessons.add_lesson.unlock")}}),e.$on("click",l);function i(){return n[16](n[18])}t=new $e({props:{text:n[0]===n[18].id?n[9]("course.navItem.lessons.add_lesson.save"):n[9]("course.navItem.lessons.add_lesson.edit")}}),t.$on("click",i);function u(){return n[17](n[18])}return a=new $e({props:{danger:!0,text:n[9]("course.navItem.lessons.add_lesson.delete")}}),a.$on("click",u),{c(){L(e.$$.fragment),s=R(),L(t.$$.fragment),o=R(),L(a.$$.fragment)},l(f){C(e.$$.fragment,f),s=F(f),C(t.$$.fragment,f),o=F(f),C(a.$$.fragment,f)},m(f,c){V(e,f,c),j(f,s,c),V(t,f,c),j(f,o,c),V(a,f,c),r=!0},p(f,c){n=f;const d={};c&544&&(d.text=n[18].is_unlocked?n[9]("course.navItem.lessons.add_lesson.lock"):n[9]("course.navItem.lessons.add_lesson.unlock")),e.$set(d);const p={};c&545&&(p.text=n[0]===n[18].id?n[9]("course.navItem.lessons.add_lesson.save"):n[9]("course.navItem.lessons.add_lesson.edit")),t.$set(p);const _={};c&512&&(_.text=n[9]("course.navItem.lessons.add_lesson.delete")),a.$set(_)},i(f){r||(w(e.$$.fragment,f),w(t.$$.fragment,f),w(a.$$.fragment,f),r=!0)},o(f){I(e.$$.fragment,f),I(t.$$.fragment,f),I(a.$$.fragment,f),r=!1},d(f){f&&($(s),$(o)),T(e,f),T(t,f),T(a,f)}}}function es(n){let e,s;return e=new Ke({props:{size:"xl",$$slots:{default:[xt]},$$scope:{ctx:n}}}),{c(){L(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,o){V(e,t,o),s=!0},p(t,o){const a={};o&2097959&&(a.$$scope={dirty:o,ctx:t}),e.$set(a)},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){T(e,t)}}}function ot(n,e){var K,G,Se;let s,t,o,a,r,l,i,u,f,c,d,p,_,m=((K=e[18])!=null&&K.totalExercises?(Se=(G=e[18])==null?void 0:G.totalExercises)==null?void 0:Se.map(it):0)+"",g,D,P=e[9]("exercises.heading")+"",U,h,v,z,B,N;o=new kt({props:{value:e[13](e[18].id),size:"sm",shape:"rounded-full",className:"bg-primary-200 text-primary-600 text-xs"}});const S=[Xt,Kt],M=[];function q(J,Q){return J[0]===J[18].id?0:1}return l=q(e),i=M[l]=S[l](e),d=new Et({props:{size:20,class:"carbon-icon dark:text-white"}}),z=new He({props:{allowedRoles:[1,2],$$slots:{default:[es]},$$scope:{ctx:e}}}),{key:n,first:null,c(){s=A("div"),t=A("div"),L(o.$$.fragment),a=R(),r=A("div"),i.c(),u=R(),f=A("div"),c=A("div"),L(d.$$.fragment),p=R(),_=A("p"),g=X(m),D=R(),U=X(P),h=R(),v=A("div"),L(z.$$.fragment),B=R(),this.h()},l(J){s=H(J,"DIV",{class:!0});var Q=O(s);t=H(Q,"DIV",{class:!0});var ce=O(t);C(o.$$.fragment,ce),ce.forEach($),a=F(Q),r=H(Q,"DIV",{class:!0});var y=O(r);i.l(y),u=F(y),f=H(y,"DIV",{class:!0});var le=O(f);c=H(le,"DIV",{class:!0});var me=O(c);C(d.$$.fragment,me),p=F(me),_=H(me,"P",{class:!0});var _e=O(_);g=x(_e,m),D=F(_e),U=x(_e,P),_e.forEach($),me.forEach($),le.forEach($),y.forEach($),h=F(Q),v=H(Q,"DIV",{class:!0});var he=O(v);C(z.$$.fragment,he),he.forEach($),B=F(Q),Q.forEach($),this.h()},h(){E(t,"class","mr-5"),E(_,"class","ml-2 text-sm text-gray-500 dark:text-white"),E(c,"class","mb-3 flex items-center lg:mb-0"),E(f,"class","mt-2 flex w-4/5 flex-col items-start justify-between lg:flex-row lg:items-center"),E(r,"class","w-4/5"),E(v,"class","flex flex-row"),E(s,"class","relative m-auto mb-4 flex max-w-xl items-center rounded-md border-2 border-gray-200 dark:border-neutral-600 p-5 dark:bg-neutral-800"),this.first=s},m(J,Q){j(J,s,Q),b(s,t),V(o,t,null),b(s,a),b(s,r),M[l].m(r,null),b(r,u),b(r,f),b(f,c),V(d,c,null),b(c,p),b(c,_),b(_,g),b(_,D),b(_,U),b(s,h),b(s,v),V(z,v,null),b(s,B),N=!0},p(J,Q){var me,_e,he;e=J;const ce={};Q&32&&(ce.value=e[13](e[18].id)),o.$set(ce);let y=l;l=q(e),l===y?M[l].p(e,Q):(fe(),I(M[y],1,1,()=>{M[y]=null}),ue(),i=M[l],i?i.p(e,Q):(i=M[l]=S[l](e),i.c()),w(i,1),i.m(r,u)),(!N||Q&32)&&m!==(m=((me=e[18])!=null&&me.totalExercises?(he=(_e=e[18])==null?void 0:_e.totalExercises)==null?void 0:he.map(it):0)+"")&&ee(g,m),(!N||Q&512)&&P!==(P=e[9]("exercises.heading")+"")&&ee(U,P);const le={};Q&2097959&&(le.$$scope={dirty:Q,ctx:e}),z.$set(le)},i(J){N||(w(o.$$.fragment,J),w(i),w(d.$$.fragment,J),w(z.$$.fragment,J),N=!0)},o(J){I(o.$$.fragment,J),I(i),I(d.$$.fragment,J),I(z.$$.fragment,J),N=!1},d(J){J&&$(s),T(o),M[l].d(),T(d),T(z)}}}function ts(n){let e,s=[],t=new Map,o,a,r,l,i=ye(n[5]);const u=c=>c[18].id;for(let c=0;c<i.length;c+=1){let d=nt(n,i,c),p=u(d);t.set(p,s[c]=ot(p,d))}let f=null;return i.length||(f=lt(n)),{c(){e=A("section");for(let c=0;c<s.length;c+=1)s[c].c();f&&f.c(),this.h()},l(c){e=H(c,"SECTION",{class:!0});var d=O(e);for(let p=0;p<s.length;p+=1)s[p].l(d);f&&f.l(d),d.forEach($),this.h()},h(){E(e,"class","m-auto w-full p-3 lg:w-11/12 lg:px-4")},m(c,d){j(c,e,d);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(e,null);f&&f.m(e,null),a=!0,r||(l=[Ue(o=Qe.call(null,e,{items:n[5],flipDurationMs:rt,dragDisabled:!n[3],dropTargetStyle:{border:"2px #1d4ed8 solid","border-style":"dashed"}})),we(e,"consider",n[11]),we(e,"finalize",n[12])],r=!0)},p(c,[d]){d&10231&&(i=ye(c[5]),fe(),s=Je(s,d,u,1,c,i,t,e,bt,ot,null,nt),ue(),!i.length&&f?f.p(c,d):i.length?f&&(fe(),I(f,1,1,()=>{f=null}),ue()):(f=lt(c),f.c(),w(f,1),f.m(e,null))),o&&Be(o.update)&&d&40&&o.update.call(null,{items:c[5],flipDurationMs:rt,dragDisabled:!c[3],dropTargetStyle:{border:"2px #1d4ed8 solid","border-style":"dashed"}})},i(c){if(!a){for(let d=0;d<i.length;d+=1)w(s[d]);a=!0}},o(c){for(let d=0;d<s.length;d+=1)I(s[d]);a=!1},d(c){c&&$(e);for(let d=0;d<s.length;d+=1)s[d].d();f&&f.d(),r=!1,qe(l)}}}const rt=300,it=n=>n.count;function ss(n,e,s){let t,o,a,r,l;Z(n,ge,v=>s(5,t=v)),Z(n,wt,v=>s(6,o=v)),Z(n,We,v=>s(7,a=v)),Z(n,ze,v=>s(8,r=v)),Z(n,Le,v=>s(9,l=v));let{reorder:i=!1}=e,{lessonEditing:u}=e,{lessonToDelete:f}=e,{openDeleteModal:c=!1}=e,d={};async function p(v,z){const B=await Ve(v,z);B&&Object.keys(B).length?s(4,d=B):(s(4,d={}),s(0,u=void 0))}function _(v){te(ge,t=v.detail.items,t)}function m(v){const z=t.reduce((B,N)=>({...B,[N.id]:N.order}),{});te(ge,t=v.detail.items,t),v.detail.items.forEach((B,N)=>{const S=N+1;S!==z[B.id]&&(te(ge,t[N].order=S,t),It({order:S},B.id).then(M=>console.log("updated lesson order",M)))})}function g(v){const z=t.findIndex(B=>B.id===v);return z<9?"0"+(z+1):z+1}function D(v,z){n.$$.not_equal(z.title,v)&&(z.title=v,ge.set(t))}const P=(v,z,B)=>{te(ge,z[B].is_unlocked=!v.is_unlocked,t),Ve(v,r.id)},U=v=>{u===v.id?p(v,r.id):s(0,u=v.id)},h=v=>{s(1,f=v),s(2,c=!0)};return n.$$set=v=>{"reorder"in v&&s(3,i=v.reorder),"lessonEditing"in v&&s(0,u=v.lessonEditing),"lessonToDelete"in v&&s(1,f=v.lessonToDelete),"openDeleteModal"in v&&s(2,c=v.openDeleteModal)},[u,f,c,i,d,t,o,a,r,l,p,_,m,g,D,P,U,h]}class ns extends De{constructor(e){super(),Ee(this,e,ss,ts,Me,{reorder:3,lessonEditing:0,lessonToDelete:1,openDeleteModal:2})}}function at(n,e,s){const t=n.slice();return t[36]=e[s],t[37]=e,t[38]=s,t}function ft(n,e,s){const t=n.slice();return t[39]=e[s],t[40]=e,t[41]=s,t}function ls(n){let e,s=n[36].title+"",t;return{c(){e=A("p"),t=X(s),this.h()},l(o){e=H(o,"P",{class:!0});var a=O(e);t=x(a,s),a.forEach($),this.h()},h(){E(e,"class","w-4/6 font-semibold")},m(o,a){j(o,e,a),b(e,t)},p(o,a){a[0]&32&&s!==(s=o[36].title+"")&&ee(t,s)},i:ae,o:ae,d(o){o&&$(e)}}}function os(n){var r;let e,s,t;function o(l){n[21](l,n[36])}let a={className:"w-4/6",errorMessage:(r=n[3])==null?void 0:r.title};return n[36].title!==void 0&&(a.value=n[36].title),e=new Pe({props:a}),re.push(()=>oe(e,"value",o)),{c(){L(e.$$.fragment)},l(l){C(e.$$.fragment,l)},m(l,i){V(e,l,i),t=!0},p(l,i){var f;n=l;const u={};i[0]&8&&(u.errorMessage=(f=n[3])==null?void 0:f.title),!s&&i[0]&32&&(s=!0,u.value=n[36].title,ie(()=>s=!1)),e.$set(u)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function rs(n){let e,s,t,o;function a(){return n[24](n[36])}return e=new Ut({props:{contained:!0,size:"small",onClick:a,disabled:!!n[0],$$slots:{default:[as]},$$scope:{ctx:n}}}),t=new Ke({props:{size:"xl",flipped:!0,$$slots:{default:[fs]},$$scope:{ctx:n}}}),{c(){L(e.$$.fragment),s=R(),L(t.$$.fragment)},l(r){C(e.$$.fragment,r),s=F(r),C(t.$$.fragment,r)},m(r,l){V(e,r,l),j(r,s,l),V(t,r,l),o=!0},p(r,l){n=r;const i={};l[0]&32&&(i.onClick=a),l[0]&1&&(i.disabled=!!n[0]),l[1]&2048&&(i.$$scope={dirty:l,ctx:n}),e.$set(i);const u={};l[0]&97|l[1]&2048&&(u.$$scope={dirty:l,ctx:n}),t.$set(u)},i(r){o||(w(e.$$.fragment,r),w(t.$$.fragment,r),o=!0)},o(r){I(e.$$.fragment,r),I(t.$$.fragment,r),o=!1},d(r){r&&$(s),T(e,r),T(t,r)}}}function is(n){let e,s,t,o;function a(){return n[22](n[36],n[37],n[38])}e=new de({props:{label:n[6]("course.navItem.lessons.add_lesson.cancel"),variant:Ie.OUTLINED,onClick:a}});function r(){return n[23](n[36])}return t=new de({props:{label:n[6]("course.navItem.lessons.add_lesson.save"),onClick:r}}),{c(){L(e.$$.fragment),s=R(),L(t.$$.fragment)},l(l){C(e.$$.fragment,l),s=F(l),C(t.$$.fragment,l)},m(l,i){V(e,l,i),j(l,s,i),V(t,l,i),o=!0},p(l,i){n=l;const u={};i[0]&64&&(u.label=n[6]("course.navItem.lessons.add_lesson.cancel")),i[0]&36&&(u.onClick=a),e.$set(u);const f={};i[0]&64&&(f.label=n[6]("course.navItem.lessons.add_lesson.save")),i[0]&32&&(f.onClick=r),t.$set(f)},i(l){o||(w(e.$$.fragment,l),w(t.$$.fragment,l),o=!0)},o(l){I(e.$$.fragment,l),I(t.$$.fragment,l),o=!1},d(l){l&&$(s),T(e,l),T(t,l)}}}function as(n){let e,s;return e=new jt({props:{size:20}}),{c(){L(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,o){V(e,t,o),s=!0},p:ae,i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){T(e,t)}}}function fs(n){let e,s,t,o;function a(){return n[25](n[36])}e=new $e({props:{text:n[6]("course.navItem.lessons.add_lesson.edit"),disabled:!!n[0]}}),e.$on("click",a);function r(){return n[26](n[36])}return t=new $e({props:{danger:!0,text:n[6]("course.navItem.lessons.add_lesson.delete")}}),t.$on("click",r),{c(){L(e.$$.fragment),s=R(),L(t.$$.fragment)},l(l){C(e.$$.fragment,l),s=F(l),C(t.$$.fragment,l)},m(l,i){V(e,l,i),j(l,s,i),V(t,l,i),o=!0},p(l,i){n=l;const u={};i[0]&64&&(u.text=n[6]("course.navItem.lessons.add_lesson.edit")),i[0]&1&&(u.disabled=!!n[0]),e.$set(u);const f={};i[0]&64&&(f.text=n[6]("course.navItem.lessons.add_lesson.delete")),t.$set(f)},i(l){o||(w(e.$$.fragment,l),w(t.$$.fragment,l),o=!0)},o(l){I(e.$$.fragment,l),I(t.$$.fragment,l),o=!1},d(l){l&&$(s),T(e,l),T(t,l)}}}function us(n){let e,s,t,o;const a=[is,rs],r=[];function l(i,u){return i[0]===i[36].id?0:1}return s=l(n),t=r[s]=a[s](n),{c(){e=A("div"),t.c(),this.h()},l(i){e=H(i,"DIV",{class:!0});var u=O(e);t.l(u),u.forEach($),this.h()},h(){E(e,"class","flex items-center")},m(i,u){j(i,e,u),r[s].m(e,null),o=!0},p(i,u){let f=s;s=l(i),s===f?r[s].p(i,u):(fe(),I(r[f],1,1,()=>{r[f]=null}),ue(),t=r[s],t?t.p(i,u):(t=r[s]=a[s](i),t.c()),w(t,1),t.m(e,null))},i(i){o||(w(t),o=!0)},o(i){I(t),o=!1},d(i){i&&$(e),r[s].d()}}}function ut(n){let e=n[6]("course.navItem.lessons.no_lesson")+"",s;return{c(){s=X(e)},l(t){s=x(t,e)},m(t,o){j(t,s,o)},p(t,o){o[0]&64&&e!==(e=t[6]("course.navItem.lessons.no_lesson")+"")&&ee(s,e)},d(t){t&&$(s)}}}function ds(n){var v,z,B;let e,s,t,o,a,r=n[39].title+"",l,i,u,f,c,d,p,_,m=((v=n[39])!=null&&v.totalExercises?(B=(z=n[39])==null?void 0:z.totalExercises)==null?void 0:B.map(_t):0)+"",g,D,P=n[6]("exercises.heading")+"",U,h;return s=new kt({props:{value:mt(n[36].lessons,n[39].id),size:"sm",shape:"rounded-full",className:"bg-primary-200 text-primary-600 text-xs"}}),d=new Et({props:{size:16,class:"carbon-icon dark:text-white"}}),{c(){e=A("div"),L(s.$$.fragment),t=R(),o=A("div"),a=A("a"),l=X(r),f=R(),c=A("div"),L(d.$$.fragment),p=R(),_=A("p"),g=X(m),D=R(),U=X(P),this.h()},l(N){e=H(N,"DIV",{class:!0});var S=O(e);C(s.$$.fragment,S),t=F(S),o=H(S,"DIV",{});var M=O(o);a=H(M,"A",{href:!0,class:!0,"data-sveltekit-preload-data":!0});var q=O(a);l=x(q,r),q.forEach($),f=F(M),c=H(M,"DIV",{class:!0});var K=O(c);C(d.$$.fragment,K),p=F(K),_=H(K,"P",{class:!0});var G=O(_);g=x(G,m),D=F(G),U=x(G,P),G.forEach($),K.forEach($),M.forEach($),S.forEach($),this.h()},h(){E(a,"href",i=n[7].isStudent&&!n[39].is_unlocked?n[8].url.pathname:`/courses/${n[9].id}/lessons/${n[39].id}`),E(a,"class",u="text-black dark:text-white "+(n[7].isStudent&&!n[39].is_unlocked?"cursor-not-allowed":"")),E(a,"data-sveltekit-preload-data","off"),E(_,"class","ml-2 text-xs text-gray-500 dark:text-white"),E(c,"class","mt-1 mb-3 flex items-center lg:mb-0"),E(e,"class","w-4/5 flex items-center gap-2")},m(N,S){j(N,e,S),V(s,e,null),b(e,t),b(e,o),b(o,a),b(a,l),b(o,f),b(o,c),V(d,c,null),b(c,p),b(c,_),b(_,g),b(_,D),b(_,U),h=!0},p(N,S){var q,K,G;const M={};S[0]&32&&(M.value=mt(N[36].lessons,N[39].id)),s.$set(M),(!h||S[0]&32)&&r!==(r=N[39].title+"")&&ee(l,r),(!h||S[0]&928&&i!==(i=N[7].isStudent&&!N[39].is_unlocked?N[8].url.pathname:`/courses/${N[9].id}/lessons/${N[39].id}`))&&E(a,"href",i),(!h||S[0]&160&&u!==(u="text-black dark:text-white "+(N[7].isStudent&&!N[39].is_unlocked?"cursor-not-allowed":"")))&&E(a,"class",u),(!h||S[0]&32)&&m!==(m=((q=N[39])!=null&&q.totalExercises?(G=(K=N[39])==null?void 0:K.totalExercises)==null?void 0:G.map(_t):0)+"")&&ee(g,m),(!h||S[0]&64)&&P!==(P=N[6]("exercises.heading")+"")&&ee(U,P)},i(N){h||(w(s.$$.fragment,N),w(d.$$.fragment,N),h=!0)},o(N){I(s.$$.fragment,N),I(d.$$.fragment,N),h=!1},d(N){N&&$(e),T(s),T(d)}}}function cs(n){var r;let e,s,t;function o(l){n[27](l,n[39])}let a={className:"w-4/6",errorMessage:(r=n[3])==null?void 0:r.title};return n[39].title!==void 0&&(a.value=n[39].title),e=new Pe({props:a}),re.push(()=>oe(e,"value",o)),{c(){L(e.$$.fragment)},l(l){C(e.$$.fragment,l)},m(l,i){V(e,l,i),t=!0},p(l,i){var f;n=l;const u={};i[0]&8&&(u.errorMessage=(f=n[3])==null?void 0:f.title),!s&&i[0]&32&&(s=!0,u.value=n[39].title,ie(()=>s=!1)),e.$set(u)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function ms(n){let e,s;return e=new Ke({props:{size:"sm",flipped:!0,$$slots:{default:[ps]},$$scope:{ctx:n}}}),{c(){L(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,o){V(e,t,o),s=!0},p(t,o){const a={};o[0]&608|o[1]&2048&&(a.$$scope={dirty:o,ctx:t}),e.$set(a)},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){T(e,t)}}}function _s(n){let e,s,t,o;function a(){return n[28](n[39],n[40],n[41])}e=new de({props:{label:n[6]("course.navItem.lessons.add_lesson.cancel"),variant:Ie.OUTLINED,onClick:a}});function r(){return n[29](n[39])}return t=new de({props:{label:n[6]("course.navItem.lessons.add_lesson.save"),onClick:r}}),{c(){L(e.$$.fragment),s=R(),L(t.$$.fragment)},l(l){C(e.$$.fragment,l),s=F(l),C(t.$$.fragment,l)},m(l,i){V(e,l,i),j(l,s,i),V(t,l,i),o=!0},p(l,i){n=l;const u={};i[0]&64&&(u.label=n[6]("course.navItem.lessons.add_lesson.cancel")),i[0]&36&&(u.onClick=a),e.$set(u);const f={};i[0]&64&&(f.label=n[6]("course.navItem.lessons.add_lesson.save")),i[0]&32&&(f.onClick=r),t.$set(f)},i(l){o||(w(e.$$.fragment,l),w(t.$$.fragment,l),o=!0)},o(l){I(e.$$.fragment,l),I(t.$$.fragment,l),o=!1},d(l){l&&$(s),T(e,l),T(t,l)}}}function ps(n){let e,s,t,o,a,r;function l(){return n[30](n[39],n[40],n[41])}e=new $e({props:{text:n[39].is_unlocked?n[6]("course.navItem.lessons.add_lesson.lock"):n[6]("course.navItem.lessons.add_lesson.unlock")}}),e.$on("click",l);function i(){return n[31](n[39])}t=new $e({props:{text:n[6]("course.navItem.lessons.add_lesson.edit")}}),t.$on("click",i);function u(){return n[32](n[39])}return a=new $e({props:{danger:!0,text:n[6]("course.navItem.lessons.add_lesson.delete")}}),a.$on("click",u),{c(){L(e.$$.fragment),s=R(),L(t.$$.fragment),o=R(),L(a.$$.fragment)},l(f){C(e.$$.fragment,f),s=F(f),C(t.$$.fragment,f),o=F(f),C(a.$$.fragment,f)},m(f,c){V(e,f,c),j(f,s,c),V(t,f,c),j(f,o,c),V(a,f,c),r=!0},p(f,c){n=f;const d={};c[0]&96&&(d.text=n[39].is_unlocked?n[6]("course.navItem.lessons.add_lesson.lock"):n[6]("course.navItem.lessons.add_lesson.unlock")),e.$set(d);const p={};c[0]&64&&(p.text=n[6]("course.navItem.lessons.add_lesson.edit")),t.$set(p);const _={};c[0]&64&&(_.text=n[6]("course.navItem.lessons.add_lesson.delete")),a.$set(_)},i(f){r||(w(e.$$.fragment,f),w(t.$$.fragment,f),w(a.$$.fragment,f),r=!0)},o(f){I(e.$$.fragment,f),I(t.$$.fragment,f),I(a.$$.fragment,f),r=!1},d(f){f&&($(s),$(o)),T(e,f),T(t,f),T(a,f)}}}function gs(n){let e,s,t,o;const a=[_s,ms],r=[];function l(i,u){return i[0]===i[39].id?0:1}return s=l(n),t=r[s]=a[s](n),{c(){e=A("div"),t.c(),this.h()},l(i){e=H(i,"DIV",{class:!0});var u=O(e);t.l(u),u.forEach($),this.h()},h(){E(e,"class","flex items-center gap-1")},m(i,u){j(i,e,u),r[s].m(e,null),o=!0},p(i,u){let f=s;s=l(i),s===f?r[s].p(i,u):(fe(),I(r[f],1,1,()=>{r[f]=null}),ue(),t=r[s],t?t.p(i,u):(t=r[s]=a[s](i),t.c()),w(t,1),t.m(e,null))},i(i){o||(w(t),o=!0)},o(i){I(t),o=!1},d(i){i&&$(e),r[s].d()}}}function dt(n,e){let s,t,o,a,r,l,i,u=ae,f;const c=[cs,ds],d=[];function p(_,m){return _[0]===_[39].id?0:1}return t=p(e),o=d[t]=c[t](e),r=new He({props:{allowedRoles:[1,2],$$slots:{default:[gs]},$$scope:{ctx:e}}}),{key:n,first:null,c(){s=A("div"),o.c(),a=R(),L(r.$$.fragment),l=R(),this.h()},l(_){s=H(_,"DIV",{class:!0});var m=O(s);o.l(m),a=F(m),C(r.$$.fragment,m),l=F(m),m.forEach($),this.h()},h(){E(s,"class","border max-w-xl border-gray-200 px-3 py-1 min-h-[50px] rounded-md mb-2 flex items-center justify-between"),this.first=s},m(_,m){j(_,s,m),d[t].m(s,null),b(s,a),V(r,s,null),b(s,l),f=!0},p(_,m){e=_;let g=t;t=p(e),t===g?d[t].p(e,m):(fe(),I(d[g],1,1,()=>{d[g]=null}),ue(),o=d[t],o?o.p(e,m):(o=d[t]=c[t](e),o.c()),w(o,1),o.m(s,a));const D={};m[0]&613|m[1]&2048&&(D.$$scope={dirty:m,ctx:e}),r.$set(D)},r(){i=s.getBoundingClientRect()},f(){At(s),u()},a(){u(),u=Ht(s,i,Pt,{duration:Te})},i(_){f||(w(o),w(r.$$.fragment,_),f=!0)},o(_){I(o),I(r.$$.fragment,_),f=!1},d(_){_&&$(s),d[t].d(),T(r)}}}function ct(n,e){let s,t,o,a,r,l,i,u,f=[],c=new Map,d,p,_,m,g;const D=[os,ls],P=[];function U(S,M){return S[0]===S[36].id?0:1}o=U(e),a=P[o]=D[o](e),l=new He({props:{allowedRoles:[1,2],$$slots:{default:[us]},$$scope:{ctx:e}}});let h=ye(e[36].lessons);const v=S=>S[39].id;for(let S=0;S<h.length;S+=1){let M=ft(e,h,S),q=v(M);c.set(q,f[S]=dt(q,M))}let z=null;h.length||(z=ut(e));function B(...S){return e[33](e[36],...S)}function N(...S){return e[34](e[36],...S)}return{key:n,first:null,c(){s=A("div"),t=A("div"),a.c(),r=R(),L(l.$$.fragment),i=R(),u=A("div");for(let S=0;S<f.length;S+=1)f[S].c();z&&z.c(),p=R(),this.h()},l(S){s=H(S,"DIV",{class:!0});var M=O(s);t=H(M,"DIV",{class:!0});var q=O(t);a.l(q),r=F(q),C(l.$$.fragment,q),q.forEach($),i=F(M),u=H(M,"DIV",{class:!0});var K=O(u);for(let G=0;G<f.length;G+=1)f[G].l(K);z&&z.l(K),K.forEach($),p=F(M),M.forEach($),this.h()},h(){E(t,"class","mb-2 px-3 py-1 min-h-[50px] border-b bg-gray-50 dark:bg-neutral-700 rounded-tl-md rounded-tr-md flex justify-between items-center"),E(u,"class","mx-3 py-1"),E(s,"class","mb-3 m-auto max-w-xl border-2 border-gray-200 dark:border-neutral-600 dark:bg-neutral-800 rounded-md"),this.first=s},m(S,M){j(S,s,M),b(s,t),P[o].m(t,null),b(t,r),V(l,t,null),b(s,i),b(s,u);for(let q=0;q<f.length;q+=1)f[q]&&f[q].m(u,null);z&&z.m(u,null),b(s,p),_=!0,m||(g=[Ue(d=Qe.call(null,u,{items:e[36].lessons,flipDurationMs:Te,dropTargetStyle:{border:"2px #1d4ed8 solid","border-style":"dashed"},dragDisabled:!e[1]})),we(u,"consider",B),we(u,"finalize",N)],m=!0)},p(S,M){e=S;let q=o;o=U(e),o===q?P[o].p(e,M):(fe(),I(P[q],1,1,()=>{P[q]=null}),ue(),a=P[o],a?a.p(e,M):(a=P[o]=D[o](e),a.c()),w(a,1),a.m(t,r));const K={};if(M[0]&101|M[1]&2048&&(K.$$scope={dirty:M,ctx:e}),l.$set(K),M[0]&24557){h=ye(e[36].lessons),fe();for(let G=0;G<f.length;G+=1)f[G].r();f=Je(f,M,v,1,e,h,c,u,Ot,dt,null,ft);for(let G=0;G<f.length;G+=1)f[G].a();ue(),!h.length&&z?z.p(e,M):h.length?z&&(z.d(1),z=null):(z=ut(e),z.c(),z.m(u,null))}d&&Be(d.update)&&M[0]&34&&d.update.call(null,{items:e[36].lessons,flipDurationMs:Te,dropTargetStyle:{border:"2px #1d4ed8 solid","border-style":"dashed"},dragDisabled:!e[1]})},i(S){if(!_){w(a),w(l.$$.fragment,S);for(let M=0;M<h.length;M+=1)w(f[M]);_=!0}},o(S){I(a),I(l.$$.fragment,S);for(let M=0;M<f.length;M+=1)I(f[M]);_=!1},d(S){S&&$(s),P[o].d(),T(l);for(let M=0;M<f.length;M+=1)f[M].d();z&&z.d(),m=!1,qe(g)}}}function $s(n){let e,s,t,o,a=[],r=new Map,l,i,u,f;function c(m){n[20](m)}let d={deleteLesson:n[13]};n[4]!==void 0&&(d.openDeleteModal=n[4]),e=new Mt({props:d}),re.push(()=>oe(e,"openDeleteModal",c));let p=ye(n[5]);const _=m=>m[36].id;for(let m=0;m<p.length;m+=1){let g=at(n,p,m),D=_(g);r.set(D,a[m]=ct(D,g))}return{c(){L(e.$$.fragment),t=R(),o=A("section");for(let m=0;m<a.length;m+=1)a[m].c();this.h()},l(m){C(e.$$.fragment,m),t=F(m),o=H(m,"SECTION",{class:!0});var g=O(o);for(let D=0;D<a.length;D+=1)a[D].l(g);g.forEach($),this.h()},h(){E(o,"class","m-auto w-full p-3 lg:w-11/12 lg:px-4")},m(m,g){V(e,m,g),j(m,t,g),j(m,o,g);for(let D=0;D<a.length;D+=1)a[D]&&a[D].m(o,null);i=!0,u||(f=[Ue(l=Qe.call(null,o,{items:n[5],flipDurationMs:Te,type:"rows",dropTargetStyle:{border:"2px #1d4ed8 solid","border-style":"dashed"},dragDisabled:!n[1]})),we(o,"consider",n[16]),we(o,"finalize",n[17])],u=!0)},p(m,g){const D={};!s&&g[0]&16&&(s=!0,D.openDeleteModal=m[4],ie(()=>s=!1)),e.$set(D),g[0]&843759&&(p=ye(m[5]),fe(),a=Je(a,g,_,1,m,p,r,o,bt,ct,null,at),ue()),l&&Be(l.update)&&g[0]&34&&l.update.call(null,{items:m[5],flipDurationMs:Te,type:"rows",dropTargetStyle:{border:"2px #1d4ed8 solid","border-style":"dashed"},dragDisabled:!m[1]})},i(m){if(!i){w(e.$$.fragment,m);for(let g=0;g<p.length;g+=1)w(a[g]);i=!0}},o(m){I(e.$$.fragment,m);for(let g=0;g<a.length;g+=1)I(a[g]);i=!1},d(m){m&&($(t),$(o)),T(e,m);for(let g=0;g<a.length;g+=1)a[g].d();u=!1,qe(f)}}}const Te=200;function mt(n,e){const s=n.findIndex(t=>t.id===e);return s<9?"0"+(s+1):s+1}const _t=n=>n.count;function hs(n,e,s){let t,o,a,r,l;Z(n,ne,k=>s(5,t=k)),Z(n,Le,k=>s(6,o=k)),Z(n,wt,k=>s(7,a=k)),Z(n,We,k=>s(8,r=k)),Z(n,ze,k=>s(9,l=k));let{reorder:i=!1}=e,{lessonEditing:u}=e,f,c,d=!1,p={id:"",isSection:!1};function _(k){s(0,u=k.sectionId||k.lessonId),s(2,f=k.sectionTitle||k.lessonTitle)}async function m(k,W){if(k.sectionId){const Y=t.find(ve=>ve.id===k.sectionId);if(!Y)return;const se=await ht(Y,Y.course_id);se&&Object.keys(se).length&&s(3,c={title:se==null?void 0:se.title})}else if(W){const Y=await Ve(W,W.course_id);Y&&Object.keys(Y).length&&s(3,c={title:Y==null?void 0:Y.title})}c!=null&&c.title||(P(),Dt.success("snackbar.success_update"))}function g(k){p.id=k.sectionId||k.lessonId||"",p.isSection=!!k.sectionId,s(4,d=!0)}function D(){p.isSection?zt(p.id):vt(p.id)}function P(){s(0,u=void 0),s(2,f=void 0),s(3,c={})}function U(k){be.update(()=>({open:!0,isSection:!1,id:k}))}function h(k){te(ne,t=k.detail.items,t)}function v(k){const W=t.reduce((Y,se)=>({...Y,[se.id]:se.order}),{});te(ne,t=k.detail.items,t),k.detail.items.forEach((Y,se)=>{const ve=se+1;ve!==W[Y.id]&&(te(ne,t[se].order=ve,t),Ft({order:ve},Y.id).then(pe=>console.log("updated section order",pe)))})}function z(k,W){const Y=t.findIndex(se=>se.id===k);te(ne,t[Y].lessons=W.detail.items,t),te(ne,t=[...t],t)}function B(k,W){const Y=t.findIndex(pe=>pe.id===k),se=t[Y],ve=se.lessons.reduce((pe,Ce)=>({...pe,[Ce.id]:Ce.order}),{});te(ne,t[Y].lessons=W.detail.items,t),te(ne,t=[...t],t),W.detail.items.forEach((pe,Ce)=>{const Re=Ce+1;if(Re!==ve[pe.id]||pe.section_id!==se.id){se.lessons[Ce].order=Re;const St={order:Re,section_id:t[Y].id};It(St,pe.id).then(yt=>console.log("updated lesson order",yt))}})}function N(k){d=k,s(4,d)}function S(k,W){n.$$.not_equal(W.title,k)&&(W.title=k,ne.set(t))}const M=(k,W,Y)=>{te(ne,W[Y].title=f??k.title,t),P()},q=k=>m({sectionId:k.id}),K=k=>U(k.id),G=k=>_({sectionId:k.id,sectionTitle:k.title}),Se=k=>g({sectionId:k.id});function J(k,W){n.$$.not_equal(W.title,k)&&(W.title=k,ne.set(t))}const Q=(k,W,Y)=>{te(ne,W[Y].title=f??k.title,t),P()},ce=k=>m({lessonId:k.id},k),y=(k,W,Y)=>{te(ne,W[Y].is_unlocked=!k.is_unlocked,t),Ve(k,l.id)},le=k=>_({lessonId:k.id,lessonTitle:k.title}),me=k=>g({lessonId:k.id}),_e=(k,W)=>z(k.id,W),he=(k,W)=>B(k.id,W);return n.$$set=k=>{"reorder"in k&&s(1,i=k.reorder),"lessonEditing"in k&&s(0,u=k.lessonEditing)},[u,i,f,c,d,t,o,a,r,l,_,m,g,D,P,U,h,v,z,B,N,S,M,q,K,G,Se,J,Q,ce,y,le,me,_e,he]}class vs extends De{constructor(e){super(),Ee(this,e,hs,$s,Me,{reorder:1,lessonEditing:0},null,[-1,-1])}}function pt(n){return{c:ae,l:ae,m:ae,d:ae}}function bs(n){let e,s,t,o,a,r,l,i,u,f,c;function d(m){n[7](m)}let p={label:n[4](`course.navItem.lessons.add_lesson.${n[3].isSection?"lesson_section_title":"lesson_title"}`),autoFocus:!0,className:"flex-1 min-w-lg max-w-lg",isRequired:!0,errorMessage:n[0].title};n[1].title!==void 0&&(p.value=n[1].title),t=new Pe({props:p}),re.push(()=>oe(t,"value",d));let _=n[2].type==tt.LIVE_CLASS&&pt();return i=new de({props:{label:n[4]("course.navItem.lessons.add_lesson.save"),onClick:n[5]}}),{c(){e=A("form"),s=A("div"),L(t.$$.fragment),a=R(),_&&_.c(),r=R(),l=A("div"),L(i.$$.fragment),this.h()},l(m){e=H(m,"FORM",{class:!0});var g=O(e);s=H(g,"DIV",{class:!0});var D=O(s);C(t.$$.fragment,D),a=F(D),_&&_.l(D),D.forEach($),g.forEach($),r=F(m),l=H(m,"DIV",{class:!0});var P=O(l);C(i.$$.fragment,P),P.forEach($),this.h()},h(){E(s,"class","w-full"),E(e,"class","relative m-auto py-2 md:py-3 px-2 md:px-5 mb-2 md:mb-4 flex flex-wrap items-center dark:bg-neutral-800"),E(l,"class","flex flex-row-reverse")},m(m,g){j(m,e,g),b(e,s),V(t,s,null),b(s,a),_&&_.m(s,null),j(m,r,g),j(m,l,g),V(i,l,null),u=!0,f||(c=we(e,"submit",Lt(n[5])),f=!0)},p(m,g){const D={};g&24&&(D.label=m[4](`course.navItem.lessons.add_lesson.${m[3].isSection?"lesson_section_title":"lesson_title"}`)),g&1&&(D.errorMessage=m[0].title),!o&&g&2&&(o=!0,D.value=m[1].title,ie(()=>o=!1)),t.$set(D),m[2].type==tt.LIVE_CLASS?_||(_=pt(),_.c(),_.m(s,null)):_&&(_.d(1),_=null);const P={};g&16&&(P.label=m[4]("course.navItem.lessons.add_lesson.save")),i.$set(P)},i(m){u||(w(t.$$.fragment,m),w(i.$$.fragment,m),u=!0)},o(m){I(t.$$.fragment,m),I(i.$$.fragment,m),u=!1},d(m){m&&($(e),$(r),$(l)),T(t),_&&_.d(),T(i),f=!1,c()}}}function ks(n){let e,s,t;function o(r){n[8](r)}let a={onClose:n[6],width:"w-[80%] md:w-[65%]",maxWidth:"max-w-2xl",containerClass:"overflow-hidden",modalHeading:n[4](`course.navItem.lessons.add_lesson.${n[3].isSection?"modal_heading_section":"modal_heading"}`),$$slots:{default:[bs]},$$scope:{ctx:n}};return n[3].open!==void 0&&(a.open=n[3].open),e=new Ze({props:a}),re.push(()=>oe(e,"open",o)),{c(){L(e.$$.fragment)},l(r){C(e.$$.fragment,r)},m(r,l){V(e,r,l),t=!0},p(r,[l]){const i={};l&24&&(i.modalHeading=r[4](`course.navItem.lessons.add_lesson.${r[3].isSection?"modal_heading_section":"modal_heading"}`)),l&2079&&(i.$$scope={dirty:l,ctx:r}),!s&&l&8&&(s=!0,i.open=r[3].open,ie(()=>s=!1)),e.$set(i)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){T(e,r)}}}function ws(n,e,s){let t,o,a,r,l;Z(n,ze,_=>s(2,t=_)),Z(n,be,_=>s(3,o=_)),Z(n,ge,_=>s(9,a=_)),Z(n,ne,_=>s(10,r=_)),Z(n,Le,_=>s(4,l=_));let i={title:""},u={id:"",course_id:t.id||"",title:"",profile:void 0,call_url:void 0,lesson_at:new Date().toDateString(),is_unlocked:!0,lesson_completion:[],created_at:""};const f=async()=>{if(!u.title.trim()){s(0,i.title="title cannot be empty",i);return}if(o.isSection){const _=await ht({title:u.title,order:r.length},t.id);if(Array.isArray(_)&&_[0]){const m=_[0];ne.update(g=>[...g,{id:m.id,title:u.title,order:m.order,course_id:m.course_id,lessons:[],created_at:""}])}}else{s(1,u.section_id=o.id||void 0,u);const _=await Ve(u,t.id);if(Array.isArray(_)&&_[0]){const m=_[0];s(1,u.id=m.id,u),te(ge,a=[...a,u],a),ne.update(g=>g.map(D=>(D.id===m.section_id&&(D.lessons=[...D.lessons,u]),D))),je("/courses/"+t.id+"/lessons/"+u.id)}}c()};function c(){te(be,o.open=!1,o),s(1,u={id:"",course_id:t.id||"",title:"",profile:void 0,call_url:void 0,lesson_at:new Date().toDateString(),is_unlocked:!0,lesson_completion:[],created_at:""})}function d(_){n.$$.not_equal(u.title,_)&&(u.title=_,s(1,u))}function p(_){n.$$.not_equal(o.open,_)&&(o.open=_,be.set(o))}return[i,u,t,o,l,f,c,d,p]}class Is extends De{constructor(e){super(),Ee(this,e,ws,ks,Me,{})}}function Ds(n){let e,s,t,o=n[2]("course.navItem.lessons.section_prompt.title")+"",a,r,l,i=n[2]("course.navItem.lessons.section_prompt.description")+"",u,f,c,d,p,_,m;return d=new de({props:{variant:Ie.OUTLINED,label:n[2]("course.navItem.lessons.section_prompt.cancel"),onClick:n[4]}}),_=new de({props:{label:n[2]("course.navItem.lessons.section_prompt.activate"),onClick:n[3],isLoading:n[1]}}),{c(){e=A("div"),s=A("div"),t=A("h3"),a=X(o),r=R(),l=A("p"),u=X(i),f=R(),c=A("div"),L(d.$$.fragment),p=R(),L(_.$$.fragment),this.h()},l(g){e=H(g,"DIV",{class:!0});var D=O(e);s=H(D,"DIV",{class:!0});var P=O(s);t=H(P,"H3",{class:!0});var U=O(t);a=x(U,o),U.forEach($),r=F(P),l=H(P,"P",{class:!0});var h=O(l);u=x(h,i),h.forEach($),P.forEach($),f=F(D),c=H(D,"DIV",{class:!0});var v=O(c);C(d.$$.fragment,v),p=F(v),C(_.$$.fragment,v),v.forEach($),D.forEach($),this.h()},h(){E(t,"class","text-center text-2xl"),E(l,"class","text-center max-w-md"),E(s,"class","mb-8"),E(c,"class","flex gap-2"),E(e,"class","flex flex-col w-full items-center")},m(g,D){j(g,e,D),b(e,s),b(s,t),b(t,a),b(s,r),b(s,l),b(l,u),b(e,f),b(e,c),V(d,c,null),b(c,p),V(_,c,null),m=!0},p(g,D){(!m||D&4)&&o!==(o=g[2]("course.navItem.lessons.section_prompt.title")+"")&&ee(a,o),(!m||D&4)&&i!==(i=g[2]("course.navItem.lessons.section_prompt.description")+"")&&ee(u,i);const P={};D&4&&(P.label=g[2]("course.navItem.lessons.section_prompt.cancel")),d.$set(P);const U={};D&4&&(U.label=g[2]("course.navItem.lessons.section_prompt.activate")),D&2&&(U.isLoading=g[1]),_.$set(U)},i(g){m||(w(d.$$.fragment,g),w(_.$$.fragment,g),m=!0)},o(g){I(d.$$.fragment,g),I(_.$$.fragment,g),m=!1},d(g){g&&$(e),T(d),T(_)}}}function Es(n){let e,s,t;function o(r){n[5](r)}let a={onClose:n[4],width:"w-[80%] md:w-[65%]",maxWidth:"max-w-xl",modalHeading:n[2]("course.navItem.lessons.section_prompt.header"),$$slots:{default:[Ds]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.open=n[0]),e=new Ze({props:a}),re.push(()=>oe(e,"open",o)),{c(){L(e.$$.fragment)},l(r){C(e.$$.fragment,r)},m(r,l){V(e,r,l),t=!0},p(r,[l]){const i={};l&4&&(i.modalHeading=r[2]("course.navItem.lessons.section_prompt.header")),l&134&&(i.$$scope={dirty:l,ctx:r}),!s&&l&1&&(s=!0,i.open=r[0],ie(()=>s=!1)),e.$set(i)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){T(e,r)}}}function Ms(n,e,s){let t,o;Z(n,ze,f=>s(6,t=f)),Z(n,Le,f=>s(2,o=f));let{open:a=!1}=e,r=!1;const l=async()=>{s(1,r=!0);const{error:f}=await Bt.rpc("convert_course_to_v2",{course_id_arg:t.id});if(f){Dt.error("snackbar.something");return}window.location.reload()};function i(){s(0,a=!1)}function u(f){a=f,s(0,a)}return n.$$set=f=>{"open"in f&&s(0,a=f.open)},[a,r,o,l,i,u]}class Ss extends De{constructor(e){super(),Ee(this,e,Ms,Es,Me,{open:0})}}function gt(n){let e,s;return e=new de({props:{label:n[9]("course.navItem.lessons.section_prompt.cta"),variant:Ie.OUTLINED,onClick:n[17],isDisabled:!!n[10]}}),{c(){L(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,o){V(e,t,o),s=!0},p(t,o){const a={};o[0]&512&&(a.label=t[9]("course.navItem.lessons.section_prompt.cta")),o[0]&128&&(a.onClick=t[17]),e.$set(a)},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){T(e,t)}}}function ys(n){let e,s,t,o,a,r=n[3].version===ke.V1&&gt(n);return s=new de({props:{label:n[9](`course.navItem.lessons.add_lesson.${n[6]?"end_reorder":"start_reorder"}`),variant:Ie.OUTLINED,onClick:n[18],isDisabled:!!n[10]}}),o=new de({props:{label:n[9]("course.navItem.lessons.add_lesson.button_title"),onClick:n[11],isDisabled:!!n[10]}}),{c(){r&&r.c(),e=R(),L(s.$$.fragment),t=R(),L(o.$$.fragment)},l(l){r&&r.l(l),e=F(l),C(s.$$.fragment,l),t=F(l),C(o.$$.fragment,l)},m(l,i){r&&r.m(l,i),j(l,e,i),V(s,l,i),j(l,t,i),V(o,l,i),a=!0},p(l,i){l[3].version===ke.V1?r?(r.p(l,i),i[0]&8&&w(r,1)):(r=gt(l),r.c(),w(r,1),r.m(e.parentNode,e)):r&&(fe(),I(r,1,1,()=>{r=null}),ue());const u={};i[0]&576&&(u.label=l[9](`course.navItem.lessons.add_lesson.${l[6]?"end_reorder":"start_reorder"}`)),i[0]&64&&(u.onClick=l[18]),s.$set(u);const f={};i[0]&512&&(f.label=l[9]("course.navItem.lessons.add_lesson.button_title")),o.$set(f)},i(l){a||(w(r),w(s.$$.fragment,l),w(o.$$.fragment,l),a=!0)},o(l){I(r),I(s.$$.fragment,l),I(o.$$.fragment,l),a=!1},d(l){l&&($(e),$(t)),r&&r.d(l),T(s,l),T(o,l)}}}function Ls(n){let e,s,t;return s=new He({props:{allowedRoles:[1,2],$$slots:{default:[ys]},$$scope:{ctx:n}}}),{c(){e=A("div"),L(s.$$.fragment),this.h()},l(o){e=H(o,"DIV",{slot:!0,class:!0});var a=O(e);C(s.$$.fragment,a),a.forEach($),this.h()},h(){E(e,"slot","widget"),E(e,"class","flex w-full justify-end gap-2")},m(o,a){j(o,e,a),V(s,e,null),t=!0},p(o,a){const r={};a[0]&712|a[1]&1&&(r.$$scope={dirty:a,ctx:o}),s.$set(r)},i(o){t||(w(s.$$.fragment,o),t=!0)},o(o){I(s.$$.fragment,o),t=!1},d(o){o&&$(e),T(s)}}}function Cs(n){let e,s;return e=new Ye({props:{className:"w-full lg:w-11/12 lg:px-4 m-auto",$$slots:{default:[zs]},$$scope:{ctx:n}}}),{c(){L(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,o){V(e,t,o),s=!0},p(t,o){const a={};o[0]&512|o[1]&1&&(a.$$scope={dirty:o,ctx:t}),e.$set(a)},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){T(e,t)}}}function Vs(n){let e,s,t,o,a,r=n[6]&&$t(n);const l=[Os,Ns],i=[];function u(f,c){return f[3].version===ke.V1?0:f[3].version===ke.V2?1:-1}return~(s=u(n))&&(t=i[s]=l[s](n)),{c(){r&&r.c(),e=R(),t&&t.c(),o=Ae()},l(f){r&&r.l(f),e=F(f),t&&t.l(f),o=Ae()},m(f,c){r&&r.m(f,c),j(f,e,c),~s&&i[s].m(f,c),j(f,o,c),a=!0},p(f,c){f[6]?r?r.p(f,c):(r=$t(f),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null);let d=s;s=u(f),s===d?~s&&i[s].p(f,c):(t&&(fe(),I(i[d],1,1,()=>{i[d]=null}),ue()),~s?(t=i[s],t?t.p(f,c):(t=i[s]=l[s](f),t.c()),w(t,1),t.m(o.parentNode,o)):t=null)},i(f){a||(w(t),a=!0)},o(f){I(t),a=!1},d(f){f&&($(e),$(o)),r&&r.d(f),~s&&i[s].d(f)}}}function Ts(n){let e,s;return e=new Ye({props:{className:"w-full lg:w-11/12 lg:px-4 m-auto",$$slots:{default:[As]},$$scope:{ctx:n}}}),{c(){L(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,o){V(e,t,o),s=!0},p(t,o){const a={};o[0]&512|o[1]&1&&(a.$$scope={dirty:o,ctx:t}),e.$set(a)},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){T(e,t)}}}function zs(n){let e,s,t,o,a,r=n[9]("course.navItem.lessons.body_header")+"",l,i,u,f=n[9]("course.navItem.lessons.body_content")+"",c;return{c(){e=A("div"),s=A("img"),o=R(),a=A("h2"),l=X(r),i=R(),u=A("p"),c=X(f),this.h()},l(d){e=H(d,"DIV",{class:!0});var p=O(e);s=H(p,"IMG",{src:!0,alt:!0,class:!0}),o=F(p),a=H(p,"H2",{class:!0});var _=O(a);l=x(_,r),_.forEach($),i=F(p),u=H(p,"P",{class:!0});var m=O(u);c=x(m,f),m.forEach($),p.forEach($),this.h()},h(){Ge(s.src,t="/images/empty-lesson-icon.svg")||E(s,"src",t),E(s,"alt","Lesson"),E(s,"class","my-2.5 mx-auto"),E(a,"class","text-xl my-1.5 font-normal"),E(u,"class","text-sm text-center text-slate-500"),E(e,"class","flex justify-between flex-col items-center")},m(d,p){j(d,e,p),b(e,s),b(e,o),b(e,a),b(a,l),b(e,i),b(e,u),b(u,c)},p(d,p){p[0]&512&&r!==(r=d[9]("course.navItem.lessons.body_header")+"")&&ee(l,r),p[0]&512&&f!==(f=d[9]("course.navItem.lessons.body_content")+"")&&ee(c,f)},d(d){d&&$(e)}}}function $t(n){let e,s=n[9]("course.navItem.lessons.drag")+"",t;return{c(){e=A("p"),t=X(s),this.h()},l(o){e=H(o,"P",{class:!0});var a=O(e);t=x(a,s),a.forEach($),this.h()},h(){E(e,"class","text-gray-400 text-center dark:text-white italic text-xs")},m(o,a){j(o,e,a),b(e,t)},p(o,a){a[0]&512&&s!==(s=o[9]("course.navItem.lessons.drag")+"")&&ee(t,s)},d(o){o&&$(e)}}}function Ns(n){let e,s;return e=new vs({props:{reorder:n[6],lessonEditing:n[10]}}),{c(){L(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,o){V(e,t,o),s=!0},p(t,o){const a={};o[0]&64&&(a.reorder=t[6]),e.$set(a)},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){T(e,t)}}}function Os(n){let e,s,t,o;function a(i){n[19](i)}function r(i){n[20](i)}let l={reorder:n[6],lessonEditing:n[10]};return n[4]!==void 0&&(l.lessonToDelete=n[4]),n[5]!==void 0&&(l.openDeleteModal=n[5]),e=new ns({props:l}),re.push(()=>oe(e,"lessonToDelete",a)),re.push(()=>oe(e,"openDeleteModal",r)),{c(){L(e.$$.fragment)},l(i){C(e.$$.fragment,i)},m(i,u){V(e,i,u),o=!0},p(i,u){const f={};u[0]&64&&(f.reorder=i[6]),!s&&u[0]&16&&(s=!0,f.lessonToDelete=i[4],ie(()=>s=!1)),!t&&u[0]&32&&(t=!0,f.openDeleteModal=i[5],ie(()=>t=!1)),e.$set(f)},i(i){o||(w(e.$$.fragment,i),o=!0)},o(i){I(e.$$.fragment,i),o=!1},d(i){T(e,i)}}}function As(n){let e,s,t,o,a,r=n[9]("course.navItem.lessons.no_lesson")+"",l,i,u,f=n[9]("course.navItem.lessons.share_your_knowledge")+"",c;return{c(){e=A("div"),s=A("img"),o=R(),a=A("h2"),l=X(r),i=R(),u=A("p"),c=X(f),this.h()},l(d){e=H(d,"DIV",{class:!0});var p=O(e);s=H(p,"IMG",{src:!0,alt:!0,class:!0}),o=F(p),a=H(p,"H2",{class:!0});var _=O(a);l=x(_,r),_.forEach($),i=F(p),u=H(p,"P",{class:!0});var m=O(u);c=x(m,f),m.forEach($),p.forEach($),this.h()},h(){Ge(s.src,t="/images/empty-lesson-icon.svg")||E(s,"src",t),E(s,"alt","Lesson"),E(s,"class","mx-auto my-2.5"),E(a,"class","my-1.5 text-xl font-normal"),E(u,"class","text-center text-sm text-slate-500"),E(e,"class","flex flex-col items-center justify-between")},m(d,p){j(d,e,p),b(e,s),b(e,o),b(e,a),b(a,l),b(e,i),b(e,u),b(u,c)},p(d,p){p[0]&512&&r!==(r=d[9]("course.navItem.lessons.no_lesson")+"")&&ee(l,r),p[0]&512&&f!==(f=d[9]("course.navItem.lessons.share_your_knowledge")+"")&&ee(c,f)},d(d){d&&$(e)}}}function Hs(n){let e,s,t,o;const a=[Ts,Vs,Cs],r=[];function l(i,u){return i[2]?0:i[8]>0?1:2}return e=l(n),s=r[e]=a[e](n),{c(){s.c(),t=Ae()},l(i){s.l(i),t=Ae()},m(i,u){r[e].m(i,u),j(i,t,u),o=!0},p(i,u){let f=e;e=l(i),e===f?r[e].p(i,u):(fe(),I(r[f],1,1,()=>{r[f]=null}),ue(),s=r[e],s?s.p(i,u):(s=r[e]=a[e](i),s.c()),w(s,1),s.m(t.parentNode,t))},i(i){o||(w(s),o=!0)},o(i){I(s),o=!1},d(i){i&&$(t),r[e].d(i)}}}function Ps(n){let e,s,t,o;return e=new Ct({props:{title:n[9]("course.navItem.lessons.heading_v2"),$$slots:{widget:[Ls]},$$scope:{ctx:n}}}),t=new Tt({props:{width:"max-w-6xl",padding:"p-0",$$slots:{default:[Hs]},$$scope:{ctx:n}}}),{c(){L(e.$$.fragment),s=R(),L(t.$$.fragment)},l(a){C(e.$$.fragment,a),s=F(a),C(t.$$.fragment,a)},m(a,r){V(e,a,r),j(a,s,r),V(t,a,r),o=!0},p(a,r){const l={};r[0]&512&&(l.title=a[9]("course.navItem.lessons.heading_v2")),r[0]&712|r[1]&1&&(l.$$scope={dirty:r,ctx:a}),e.$set(l);const i={};r[0]&892|r[1]&1&&(i.$$scope={dirty:r,ctx:a}),t.$set(i)},i(a){o||(w(e.$$.fragment,a),w(t.$$.fragment,a),o=!0)},o(a){I(e.$$.fragment,a),I(t.$$.fragment,a),o=!1},d(a){a&&$(s),T(e,a),T(t,a)}}}function Rs(n){let e,s,t,o,a,r,l,i,u,f,c,d;e=new Is({});function p(h){n[14](h)}let _={};n[7]!==void 0&&(_.open=n[7]),t=new Ss({props:_}),re.push(()=>oe(t,"open",p));function m(h){n[16](h)}let g={deleteLesson:n[15]};n[5]!==void 0&&(g.openDeleteModal=n[5]),r=new Mt({props:g}),re.push(()=>oe(r,"openDeleteModal",m));function D(h){n[21](h)}function P(h){n[22](h)}let U={$$slots:{default:[Ps]},$$scope:{ctx:n}};return n[1]!==void 0&&(U.isFetching=n[1]),n[0].courseId!==void 0&&(U.courseId=n[0].courseId),u=new Vt({props:U}),re.push(()=>oe(u,"isFetching",D)),re.push(()=>oe(u,"courseId",P)),{c(){L(e.$$.fragment),s=R(),L(t.$$.fragment),a=R(),L(r.$$.fragment),i=R(),L(u.$$.fragment)},l(h){C(e.$$.fragment,h),s=F(h),C(t.$$.fragment,h),a=F(h),C(r.$$.fragment,h),i=F(h),C(u.$$.fragment,h)},m(h,v){V(e,h,v),j(h,s,v),V(t,h,v),j(h,a,v),V(r,h,v),j(h,i,v),V(u,h,v),d=!0},p(h,v){const z={};!o&&v[0]&128&&(o=!0,z.open=h[7],ie(()=>o=!1)),t.$set(z);const B={};v[0]&16&&(B.deleteLesson=h[15]),!l&&v[0]&32&&(l=!0,B.openDeleteModal=h[5],ie(()=>l=!1)),r.$set(B);const N={};v[0]&1020|v[1]&1&&(N.$$scope={dirty:v,ctx:h}),!f&&v[0]&2&&(f=!0,N.isFetching=h[1],ie(()=>f=!1)),!c&&v[0]&1&&(c=!0,N.courseId=h[0].courseId,ie(()=>c=!1)),u.$set(N)},i(h){d||(w(e.$$.fragment,h),w(t.$$.fragment,h),w(r.$$.fragment,h),w(u.$$.fragment,h),d=!0)},o(h){I(e.$$.fragment,h),I(t.$$.fragment,h),I(r.$$.fragment,h),I(u.$$.fragment,h),d=!1},d(h){h&&($(s),$(a),$(i)),T(e,h),T(t,h),T(r,h),T(u,h)}}}function Fs(n,e,s){let t,o,a,r,l,i,u,f,c;Z(n,ne,y=>s(12,a=y)),Z(n,ge,y=>s(13,r=y)),Z(n,ze,y=>s(3,l=y)),Z(n,Nt,y=>s(23,i=y)),Z(n,be,y=>s(24,u=y)),Z(n,We,y=>s(25,f=y)),Z(n,Le,y=>s(9,c=y));let{data:d}=e;const p=new URLSearchParams(f.url.search);let _,m,g=!1,D=!1,P=!1,U=!1;function h(){te(be,u.open=!0,u),te(be,u.isSection=l.version===ke.V2,u)}function v(y){return y==null?void 0:y.find(le=>le.profile_id===i.id)}const z=()=>{if(l.version===ke.V1)return r;{const y=[];return a.forEach(le=>{y.push(...le.lessons)}),y}};function B(){return z().find(y=>!v(y.lesson_completion)&&y.is_unlocked===!0)}function N(y){if(!D&&y.length>0){const le=B();le?je(`/courses/${d.courseId}/lessons/${le.id}`):je(`/courses/${d.courseId}/lessons`)}}function S(y){U=y,s(7,U)}const M=()=>vt(m==null?void 0:m.id);function q(y){g=y,s(5,g)}const K=()=>s(7,U=!U),G=()=>s(6,P=!P);function Se(y){m=y,s(4,m)}function J(y){g=y,s(5,g)}function Q(y){D=y,s(1,D)}function ce(y){n.$$.not_equal(d.courseId,y)&&(d.courseId=y,s(0,d))}return n.$$set=y=>{"data"in y&&s(0,d=y.data)},n.$$.update=()=>{n.$$.dirty[0]&8198&&!D&&t&&N(r),n.$$.dirty[0]&12296&&s(8,o=l.version===ke.V1?r.length:a.length)},s(2,t=p.get("next")==="true"),[d,D,t,l,m,g,P,U,o,c,_,h,a,r,S,M,q,K,G,Se,J,Q,ce]}class pn extends De{constructor(e){super(),Ee(this,e,Fs,Rs,Me,{data:0},null,[-1,-1])}}export{pn as component,_n as universal};
//# sourceMappingURL=14.ea021560.js.map
