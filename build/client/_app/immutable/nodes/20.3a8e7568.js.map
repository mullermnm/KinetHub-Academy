{"version":3,"file":"20.3a8e7568.js","sources":["../../../../../../src/routes/forgot/+page.svelte"],"sourcesContent":["<script>\n  import { goto } from '$app/navigation';\n  import TextField from '$lib/components/Form/TextField.svelte';\n  import PrimaryButton from '$lib/components/PrimaryButton/index.svelte';\n  import { VARIANTS } from '$lib/components/PrimaryButton/constants';\n  import { getSupabase } from '$lib/utils/functions/supabase';\n  import { forgotValidation } from '$lib/utils/functions/validator';\n  import { ROUTE } from '$lib/utils/constants/routes';\n  import { FORGOT_PASSWORD_FIELDS } from '$lib/utils/constants/authentication';\n  import AuthUI from '$lib/components/AuthUI/index.svelte';\n  import EmailSentIcon from '$lib/components/Icons/EmailSentIcon.svelte';\n\n  let supabase = getSupabase();\n  let fields = Object.assign({}, FORGOT_PASSWORD_FIELDS);\n  let submitError;\n  let loading = false;\n  let success = false;\n  let errors = {};\n\n  async function handleSubmit() {\n    errors = forgotValidation(fields);\n    console.log('errors', errors);\n\n    if (Object.keys(errors).length) {\n      return;\n    }\n\n    try {\n      loading = true;\n      const { data, error } = await supabase.auth.resetPasswordForEmail(fields.email, {\n        redirectTo: `${window.location.origin}/reset`\n      });\n      console.log('data', data);\n      if (error) throw error;\n\n      success = true;\n    } catch (error) {\n      submitError = error.error_description || error.message;\n    } finally {\n      loading = false;\n    }\n  }\n</script>\n\n<svelte:head>\n  <title>Reset Password - KinetsHub</title>\n</svelte:head>\n\n<AuthUI {supabase} {handleSubmit} showOnlyContent={true} showLogo={!success}>\n  {#if success}\n    <div class=\"mt-4 w-full flex items-center justify-center flex-col\">\n      <EmailSentIcon />\n      <h3 class=\"dark:text-white text-xl font-semibold my-3\">Email Sent!</h3>\n      <p class=\"dark:text-white text-md mb-6 text-center\">\n        We have sent a confirmation email to <span class=\"text-primary-700\">{fields.email}</span>.\n        Kindly check your inbox to reset password or spam to reset your password.\n      </p>\n    </div>\n\n    <div class=\"my-4 w-full flex justify-end items-center flex-col\">\n      <PrimaryButton\n        label=\"Okay\"\n        type=\"button\"\n        className=\"sm:w-full w-full mb-4\"\n        onClick={() => goto(ROUTE.LOGIN)}\n      />\n    </div>\n  {:else}\n    <div class=\"mt-4 w-full\">\n      <h3 class=\"dark:text-white text-xl font-semibold my-3\">Forgot Password</h3>\n      <p class=\"dark:text-white text-sm mb-6\">We will send you a reset link to your email</p>\n      <TextField\n        label=\"Your email\"\n        bind:value={fields.email}\n        type=\"email\"\n        autoFocus={true}\n        placeholder=\"you@domain.com\"\n        className=\"mb-6\"\n        inputClassName=\"w-full\"\n        isDisabled={loading}\n        errorMessage={errors.email}\n      />\n      {#if submitError}\n        <p class=\"text-sm text-red-500\">{submitError}</p>\n      {/if}\n    </div>\n\n    <div class=\"my-4 w-full flex justify-end items-center flex-col\">\n      <PrimaryButton\n        label=\"Reset Password\"\n        type=\"submit\"\n        className=\"sm:w-full w-full mb-4\"\n        isDisabled={loading}\n        isLoading={loading}\n      />\n      <PrimaryButton\n        label=\"Cancel\"\n        type=\"button\"\n        className=\"sm:w-full w-full text-primary-700\"\n        variant={VARIANTS.NONE}\n        onClick={() => goto(ROUTE.LOGIN)}\n      />\n    </div>\n  {/if}\n</AuthUI>\n"],"names":["ctx","textfield_props","VARIANTS","dirty","textfield_changes","t4_value","current","set_data","t4","supabase","getSupabase","fields","FORGOT_PASSWORD_FIELDS","loading","success","errors","$$invalidate","data","error","submitError","$$self","value"],"mappings":"sqGAgFsB,aAAAA,EAAA,CAAA,EAAA,OAPFA,EAAA,CAAA,EAAA,QAAA,SAAAC,EAAA,MAAAD,EAAA,CAAA,EAAA,oSA0BH,QAAAE,GAAA,67BAnBKC,EAAA,KAAAC,EAAA,aAAAJ,EAAA,CAAA,EAAA,sBAPFI,EAAA,MAAAJ,EAAA,CAAA,EAAA,sZAnByDK,EAAAL,EAAA,CAAA,EAAA,MAAA;;gmBAAA,CAAAM,GAAAH,EAAA,IAAAE,KAAAA,EAAAL,EAAA,CAAA,EAAA,MAAA,KAAAO,EAAAC,EAAAH,CAAA,mzCA1CvE,IAAAI,EAAAC,GAAA,EACAC,EAAA,OAAA,OAAA,CAAA,EAAAC,EAAA,IAEAC,EAAA,GACAC,EAAA,2BAOE,gBAFJ,QAAA,IAAA,SAAAC,CAAA,EAEI,QAAA,KAAAA,CAAA,EAAA,WAKFC,EAAA,EAAAH,EAAA,EAAA,oEAEE,WAAA,GAAA,OAAA,SAAA,MAAA,WAGE,GADJ,QAAA,IAAA,OAAAI,CAAA,EACIC,EAAA,MAAAA,EAEJF,EAAA,EAAAF,EAAA,EAAA,WAEAE,EAAA,EAAAG,EAAAD,EAAA,mBAAAA,EAAA,OAAA,UAEAF,EAAA,EAAAH,EAAA,EAAA,wCAkCcO,EAAA,GAAA,UAAAT,EAAA,MAAAU,CAAA,IAAAV,EAAA,MAAAU"}