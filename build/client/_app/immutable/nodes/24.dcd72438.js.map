{"version":3,"file":"24.dcd72438.js","sources":["../../../../../../src/lib/components/LMS/components/Learning.svelte","../../../../../../src/routes/lms/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { VARIANTS } from '$lib/components/PrimaryButton/constants';\n  import { goto } from '$app/navigation';\n  import PrimaryButton from '$lib/components/PrimaryButton/index.svelte';\n  import CoursesEmptyIcon from '$lib/components/Icons/CoursesEmptyIcon.svelte';\n  import { courses } from '$lib/components/Courses/store';\n  import { t } from '$lib/utils/functions/translations';\n\n  const gotoCourse = (id: string | undefined) => {\n    if (!id) return;\n    goto(`/courses/${id}/lessons?next=true`);\n  };\n\n  $: last3Courses = $courses.length > 0 ? $courses.slice(0, 3) : [];\n</script>\n\n<section class=\"h-full\">\n  <p class=\"text-base font-semibold text-[#040F2D] pb-3 dark:text-white\">\n    {$t('dashboard.current_lesson')}\n  </p>\n  <div\n    class=\"flex items-center flex-col border border-[#EAEAEA] dark:bg-neutral-800 gap-2 rounded w-full lg:h-[40vh] p-3\"\n  >\n    {#if last3Courses.length > 0}\n      <div class=\"w-full h-full flex flex-col justify-start overflow-y-auto\">\n        {#each last3Courses as course}\n          <div class=\"p-5\">\n            <span class=\"flex flex-col lg:flex-row gap-3 items-start pb-5\">\n              <img\n                src={course.logo || '/images/classroomio-course-img-template.jpg'}\n                alt=\"course\"\n                class=\"hidden lg:block lg:w-[60px] lg:h-[60px]\"\n              />\n              <div class=\"w-full\">\n                <p class=\"text-base font-semibold dark:text-white\">{course.title}</p>\n                <p class=\"line-clamp-2 text-xs font-normal text-[#656565] dark:text-white\">\n                  {course.description}\n                </p>\n              </div>\n              <PrimaryButton\n                label={$t('dashboard.continue')}\n                variant={VARIANTS.OUTLINED}\n                className=\"rounded-none text-[#0233BD]\"\n                onClick={() => gotoCourse(course.id)}\n              />\n            </span>\n            <div class=\"relative bg-[#EAEAEA] w-full h-1\">\n              <div\n                style=\"width: {Math.round(\n                  ((course?.progress_rate ?? 0) / (course?.total_lessons ?? 0)) * 100\n                ) || 0}%\"\n                class={`absolute top-0 left-0 bg-primary-700 h-full`}\n              />\n            </div>\n          </div>\n        {/each}\n      </div>\n    {:else}\n      <div class=\"flex flex-col items-center\">\n        <CoursesEmptyIcon />\n        <h3 class=\"text-center\">{$t('dashboard.no_courses')}</h3>\n        <p class=\"w-[75%] text-center\">{$t('dashboard.start_course')}</p>\n      </div>\n    {/if}\n  </div>\n</section>\n","<script lang=\"ts\">\n  import Learning from '$lib/components/LMS/components/Learning.svelte';\n  import PrimaryButton from '$lib/components/PrimaryButton/index.svelte';\n  import { VARIANTS } from '$lib/components/PrimaryButton/constants';\n  import { goto } from '$app/navigation';\n  import { profile } from '$lib/utils/store/user';\n  import { currentOrg } from '$lib/utils/store/org';\n  import { fetchCourses } from '$lib/utils/services/courses';\n  import { courses, courseMetaDeta } from '$lib/components/Courses/store';\n  import type { Course } from '$lib/utils/types';\n  import { getGreeting } from '$lib/utils/functions/date';\n  import { t } from '$lib/utils/functions/translations';\n  import VisitOrgSiteButton from '$lib/components/Buttons/VisitOrgSite.svelte';\n\n  let hasFetched = false;\n  let progressPercentage = 0;\n  let totalLessons = 0;\n  let totalCompleted = 0;\n\n  async function getCourses(userId: string | undefined, orgId: string) {\n    if (hasFetched || !userId || !orgId) {\n      return;\n    }\n    // only show is loading when fetching for the first time\n    if (!$courses.length) {\n      $courseMetaDeta.isLoading = true;\n    }\n\n    const coursesResult = await fetchCourses(userId, orgId);\n    console.log(`coursesResult`, coursesResult);\n\n    $courseMetaDeta.isLoading = false;\n    if (!coursesResult) return;\n\n    courses.set(coursesResult.allCourses);\n    hasFetched = true;\n  }\n\n  function calcTotalProgress(courses: Course[]) {\n    totalCompleted = courses.reduce((acc, cur) => acc + (cur.progress_rate || 0), 0);\n    totalLessons = courses.reduce((acc, cur) => acc + (cur.total_lessons || 0), 0);\n\n    progressPercentage = Math.round((totalCompleted / totalLessons) * 100) || 0;\n  }\n\n  $: getCourses($profile.id, $currentOrg.id);\n  $: calcTotalProgress($courses);\n</script>\n\n<svelte:head>\n  <title>Student Dashboard - KinetsHub</title>\n</svelte:head>\n\n<section class=\"max-w-6xl gap-5 mx-auto\">\n  <div class=\"m-5\">\n    <div class=\"flex items-center justify-between mb-10\">\n      <h1 class=\"dark:text-white text-2xl md:text-3xl font-bold\">\n        {$t(getGreeting())}\n        {$profile.fullname}!\n      </h1>\n\n      <VisitOrgSiteButton isLMS={true} />\n    </div>\n\n    <div\n      class=\"w-full h-fit lg:h-[265px] flex md:items-center justify-between flex-col-reverse md:flex-row p-5 lg:p-10 rounded-md bg-primary-900 my-2\"\n    >\n      <div class=\"w-full md:w-[75%] lg:w-[80%]\">\n        <p class=\" text-white text-xs lg:text-xl font-normal mb-5\">\n          {$currentOrg.customization.dashboard.bannerText\n            ? $currentOrg.customization.dashboard.bannerText\n            : $t('dashboard.lms_dashboard_hero')}\n        </p>\n        <PrimaryButton\n          label={$t('dashboard.dont')}\n          variant={VARIANTS.CONTAINED_WHITE}\n          onClick={() => goto('/lms/mylearning')}\n        />\n      </div>\n      <img\n        src={$currentOrg.customization.dashboard.bannerImage\n          ? $currentOrg.customization.dashboard.bannerImage\n          : '/images/student-learning.svg'}\n        alt=\"student Learning Pictogram\"\n        class=\"w-28 md:block md:w-1/3 lg:w-[275px] lg:h-[205px] mb-3 md:mb-0\"\n      />\n    </div>\n    <section class=\"flex w-full flex-col lg:flex-row md:gap-5\">\n      <div class=\"w-full lg:w-[50%] mt-10 xl:mt-2\">\n        <Learning />\n      </div>\n      <div class=\"mt-10 xl:mt-2 w-full lg:w-[50%]\">\n        <p class=\"text-base font-semibold text-[#040F2D] pb-3 dark:text-white\">\n          {$t('dashboard.your_progress')}\n        </p>\n        <div\n          class=\"flex items-center justify-center border border-[#EAEAEA] dark:bg-neutral-800 gap-2 rounded h-fit lg:h-[40vh] lg:overflow-y-auto p-3\"\n        >\n          <div\n            class=\"w-full h-full flex flex-col sm:flex-row xl:flex-col items-center justify-between lg:items-center xl:items-start gap-5 lg:justify-around\"\n          >\n            <div>\n              <img src=\"/images/target.svg\" alt=\"student Learning score\" />\n            </div>\n            <span class=\"text-center xl:text-start\">\n              <p class=\"text-base font-semibold py-2 text-[#040F2D] dark:text-white\">\n                {$t('dashboard.your_progress')}\n              </p>\n              {#if totalLessons > 0}\n                <p class=\"text-xs font-normal text-[#656565] dark:text-white\">\n                  {totalCompleted}/{totalLessons}\n                  {$t('dashboard.lessons_completed')}\n                </p>\n              {:else}\n                <p class=\"text-xs font-normal text-[#656565] dark:text-white\">\n                  {$t('dashboard.No_courses_started')}\n                </p>\n              {/if}\n            </span>\n            <h1\n              class=\"text-5xl lg:text-6xl font-bold text-[#262626] dark:text-white my-0 whitespace-nowrap\"\n            >\n              {progressPercentage} %\n            </h1>\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n</section>\n"],"names":["t1_value","ctx","t3_value","current","dirty","set_data","t1","t3","VARIANTS","set_style","div1","_a","_b","primarybutton_changes","t0_value","t0","id","goto","$$invalidate","last3Courses","$courses","t_1_value","t_1","t4_value","t4","getGreeting","t7_value","t12_value","t15_value","create_if_block","src_url_equal","img0","img0_src_value","t7","t12","t15","getCourses","userId","orgId","hasFetched","set_store_value","courseMetaDeta","$courseMetaDeta","coursesResult","progressPercentage","totalCompleted","totalLessons","func","$profile","$currentOrg","calcTotalProgress"],"mappings":"gwCA4DiCA,EAAAC,EAAA,CAAA,EAAA,sBAAA,EAAA,SACOC,EAAAD,EAAA,CAAA,EAAA,wBAAA,EAAA,sgBADP,CAAAE,GAAAC,EAAA,IAAAJ,KAAAA,EAAAC,EAAA,CAAA,EAAA,sBAAA,EAAA,KAAAI,EAAAC,EAAAN,CAAA,GACO,CAAAG,GAAAC,EAAA,IAAAF,KAAAA,EAAAD,EAAA,CAAA,EAAA,wBAAA,EAAA,KAAAI,EAAAE,EAAAL,CAAA,84BA3B4BF,EAAAC,EAAA,CAAA,EAAA,MAAA,SAEjDC,EAAAD,EAAA,CAAA,EAAA,YAAA,0EAII,MAAAA,EAAA,CAAA,EAAA,oBAAA,EACE,QAAAO,GAAA,kjCAOMC,GAAAC,EAAA,SAAA,KAAA,SAAAC,EAAAV,EAAA,CAAA,IAAA,YAAAU,EAAA,gBAAA,MAAAC,EAAAX,EAAA,CAAA,IAAA,YAAAW,EAAA,gBAAA,GAAA,GAAA,GAAA,GAAA,GAAA,yXAdqC,CAAAT,GAAAC,EAAA,IAAAJ,KAAAA,EAAAC,EAAA,CAAA,EAAA,MAAA,KAAAI,EAAAC,EAAAN,CAAA,GAEjD,CAAAG,GAAAC,EAAA,IAAAF,KAAAA,EAAAD,EAAA,CAAA,EAAA,YAAA,KAAAI,EAAAE,EAAAL,CAAA,aAIIE,EAAA,IAAAS,EAAA,MAAAZ,EAAA,CAAA,EAAA,oBAAA,2CAQQQ,GAAAC,EAAA,SAAA,KAAA,SAAAC,EAAAV,EAAA,CAAA,IAAA,YAAAU,EAAA,gBAAA,MAAAC,EAAAX,EAAA,CAAA,IAAA,YAAAW,EAAA,gBAAA,GAAA,GAAA,GAAA,GAAA,GAAA,gHA9B1BE,EAAAb,EAAA,CAAA,EAAA,0BAAA,EAAA,mpBAAA,CAAAE,GAAAC,EAAA,IAAAU,KAAAA,EAAAb,EAAA,CAAA,EAAA,0BAAA,EAAA,KAAAI,EAAAU,EAAAD,CAAA,sRATIE,GACLC,GAAA,YAAAD,CAAA,oBAAA,sDAGFE,EAAA,EAAAC,EAAAC,EAAA,OAAA,EAAAA,EAAA,MAAA,EAAA,CAAA,EAAA,CAAA,CAAA,uGCsGiBC,EAAApB,EAAA,CAAA,EAAA,8BAAA,EAAA,sNAAAG,EAAA,IAAAiB,KAAAA,EAAApB,EAAA,CAAA,EAAA,8BAAA,EAAA,KAAAI,EAAAiB,EAAAD,CAAA,+CAJAE,EAAAtB,EAAA,CAAA,EAAA,6BAAA,EAAA,8VAAAG,EAAA,IAAAmB,KAAAA,EAAAtB,EAAA,CAAA,EAAA,6BAAA,EAAA,KAAAI,EAAAmB,EAAAD,CAAA,+CAtDVvB,EAAAC,EAAA,CAAA,EAAAwB,GAAA,CAAA,EAAA,OACAvB,EAAAD,EAAA,CAAA,EAAA,SAAA,mBAWEyB,GAAAzB,EAAA,CAAA,EAAA,cAAA,UAAA,WACGA,EAAA,CAAA,EAAA,cAAA,UAAA,WACAA,EAAA,CAAA,EAAA,8BAAA,GAAA,8BAsBH0B,GAAA1B,EAAA,CAAA,EAAA,yBAAA,EAAA,0FAaM2B,GAAA3B,EAAA,CAAA,EAAA,yBAAA,EAAA,oEAhCA,MAAAA,EAAA,CAAA,EAAA,gBAAA,EACE,QAAAO,GAAA,8DAiCA,OAAAP,EAAA,CAAA,EAAA,EAAA4B,09DA5BNC,GAAAC,EAAA,IAAAC,EAAA/B,EAAA,CAAA,EAAA,cAAA,UAAA,YACDA,EAAA,CAAA,EAAA,cAAA,UAAA,y8CAxBH,CAAAE,GAAAC,EAAA,KAAAJ,KAAAA,EAAAC,EAAA,CAAA,EAAAwB,GAAA,CAAA,EAAA,KAAApB,EAAAC,EAAAN,CAAA,GACA,CAAAG,GAAAC,EAAA,IAAAF,KAAAA,EAAAD,EAAA,CAAA,EAAA,SAAA,KAAAI,EAAAE,EAAAL,CAAA,GAWE,CAAAC,GAAAC,EAAA,KAAAsB,KAAAA,GAAAzB,EAAA,CAAA,EAAA,cAAA,UAAA,WACGA,EAAA,CAAA,EAAA,cAAA,UAAA,WACAA,EAAA,CAAA,EAAA,8BAAA,GAAA,KAAAI,EAAA4B,EAAAP,CAAA,cAGGtB,EAAA,KAAAS,GAAA,MAAAZ,EAAA,CAAA,EAAA,gBAAA,eAMJ,CAAAE,GAAAC,EAAA,GAAA,CAAA0B,GAAAC,EAAA,IAAAC,EAAA/B,EAAA,CAAA,EAAA,cAAA,UAAA,YACDA,EAAA,CAAA,EAAA,cAAA,UAAA,4DAYD,CAAAE,GAAAC,EAAA,KAAAuB,MAAAA,GAAA1B,EAAA,CAAA,EAAA,yBAAA,EAAA,KAAAI,EAAA6B,GAAAP,EAAA,GAaM,CAAAxB,GAAAC,EAAA,KAAAwB,MAAAA,GAAA3B,EAAA,CAAA,EAAA,yBAAA,EAAA,KAAAI,EAAA8B,GAAAP,EAAA,kbAvFA,eAAAQ,EAAAC,EAAAC,EAAA,CACT,GAAAC,GAAA,CAAAF,GAAA,CAAAC,mBAKFE,GAAAC,GAAAC,EAAA,UAAA,GAAAA,CAAA,wBAIF,QAAA,IAAA,gBAAAC,CAAA,EAEAH,GAAAC,GAAAC,EAAA,UAAA,GAAAA,CAAA,EACKC,+IAULzB,EAAA,EAAA0B,EAAA,KAAA,MAAAC,EAAAC,EAAA,GAAA,GAAA,CAAA,EAkCqB,MAAAC,EAAA,IAAA9B,GAAA,iBAAA,wCA/BvBmB,EAAAY,EAAA,GAAAC,EAAA,EAAA,iBACAC,EAAA9B,CAAA"}