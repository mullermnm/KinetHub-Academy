import{s as me,w as W,x as E,C as O,t as se,y as ce,d as v,z as D,D as V,b as j,l as oe,e as q,i as ne,f as d,m as ae,A as X,p as L}from"../chunks/scheduler.ee52cacd.js";import{S as fe,i as pe,f as Y,b as x,d as H,m as M,t as N,a as B,e as F}from"../chunks/index.a2391391.js";import{g as _e}from"../chunks/navigation.4bf4851d.js";import{A as ge}from"../chunks/ArrowLeft.eacc72f9.js";import{h as he}from"../chunks/org.1ee4885a.js";import{P as be}from"../chunks/index.550ce75a.js";import{c as ye}from"../chunks/validator.b0d7db8b.js";import{s as ke}from"../chunks/supabase.2c784bff.js";import{s as re}from"../chunks/store.21c1b842.js";import{g as we}from"../chunks/generateSlug.c8cda6bc.js";import{T as ve}from"../chunks/index.846953bc.js";import{T as Ie}from"../chunks/TextField.05bb724d.js";import{p as $e}from"../chunks/user.9ccdc884.js";import{t as Ce}from"../chunks/translations.f943b7b3.js";import{c as Ee}from"../chunks/store.9800a6a8.js";import{D as De}from"../chunks/Dropdown.2e34ff7a.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},f=new Error().stack;f&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[f]="c66e6a6f-2a78-4cfb-9db0-cc917f69d257",e._sentryDebugIdIdentifier="sentry-dbid-c66e6a6f-2a78-4cfb-9db0-cc917f69d257")}catch{}})();function qe(e){let f,o,l,i,m,S,p=e[3]("community.ask.go_back")+"",n,$,_,I,C=e[3]("community.ask.ask_the")+"",T,P,g,s,u,r,A,G,h,J,Q,b,U,z;m=new ge({props:{size:24,class:"carbon-icon dark:text-white"}}),g=new be({props:{label:e[3]("community.ask.publish"),onClick:e[4]}});function le(t){e[7](t)}let Z={placeholder:e[3]("community.ask.title"),errorMessage:e[0].title,className:"w-[75%]"};e[1].title!==void 0&&(Z.value=e[1].title),r=new Ie({props:Z}),W.push(()=>Y(r,"value",le));function ue(t){e[8](t)}let R={class:"w-[25%] h-full",size:"xl",label:e[3]("community.ask.select_course"),invalid:!!e[0].courseId,invalidText:e[0].courseId,items:e[2].map(ie)};e[1].courseId!==void 0&&(R.selectedId=e[1].courseId),h=new De({props:R}),W.push(()=>Y(h,"selectedId",ue));function de(t){e[10](t)}let ee={placeholder:e[3]("community.ask.ask_community"),onChange:e[9]};return e[1].body!==void 0&&(ee.value=e[1].body),b=new ve({props:ee}),W.push(()=>Y(b,"value",de)),{c(){f=E(),o=O("section"),l=O("div"),i=O("a"),x(m.$$.fragment),S=E(),n=se(p),$=E(),_=O("div"),I=O("h1"),T=se(C),P=E(),x(g.$$.fragment),s=E(),u=O("div"),x(r.$$.fragment),G=E(),x(h.$$.fragment),Q=E(),x(b.$$.fragment),this.h()},l(t){ce("svelte-igiws2",document.head).forEach(v),f=D(t),o=V(t,"SECTION",{class:!0});var y=j(o);l=V(y,"DIV",{class:!0});var k=j(l);i=V(k,"A",{class:!0,href:!0});var c=j(i);H(m.$$.fragment,c),S=D(c),n=oe(c,p),c.forEach(v),$=D(k),_=V(k,"DIV",{class:!0});var w=j(_);I=V(w,"H1",{class:!0});var te=j(I);T=oe(te,C),te.forEach(v),P=D(w),H(g.$$.fragment,w),w.forEach(v),k.forEach(v),s=D(y),u=V(y,"DIV",{class:!0});var K=j(u);H(r.$$.fragment,K),G=D(K),H(h.$$.fragment,K),K.forEach(v),Q=D(y),H(b.$$.fragment,y),y.forEach(v),this.h()},h(){document.title="Ask the Community - KinetsHub",q(i,"class","text-gray-500 dark:text-white text-md flex items-center"),q(i,"href","/lms/community"),q(I,"class","dark:text-white text-3xl font-bold"),q(_,"class","flex items-center justify-between"),q(l,"class","p-5"),q(u,"class","mb-3 p-2 flex gap-x-5 justify-between"),q(o,"class","w-full max-w-3xl mx-auto")},m(t,a){ne(t,f,a),ne(t,o,a),d(o,l),d(l,i),M(m,i,null),d(i,S),d(i,n),d(l,$),d(l,_),d(_,I),d(I,T),d(_,P),M(g,_,null),d(o,s),d(o,u),M(r,u,null),d(u,G),M(h,u,null),d(o,Q),M(b,o,null),z=!0},p(t,[a]){(!z||a&8)&&p!==(p=t[3]("community.ask.go_back")+"")&&ae(n,p),(!z||a&8)&&C!==(C=t[3]("community.ask.ask_the")+"")&&ae(T,C);const y={};a&8&&(y.label=t[3]("community.ask.publish")),g.$set(y);const k={};a&8&&(k.placeholder=t[3]("community.ask.title")),a&1&&(k.errorMessage=t[0].title),!A&&a&2&&(A=!0,k.value=t[1].title,X(()=>A=!1)),r.$set(k);const c={};a&8&&(c.label=t[3]("community.ask.select_course")),a&1&&(c.invalid=!!t[0].courseId),a&1&&(c.invalidText=t[0].courseId),a&4&&(c.items=t[2].map(ie)),!J&&a&2&&(J=!0,c.selectedId=t[1].courseId,X(()=>J=!1)),h.$set(c);const w={};a&8&&(w.placeholder=t[3]("community.ask.ask_community")),a&2&&(w.onChange=t[9]),!U&&a&2&&(U=!0,w.value=t[1].body,X(()=>U=!1)),b.$set(w)},i(t){z||(N(m.$$.fragment,t),N(g.$$.fragment,t),N(r.$$.fragment,t),N(h.$$.fragment,t),N(b.$$.fragment,t),z=!0)},o(t){B(m.$$.fragment,t),B(g.$$.fragment,t),B(r.$$.fragment,t),B(h.$$.fragment,t),B(b.$$.fragment,t),z=!1},d(t){t&&(v(f),v(o)),F(m),F(g),F(r),F(h),F(b)}}}const ie=e=>({id:e.id,text:e.title});function Se(e,f,o){let l,i,m,S;L(e,he,s=>o(5,l=s)),L(e,$e,s=>o(6,i=s)),L(e,Ee,s=>o(11,m=s)),L(e,Ce,s=>o(3,S=s));let p={},n={title:"",body:"",courseId:""},$=[];async function _(s,u){if(m.length){o(2,$=[...m]);return}const r=await fetchCourses(s,u);o(2,$=(r==null?void 0:r.allCourses)||[])}async function I(){var r;if(o(0,p=ye(n)),console.log("handleSave errors",p),Object.keys(p).length)return;const{data:s,error:u}=await ke.from("community_question").insert({title:n.title,body:n.body,course_id:n.courseId,organization_id:l.id,author_profile_id:i.id,votes:0,slug:we(n.title)}).select();if(u)console.error("Error: asking question",u),re.error();else{const A=(r=s[0])==null?void 0:r.slug;console.log("Success: asking question in lms",s,A),re.success("snackbar.community.success.question_submitted"),_e(`/lms/community/${A}`)}}function C(s){e.$$.not_equal(n.title,s)&&(n.title=s,o(1,n))}function T(s){e.$$.not_equal(n.courseId,s)&&(n.courseId=s,o(1,n))}const P=s=>o(1,n.body=s,n);function g(s){e.$$.not_equal(n.body,s)&&(n.body=s,o(1,n))}return e.$$.update=()=>{e.$$.dirty&96&&i.id&&l.id&&_(i.id,l.id)},[p,n,$,S,I,l,i,C,T,P,g]}class Je extends fe{constructor(f){super(),pe(this,f,Se,qe,me,{})}}export{Je as component};
//# sourceMappingURL=26.f5d6d40b.js.map
