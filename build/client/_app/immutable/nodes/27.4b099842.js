import{S as mt,i as ct,f as ye,b as R,d as L,m as B,a as y,c as de,t as g,e as G,g as _e}from"../chunks/index.a2391391.js";import{s as dt,w as De,x as S,C as j,y as _t,d as D,z as Q,D as N,b as z,e as H,i as ne,A as Ie,p as Ae,t as ke,l as we,f as p,m as $e,Q as pt,n as Te,o as Le,S as nt,T as ot}from"../chunks/scheduler.ee52cacd.js";import{e as Be}from"../chunks/each.4f9c2159.js";import{g as Ge}from"../chunks/navigation.4bf4851d.js";import{p as Fe}from"../chunks/pluralize.2d93e111.js";import{T as st}from"../chunks/TrashCan.b6b32865.js";import{A as gt}from"../chunks/ArrowLeft.eacc72f9.js";import{V as lt}from"../chunks/index.9237e2d9.js";import{P as Ne,V as it}from"../chunks/index.550ce75a.js";import{A as at}from"../chunks/index.4cadf3f1.js";import{I as ut}from"../chunks/index.e68f3ff9.js";import{h as ht,g as bt}from"../chunks/org.1ee4885a.js";import{p as vt}from"../chunks/user.9ccdc884.js";import{s as ve}from"../chunks/supabase.2c784bff.js";import{d as kt,c as Ue}from"../chunks/validator.b0d7db8b.js";import{s as ce}from"../chunks/store.21c1b842.js";import{T as wt}from"../chunks/TextField.05bb724d.js";import{D as Xe}from"../chunks/DeleteModal.8a5767a4.js";import{T as ft}from"../chunks/index.846953bc.js";import{c as je}from"../chunks/date.4043184d.js";import{b as $t}from"../chunks/index.523fac41.js";import{t as yt}from"../chunks/translations.f943b7b3.js";import{c as Dt}from"../chunks/store.9800a6a8.js";import{S as Je}from"../chunks/SkeletonText.4f748957.js";import{S as It}from"../chunks/SkeletonPlaceholder.85251fa5.js";import{D as Et}from"../chunks/Dropdown.2e34ff7a.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[e]="2142313f-8cfe-4701-af05-018182c24352",r._sentryDebugIdIdentifier="sentry-dbid-2142313f-8cfe-4701-af05-018182c24352")}catch{}})();const Ct=({params:r={slug:""}})=>({slug:r.slug}),mr=Object.freeze(Object.defineProperty({__proto__:null,load:Ct},Symbol.toStringTag,{value:"Module"}));function Ke(r,e,t){const n=r.slice();return n[12]=e[t],n}function qt(r){let e,t,n,o,i=r[10]("community.ask.go_back")+"",l,f,u,_,a,c,v,E,A,k,w,b,K,X=r[1].author.name+"",M,te,J,d=r[1].createdAt+"",q,C,O,I,T,Y,Z,oe=Fe(r[10]("community.answers"),r[1].totalComments,!0)+"",ue,pe,Ee,qe,Ve,se,Ce,ge,fe,le;n=new gt({props:{size:24,class:"carbon-icon dark:text-white"}});const Se=[Tt,At],ie=[];function Qe(m,h){return m[4]?0:1}_=Qe(r),a=ie[_]=Se[_](r);let s=r[1].author.id===r[0].id&&We(r);w=new at({props:{src:r[1].author.avatar,name:r[1].author.name,width:"w-7",height:"h-7"}});let $=(r[1].author.id===r[0].id||r[11])&&Ze(r);const P=[Ot,Qt],W=[];function x(m,h){return m[4]&&m[8]?0:1}I=x(r),T=W[I]=P[I](r);let ee=Be(r[1].comments),V=[];for(let m=0;m<ee.length;m+=1)V[m]=et(Ke(r,ee,m));const ae=m=>y(V[m],1,1,()=>{V[m]=null});let F=!r[8]&&tt(r);return fe=new Ne({props:{label:"Comment",onClick:r[13]}}),{c(){e=j("div"),t=j("a"),R(n.$$.fragment),o=S(),l=ke(i),f=S(),u=j("div"),a.c(),c=S(),s&&s.c(),v=S(),E=j("div"),A=j("header"),k=j("div"),R(w.$$.fragment),b=S(),K=j("p"),M=ke(X),te=S(),J=j("p"),q=ke(d),C=S(),$&&$.c(),O=S(),T.c(),Y=S(),Z=j("div"),ue=ke(oe),pe=S();for(let m=0;m<V.length;m+=1)V[m].c();Ee=S(),qe=j("hr"),Ve=S(),se=j("div"),F&&F.c(),Ce=S(),ge=j("div"),R(fe.$$.fragment),this.h()},l(m){e=N(m,"DIV",{class:!0});var h=z(e);t=N(h,"A",{class:!0,href:!0});var re=z(t);L(n.$$.fragment,re),o=Q(re),l=we(re,i),re.forEach(D),f=Q(h),u=N(h,"DIV",{class:!0});var he=z(u);a.l(he),c=Q(he),s&&s.l(he),he.forEach(D),v=Q(h),E=N(h,"DIV",{class:!0});var be=z(E);A=N(be,"HEADER",{class:!0});var U=z(A);k=N(U,"DIV",{class:!0});var me=z(k);L(w.$$.fragment,me),b=Q(me),K=N(me,"P",{class:!0});var ze=z(K);M=we(ze,X),ze.forEach(D),te=Q(me),J=N(me,"P",{class:!0});var He=z(J);q=we(He,d),He.forEach(D),me.forEach(D),C=Q(U),$&&$.l(U),U.forEach(D),O=Q(be),T.l(be),be.forEach(D),Y=Q(h),Z=N(h,"DIV",{class:!0});var Me=z(Z);ue=we(Me,oe),Me.forEach(D),pe=Q(h);for(let Pe=0;Pe<V.length;Pe+=1)V[Pe].l(h);Ee=Q(h),qe=N(h,"HR",{}),Ve=Q(h),se=N(h,"DIV",{});var Oe=z(se);F&&F.l(Oe),Ce=Q(Oe),ge=N(Oe,"DIV",{class:!0});var Re=z(ge);L(fe.$$.fragment,Re),Re.forEach(D),Oe.forEach(D),h.forEach(D),this.h()},h(){H(t,"class","text-gray-500 dark:text-white text-md flex items-center"),H(t,"href","/lms/community"),H(u,"class","my-5 flex justify-between items-center"),H(K,"class","dark:text-white ml-2 text-sm"),H(J,"class","dark:text-white ml-2 text-sm text-gray-500"),H(k,"class","flex items-center no-underline hover:underline text-black"),H(A,"class","flex items-center justify-between leading-none p-2"),H(E,"class","my-1 px-1 rounded-lg border border-1 border-gray"),H(Z,"class","my-8 font-bold"),H(ge,"class","flex justify-end mr-2"),H(e,"class","py-10 px-5")},m(m,h){ne(m,e,h),p(e,t),B(n,t,null),p(t,o),p(t,l),p(e,f),p(e,u),ie[_].m(u,null),p(u,c),s&&s.m(u,null),p(e,v),p(e,E),p(E,A),p(A,k),B(w,k,null),p(k,b),p(k,K),p(K,M),p(k,te),p(k,J),p(J,q),p(A,C),$&&$.m(A,null),p(E,O),W[I].m(E,null),p(e,Y),p(e,Z),p(Z,ue),p(e,pe);for(let re=0;re<V.length;re+=1)V[re]&&V[re].m(e,null);p(e,Ee),p(e,qe),p(e,Ve),p(e,se),F&&F.m(se,null),p(se,Ce),p(se,ge),B(fe,ge,null),le=!0},p(m,h){(!le||h[0]&1024)&&i!==(i=m[10]("community.ask.go_back")+"")&&$e(l,i);let re=_;_=Qe(m),_===re?ie[_].p(m,h):(_e(),y(ie[re],1,1,()=>{ie[re]=null}),de(),a=ie[_],a?a.p(m,h):(a=ie[_]=Se[_](m),a.c()),g(a,1),a.m(u,c)),m[1].author.id===m[0].id?s?(s.p(m,h),h[0]&3&&g(s,1)):(s=We(m),s.c(),g(s,1),s.m(u,null)):s&&(_e(),y(s,1,1,()=>{s=null}),de());const he={};h[0]&2&&(he.src=m[1].author.avatar),h[0]&2&&(he.name=m[1].author.name),w.$set(he),(!le||h[0]&2)&&X!==(X=m[1].author.name+"")&&$e(M,X),(!le||h[0]&2)&&d!==(d=m[1].createdAt+"")&&$e(q,d),m[1].author.id===m[0].id||m[11]?$?($.p(m,h),h[0]&2051&&g($,1)):($=Ze(m),$.c(),g($,1),$.m(A,null)):$&&(_e(),y($,1,1,()=>{$=null}),de());let be=I;if(I=x(m),I===be?W[I].p(m,h):(_e(),y(W[be],1,1,()=>{W[be]=null}),de(),T=W[I],T?T.p(m,h):(T=W[I]=P[I](m),T.c()),g(T,1),T.m(E,null)),(!le||h[0]&1026)&&oe!==(oe=Fe(m[10]("community.answers"),m[1].totalComments,!0)+"")&&$e(ue,oe),h[0]&18475){ee=Be(m[1].comments);let U;for(U=0;U<ee.length;U+=1){const me=Ke(m,ee,U);V[U]?(V[U].p(me,h),g(V[U],1)):(V[U]=et(me),V[U].c(),g(V[U],1),V[U].m(e,Ee))}for(_e(),U=ee.length;U<V.length;U+=1)ae(U);de()}m[8]?F&&(_e(),y(F,1,1,()=>{F=null}),de()):F?(F.p(m,h),h[0]&256&&g(F,1)):(F=tt(m),F.c(),g(F,1),F.m(se,Ce))},i(m){if(!le){g(n.$$.fragment,m),g(a),g(s),g(w.$$.fragment,m),g($),g(T);for(let h=0;h<ee.length;h+=1)g(V[h]);g(F),g(fe.$$.fragment,m),le=!0}},o(m){y(n.$$.fragment,m),y(a),y(s),y(w.$$.fragment,m),y($),y(T),V=V.filter(Boolean);for(let h=0;h<V.length;h+=1)y(V[h]);y(F),y(fe.$$.fragment,m),le=!1},d(m){m&&D(e),G(n),ie[_].d(),s&&s.d(),G(w),$&&$.d(),W[I].d(),pt(V,m),F&&F.d(),G(fe)}}}function Vt(r){let e,t,n,o,i,l,f;return t=new Je({props:{style:"width: 25%;"}}),o=new Je({props:{style:"width: 100%; margin-bottom: 2rem"}}),l=new It({props:{style:"width: 100%; height: 20rem;"}}),{c(){e=j("div"),R(t.$$.fragment),n=S(),R(o.$$.fragment),i=S(),R(l.$$.fragment),this.h()},l(u){e=N(u,"DIV",{class:!0});var _=z(e);L(t.$$.fragment,_),n=Q(_),L(o.$$.fragment,_),i=Q(_),L(l.$$.fragment,_),_.forEach(D),this.h()},h(){H(e,"class","py-10 px-5 mb-3")},m(u,_){ne(u,e,_),B(t,e,null),p(e,n),B(o,e,null),p(e,i),B(l,e,null),f=!0},p:Te,i(u){f||(g(t.$$.fragment,u),g(o.$$.fragment,u),g(l.$$.fragment,u),f=!0)},o(u){y(t.$$.fragment,u),y(o.$$.fragment,u),y(l.$$.fragment,u),f=!1},d(u){u&&D(e),G(t),G(o),G(l)}}}function At(r){let e,t,n,o,i=r[1].title+"",l,f;return t=new lt({props:{value:r[1].votes,upVote:r[28],disabled:r[3].question}}),{c(){e=j("div"),R(t.$$.fragment),n=S(),o=j("h2"),l=ke(i),this.h()},l(u){e=N(u,"DIV",{class:!0});var _=z(e);L(t.$$.fragment,_),n=Q(_),o=N(_,"H2",{class:!0});var a=z(o);l=we(a,i),a.forEach(D),_.forEach(D),this.h()},h(){H(o,"class","text-3xl"),H(e,"class","flex items-center")},m(u,_){ne(u,e,_),B(t,e,null),p(e,n),p(e,o),p(o,l),f=!0},p(u,_){const a={};_[0]&2&&(a.value=u[1].votes),_[0]&8&&(a.disabled=u[3].question),t.$set(a),(!f||_[0]&2)&&i!==(i=u[1].title+"")&&$e(l,i)},i(u){f||(g(t.$$.fragment,u),f=!0)},o(u){y(t.$$.fragment,u),f=!1},d(u){u&&D(e),G(t)}}}function Tt(r){let e,t,n,o,i,l;function f(c){r[26](c)}let u={className:"w-full mr-2",errorMessage:r[2].title};r[7].title!==void 0&&(u.value=r[7].title),e=new wt({props:u}),De.push(()=>ye(e,"value",f));function _(c){r[27](c)}let a={class:"w-[25%] h-full",size:"xl",label:"Select Course",items:r[9].map(rt)};return r[7].courseId!==void 0&&(a.selectedId=r[7].courseId),o=new Et({props:a}),De.push(()=>ye(o,"selectedId",_)),{c(){R(e.$$.fragment),n=S(),R(o.$$.fragment)},l(c){L(e.$$.fragment,c),n=Q(c),L(o.$$.fragment,c)},m(c,v){B(e,c,v),ne(c,n,v),B(o,c,v),l=!0},p(c,v){const E={};v[0]&4&&(E.errorMessage=c[2].title),!t&&v[0]&128&&(t=!0,E.value=c[7].title,Ie(()=>t=!1)),e.$set(E);const A={};v[0]&512&&(A.items=c[9].map(rt)),!i&&v[0]&128&&(i=!0,A.selectedId=c[7].courseId,Ie(()=>i=!1)),o.$set(A)},i(c){l||(g(e.$$.fragment,c),g(o.$$.fragment,c),l=!0)},o(c){y(e.$$.fragment,c),y(o.$$.fragment,c),l=!1},d(c){c&&D(n),G(e,c),G(o,c)}}}function We(r){let e,t,n,o;e=new Ne({props:{label:r[4]?"Save":"Edit",variant:it.OUTLINED,onClick:r[15],className:"h-fit"}});let i=r[4]&&Ye(r);return{c(){R(e.$$.fragment),t=S(),i&&i.c(),n=Le()},l(l){L(e.$$.fragment,l),t=Q(l),i&&i.l(l),n=Le()},m(l,f){B(e,l,f),ne(l,t,f),i&&i.m(l,f),ne(l,n,f),o=!0},p(l,f){const u={};f[0]&16&&(u.label=l[4]?"Save":"Edit"),e.$set(u),l[4]?i?(i.p(l,f),f[0]&16&&g(i,1)):(i=Ye(l),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(_e(),y(i,1,1,()=>{i=null}),de())},i(l){o||(g(e.$$.fragment,l),g(i),o=!0)},o(l){y(e.$$.fragment,l),y(i),o=!1},d(l){l&&(D(t),D(n)),G(e,l),i&&i.d(l)}}}function Ye(r){let e,t;return e=new Ne({props:{label:"Cancel",variant:it.TEXT,onClick:r[29],className:"py-3 px-6 rounded-sm h-fit",disablePadding:!0}}),{c(){R(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,o){B(e,n,o),t=!0},p(n,o){const i={};o[0]&16&&(i.onClick=n[29]),e.$set(i)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){G(e,n)}}}function Ze(r){let e,t;return e=new ut({props:{value:"delete-question",onClick:r[30],$$slots:{default:[St]},$$scope:{ctx:r}}}),{c(){R(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,o){B(e,n,o),t=!0},p(n,o){const i={};o[0]&66&&(i.onClick=n[30]),o[1]&16384&&(i.$$scope={dirty:o,ctx:n}),e.$set(i)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){G(e,n)}}}function St(r){let e,t;return e=new st({props:{size:16,class:"carbon-icon dark:text-white"}}),{c(){R(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,o){B(e,n,o),t=!0},p:Te,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){G(e,n)}}}function Qt(r){let e,t,n=r[1].body+"";return{c(){e=j("section"),t=new nt(!1),this.h()},l(o){e=N(o,"SECTION",{class:!0});var i=z(e);t=ot(i,!1),i.forEach(D),this.h()},h(){t.a=null,H(e,"class","prose prose-sm sm:prose p-2")},m(o,i){ne(o,e,i),t.m(n,e)},p(o,i){i[0]&2&&n!==(n=o[1].body+"")&&t.p(n)},i:Te,o:Te,d(o){o&&D(e)}}}function Ot(r){let e,t,n,o;function i(f){r[32](f)}let l={placeholder:"Give an answer",onChange:r[31]};return r[7].body!==void 0&&(l.value=r[7].body),t=new ft({props:l}),De.push(()=>ye(t,"value",i)),{c(){e=j("div"),R(t.$$.fragment),this.h()},l(f){e=N(f,"DIV",{class:!0});var u=z(e);L(t.$$.fragment,u),u.forEach(D),this.h()},h(){H(e,"class","my-2")},m(f,u){ne(f,e,u),B(t,e,null),o=!0},p(f,u){const _={};u[0]&128&&(_.onChange=f[31]),!n&&u[0]&128&&(n=!0,_.value=f[7].body,Ie(()=>n=!1)),t.$set(_)},i(f){o||(g(t.$$.fragment,f),o=!0)},o(f){y(t.$$.fragment,f),o=!1},d(f){f&&D(e),G(t)}}}function xe(r){let e,t;function n(){return r[34](r[12])}return e=new ut({props:{value:"delete-comment",onClick:n,$$slots:{default:[Pt]},$$scope:{ctx:r}}}),{c(){R(e.$$.fragment)},l(o){L(e.$$.fragment,o)},m(o,i){B(e,o,i),t=!0},p(o,i){r=o;const l={};i[0]&34&&(l.onClick=n),i[1]&16384&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){G(e,o)}}}function Pt(r){let e,t;return e=new st({props:{size:16,class:"carbon-icon dark:text-white"}}),{c(){R(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,o){B(e,n,o),t=!0},p:Te,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){G(e,n)}}}function et(r){let e,t,n,o,i,l,f,u,_,a=r[12].name+"",c,v,E,A=r[12].createdAt+"",k,w,b,K,X,M,te=r[12].comment+"",J;function d(){return r[33](r[12])}t=new lt({props:{value:r[12].votes,upVote:d,disabled:r[3].comment[r[12].id]}}),f=new at({props:{src:r[12].avatar,name:r[12].name,width:"w-7",height:"h-7"}});let q=Nt,C=(r[12].authorId===r[0].id||r[11])&&xe(r);return{c(){e=j("div"),R(t.$$.fragment),n=S(),o=j("div"),i=j("header"),l=j("div"),R(f.$$.fragment),u=S(),_=j("p"),c=ke(a),v=S(),E=j("p"),k=ke(A),w=S(),b=S(),C&&C.c(),K=S(),X=j("article"),M=new nt(!1),this.h()},l(O){e=N(O,"DIV",{class:!0});var I=z(e);L(t.$$.fragment,I),n=Q(I),o=N(I,"DIV",{class:!0});var T=z(o);i=N(T,"HEADER",{class:!0});var Y=z(i);l=N(Y,"DIV",{class:!0});var Z=z(l);L(f.$$.fragment,Z),u=Q(Z),_=N(Z,"P",{class:!0});var oe=z(_);c=we(oe,a),oe.forEach(D),v=Q(Z),E=N(Z,"P",{class:!0});var ue=z(E);k=we(ue,A),ue.forEach(D),Z.forEach(D),w=Q(Y),b=Q(Y),C&&C.l(Y),Y.forEach(D),K=Q(T),X=N(T,"ARTICLE",{class:!0});var pe=z(X);M=ot(pe,!1),pe.forEach(D),T.forEach(D),I.forEach(D),this.h()},h(){H(_,"class","dark:text-white ml-2 text-sm"),H(E,"class","dark:text-white ml-2 text-sm text-gray-500"),H(l,"class","flex items-center text-black"),H(i,"class","flex items-center justify-between leading-none p-2"),M.a=null,H(X,"class","prose prose-sm sm:prose p-2"),H(o,"class","w-full rounded-lg border border-1 border-gray"),H(e,"class","my-5 px-1 flex items-start")},m(O,I){ne(O,e,I),B(t,e,null),p(e,n),p(e,o),p(o,i),p(i,l),B(f,l,null),p(l,u),p(l,_),p(_,c),p(l,v),p(l,E),p(E,k),p(i,w),p(i,b),C&&C.m(i,null),p(o,K),p(o,X),M.m(te,X),J=!0},p(O,I){r=O;const T={};I[0]&2&&(T.value=r[12].votes),I[0]&2&&(T.upVote=d),I[0]&10&&(T.disabled=r[3].comment[r[12].id]),t.$set(T);const Y={};I[0]&2&&(Y.src=r[12].avatar),I[0]&2&&(Y.name=r[12].name),f.$set(Y),(!J||I[0]&2)&&a!==(a=r[12].name+"")&&$e(c,a),(!J||I[0]&2)&&A!==(A=r[12].createdAt+"")&&$e(k,A),r[12].authorId===r[0].id||r[11]?C?(C.p(r,I),I[0]&2051&&g(C,1)):(C=xe(r),C.c(),g(C,1),C.m(i,null)):C&&(_e(),y(C,1,1,()=>{C=null}),de()),(!J||I[0]&2)&&te!==(te=r[12].comment+"")&&M.p(te)},i(O){J||(g(t.$$.fragment,O),g(f.$$.fragment,O),g(q),g(C),J=!0)},o(O){y(t.$$.fragment,O),y(f.$$.fragment,O),y(q),y(C),J=!1},d(O){O&&D(e),G(t),G(f),C&&C.d()}}}function tt(r){let e,t,n;function o(l){r[36](l)}let i={placeholder:"Give an answer",onChange:r[35]};return r[12]!==void 0&&(i.value=r[12]),e=new ft({props:i}),De.push(()=>ye(e,"value",o)),{c(){R(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,f){B(e,l,f),n=!0},p(l,f){const u={};f[0]&4096&&(u.onChange=l[35]),!t&&f[0]&4096&&(t=!0,u.value=l[12],Ie(()=>t=!1)),e.$set(u)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){y(e.$$.fragment,l),n=!1},d(l){G(e,l)}}}function jt(r){var J;let e,t,n,o,i,l,f,u,_,a,c,v,E;document.title=e=((J=r[1])==null?void 0:J.title)||"Question";function A(d){r[21](d)}function k(d){r[22](d)}let w={onCancel:r[19],onDelete:r[20],isQuestion:!0};r[6].shouldDelete!==void 0&&(w.open=r[6].shouldDelete),r[6].isDeleting!==void 0&&(w.isDeleting=r[6].isDeleting),n=new Xe({props:w}),De.push(()=>ye(n,"open",A)),De.push(()=>ye(n,"isDeleting",k));function b(d){r[25](d)}let K={isDeleting:r[5].isDeleting,onCancel:r[23],onDelete:r[24]};r[5].shouldDelete!==void 0&&(K.open=r[5].shouldDelete),f=new Xe({props:K}),De.push(()=>ye(f,"open",b));const X=[Vt,qt],M=[];function te(d,q){return d[1]?1:0}return c=te(r),v=M[c]=X[c](r),{c(){t=S(),R(n.$$.fragment),l=S(),R(f.$$.fragment),_=S(),a=j("section"),v.c(),this.h()},l(d){_t("svelte-7qdk32",document.head).forEach(D),t=Q(d),L(n.$$.fragment,d),l=Q(d),L(f.$$.fragment,d),_=Q(d),a=N(d,"SECTION",{class:!0});var C=z(a);v.l(C),C.forEach(D),this.h()},h(){H(a,"class","max-w-3xl mx-auto md:mx-10 lg:mb-20")},m(d,q){ne(d,t,q),B(n,d,q),ne(d,l,q),B(f,d,q),ne(d,_,q),ne(d,a,q),M[c].m(a,null),E=!0},p(d,q){var T;(!E||q[0]&2)&&e!==(e=((T=d[1])==null?void 0:T.title)||"Question")&&(document.title=e);const C={};q[0]&64&&(C.onCancel=d[19]),!o&&q[0]&64&&(o=!0,C.open=d[6].shouldDelete,Ie(()=>o=!1)),!i&&q[0]&64&&(i=!0,C.isDeleting=d[6].isDeleting,Ie(()=>i=!1)),n.$set(C);const O={};q[0]&32&&(O.isDeleting=d[5].isDeleting),q[0]&32&&(O.onCancel=d[23]),!u&&q[0]&32&&(u=!0,O.open=d[5].shouldDelete,Ie(()=>u=!1)),f.$set(O);let I=c;c=te(d),c===I?M[c].p(d,q):(_e(),y(M[I],1,1,()=>{M[I]=null}),de(),v=M[c],v?v.p(d,q):(v=M[c]=X[c](d),v.c()),g(v,1),v.m(a,null))},i(d){E||(g(n.$$.fragment,d),g(f.$$.fragment,d),g(v),E=!0)},o(d){y(n.$$.fragment,d),y(f.$$.fragment,d),y(v),E=!1},d(d){d&&(D(t),D(l),D(_),D(a)),G(n,d),G(f,d),M[c].d()}}}let Nt=!1;const rt=r=>({id:r.id,text:r.title});function zt(r,e,t){let n,o,i,l,f;Ae(r,ht,s=>t(18,n=s)),Ae(r,vt,s=>t(0,o=s)),Ae(r,Dt,s=>t(38,i=s)),Ae(r,yt,s=>t(10,l=s)),Ae(r,bt,s=>t(11,f=s));let{data:u}=e;const{slug:_}=u;let a,c="",v={},E={question:!1,comment:{}},A=!1,k={shouldDelete:!1,commentId:"",isDeleting:!1},w={shouldDelete:!1,questionId:"",isDeleting:!1},b={title:"",body:"",courseId:""},K=!1,X=[];function M(s){var $,P,W;return{id:s.id,title:s.title,votes:s.votes,author:{id:(($=s==null?void 0:s.author)==null?void 0:$.id)||"",name:((P=s==null?void 0:s.author)==null?void 0:P.fullname)||"",avatar:((W=s==null?void 0:s.author)==null?void 0:W.avatar_url)||""},body:s.body,createdAt:je(s.created_at),comments:s.comments.map(x=>{var ee,V,ae;return{id:x.id,authorId:((ee=x.author)==null?void 0:ee.id)||"",name:((V=x.author)==null?void 0:V.fullname)||"",avatar:((ae=x.author)==null?void 0:ae.avatar_url)||"",votes:x.votes,comment:x.body,createdAt:je(x.created_at)}}),totalComments:0,courseId:s.course_id}}async function te(s,$){if(i.length){t(9,X=[...i]);return}const P=await $t(s,$);t(9,X=(P==null?void 0:P.allCourses)||[])}async function J(s){if(!s)return;const{data:$,error:P}=await ve.from("community_question").select(`
        id,
        title,
        body,
        votes,
        created_at,
        course_id,
        slug,
        comments:community_answer(
          id,
          body,
          votes,
          created_at,
          author:profile(id, fullname, avatar_url)
        ),
        author:profile(id, fullname, avatar_url),
        course!inner (
          title
        )
      `).eq("slug",s).single();if(P)return console.error("[LMS] Error loading community",P),Ge("/lms");t(1,a=M($)),t(1,a.totalComments=a.comments.length,a)}async function d(){if(t(2,v=kt({comment:c})),console.log("submitComment errors",v),Object.keys(v).length)return;const{data:s,error:$}=await ve.from("community_answer").insert({id:void 0,body:c,question_id:a.id,author_profile_id:o.id,votes:0}).select();if($)console.error("Error: commenting",$),ce.error("snackbar.community.error.try_again");else{console.log("Success: commenting",s),ce.success("snackbar.community.success.comment_submitted");const P=s==null?void 0:s[0];t(1,a.comments=[...a.comments,{id:P.id,authorId:o.id||"",name:(o==null?void 0:o.fullname)||"",avatar:(o==null?void 0:o.avatar_url)||"",votes:0,comment:P.body,createdAt:je(P.created_at)}],a),t(12,c="")}}async function q(s,$){const P=s==="question";if(P&&E.question||!P&&$&&E.comment[$])return;const W=P?"community_question":"community_answer",x=P?a.id:$;let ee=0;P?(t(1,a.votes=a.votes+1,a),ee=a.votes):t(1,a.comments=a.comments.map(ae=>(ae.id===$&&(ae.votes=ae.votes+1,ee=ae.votes),ae)),a);const{error:V}=await ve.from(W).update({votes:ee}).match({id:x});V?(console.error("Error: upvoteQuestion",V),ce.error("snackbar.community.error.try_again")):P?t(3,E.question=!0,E):$&&t(3,E.comment[$]=!0,E)}async function C(){if(!(A&&(t(2,v=Ue(b)),console.log("handleQuestionEdit errors",v),Object.keys(v).length)))if(t(4,A=!A),t(8,K=!K),A)t(7,b.title=a.title,b),t(7,b.body=a.body,b),t(7,b.courseId=a.courseId,b);else{if(t(2,v=Ue(b)),console.log("handleQuestionEdit errors",v),Object.keys(v).length)return;const{error:s}=await ve.from("community_question").update({title:b.title,body:b.body,course_id:b.courseId}).match({id:a.id});s?(console.error("Error: handleQuestionEdit",s),ce.error("snackbar.community.error.try_again")):(t(1,a.title=b.title,a),t(1,a.body=b.body,a),t(1,a.courseId=b.courseId,a),t(7,b.title="",b),t(7,b.body="",b),t(7,b.courseId="",b))}}async function O(s){if(!s){t(5,k.isDeleting=!0,k);const{error:W}=await ve.from("community_answer").delete().match({id:k.commentId});if(t(5,k.isDeleting=!1,k),W){ce.error("snackbar.community.error.deleting_comments"),console.log("Error deleting comments",W);return}ce.success("snackbar.community.success.success_delete"),t(1,a.comments=a.comments.filter(x=>x.id!==k.commentId),a),t(5,k.shouldDelete=!1,k),t(5,k.commentId="",k);return}t(6,w.isDeleting=!0,w);const{error:$}=await ve.from("community_answer").delete().match({question_id:w.questionId});if($){ce.error("snackbar.community.error.deleting_comments"),console.log("Error deleting comments",$),t(6,w.isDeleting=!1,w);return}const{error:P}=await ve.from("community_question").delete().match({id:w.questionId});if(P){ce.error("snackbar.community.error.deleting_question"),console.log("Error deleting question",P);return}ce.success("snackbar.community.success.success_delete"),Ge("/lms/community"),t(6,w.isDeleting=!1,w)}const I=()=>{t(6,w.shouldDelete=!1,w),t(6,w.questionId="",w)},T=()=>O(!0);function Y(s){r.$$.not_equal(w.shouldDelete,s)&&(w.shouldDelete=s,t(6,w))}function Z(s){r.$$.not_equal(w.isDeleting,s)&&(w.isDeleting=s,t(6,w))}const oe=()=>{t(5,k.shouldDelete=!1,k),t(5,k.commentId="",k)},ue=()=>O(!1);function pe(s){r.$$.not_equal(k.shouldDelete,s)&&(k.shouldDelete=s,t(5,k))}function Ee(s){r.$$.not_equal(b.title,s)&&(b.title=s,t(7,b))}function qe(s){r.$$.not_equal(b.courseId,s)&&(b.courseId=s,t(7,b))}const Ve=()=>q("question"),se=()=>t(4,A=!A),Ce=()=>{t(6,w.shouldDelete=!0,w),t(6,w.questionId=a.id,w)},ge=s=>t(7,b.body=s,b);function fe(s){r.$$.not_equal(b.body,s)&&(b.body=s,t(7,b))}const le=s=>q("comment",s.id),Se=s=>{t(5,k.shouldDelete=!0,k),t(5,k.commentId=s.id,k)},ie=s=>t(12,c=s);function Qe(s){c=s,t(12,c)}return r.$$set=s=>{"data"in s&&t(17,u=s.data)},r.$$.update=()=>{r.$$.dirty[0]&262145&&o.id&&n.id&&te(o.id,n.id)},J(_),[o,a,v,E,A,k,w,b,K,X,l,f,c,d,q,C,O,u,n,I,T,Y,Z,oe,ue,pe,Ee,qe,Ve,se,Ce,ge,fe,le,Se,ie,Qe]}class cr extends mt{constructor(e){super(),ct(this,e,zt,jt,dt,{data:17},null,[-1,-1])}}export{cr as component,mr as universal};
//# sourceMappingURL=27.4b099842.js.map
