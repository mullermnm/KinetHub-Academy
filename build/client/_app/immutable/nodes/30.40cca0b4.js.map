{"version":3,"file":"30.40cca0b4.js","sources":["../../../../../../src/routes/lms/mylearning/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { Search } from 'carbon-components-svelte';\n  import Tabs from '$lib/components/Tabs/index.svelte';\n  import TabContent from '$lib/components/TabContent/index.svelte';\n  import Courses from '$lib/components/Courses/index.svelte';\n  import { fetchCourses } from '$lib/utils/services/courses';\n  import { profile } from '$lib/utils/store/user';\n  import { currentOrg } from '$lib/utils/store/org';\n  import {\n    courses,\n    courseMetaDeta,\n    coursesComplete,\n    coursesInProgress\n  } from '$lib/components/Courses/store';\n  import { browser } from '$app/environment';\n  import { t } from '$lib/utils/functions/translations';\n\n  let hasFetched = false;\n\n  function onChange(tab) {\n    return () => (currentTab = tab);\n  }\n\n  async function getCourses(userId: string | null, orgId: string) {\n    if (hasFetched || !userId || !orgId) {\n      return;\n    }\n    hasFetched = true;\n\n    // only show is loading when fetching for the first time\n    if (!$courses.length) {\n      $courseMetaDeta.isLoading = true;\n    }\n\n    const coursesResult = await fetchCourses(userId, orgId);\n    console.log(`get courses result`, coursesResult);\n\n    $courseMetaDeta.isLoading = false;\n    if (!coursesResult) return;\n\n    courses.set(coursesResult.allCourses);\n    hasFetched = true;\n  }\n\n  $: if (browser && $profile.id && $currentOrg.id) {\n    getCourses($profile.id, $currentOrg.id);\n  }\n\n  $: tabs = [\n    {\n      label: `${$t('my_learning.progress')} (${$coursesInProgress.length})`,\n      value: '1'\n    },\n    {\n      label: `${$t('my_learning.complete')} (${$coursesComplete.length})`,\n      value: '2'\n    }\n  ];\n  $: currentTab = tabs[0].value;\n</script>\n\n<section class=\"max-w-6xl mx-auto\">\n  <div class=\"m-2 md:m-5\">\n    <div role=\"searchbox\" class=\" bg-gray-100 w-full md:w-[60%] lg:w-[30%]\">\n      <Search placeholder={$t('my_learning.search')} class=\"dark:text-black\" />\n    </div>\n    <h1 class=\"text-3xl font-semibold my-4\">{$t('my_learning.heading')}</h1>\n    <Tabs {tabs} {currentTab} {onChange}>\n      <slot:fragment slot=\"content\">\n        <TabContent value={tabs[0].value} index={currentTab}>\n          <Courses\n            courses={$coursesInProgress}\n            emptyTitle={$t('my_learning.not_in_progress')}\n            emptyDescription={$t('my_learning.any_progress')}\n          />\n        </TabContent>\n        <TabContent value={tabs[1].value} index={currentTab}>\n          <Courses\n            courses={$coursesComplete}\n            emptyTitle={$t('my_learning.not_completed')}\n            emptyDescription={$t('my_learning.any_course')}\n          />\n        </TabContent>\n      </slot:fragment>\n    </Tabs>\n  </div>\n</section>\n"],"names":["ctx","dirty","courses_1_changes","t1_value","search_changes","current","set_data","t1","getCourses","userId","orgId","hasFetched","set_store_value","courseMetaDeta","$courseMetaDeta","coursesResult","$t","$coursesInProgress","$coursesComplete"],"mappings":"ygCAwEwB,WAAAA,EAAA,CAAA,EAAA,6BAAA,EACM,iBAAAA,EAAA,CAAA,EAAA,0BAAA,mHADNC,EAAA,IAAAC,EAAA,WAAAF,EAAA,CAAA,EAAA,6BAAA,GACMC,EAAA,IAAAC,EAAA,iBAAAF,EAAA,CAAA,EAAA,0BAAA,wJAMN,WAAAA,EAAA,CAAA,EAAA,2BAAA,EACM,iBAAAA,EAAA,CAAA,EAAA,wBAAA,mHADNC,EAAA,IAAAC,EAAA,WAAAF,EAAA,CAAA,EAAA,2BAAA,GACMC,EAAA,IAAAC,EAAA,iBAAAF,EAAA,CAAA,EAAA,wBAAA,g8BAdeG,EAAAH,EAAA,CAAA,EAAA,qBAAA,EAAA,kCAFlB,YAAAA,EAAA,CAAA,EAAA,oBAAA,gzBAAAC,EAAA,IAAAG,EAAA,YAAAJ,EAAA,CAAA,EAAA,oBAAA,cAEkB,CAAAK,GAAAJ,EAAA,IAAAE,KAAAA,EAAAH,EAAA,CAAA,EAAA,qBAAA,EAAA,KAAAM,EAAAC,EAAAJ,CAAA,kcA3C5B,eAAAK,EAAAC,EAAAC,EAAA,CACT,GAAAC,GAAA,CAAAF,GAAA,CAAAC,wBAOFE,EAAAC,EAAAC,EAAA,UAAA,GAAAA,CAAA,uBAIF,QAAA,IAAA,qBAAAC,CAAA,EAEAH,EAAAC,EAAAC,EAAA,UAAA,GAAAA,CAAA,EACKC,sHAYH,MAAA,GAAAC,EAAA,sBAAA,CAAA,KAAAC,EAAA,MAAA,gBAIA,MAAA,GAAAD,EAAA,sBAAA,CAAA,KAAAE,EAAA,MAAA"}