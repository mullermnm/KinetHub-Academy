import{s as le,w as T,x as O,y as ie,d as g,z as P,i as A,A as U,p as C,C as N,t as z,D as j,b as q,l as B,e as S,f as b,m as G}from"../chunks/scheduler.ee52cacd.js";import{S as oe,i as re,f as J,b as M,d as V,m as F,t as W,a as H,e as K}from"../chunks/index.a2391391.js";import{p as ne}from"../chunks/stores.5de49fb7.js";import{T as Z}from"../chunks/TextField.05bb724d.js";import{P as fe}from"../chunks/index.550ce75a.js";import{a as ue}from"../chunks/supabase.2c784bff.js";import{b as me}from"../chunks/validator.b0d7db8b.js";import{L as x}from"../chunks/authentication.9d48b2e5.js";import{A as de}from"../chunks/index.817dabbc.js";import{h as pe}from"../chunks/org.1ee4885a.js";import{c as ee}from"../chunks/index.287abee1.js";import{t as ge}from"../chunks/translations.f943b7b3.js";import{g as _e}from"../chunks/app.bd3189d3.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="fb612b2b-984c-444a-8ed5-454512955df0",e._sentryDebugIdIdentifier="sentry-dbid-fb612b2b-984c-444a-8ed5-454512955df0")}catch{}})();function ae(e){let t,l;return{c(){t=N("p"),l=z(e[2]),this.h()},l(r){t=j(r,"P",{class:!0});var f=q(t);l=B(f,e[2]),f.forEach(g),this.h()},h(){S(t,"class","text-sm text-red-500")},m(r,f){A(r,t,f),b(t,l)},p(r,f){f&4&&G(l,r[2])},d(r){r&&g(t)}}}function ce(e){let t,l,r=e[6]("login.welcome")+"",f,p,m,c,n,s,_,I,v,y,h,E=e[6]("login.forgot")+"",k,L,o,d,w;function te(a){e[9](a)}let Q={label:e[6]("login.email"),type:"email",autoFocus:!0,placeholder:"you@domain.com",className:"mb-6",inputClassName:"w-full",isDisabled:e[3],errorMessage:e[4].email};e[1].email!==void 0&&(Q.value=e[1].email),m=new Z({props:Q}),T.push(()=>J(m,"value",te));function se(a){e[10](a)}let X={label:e[6]("login.password"),type:"password",placeholder:"************",className:"mb-6",inputClassName:"w-full",isDisabled:e[3],errorMessage:e[4].password};e[1].password!==void 0&&(X.value=e[1].password),s=new Z({props:X}),T.push(()=>J(s,"value",se));let u=e[2]&&ae(e);return d=new fe({props:{label:e[6]("login.login"),type:"submit",className:"sm:w-full w-full",isDisabled:e[3],isLoading:e[3]}}),{c(){t=N("div"),l=N("p"),f=z(r),p=O(),M(m.$$.fragment),n=O(),M(s.$$.fragment),I=O(),u&&u.c(),v=O(),y=N("div"),h=N("a"),k=z(E),L=O(),o=N("div"),M(d.$$.fragment),this.h()},l(a){t=j(a,"DIV",{class:!0});var i=q(t);l=j(i,"P",{class:!0});var $=q(l);f=B($,r),$.forEach(g),p=P(i),V(m.$$.fragment,i),n=P(i),V(s.$$.fragment,i),I=P(i),u&&u.l(i),v=P(i),y=j(i,"DIV",{class:!0});var D=q(y);h=j(D,"A",{class:!0,href:!0});var R=q(h);k=B(R,E),R.forEach(g),D.forEach(g),i.forEach(g),L=P(a),o=j(a,"DIV",{class:!0});var Y=q(o);V(d.$$.fragment,Y),Y.forEach(g),this.h()},h(){S(l,"class","dark:text-white text-lg font-semibold mb-6"),S(h,"class","text-md text-primary-700"),S(h,"href","/forgot"),S(y,"class","w-full text-right"),S(t,"class","mt-4 w-full"),S(o,"class","my-4 w-full flex justify-end items-center")},m(a,i){A(a,t,i),b(t,l),b(l,f),b(t,p),F(m,t,null),b(t,n),F(s,t,null),b(t,I),u&&u.m(t,null),b(t,v),b(t,y),b(y,h),b(h,k),A(a,L,i),A(a,o,i),F(d,o,null),w=!0},p(a,i){(!w||i&64)&&r!==(r=a[6]("login.welcome")+"")&&G(f,r);const $={};i&64&&($.label=a[6]("login.email")),i&8&&($.isDisabled=a[3]),i&16&&($.errorMessage=a[4].email),!c&&i&2&&(c=!0,$.value=a[1].email,U(()=>c=!1)),m.$set($);const D={};i&64&&(D.label=a[6]("login.password")),i&8&&(D.isDisabled=a[3]),i&16&&(D.errorMessage=a[4].password),!_&&i&2&&(_=!0,D.value=a[1].password,U(()=>_=!1)),s.$set(D),a[2]?u?u.p(a,i):(u=ae(a),u.c(),u.m(t,v)):u&&(u.d(1),u=null),(!w||i&64)&&E!==(E=a[6]("login.forgot")+"")&&G(k,E);const R={};i&64&&(R.label=a[6]("login.login")),i&8&&(R.isDisabled=a[3]),i&8&&(R.isLoading=a[3]),d.$set(R)},i(a){w||(W(m.$$.fragment,a),W(s.$$.fragment,a),W(d.$$.fragment,a),w=!0)},o(a){H(m.$$.fragment,a),H(s.$$.fragment,a),H(d.$$.fragment,a),w=!1},d(a){a&&(g(t),g(L),g(o)),K(m),K(s),u&&u.d(),K(d)}}}function be(e){let t,l,r,f,p;document.title=t="Welcome back to "+(e[5].name||"KinetsHub");function m(n){e[11](n)}let c={supabase:e[7],isLogin:!0,handleSubmit:e[8],isLoading:e[3],$$slots:{default:[ce]},$$scope:{ctx:e}};return e[0]!==void 0&&(c.formRef=e[0]),r=new de({props:c}),T.push(()=>J(r,"formRef",m)),{c(){l=O(),M(r.$$.fragment)},l(n){ie("svelte-7tw8i2",document.head).forEach(g),l=P(n),V(r.$$.fragment,n)},m(n,s){A(n,l,s),F(r,n,s),p=!0},p(n,[s]){(!p||s&32)&&t!==(t="Welcome back to "+(n[5].name||"KinetsHub"))&&(document.title=t);const _={};s&8&&(_.isLoading=n[3]),s&65630&&(_.$$scope={dirty:s,ctx:n}),!f&&s&1&&(f=!0,_.formRef=n[0],U(()=>f=!1)),r.$set(_)},i(n){p||(W(r.$$.fragment,n),p=!0)},o(n){H(r.$$.fragment,n),p=!1},d(n){n&&g(l),K(r,n)}}}function he(e,t,l){let r,f,p,m;C(e,_e,o=>l(12,r=o)),C(e,ne,o=>l(13,f=o)),C(e,pe,o=>l(5,p=o)),C(e,ge,o=>l(6,m=o));let c,n=ue(),s=Object.assign({},x),_,I=!1,v=Object.assign({},x);new URLSearchParams(f.url.search).get("redirect");async function h(){const o=me(s);if(console.log("validationRes",o),Object.keys(o).length){l(4,v=Object.assign(v,o));return}try{l(3,I=!0);const{data:d,error:w}=await n.auth.signInWithPassword({email:s.email,password:s.password});if(console.log("data",d),w)throw w;ee("login",{email:s.email}),r.isOrgSite&&ee("student_login",{email:s.email})}catch(d){l(2,_=d.error_description||d.message),l(3,I=!1)}}function E(o){e.$$.not_equal(s.email,o)&&(s.email=o,l(1,s))}function k(o){e.$$.not_equal(s.password,o)&&(s.password=o,l(1,s))}function L(o){c=o,l(0,c)}return[c,s,_,I,v,p,m,n,h,E,k,L]}class Ne extends oe{constructor(t){super(),re(this,t,he,be,le,{})}}export{Ne as component};
//# sourceMappingURL=32.4b96ac83.js.map
