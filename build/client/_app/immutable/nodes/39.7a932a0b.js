import{S as dt,i as _t,f as $e,b as F,d as G,m as U,a as k,c as de,t as g,e as X,g as _e}from"../chunks/index.a2391391.js";import{s as pt,w as De,x as O,C as Q,y as gt,d as D,z as S,D as j,b as B,e as z,i as oe,A as Ie,p as qe,t as ke,l as ye,f as p,m as we,Q as ht,n as Se,o as Le,S as st,T as lt}from"../chunks/scheduler.ee52cacd.js";import{e as Fe}from"../chunks/each.4f9c2159.js";import{g as Ge}from"../chunks/navigation.4bf4851d.js";import{p as Ue}from"../chunks/pluralize.2d93e111.js";import{T as it}from"../chunks/TrashCan.b6b32865.js";import{A as bt}from"../chunks/ArrowLeft.eacc72f9.js";import{V as at}from"../chunks/index.9237e2d9.js";import{P as He,V as ut}from"../chunks/index.550ce75a.js";import{A as ft}from"../chunks/index.4cadf3f1.js";import{I as mt}from"../chunks/index.e68f3ff9.js";import{h as vt,j as Xe,g as kt}from"../chunks/org.1ee4885a.js";import{p as yt}from"../chunks/user.9ccdc884.js";import{s as ve}from"../chunks/supabase.2c784bff.js";import{d as wt,c as Je}from"../chunks/validator.b0d7db8b.js";import{s as ce}from"../chunks/store.21c1b842.js";import{T as $t}from"../chunks/TextField.05bb724d.js";import{D as Ke}from"../chunks/DeleteModal.8a5767a4.js";import{T as ct}from"../chunks/index.846953bc.js";import{c as Ne}from"../chunks/date.4043184d.js";import{b as Dt}from"../chunks/index.523fac41.js";import{t as It}from"../chunks/translations.f943b7b3.js";import{c as Et}from"../chunks/store.9800a6a8.js";import{S as We}from"../chunks/SkeletonText.4f748957.js";import{S as Ct}from"../chunks/SkeletonPlaceholder.85251fa5.js";import{D as qt}from"../chunks/Dropdown.2e34ff7a.js";(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[t]="b3260d54-52ff-4648-93b3-920bfa94a2e0",o._sentryDebugIdIdentifier="sentry-dbid-b3260d54-52ff-4648-93b3-920bfa94a2e0")}catch{}})();const Vt=({params:o={slug:""}})=>({slug:o.slug}),_o=Object.freeze(Object.defineProperty({__proto__:null,load:Vt},Symbol.toStringTag,{value:"Module"}));function Ye(o,t,e){const n=o.slice();return n[13]=t[e],n}function At(o){let t,e,n,r,a=o[11]("community.ask.go_back")+"",i,u,m,d,y,l,w,E,C,N,b,$,h,J,H=o[1].author.name+"",Z,W,c,V=o[1].createdAt+"",I,R,A,T,M,ne,re,le=Ue(o[11]("community.answers"),o[1].totalComments,!0)+"",me,Ve,Ee,Ae,Te,ie,Ce,pe,ae,se;n=new bt({props:{size:24,class:"carbon-icon dark:text-white"}});const Pe=[St,Ot],ue=[];function Qe(f,_){return f[4]?0:1}y=Qe(o),l=ue[y]=Pe[y](o);let s=o[1].author.id===o[0].id&&Ze(o);$=new ft({props:{src:o[1].author.avatar,name:o[1].author.name,width:"w-7",height:"h-7"}});let v=(o[1].author.id===o[0].id||o[12])&&et(o);const P=[jt,Qt],Y=[];function x(f,_){return f[4]&&f[8]?0:1}T=x(o),M=Y[T]=P[T](o);let ee=Fe(o[1].comments),q=[];for(let f=0;f<ee.length;f+=1)q[f]=ot(Ye(o,ee,f));const fe=f=>k(q[f],1,1,()=>{q[f]=null});let K=!o[8]&&nt(o);return ae=new He({props:{label:o[11]("community.ask.comment"),onClick:o[14]}}),{c(){t=Q("div"),e=Q("a"),F(n.$$.fragment),r=O(),i=ke(a),m=O(),d=Q("div"),l.c(),w=O(),s&&s.c(),E=O(),C=Q("div"),N=Q("header"),b=Q("div"),F($.$$.fragment),h=O(),J=Q("p"),Z=ke(H),W=O(),c=Q("p"),I=ke(V),R=O(),v&&v.c(),A=O(),M.c(),ne=O(),re=Q("div"),me=ke(le),Ve=O();for(let f=0;f<q.length;f+=1)q[f].c();Ee=O(),Ae=Q("hr"),Te=O(),ie=Q("div"),K&&K.c(),Ce=O(),pe=Q("div"),F(ae.$$.fragment),this.h()},l(f){t=j(f,"DIV",{class:!0});var _=B(t);e=j(_,"A",{class:!0,href:!0});var te=B(e);G(n.$$.fragment,te),r=S(te),i=ye(te,a),te.forEach(D),m=S(_),d=j(_,"DIV",{class:!0});var ge=B(d);l.l(ge),w=S(ge),s&&s.l(ge),ge.forEach(D),E=S(_),C=j(_,"DIV",{class:!0});var he=B(C);N=j(he,"HEADER",{class:!0});var be=B(N);b=j(be,"DIV",{class:!0});var L=B(b);G($.$$.fragment,L),h=S(L),J=j(L,"P",{class:!0});var Oe=B(J);Z=ye(Oe,H),Oe.forEach(D),W=S(L),c=j(L,"P",{class:!0});var Re=B(c);I=ye(Re,V),Re.forEach(D),L.forEach(D),R=S(be),v&&v.l(be),be.forEach(D),A=S(he),M.l(he),he.forEach(D),ne=S(_),re=j(_,"DIV",{class:!0});var Me=B(re);me=ye(Me,le),Me.forEach(D),Ve=S(_);for(let ze=0;ze<q.length;ze+=1)q[ze].l(_);Ee=S(_),Ae=j(_,"HR",{}),Te=S(_),ie=j(_,"DIV",{});var je=B(ie);K&&K.l(je),Ce=S(je),pe=j(je,"DIV",{class:!0});var Be=B(pe);G(ae.$$.fragment,Be),Be.forEach(D),je.forEach(D),_.forEach(D),this.h()},h(){z(e,"class","text-gray-500 dark:text-white text-md flex items-center"),z(e,"href",u=`${o[10]}/community`),z(d,"class","my-5 flex justify-between items-center"),z(J,"class","dark:text-white ml-2 text-sm"),z(c,"class","dark:text-white ml-2 text-sm text-gray-500"),z(b,"class","flex items-center no-underline hover:underline text-black"),z(N,"class","flex items-center justify-between leading-none p-2"),z(C,"class","my-1 px-1 rounded-lg border border-1 border-gray"),z(re,"class","my-8 font-bold"),z(pe,"class","flex justify-end mr-2"),z(t,"class","py-10 px-5")},m(f,_){oe(f,t,_),p(t,e),U(n,e,null),p(e,r),p(e,i),p(t,m),p(t,d),ue[y].m(d,null),p(d,w),s&&s.m(d,null),p(t,E),p(t,C),p(C,N),p(N,b),U($,b,null),p(b,h),p(b,J),p(J,Z),p(b,W),p(b,c),p(c,I),p(N,R),v&&v.m(N,null),p(C,A),Y[T].m(C,null),p(t,ne),p(t,re),p(re,me),p(t,Ve);for(let te=0;te<q.length;te+=1)q[te]&&q[te].m(t,null);p(t,Ee),p(t,Ae),p(t,Te),p(t,ie),K&&K.m(ie,null),p(ie,Ce),p(ie,pe),U(ae,pe,null),se=!0},p(f,_){(!se||_[0]&2048)&&a!==(a=f[11]("community.ask.go_back")+"")&&we(i,a),(!se||_[0]&1024&&u!==(u=`${f[10]}/community`))&&z(e,"href",u);let te=y;y=Qe(f),y===te?ue[y].p(f,_):(_e(),k(ue[te],1,1,()=>{ue[te]=null}),de(),l=ue[y],l?l.p(f,_):(l=ue[y]=Pe[y](f),l.c()),g(l,1),l.m(d,w)),f[1].author.id===f[0].id?s?(s.p(f,_),_[0]&3&&g(s,1)):(s=Ze(f),s.c(),g(s,1),s.m(d,null)):s&&(_e(),k(s,1,1,()=>{s=null}),de());const ge={};_[0]&2&&(ge.src=f[1].author.avatar),_[0]&2&&(ge.name=f[1].author.name),$.$set(ge),(!se||_[0]&2)&&H!==(H=f[1].author.name+"")&&we(Z,H),(!se||_[0]&2)&&V!==(V=f[1].createdAt+"")&&we(I,V),f[1].author.id===f[0].id||f[12]?v?(v.p(f,_),_[0]&4099&&g(v,1)):(v=et(f),v.c(),g(v,1),v.m(N,null)):v&&(_e(),k(v,1,1,()=>{v=null}),de());let he=T;if(T=x(f),T===he?Y[T].p(f,_):(_e(),k(Y[he],1,1,()=>{Y[he]=null}),de(),M=Y[T],M?M.p(f,_):(M=Y[T]=P[T](f),M.c()),g(M,1),M.m(C,null)),(!se||_[0]&2050)&&le!==(le=Ue(f[11]("community.answers"),f[1].totalComments,!0)+"")&&we(me,le),_[0]&36907){ee=Fe(f[1].comments);let L;for(L=0;L<ee.length;L+=1){const Oe=Ye(f,ee,L);q[L]?(q[L].p(Oe,_),g(q[L],1)):(q[L]=ot(Oe),q[L].c(),g(q[L],1),q[L].m(t,Ee))}for(_e(),L=ee.length;L<q.length;L+=1)fe(L);de()}f[8]?K&&(_e(),k(K,1,1,()=>{K=null}),de()):K?(K.p(f,_),_[0]&256&&g(K,1)):(K=nt(f),K.c(),g(K,1),K.m(ie,Ce));const be={};_[0]&2048&&(be.label=f[11]("community.ask.comment")),ae.$set(be)},i(f){if(!se){g(n.$$.fragment,f),g(l),g(s),g($.$$.fragment,f),g(v),g(M);for(let _=0;_<ee.length;_+=1)g(q[_]);g(K),g(ae.$$.fragment,f),se=!0}},o(f){k(n.$$.fragment,f),k(l),k(s),k($.$$.fragment,f),k(v),k(M),q=q.filter(Boolean);for(let _=0;_<q.length;_+=1)k(q[_]);k(K),k(ae.$$.fragment,f),se=!1},d(f){f&&D(t),X(n),ue[y].d(),s&&s.d(),X($),v&&v.d(),Y[T].d(),ht(q,f),K&&K.d(),X(ae)}}}function Tt(o){let t,e,n,r,a,i,u;return e=new We({props:{style:"width: 25%;"}}),r=new We({props:{style:"width: 100%; margin-bottom: 2rem"}}),i=new Ct({props:{style:"width: 100%; height: 20rem;"}}),{c(){t=Q("div"),F(e.$$.fragment),n=O(),F(r.$$.fragment),a=O(),F(i.$$.fragment),this.h()},l(m){t=j(m,"DIV",{class:!0});var d=B(t);G(e.$$.fragment,d),n=S(d),G(r.$$.fragment,d),a=S(d),G(i.$$.fragment,d),d.forEach(D),this.h()},h(){z(t,"class","py-10 px-5 mb-3")},m(m,d){oe(m,t,d),U(e,t,null),p(t,n),U(r,t,null),p(t,a),U(i,t,null),u=!0},p:Se,i(m){u||(g(e.$$.fragment,m),g(r.$$.fragment,m),g(i.$$.fragment,m),u=!0)},o(m){k(e.$$.fragment,m),k(r.$$.fragment,m),k(i.$$.fragment,m),u=!1},d(m){m&&D(t),X(e),X(r),X(i)}}}function Ot(o){let t,e,n,r,a=o[1].title+"",i,u;return e=new at({props:{value:o[1].votes,upVote:o[29],disabled:o[3].question}}),{c(){t=Q("div"),F(e.$$.fragment),n=O(),r=Q("h2"),i=ke(a),this.h()},l(m){t=j(m,"DIV",{class:!0});var d=B(t);G(e.$$.fragment,d),n=S(d),r=j(d,"H2",{class:!0});var y=B(r);i=ye(y,a),y.forEach(D),d.forEach(D),this.h()},h(){z(r,"class","text-3xl"),z(t,"class","flex items-center")},m(m,d){oe(m,t,d),U(e,t,null),p(t,n),p(t,r),p(r,i),u=!0},p(m,d){const y={};d[0]&2&&(y.value=m[1].votes),d[0]&8&&(y.disabled=m[3].question),e.$set(y),(!u||d[0]&2)&&a!==(a=m[1].title+"")&&we(i,a)},i(m){u||(g(e.$$.fragment,m),u=!0)},o(m){k(e.$$.fragment,m),u=!1},d(m){m&&D(t),X(e)}}}function St(o){let t,e,n,r,a,i;function u(l){o[27](l)}let m={className:"w-full mr-2",errorMessage:o[2].title};o[7].title!==void 0&&(m.value=o[7].title),t=new $t({props:m}),De.push(()=>$e(t,"value",u));function d(l){o[28](l)}let y={class:"w-[25%] h-full",size:"xl",label:o[11]("community.ask.select_course"),items:o[9].map(rt)};return o[7].courseId!==void 0&&(y.selectedId=o[7].courseId),r=new qt({props:y}),De.push(()=>$e(r,"selectedId",d)),{c(){F(t.$$.fragment),n=O(),F(r.$$.fragment)},l(l){G(t.$$.fragment,l),n=S(l),G(r.$$.fragment,l)},m(l,w){U(t,l,w),oe(l,n,w),U(r,l,w),i=!0},p(l,w){const E={};w[0]&4&&(E.errorMessage=l[2].title),!e&&w[0]&128&&(e=!0,E.value=l[7].title,Ie(()=>e=!1)),t.$set(E);const C={};w[0]&2048&&(C.label=l[11]("community.ask.select_course")),w[0]&512&&(C.items=l[9].map(rt)),!a&&w[0]&128&&(a=!0,C.selectedId=l[7].courseId,Ie(()=>a=!1)),r.$set(C)},i(l){i||(g(t.$$.fragment,l),g(r.$$.fragment,l),i=!0)},o(l){k(t.$$.fragment,l),k(r.$$.fragment,l),i=!1},d(l){l&&D(n),X(t,l),X(r,l)}}}function Ze(o){let t,e,n,r;t=new He({props:{label:o[4]?o[11]("community.ask.save"):o[11]("community.ask.edit"),variant:ut.OUTLINED,onClick:o[16],className:"h-fit"}});let a=o[4]&&xe(o);return{c(){F(t.$$.fragment),e=O(),a&&a.c(),n=Le()},l(i){G(t.$$.fragment,i),e=S(i),a&&a.l(i),n=Le()},m(i,u){U(t,i,u),oe(i,e,u),a&&a.m(i,u),oe(i,n,u),r=!0},p(i,u){const m={};u[0]&2064&&(m.label=i[4]?i[11]("community.ask.save"):i[11]("community.ask.edit")),t.$set(m),i[4]?a?(a.p(i,u),u[0]&16&&g(a,1)):(a=xe(i),a.c(),g(a,1),a.m(n.parentNode,n)):a&&(_e(),k(a,1,1,()=>{a=null}),de())},i(i){r||(g(t.$$.fragment,i),g(a),r=!0)},o(i){k(t.$$.fragment,i),k(a),r=!1},d(i){i&&(D(e),D(n)),X(t,i),a&&a.d(i)}}}function xe(o){let t,e;return t=new He({props:{label:o[11]("community.ask.cancel"),variant:ut.TEXT,onClick:o[30],className:"py-3 px-6 rounded-sm h-fit",disablePadding:!0}}),{c(){F(t.$$.fragment)},l(n){G(t.$$.fragment,n)},m(n,r){U(t,n,r),e=!0},p(n,r){const a={};r[0]&2048&&(a.label=n[11]("community.ask.cancel")),r[0]&16&&(a.onClick=n[30]),t.$set(a)},i(n){e||(g(t.$$.fragment,n),e=!0)},o(n){k(t.$$.fragment,n),e=!1},d(n){X(t,n)}}}function et(o){let t,e;return t=new mt({props:{value:"delete-question",onClick:o[31],$$slots:{default:[Pt]},$$scope:{ctx:o}}}),{c(){F(t.$$.fragment)},l(n){G(t.$$.fragment,n)},m(n,r){U(t,n,r),e=!0},p(n,r){const a={};r[0]&66&&(a.onClick=n[31]),r[1]&32768&&(a.$$scope={dirty:r,ctx:n}),t.$set(a)},i(n){e||(g(t.$$.fragment,n),e=!0)},o(n){k(t.$$.fragment,n),e=!1},d(n){X(t,n)}}}function Pt(o){let t,e;return t=new it({props:{size:16,class:"carbon-icon dark:text-white"}}),{c(){F(t.$$.fragment)},l(n){G(t.$$.fragment,n)},m(n,r){U(t,n,r),e=!0},p:Se,i(n){e||(g(t.$$.fragment,n),e=!0)},o(n){k(t.$$.fragment,n),e=!1},d(n){X(t,n)}}}function Qt(o){let t,e,n=o[1].body+"";return{c(){t=Q("section"),e=new st(!1),this.h()},l(r){t=j(r,"SECTION",{class:!0});var a=B(t);e=lt(a,!1),a.forEach(D),this.h()},h(){e.a=null,z(t,"class","prose prose-sm sm:prose p-2")},m(r,a){oe(r,t,a),e.m(n,t)},p(r,a){a[0]&2&&n!==(n=r[1].body+"")&&e.p(n)},i:Se,o:Se,d(r){r&&D(t)}}}function jt(o){let t,e,n,r;function a(u){o[33](u)}let i={placeholder:o[11]("community.ask.give"),onChange:o[32]};return o[7].body!==void 0&&(i.value=o[7].body),e=new ct({props:i}),De.push(()=>$e(e,"value",a)),{c(){t=Q("div"),F(e.$$.fragment),this.h()},l(u){t=j(u,"DIV",{class:!0});var m=B(t);G(e.$$.fragment,m),m.forEach(D),this.h()},h(){z(t,"class","my-2")},m(u,m){oe(u,t,m),U(e,t,null),r=!0},p(u,m){const d={};m[0]&2048&&(d.placeholder=u[11]("community.ask.give")),m[0]&128&&(d.onChange=u[32]),!n&&m[0]&128&&(n=!0,d.value=u[7].body,Ie(()=>n=!1)),e.$set(d)},i(u){r||(g(e.$$.fragment,u),r=!0)},o(u){k(e.$$.fragment,u),r=!1},d(u){u&&D(t),X(e)}}}function tt(o){let t,e;function n(){return o[35](o[13])}return t=new mt({props:{value:"delete-comment",onClick:n,$$slots:{default:[zt]},$$scope:{ctx:o}}}),{c(){F(t.$$.fragment)},l(r){G(t.$$.fragment,r)},m(r,a){U(t,r,a),e=!0},p(r,a){o=r;const i={};a[0]&34&&(i.onClick=n),a[1]&32768&&(i.$$scope={dirty:a,ctx:o}),t.$set(i)},i(r){e||(g(t.$$.fragment,r),e=!0)},o(r){k(t.$$.fragment,r),e=!1},d(r){X(t,r)}}}function zt(o){let t,e;return t=new it({props:{size:16,class:"carbon-icon dark:text-white"}}),{c(){F(t.$$.fragment)},l(n){G(t.$$.fragment,n)},m(n,r){U(t,n,r),e=!0},p:Se,i(n){e||(g(t.$$.fragment,n),e=!0)},o(n){k(t.$$.fragment,n),e=!1},d(n){X(t,n)}}}function ot(o){let t,e,n,r,a,i,u,m,d,y=o[13].name+"",l,w,E,C=o[13].createdAt+"",N,b,$,h,J,H,Z=o[13].comment+"",W;function c(){return o[34](o[13])}e=new at({props:{value:o[13].votes,upVote:c,disabled:o[3].comment[o[13].id]}}),u=new ft({props:{src:o[13].avatar,name:o[13].name,width:"w-7",height:"h-7"}});let V=Ht,I=(o[13].authorId===o[0].id||o[12])&&tt(o);return{c(){t=Q("div"),F(e.$$.fragment),n=O(),r=Q("div"),a=Q("header"),i=Q("div"),F(u.$$.fragment),m=O(),d=Q("p"),l=ke(y),w=O(),E=Q("p"),N=ke(C),b=O(),$=O(),I&&I.c(),h=O(),J=Q("article"),H=new st(!1),this.h()},l(R){t=j(R,"DIV",{class:!0});var A=B(t);G(e.$$.fragment,A),n=S(A),r=j(A,"DIV",{class:!0});var T=B(r);a=j(T,"HEADER",{class:!0});var M=B(a);i=j(M,"DIV",{class:!0});var ne=B(i);G(u.$$.fragment,ne),m=S(ne),d=j(ne,"P",{class:!0});var re=B(d);l=ye(re,y),re.forEach(D),w=S(ne),E=j(ne,"P",{class:!0});var le=B(E);N=ye(le,C),le.forEach(D),ne.forEach(D),b=S(M),$=S(M),I&&I.l(M),M.forEach(D),h=S(T),J=j(T,"ARTICLE",{class:!0});var me=B(J);H=lt(me,!1),me.forEach(D),T.forEach(D),A.forEach(D),this.h()},h(){z(d,"class","dark:text-white ml-2 text-sm"),z(E,"class","dark:text-white ml-2 text-sm text-gray-500"),z(i,"class","flex items-center text-black"),z(a,"class","flex items-center justify-between leading-none p-2"),H.a=null,z(J,"class","prose prose-sm sm:prose p-2"),z(r,"class","w-full rounded-lg border border-1 border-gray"),z(t,"class","my-5 px-1 flex items-start")},m(R,A){oe(R,t,A),U(e,t,null),p(t,n),p(t,r),p(r,a),p(a,i),U(u,i,null),p(i,m),p(i,d),p(d,l),p(i,w),p(i,E),p(E,N),p(a,b),p(a,$),I&&I.m(a,null),p(r,h),p(r,J),H.m(Z,J),W=!0},p(R,A){o=R;const T={};A[0]&2&&(T.value=o[13].votes),A[0]&2&&(T.upVote=c),A[0]&10&&(T.disabled=o[3].comment[o[13].id]),e.$set(T);const M={};A[0]&2&&(M.src=o[13].avatar),A[0]&2&&(M.name=o[13].name),u.$set(M),(!W||A[0]&2)&&y!==(y=o[13].name+"")&&we(l,y),(!W||A[0]&2)&&C!==(C=o[13].createdAt+"")&&we(N,C),o[13].authorId===o[0].id||o[12]?I?(I.p(o,A),A[0]&4099&&g(I,1)):(I=tt(o),I.c(),g(I,1),I.m(a,null)):I&&(_e(),k(I,1,1,()=>{I=null}),de()),(!W||A[0]&2)&&Z!==(Z=o[13].comment+"")&&H.p(Z)},i(R){W||(g(e.$$.fragment,R),g(u.$$.fragment,R),g(V),g(I),W=!0)},o(R){k(e.$$.fragment,R),k(u.$$.fragment,R),k(V),k(I),W=!1},d(R){R&&D(t),X(e),X(u),I&&I.d()}}}function nt(o){let t,e,n;function r(i){o[37](i)}let a={placeholder:o[11]("community.ask.give"),onChange:o[36]};return o[13]!==void 0&&(a.value=o[13]),t=new ct({props:a}),De.push(()=>$e(t,"value",r)),{c(){F(t.$$.fragment)},l(i){G(t.$$.fragment,i)},m(i,u){U(t,i,u),n=!0},p(i,u){const m={};u[0]&2048&&(m.placeholder=i[11]("community.ask.give")),u[0]&8192&&(m.onChange=i[36]),!e&&u[0]&8192&&(e=!0,m.value=i[13],Ie(()=>e=!1)),t.$set(m)},i(i){n||(g(t.$$.fragment,i),n=!0)},o(i){k(t.$$.fragment,i),n=!1},d(i){X(t,i)}}}function Nt(o){var W;let t,e,n,r,a,i,u,m,d,y,l,w,E;document.title=t=((W=o[1])==null?void 0:W.title)||o[11]("community.ask.question");function C(c){o[22](c)}function N(c){o[23](c)}let b={onCancel:o[20],onDelete:o[21],isQuestion:!0};o[6].shouldDelete!==void 0&&(b.open=o[6].shouldDelete),o[6].isDeleting!==void 0&&(b.isDeleting=o[6].isDeleting),n=new Ke({props:b}),De.push(()=>$e(n,"open",C)),De.push(()=>$e(n,"isDeleting",N));function $(c){o[26](c)}let h={isDeleting:o[5].isDeleting,onCancel:o[24],onDelete:o[25]};o[5].shouldDelete!==void 0&&(h.open=o[5].shouldDelete),u=new Ke({props:h}),De.push(()=>$e(u,"open",$));const J=[Tt,At],H=[];function Z(c,V){return c[1]?1:0}return l=Z(o),w=H[l]=J[l](o),{c(){e=O(),F(n.$$.fragment),i=O(),F(u.$$.fragment),d=O(),y=Q("section"),w.c(),this.h()},l(c){gt("svelte-5par4z",document.head).forEach(D),e=S(c),G(n.$$.fragment,c),i=S(c),G(u.$$.fragment,c),d=S(c),y=j(c,"SECTION",{class:!0});var I=B(y);w.l(I),I.forEach(D),this.h()},h(){z(y,"class","max-w-3xl mx-auto md:mx-10 lg:mb-20")},m(c,V){oe(c,e,V),U(n,c,V),oe(c,i,V),U(u,c,V),oe(c,d,V),oe(c,y,V),H[l].m(y,null),E=!0},p(c,V){var T;(!E||V[0]&2050)&&t!==(t=((T=c[1])==null?void 0:T.title)||c[11]("community.ask.question"))&&(document.title=t);const I={};V[0]&64&&(I.onCancel=c[20]),!r&&V[0]&64&&(r=!0,I.open=c[6].shouldDelete,Ie(()=>r=!1)),!a&&V[0]&64&&(a=!0,I.isDeleting=c[6].isDeleting,Ie(()=>a=!1)),n.$set(I);const R={};V[0]&32&&(R.isDeleting=c[5].isDeleting),V[0]&32&&(R.onCancel=c[24]),!m&&V[0]&32&&(m=!0,R.open=c[5].shouldDelete,Ie(()=>m=!1)),u.$set(R);let A=l;l=Z(c),l===A?H[l].p(c,V):(_e(),k(H[A],1,1,()=>{H[A]=null}),de(),w=H[l],w?w.p(c,V):(w=H[l]=J[l](c),w.c()),g(w,1),w.m(y,null))},i(c){E||(g(n.$$.fragment,c),g(u.$$.fragment,c),g(w),E=!0)},o(c){k(n.$$.fragment,c),k(u.$$.fragment,c),k(w),E=!1},d(c){c&&(D(e),D(i),D(d),D(y)),X(n,c),X(u,c),H[l].d()}}}let Ht=!1;const rt=o=>({id:o.id,text:o.title});function Rt(o,t,e){let n,r,a,i,u,m;qe(o,vt,s=>e(19,n=s)),qe(o,yt,s=>e(0,r=s)),qe(o,Xe,s=>e(10,a=s)),qe(o,Et,s=>e(39,i=s)),qe(o,It,s=>e(11,u=s)),qe(o,kt,s=>e(12,m=s));let{data:d}=t;const{slug:y}=d;let l,w="",E={},C={question:!1,comment:{}},N=!1,b={shouldDelete:!1,commentId:"",isDeleting:!1},$={shouldDelete:!1,questionId:"",isDeleting:!1},h={title:"",body:"",courseId:""},J=!1,H=[];function Z(s){var v,P,Y;return{id:s.id,title:s.title,votes:s.votes,author:{id:((v=s==null?void 0:s.author)==null?void 0:v.id)||"",name:((P=s==null?void 0:s.author)==null?void 0:P.fullname)||"",avatar:((Y=s==null?void 0:s.author)==null?void 0:Y.avatar_url)||""},body:s.body,createdAt:Ne(s.created_at),comments:s.comments.map(x=>{var ee,q,fe;return{id:x.id,authorId:((ee=x.author)==null?void 0:ee.id)||"",name:((q=x.author)==null?void 0:q.fullname)||"",avatar:((fe=x.author)==null?void 0:fe.avatar_url)||"",votes:x.votes,comment:x.body,createdAt:Ne(x.created_at)}}),totalComments:0,courseId:s.course_id}}async function W(s,v){if(i.length){e(9,H=[...i]);return}const P=await Dt(s,v);e(9,H=(P==null?void 0:P.allCourses)||[])}async function c(s){if(!s)return;const{data:v,error:P}=await ve.from("community_question").select(`
        id,
        title,
        body,
        votes,
        created_at,
        course_id,
        slug,
        comments:community_answer(
          id,
          body,
          votes,
          created_at,
          author:profile(id, fullname, avatar_url)
        ),
        author:profile(id, fullname, avatar_url),
        course!inner (
          title
        )
      `).eq("slug",s).single();if(P)return console.error("[ORG] Error loading community",P),Ge(`${Xe}`);e(1,l=Z(v)),e(1,l.totalComments=l.comments.length,l)}async function V(){if(e(2,E=wt({comment:w})),console.log("submitComment errors",E),Object.keys(E).length)return;const{data:s,error:v}=await ve.from("community_answer").insert({id:void 0,body:w,question_id:l.id,author_profile_id:r.id,votes:0}).select();if(v)console.error("Error: commenting",v),ce.error("snackbar.community.error.try_again");else{console.log("Success: commenting",s),ce.success("snackbar.community.success.comment_submitted");const P=s==null?void 0:s[0];e(1,l.comments=[...l.comments,{id:P.id,authorId:r.id||"",name:(r==null?void 0:r.fullname)||"",avatar:(r==null?void 0:r.avatar_url)||"",votes:0,comment:P.body,createdAt:Ne(P.created_at)}],l),e(13,w="")}}async function I(s,v){const P=s==="question";if(P&&C.question||!P&&v&&C.comment[v])return;const Y=P?"community_question":"community_answer",x=P?l.id:v;let ee=0;P?(e(1,l.votes=l.votes+1,l),ee=l.votes):e(1,l.comments=l.comments.map(fe=>(fe.id===v&&(fe.votes=fe.votes+1,ee=fe.votes),fe)),l);const{error:q}=await ve.from(Y).update({votes:ee}).match({id:x});q?(console.error("Error: upvoteQuestion",q),ce.error("snackbar.community.error.try_again")):P?e(3,C.question=!0,C):v&&e(3,C.comment[v]=!0,C)}async function R(){if(!(N&&(e(2,E=Je(h)),console.log("handleQuestionEdit errors",E),Object.keys(E).length)))if(e(4,N=!N),e(8,J=!J),N)e(7,h.title=l.title,h),e(7,h.body=l.body,h),e(7,h.courseId=l.courseId,h);else{if(e(2,E=Je(h)),console.log("handleQuestionEdit errors",E),Object.keys(E).length)return;const{error:s}=await ve.from("community_question").update({title:h.title,body:h.body,course_id:h.courseId}).match({id:l.id});s?(console.error("Error: handleQuestionEdit",s),ce.error("snackbar.community.error.try_again")):(e(1,l.title=h.title,l),e(1,l.body=h.body,l),e(1,l.courseId=h.courseId,l),e(7,h.title="",h),e(7,h.body="",h),e(7,h.courseId="",h))}}async function A(s){if(!s){e(5,b.isDeleting=!0,b);const{error:Y}=await ve.from("community_answer").delete().match({id:b.commentId});if(e(5,b.isDeleting=!1,b),Y){ce.error("snackbar.community.error.deleting_comments"),console.log("Error deleting comments",Y);return}ce.success("snackbar.community.success.success_delete"),e(1,l.comments=l.comments.filter(x=>x.id!==b.commentId),l),e(5,b.shouldDelete=!1,b),e(5,b.commentId="",b);return}e(6,$.isDeleting=!0,$);const{error:v}=await ve.from("community_answer").delete().match({question_id:$.questionId});if(v){ce.error("snackbar.community.error.deleting_comments"),console.log("Error deleting comments",v),e(6,$.isDeleting=!1,$);return}const{error:P}=await ve.from("community_question").delete().match({id:$.questionId});if(P){ce.error("snackbar.community.error.deleting_question"),console.log("Error deleting question",P);return}ce.success("snackbar.community.success.success_delete"),Ge(`${a}/community`),e(6,$.isDeleting=!1,$)}const T=()=>{e(6,$.shouldDelete=!1,$),e(6,$.questionId="",$)},M=()=>A(!0);function ne(s){o.$$.not_equal($.shouldDelete,s)&&($.shouldDelete=s,e(6,$))}function re(s){o.$$.not_equal($.isDeleting,s)&&($.isDeleting=s,e(6,$))}const le=()=>{e(5,b.shouldDelete=!1,b),e(5,b.commentId="",b)},me=()=>A(!1);function Ve(s){o.$$.not_equal(b.shouldDelete,s)&&(b.shouldDelete=s,e(5,b))}function Ee(s){o.$$.not_equal(h.title,s)&&(h.title=s,e(7,h))}function Ae(s){o.$$.not_equal(h.courseId,s)&&(h.courseId=s,e(7,h))}const Te=()=>I("question"),ie=()=>e(4,N=!N),Ce=()=>{e(6,$.shouldDelete=!0,$),e(6,$.questionId=l.id,$)},pe=s=>e(7,h.body=s,h);function ae(s){o.$$.not_equal(h.body,s)&&(h.body=s,e(7,h))}const se=s=>I("comment",s.id),Pe=s=>{e(5,b.shouldDelete=!0,b),e(5,b.commentId=s.id,b)},ue=s=>e(13,w=s);function Qe(s){w=s,e(13,w)}return o.$$set=s=>{"data"in s&&e(18,d=s.data)},o.$$.update=()=>{o.$$.dirty[0]&524289&&r.id&&n.id&&W(r.id,n.id)},c(y),[r,l,E,C,N,b,$,h,J,H,a,u,m,w,V,I,R,A,d,n,T,M,ne,re,le,me,Ve,Ee,Ae,Te,ie,Ce,pe,ae,se,Pe,ue,Qe]}class po extends dt{constructor(t){super(),_t(this,t,Rt,Nt,pt,{data:18},null,[-1,-1])}}export{po as component,_o as universal};
//# sourceMappingURL=39.7a932a0b.js.map
