import{s as pe,p as G,x as C,z as N,i as O,d as g,w as se,C as B,t as q,D as y,b as F,l as H,e as V,f as T,m as M,A as ne,o as X,Q as Ie,n as ke,y as we}from"../chunks/scheduler.ee52cacd.js";import{S as $e,i as _e,b as v,d as I,m as k,t as _,a as d,e as w,f as le,g as J,c as W}from"../chunks/index.a2391391.js";import{e as ae}from"../chunks/each.4f9c2159.js";/* empty css                                                      */import{M as Ee}from"../chunks/Moon.7f4aad82.js";import{T as Te}from"../chunks/TextField.05bb724d.js";import{T as de}from"../chunks/Text.40bcd65a.js";import{C as De}from"../chunks/index.d1f5fa28.js";import{P as ge,V as Re}from"../chunks/index.550ce75a.js";import{v as Se}from"../chunks/validator.b0d7db8b.js";import{h as Ae,l as ee,q as Le,R as U,k as K,j as Ce}from"../chunks/org.1ee4885a.js";import{s as Q}from"../chunks/store.21c1b842.js";import{g as Ne}from"../chunks/index.90bb86b1.js";import{p as Oe}from"../chunks/user.9ccdc884.js";import{s as oe}from"../chunks/supabase.2c784bff.js";import{S as be}from"../chunks/SectionTitle.e28fa82d.js";import{t as he}from"../chunks/translations.f943b7b3.js";import{G as Pe,R as fe,C as Y}from"../chunks/Column.85a33c57.js";import{S as Ve,a as ie}from"../chunks/SelectItem.b7c50800.js";import{B as ze}from"../chunks/Banner.a0824faa.js";(function(){try{var l=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[t]="903d18f8-50ee-4f58-8c90-e34ea236d961",l._sentryDebugIdIdentifier="sentry-dbid-903d18f8-50ee-4f58-8c90-e34ea236d961")}catch{}})();function me(l,t,r){const e=l.slice();return e[18]=t[r],e}function Be(l){let t=l[7]("course.navItem.people.teams.add")+"",r;return{c(){r=q(t)},l(e){r=H(e,t)},m(e,n){O(e,r,n)},p(e,n){n&128&&t!==(t=e[7]("course.navItem.people.teams.add")+"")&&M(r,t)},d(e){e&&g(r)}}}function ye(l){let t,r;return t=new be({props:{$$slots:{default:[Be]},$$scope:{ctx:l}}}),{c(){v(t.$$.fragment)},l(e){I(t.$$.fragment,e)},m(e,n){k(t,e,n),r=!0},p(e,n){const s={};n&2097280&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){w(t,e)}}}function Fe(l){let t,r,e,n;return t=new ie({props:{value:U.ADMIN,text:l[7](K[U.ADMIN])}}),e=new ie({props:{value:U.TUTOR,text:l[7](K[U.TUTOR])}}),{c(){v(t.$$.fragment),r=C(),v(e.$$.fragment)},l(s){I(t.$$.fragment,s),r=N(s),I(e.$$.fragment,s)},m(s,a){k(t,s,a),O(s,r,a),k(e,s,a),n=!0},p(s,a){const m={};a&128&&(m.text=s[7](K[U.ADMIN])),t.$set(m);const f={};a&128&&(f.text=s[7](K[U.TUTOR])),e.$set(f)},i(s){n||(_(t.$$.fragment,s),_(e.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),d(e.$$.fragment,s),n=!1},d(s){s&&g(r),w(t,s),w(e,s)}}}function Ue(l){let t,r=l[7]("course.navItem.people.teams.add_team")+"",e,n,s,a,m,f,c,$,S,b,D;function R(o){l[14](o)}let P={label:l[7]("course.navItem.people.teams.invite"),placeholder:l[7]("course.navItem.people.teams.placeholder"),className:"mb-3",isDisabled:l[8],errorMessage:l[1]};l[0]!==void 0&&(P.value=l[0]),a=new Te({props:P}),se.push(()=>le(a,"value",R));function E(o){l[15](o)}let L={labelText:l[7]("course.navItem.people.teams.role"),class:"mb-5 w-40",disabled:l[8],$$slots:{default:[Fe]},$$scope:{ctx:l}};return l[2]!==void 0&&(L.selected=l[2]),c=new Ve({props:L}),se.push(()=>le(c,"selected",E)),b=new ge({props:{label:l[7]("course.navItem.people.teams.send_invite"),onClick:l[10],isLoading:l[4],isDisabled:l[4]||l[8]}}),{c(){t=B("p"),e=q(r),n=C(),s=B("div"),v(a.$$.fragment),f=C(),v(c.$$.fragment),S=C(),v(b.$$.fragment),this.h()},l(o){t=y(o,"P",{class:!0});var i=F(t);e=H(i,r),i.forEach(g),n=N(o),s=y(o,"DIV",{class:!0});var p=F(s);I(a.$$.fragment,p),f=N(p),I(c.$$.fragment,p),S=N(p),I(b.$$.fragment,p),p.forEach(g),this.h()},h(){V(t,"class","text-md text-gray-500 dark:text-white mb-5"),V(s,"class","")},m(o,i){O(o,t,i),T(t,e),O(o,n,i),O(o,s,i),k(a,s,null),T(s,f),k(c,s,null),T(s,S),k(b,s,null),D=!0},p(o,i){(!D||i&128)&&r!==(r=o[7]("course.navItem.people.teams.add_team")+"")&&M(e,r);const p={};i&128&&(p.label=o[7]("course.navItem.people.teams.invite")),i&128&&(p.placeholder=o[7]("course.navItem.people.teams.placeholder")),i&256&&(p.isDisabled=o[8]),i&2&&(p.errorMessage=o[1]),!m&&i&1&&(m=!0,p.value=o[0],ne(()=>m=!1)),a.$set(p);const u={};i&128&&(u.labelText=o[7]("course.navItem.people.teams.role")),i&256&&(u.disabled=o[8]),i&2097280&&(u.$$scope={dirty:i,ctx:o}),!$&&i&4&&($=!0,u.selected=o[2],ne(()=>$=!1)),c.$set(u);const h={};i&128&&(h.label=o[7]("course.navItem.people.teams.send_invite")),i&16&&(h.isLoading=o[4]),i&272&&(h.isDisabled=o[4]||o[8]),b.$set(h)},i(o){D||(_(a.$$.fragment,o),_(c.$$.fragment,o),_(b.$$.fragment,o),D=!0)},o(o){d(a.$$.fragment,o),d(c.$$.fragment,o),d(b.$$.fragment,o),D=!1},d(o){o&&(g(t),g(n),g(s)),w(a),w(c),w(b)}}}function je(l){let t,r,e,n;return t=new Y({props:{sm:2,md:2,lg:4,class:"text-lg",$$slots:{default:[ye]},$$scope:{ctx:l}}}),e=new Y({props:{sm:2,md:6,lg:8,$$slots:{default:[Ue]},$$scope:{ctx:l}}}),{c(){v(t.$$.fragment),r=C(),v(e.$$.fragment)},l(s){I(t.$$.fragment,s),r=N(s),I(e.$$.fragment,s)},m(s,a){k(t,s,a),O(s,r,a),k(e,s,a),n=!0},p(s,a){const m={};a&2097280&&(m.$$scope={dirty:a,ctx:s}),t.$set(m);const f={};a&2097559&&(f.$$scope={dirty:a,ctx:s}),e.$set(f)},i(s){n||(_(t.$$.fragment,s),_(e.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),d(e.$$.fragment,s),n=!1},d(s){s&&g(r),w(t,s),w(e,s)}}}function Ge(l){let t=l[7]("course.navItem.people.teams.members")+"",r;return{c(){r=q(t)},l(e){r=H(e,t)},m(e,n){O(e,r,n)},p(e,n){n&128&&t!==(t=e[7]("course.navItem.people.teams.members")+"")&&M(r,t)},d(e){e&&g(r)}}}function qe(l){let t,r;return t=new be({props:{$$slots:{default:[Ge]},$$scope:{ctx:l}}}),{c(){v(t.$$.fragment)},l(e){I(t.$$.fragment,e)},m(e,n){k(t,e,n),r=!0},p(e,n){const s={};n&2097280&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){w(t,e)}}}function He(l){let t,r,e=ae(l[6]),n=[];for(let a=0;a<e.length;a+=1)n[a]=ce(me(l,e,a));const s=a=>d(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();t=X()},l(a){for(let m=0;m<n.length;m+=1)n[m].l(a);t=X()},m(a,m){for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(a,m);O(a,t,m),r=!0},p(a,m){if(m&6880){e=ae(a[6]);let f;for(f=0;f<e.length;f+=1){const c=me(a,e,f);n[f]?(n[f].p(c,m),_(n[f],1)):(n[f]=ce(c),n[f].c(),_(n[f],1),n[f].m(t.parentNode,t))}for(J(),f=e.length;f<n.length;f+=1)s(f);W()}},i(a){if(!r){for(let m=0;m<e.length;m+=1)_(n[m]);r=!0}},o(a){n=n.filter(Boolean);for(let m=0;m<n.length;m+=1)d(n[m]);r=!1},d(a){a&&g(t),Ie(n,a)}}}function Me(l){let t,r;return t=new Ee({}),{c(){v(t.$$.fragment)},l(e){I(t.$$.fragment,e)},m(e,n){k(t,e,n),r=!0},p:ke,i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){w(t,e)}}}function Ke(l){let t,r;return t=new De({props:{label:l[7]("course.navItem.people.teams.you")}}),{c(){v(t.$$.fragment)},l(e){I(t.$$.fragment,e)},m(e,n){k(t,e,n),r=!0},p(e,n){const s={};n&128&&(s.label=e[7]("course.navItem.people.teams.you")),t.$set(s)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){w(t,e)}}}function Qe(l){let t,r;return t=new de({props:{value:l[7]("course.navItem.people.teams.invite_sent"),className:"text-xs bg-yellow-200 text-yellow-700",size:"sm"}}),{c(){v(t.$$.fragment)},l(e){I(t.$$.fragment,e)},m(e,n){k(t,e,n),r=!0},p(e,n){const s={};n&128&&(s.value=e[7]("course.navItem.people.teams.invite_sent")),t.$set(s)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){w(t,e)}}}function ue(l){let t,r;function e(){return l[16](l[18])}return t=new ge({props:{label:l[7]("course.navItem.people.teams.remove"),variant:Re.TEXT_DANGER,onClick:e,isLoading:l[5]===l[18].id,isDisabled:l[5]===l[18].id}}),{c(){v(t.$$.fragment)},l(n){I(t.$$.fragment,n)},m(n,s){k(t,n,s),r=!0},p(n,s){l=n;const a={};s&128&&(a.label=l[7]("course.navItem.people.teams.remove")),s&64&&(a.onClick=e),s&96&&(a.isLoading=l[5]===l[18].id),s&96&&(a.isDisabled=l[5]===l[18].id),t.$set(a)},i(n){r||(_(t.$$.fragment,n),r=!0)},o(n){d(t.$$.fragment,n),r=!1},d(n){w(t,n)}}}function ce(l){let t,r,e,n=l[18].email+"",s,a,m,f,c,$,S,b=l[18].profileId!==l[9].id&&l[12](l[6],l[9].id),D,R;m=new de({props:{value:l[7](l[18].role),className:"text-xs mr-3",size:"sm"}});const P=[Qe,Ke],E=[];function L(i,p){return i[18].verified?i[18].profileId===i[9].id?1:-1:0}~(c=L(l))&&($=E[c]=P[c](l));let o=b&&ue(l);return{c(){t=B("div"),r=B("div"),e=B("p"),s=q(n),a=C(),v(m.$$.fragment),f=C(),$&&$.c(),S=C(),o&&o.c(),D=C(),this.h()},l(i){t=y(i,"DIV",{class:!0});var p=F(t);r=y(p,"DIV",{class:!0});var u=F(r);e=y(u,"P",{class:!0});var h=F(e);s=H(h,n),h.forEach(g),a=N(u),I(m.$$.fragment,u),f=N(u),$&&$.l(u),u.forEach(g),S=N(p),o&&o.l(p),D=N(p),p.forEach(g),this.h()},h(){V(e,"class","text-sm text-gray-500 dark:text-white mr-3"),V(r,"class","flex"),V(t,"class","flex justify-between items-center mb-5")},m(i,p){O(i,t,p),T(t,r),T(r,e),T(e,s),T(r,a),k(m,r,null),T(r,f),~c&&E[c].m(r,null),T(t,S),o&&o.m(t,null),T(t,D),R=!0},p(i,p){(!R||p&64)&&n!==(n=i[18].email+"")&&M(s,n);const u={};p&192&&(u.value=i[7](i[18].role)),m.$set(u);let h=c;c=L(i),c===h?~c&&E[c].p(i,p):($&&(J(),d(E[h],1,1,()=>{E[h]=null}),W()),~c?($=E[c],$?$.p(i,p):($=E[c]=P[c](i),$.c()),_($,1),$.m(r,null)):$=null),p&576&&(b=i[18].profileId!==i[9].id&&i[12](i[6],i[9].id)),b?o?(o.p(i,p),p&576&&_(o,1)):(o=ue(i),o.c(),_(o,1),o.m(t,D)):o&&(J(),d(o,1,1,()=>{o=null}),W())},i(i){R||(_(m.$$.fragment,i),_($),_(o),R=!0)},o(i){d(m.$$.fragment,i),d($),d(o),R=!1},d(i){i&&g(t),w(m),~c&&E[c].d(),o&&o.d()}}}function Xe(l){let t,r,e,n;const s=[Me,He],a=[];function m(f,c){return f[3]?0:1}return t=m(l),r=a[t]=s[t](l),{c(){r.c(),e=X()},l(f){r.l(f),e=X()},m(f,c){a[t].m(f,c),O(f,e,c),n=!0},p(f,c){let $=t;t=m(f),t===$?a[t].p(f,c):(J(),d(a[$],1,1,()=>{a[$]=null}),W(),r=a[t],r?r.p(f,c):(r=a[t]=s[t](f),r.c()),_(r,1),r.m(e.parentNode,e))},i(f){n||(_(r),n=!0)},o(f){d(r),n=!1},d(f){f&&g(e),a[t].d(f)}}}function Je(l){let t,r,e,n;return t=new Y({props:{sm:2,md:2,lg:4,class:"text-lg",$$slots:{default:[qe]},$$scope:{ctx:l}}}),e=new Y({props:{sm:2,md:6,lg:8,$$slots:{default:[Xe]},$$scope:{ctx:l}}}),{c(){v(t.$$.fragment),r=C(),v(e.$$.fragment)},l(s){I(t.$$.fragment,s),r=N(s),I(e.$$.fragment,s)},m(s,a){k(t,s,a),O(s,r,a),k(e,s,a),n=!0},p(s,a){const m={};a&2097280&&(m.$$scope={dirty:a,ctx:s}),t.$set(m);const f={};a&2097896&&(f.$$scope={dirty:a,ctx:s}),e.$set(f)},i(s){n||(_(t.$$.fragment,s),_(e.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),d(e.$$.fragment,s),n=!1},d(s){s&&g(r),w(t,s),w(e,s)}}}function We(l){let t,r,e,n;return t=new fe({props:{class:"py-7 border-bottom-c",$$slots:{default:[je]},$$scope:{ctx:l}}}),e=new fe({props:{class:"py-7 border-bottom-c",$$slots:{default:[Je]},$$scope:{ctx:l}}}),{c(){v(t.$$.fragment),r=C(),v(e.$$.fragment)},l(s){I(t.$$.fragment,s),r=N(s),I(e.$$.fragment,s)},m(s,a){k(t,s,a),O(s,r,a),k(e,s,a),n=!0},p(s,a){const m={};a&2097559&&(m.$$scope={dirty:a,ctx:s}),t.$set(m);const f={};a&2097896&&(f.$$scope={dirty:a,ctx:s}),e.$set(f)},i(s){n||(_(t.$$.fragment,s),_(e.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),d(e.$$.fragment,s),n=!1},d(s){s&&g(r),w(t,s),w(e,s)}}}function Ye(l){let t,r;return t=new Pe({props:{class:"border rounded border-gray-200 dark:border-neutral-600 w-full mt-5 relative",$$slots:{default:[We]},$$scope:{ctx:l}}}),{c(){v(t.$$.fragment)},l(e){I(t.$$.fragment,e)},m(e,n){k(t,e,n),r=!0},p(e,[n]){const s={};n&2098175&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){w(t,e)}}}function Ze(l,t,r){let e,n,s,a,m;G(l,Ae,u=>r(13,e=u)),G(l,ee,u=>r(6,n=u)),G(l,he,u=>r(7,s=u)),G(l,Le,u=>r(8,a=u)),G(l,Oe,u=>r(9,m=u));let f="",c="",$=U.TUTOR,S=!1,b=!1,D=null;async function R(){const{hasError:u,error:h,emails:z}=Se(f);if(u){r(1,c=h);return}r(4,b=!0);let j="";z.forEach(async(te,ve)=>{if(j)return;if(n.some(x=>x.email.toLowerCase()===te.toLowerCase())){Q.error("snackbar.team_members.user_exists"),r(4,b=!1);return}const{data:re,error:Z}=await oe.from("organizationmember").insert({organization_id:e.id,email:te,role_id:$,verified:!1}).select();if(console.log("data",re),Z){j=`${Z}`,console.error("onSendInvite:",Z),Q.error("snackbar.team_members.invite_fail"),r(4,b=!1);return}const[A]=re||[];A&&ee.update(x=>[{id:A.id,email:A==null?void 0:A.email,fullname:(A==null?void 0:A.fullname)||"",verified:A==null?void 0:A.verified,role:K[A==null?void 0:A.role_id]||"",isAdmin:(A==null?void 0:A.role_id)===U.ADMIN},...x]),ve===z.length-1&&(Q.success("snackbar.team_members.invite_sent"),r(0,f=""),r(4,b=!1))})}async function P(u){console.log("onRemove called"),r(5,D=u);const{error:h}=await oe.from("organizationmember").delete().match({id:u});h?(console.error("onRemove:",h),Q.error("snackbar.team_members.remove_fail")):ee.update(z=>[...z.filter(j=>j.id!==u)]),r(5,D=null)}const E=async u=>{u&&(r(3,S=!0),await Ne(u),r(3,S=!1))},L=(u,h)=>u.some(z=>z.profileId===h&&z.isAdmin);function o(u){f=u,r(0,f)}function i(u){$=u,r(2,$)}const p=u=>P(u.id);return l.$$.update=()=>{l.$$.dirty&8192&&E(e.id)},[f,c,$,S,b,D,n,s,a,m,R,P,L,e,o,i,p]}class xe extends $e{constructor(t){super(),_e(this,t,Ze,Ye,pe,{})}}function et(l){let t=l[1]("upgrade.team")+"",r;return{c(){r=q(t)},l(e){r=H(e,t)},m(e,n){O(e,r,n)},p(e,n){n&2&&t!==(t=e[1]("upgrade.team")+"")&&M(r,t)},d(e){e&&g(r)}}}function tt(l){let t,r,e,n,s=l[1]("upgrade.back")+"",a,m,f,c,$,S=l[1]("upgrade.team_members")+"",b,D,R,P,E,L;return R=new ze({props:{$$slots:{default:[et]},$$scope:{ctx:l}}}),E=new xe({}),{c(){t=C(),r=B("section"),e=B("div"),n=B("a"),a=q(s),f=C(),c=B("div"),$=B("h1"),b=q(S),D=C(),v(R.$$.fragment),P=C(),v(E.$$.fragment),this.h()},l(o){we("svelte-1vd93wf",document.head).forEach(g),t=N(o),r=y(o,"SECTION",{class:!0});var p=F(r);e=y(p,"DIV",{class:!0});var u=F(e);n=y(u,"A",{class:!0,href:!0});var h=F(n);a=H(h,s),h.forEach(g),f=N(u),c=y(u,"DIV",{class:!0});var z=F(c);$=y(z,"H1",{class:!0});var j=F($);b=H(j,S),j.forEach(g),z.forEach(g),D=N(u),I(R.$$.fragment,u),P=N(u),I(E.$$.fragment,u),u.forEach(g),p.forEach(g),this.h()},h(){document.title="Teams - KinetsHub",V(n,"class","text-gray-500 dark:text-white text-md"),V(n,"href",m=`${l[0]}/settings?tab=org`),V($,"class","dark:text-white text-3xl font-bold"),V(c,"class","flex items-center justify-between mb-10"),V(e,"class","py-10 px-3 md:px-5"),V(r,"class","w-full md:max-w-4xl mx-auto")},m(o,i){O(o,t,i),O(o,r,i),T(r,e),T(e,n),T(n,a),T(e,f),T(e,c),T(c,$),T($,b),T(e,D),k(R,e,null),T(e,P),k(E,e,null),L=!0},p(o,[i]){(!L||i&2)&&s!==(s=o[1]("upgrade.back")+"")&&M(a,s),(!L||i&1&&m!==(m=`${o[0]}/settings?tab=org`))&&V(n,"href",m),(!L||i&2)&&S!==(S=o[1]("upgrade.team_members")+"")&&M(b,S);const p={};i&6&&(p.$$scope={dirty:i,ctx:o}),R.$set(p)},i(o){L||(_(R.$$.fragment,o),_(E.$$.fragment,o),L=!0)},o(o){d(R.$$.fragment,o),d(E.$$.fragment,o),L=!1},d(o){o&&(g(t),g(r)),w(R),w(E)}}}function rt(l,t,r){let e,n;return G(l,Ce,s=>r(0,e=s)),G(l,he,s=>r(1,n=s)),[e,n]}class Tt extends $e{constructor(t){super(),_e(this,t,rt,tt,pe,{})}}export{Tt as component};
//# sourceMappingURL=46.226004b7.js.map
