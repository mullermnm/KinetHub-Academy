import{a as oe}from"../chunks/supabase.2c784bff.js";import{g as re}from"../chunks/get.c5ebb55c.js";import{S as le,i as ae,b as z,d as U,m as L,t as O,c as ee,a as A,e as V,g as te}from"../chunks/index.a2391391.js";import{s as ne,C as D,t as H,x as S,D as y,b as w,l as q,d as h,z as R,e as I,i as B,f as m,m as F,Q as ie,p as j}from"../chunks/scheduler.ee52cacd.js";import{e as J}from"../chunks/each.4f9c2159.js";import{T as se}from"../chunks/Text.40bcd65a.js";import{P as ce,V as x}from"../chunks/index.550ce75a.js";import{C as ue}from"../chunks/CheckmarkOutline.0b1688ef.js";import{h as fe}from"../chunks/org.1ee4885a.js";import{g as T}from"../chunks/navigation.4bf4851d.js";import{s as G}from"../chunks/store.21c1b842.js";import{p as pe}from"../chunks/user.9ccdc884.js";import{t as de}from"../chunks/translations.f943b7b3.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f55497df-c6e8-4ffd-a350-c1c58c921472",e._sentryDebugIdIdentifier="sentry-dbid-f55497df-c6e8-4ffd-a350-c1c58c921472")}catch{}})();const K=oe();async function _e(e){const{data:t}=await K.from("course").select(`
	    id,
	    is_published,
	    group:group_id!inner(
	      organization!inner(
	        avatar_url,
	        siteName
	      )
	    )
	  `).eq("group.organization.siteName",e),o=t||[];return console.log("courseData",o),{isCoursePublished:o.some(l=>l.is_published===!0),isCourseCreated:o.length>0,orgHasAvatarUrl:!!re(o[0],"group.organization.avatar_url",""),courseData:o}}async function me(e){const{data:t}=await K.from("lesson").select(`
	    id,
	    course:course_id!inner(
	      group:group_id!inner(
	        organization!inner(
	          siteName
	        )
	      )
	    )
	  `).eq("course.group.organization.siteName",e);return console.log("lessonsData",t),{isLessonCreated:Array.isArray(t)?t.length>0:!1,lessonData:t}}async function ge(e){const{data:t}=await K.from("exercise").select(`
	    id,
	    lesson:lesson_id!inner(
	      course:course_id!inner(
	        group:group_id!inner(
	          organization!inner(
	            siteName
	          )
	        )
	      )
	    )
	  `).eq("lesson.course.group.organization.siteName",e);return Array.isArray(t)?(t==null?void 0:t.length)>0:!1}const be=async({params:e={slug:""}})=>{const{isCourseCreated:t,isCoursePublished:o,orgHasAvatarUrl:l,courseData:i}=await _e(e.slug),{isLessonCreated:n,lessonData:r}=await me(e.slug),u=await ge(e.slug),d=[{id:"profile",title:"setup.personal_profile.title",desc:"setup.personal_profile.desc",is_completed:!1,button_label:"setup.personal_profile.button_label"},{id:"organization",title:"setup.organization_profile.title",desc:"setup.organization_profile.desc",is_completed:l,button_label:"setup.organization_profile.button_label"},{id:"course",title:"setup.course.title",desc:"setup.course.desc",is_completed:t,button_label:"setup.course.button_label"},{id:"lesson",title:"setup.lesson.title",desc:"setup.lesson.desc",is_completed:n,button_label:"setup.lesson.button_label"},{id:"exercise",title:"setup.exercise.title",desc:"setup.exercise.desc",is_completed:u,button_label:"setup.exercise.button_label"},{id:"publish",title:"setup.publish_course.title",desc:"setup.publish_course.desc",is_completed:o,button_label:"setup.publish_course.button_label"}];return{orgSiteName:e.slug,setup:d,courses:i,lessons:r}},Pe=Object.freeze(Object.defineProperty({__proto__:null,load:be},Symbol.toStringTag,{value:"Module"}));function W(e,t,o){const l=e.slice();return l[10]=t[o],l[12]=o,l}function Y(e){let t,o;return t=new ue({}),{c(){z(t.$$.fragment)},l(l){U(t.$$.fragment,l)},m(l,i){L(t,l,i),o=!0},i(l){o||(O(t.$$.fragment,l),o=!0)},o(l){A(t.$$.fragment,l),o=!1},d(l){V(t,l)}}}function he(e){let t,o=e[2](e[10].button_label)+"",l,i,n=e[10].is_completed&&Y();return{c(){n&&n.c(),t=S(),l=H(o)},l(r){n&&n.l(r),t=R(r),l=q(r,o)},m(r,u){n&&n.m(r,u),B(r,t,u),B(r,l,u),i=!0},p(r,u){r[10].is_completed?n?u&1&&O(n,1):(n=Y(),n.c(),O(n,1),n.m(t.parentNode,t)):n&&(te(),A(n,1,1,()=>{n=null}),ee()),(!i||u&5)&&o!==(o=r[2](r[10].button_label)+"")&&F(l,o)},i(r){i||(O(n),i=!0)},o(r){A(n),i=!1},d(r){r&&(h(t),h(l)),n&&n.d(r)}}}function Z(e){let t,o,l,i,n,r,u=e[2](e[10].title)+"",d,E,_,v=e[2](e[10].desc)+"",$,s,C,a,f,g,c;i=new se({props:{value:e[12]+1,className:"text-[10px] font-semibold !py-1 ",shape:"rounded-full"}});function k(){return e[6](e[10])}return f=new ce({props:{variant:e[10].is_completed?x.CONTAINED_DARK:x.OUTLINED,className:"!w-full font-normal text-sm flex items-center gap-2",onClick:k,isDisabled:e[10].is_completed,$$slots:{default:[he]},$$scope:{ctx:e}}}),{c(){t=D("div"),o=D("div"),l=D("div"),z(i.$$.fragment),n=S(),r=D("p"),d=H(u),E=S(),_=D("p"),$=H(v),C=S(),a=D("div"),z(f.$$.fragment),g=S(),this.h()},l(b){t=y(b,"DIV",{class:!0});var p=w(t);o=y(p,"DIV",{class:!0});var N=w(o);l=y(N,"DIV",{class:!0});var P=w(l);U(i.$$.fragment,P),n=R(P),r=y(P,"P",{class:!0});var X=w(r);d=q(X,u),X.forEach(h),P.forEach(h),E=R(N),_=y(N,"P",{class:!0});var M=w(_);$=q(M,v),M.forEach(h),N.forEach(h),C=R(p),a=y(p,"DIV",{class:!0});var Q=w(a);U(f.$$.fragment,Q),Q.forEach(h),g=R(p),p.forEach(h),this.h()},h(){I(r,"class","font-medium text-lg"),I(l,"class","flex items-center gap-3"),I(_,"class","text-sm"),I(o,"class",s=`space-y-1 flex-1 ${e[10].is_completed?"opacity-50":""}  lg:max-w-[50%]`),I(a,"class","w-full lg:w-[30%]"),I(t,"class","flex flex-col lg:flex-row lg:items-center justify-between gap-2 w-full py-8 border-b border-gray-300")},m(b,p){B(b,t,p),m(t,o),m(o,l),L(i,l,null),m(l,n),m(l,r),m(r,d),m(o,E),m(o,_),m(_,$),m(t,C),m(t,a),L(f,a,null),m(t,g),c=!0},p(b,p){e=b,(!c||p&5)&&u!==(u=e[2](e[10].title)+"")&&F(d,u),(!c||p&5)&&v!==(v=e[2](e[10].desc)+"")&&F($,v),(!c||p&1&&s!==(s=`space-y-1 flex-1 ${e[10].is_completed?"opacity-50":""}  lg:max-w-[50%]`))&&I(o,"class",s);const N={};p&1&&(N.variant=e[10].is_completed?x.CONTAINED_DARK:x.OUTLINED),p&1&&(N.onClick=k),p&1&&(N.isDisabled=e[10].is_completed),p&8197&&(N.$$scope={dirty:p,ctx:e}),f.$set(N)},i(b){c||(O(i.$$.fragment,b),O(f.$$.fragment,b),c=!0)},o(b){A(i.$$.fragment,b),A(f.$$.fragment,b),c=!1},d(b){b&&h(t),V(i),V(f)}}}function Ee(e){let t,o,l,i,n=e[2]("setup.get_started")+"",r,u,d,E,_,v;d=new se({props:{value:`${e[1]}/${e[0].length}`,className:"text-[10px] font-semibold px-3 !py-1",shape:"rounded-full"}});let $=J(e[0]),s=[];for(let a=0;a<$.length;a+=1)s[a]=Z(W(e,$,a));const C=a=>A(s[a],1,1,()=>{s[a]=null});return{c(){t=D("section"),o=D("div"),l=D("div"),i=D("h1"),r=H(n),u=S(),z(d.$$.fragment),E=S(),_=D("section");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){t=y(a,"SECTION",{class:!0});var f=w(t);o=y(f,"DIV",{class:!0});var g=w(o);l=y(g,"DIV",{class:!0});var c=w(l);i=y(c,"H1",{class:!0});var k=w(i);r=q(k,n),k.forEach(h),u=R(c),U(d.$$.fragment,c),c.forEach(h),E=R(g),_=y(g,"SECTION",{class:!0});var b=w(_);for(let p=0;p<s.length;p+=1)s[p].l(b);b.forEach(h),g.forEach(h),f.forEach(h),this.h()},h(){I(i,"class","dark:text-white text-2xl md:text-3xl font-bold"),I(l,"class","flex items-center gap-2"),I(_,"class","px-4"),I(o,"class","py-2 md:py-10 px-2 md:px-5"),I(t,"class","w-full md:max-w-4xl mx-auto")},m(a,f){B(a,t,f),m(t,o),m(o,l),m(l,i),m(i,r),m(l,u),L(d,l,null),m(o,E),m(o,_);for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(_,null);v=!0},p(a,[f]){(!v||f&4)&&n!==(n=a[2]("setup.get_started")+"")&&F(r,n);const g={};if(f&3&&(g.value=`${a[1]}/${a[0].length}`),d.$set(g),f&13){$=J(a[0]);let c;for(c=0;c<$.length;c+=1){const k=W(a,$,c);s[c]?(s[c].p(k,f),O(s[c],1)):(s[c]=Z(k),s[c].c(),O(s[c],1),s[c].m(_,null))}for(te(),c=$.length;c<s.length;c+=1)C(c);ee()}},i(a){if(!v){O(d.$$.fragment,a);for(let f=0;f<$.length;f+=1)O(s[f]);v=!0}},o(a){A(d.$$.fragment,a),s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)A(s[f]);v=!1},d(a){a&&h(t),V(d),ie(s,a)}}}function ve(e,t,o){let l,i,n;j(e,pe,s=>o(5,l=s)),j(e,fe,s=>o(7,i=s)),j(e,de,s=>o(2,n=s));let{data:r}=t,u=r.setup||[],d=0;const E={UPDATE_PROFILE:"profile",UPDATE_ORG_PROFILE:"organization",CREATE_COURSE:"course",CREATE_LESSON:"lesson",CREATE_EXERCISE:"exercise",PUBLISH_COURSE:"publish"},_=s=>{var C;return((C=u==null?void 0:u.find(a=>a.id===s))==null?void 0:C.is_completed)==!0},v=s=>{switch(s){case E.CREATE_COURSE:T(`/org/${i.siteName}/courses?create=true`);break;case E.CREATE_LESSON:if(_("course")){const C=r==null?void 0:r.courses[0].id;T(`/courses/${C}/lessons`)}else G.info("setup.info_course");break;case E.CREATE_EXERCISE:if(_("lesson")){const C=r==null?void 0:r.courses[0].id,a=r==null?void 0:r.lessons[0].id;T(`/courses/${C}/lessons/${a}`)}else G.info("setup.info_lesson");break;case E.PUBLISH_COURSE:if(_("course")){const C=r==null?void 0:r.courses[0].id;T(`/courses/${C}/settings`)}else G.info("setup.info_course");break;case E.UPDATE_PROFILE:T(`/org/${i.siteName}/settings`);break;case E.UPDATE_ORG_PROFILE:T(`/org/${i.siteName}/settings?tab=org`);break}},$=s=>v(s.id);return e.$$set=s=>{"data"in s&&o(4,r=s.data)},e.$$.update=()=>{e.$$.dirty&33&&o(0,u=u.map(s=>(s.id==="profile"&&(s.is_completed=!l.avatar_url.includes("avatars/avatar.png")),s))),e.$$.dirty&1&&o(1,d=u.filter(s=>s.is_completed).length)},[u,d,n,v,r,l,$]}class xe extends le{constructor(t){super(),ae(this,t,ve,Ee,ne,{data:4})}}export{xe as component,Pe as universal};
//# sourceMappingURL=47.b303c830.js.map
