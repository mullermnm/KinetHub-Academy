{"version":3,"file":"49.75f05694.js","sources":["../../../../../../src/routes/reset/+page.svelte"],"sourcesContent":["<script>\n  import { goto } from '$app/navigation';\n  import TextField from '$lib/components/Form/TextField.svelte';\n  import PrimaryButton from '$lib/components/PrimaryButton/index.svelte';\n  import { getSupabase } from '$lib/utils/functions/supabase';\n  import {\n    resetValidation,\n    getConfirmPasswordError,\n    getDisableSubmit\n  } from '$lib/utils/functions/validator';\n  import { RESET_FIELDS } from '$lib/utils/constants/authentication';\n  import AuthUI from '$lib/components/AuthUI/index.svelte';\n\n  let supabase = getSupabase();\n  let fields = Object.assign({}, RESET_FIELDS);\n  let loading = false;\n  let success = false;\n  let errors = {};\n  let submitError;\n  let disableSubmit = false;\n  let formRef;\n\n  async function handleSubmit(e) {\n    errors = resetValidation(fields);\n    console.log('errors', errors);\n\n    if (Object.keys(errors).length) {\n      return;\n    }\n\n    try {\n      loading = true;\n      const { data, error } = await supabase.auth.updateUser({\n        password: fields.password\n      });\n      console.log('data', data);\n      if (error) throw error;\n\n      formRef?.reset();\n\n      return goto('/login');\n    } catch (error) {\n      submitError = error.error_description || error.message;\n    } finally {\n      loading = false;\n    }\n  }\n\n  $: errors.confirmPassword = getConfirmPasswordError(fields);\n  $: disableSubmit = getDisableSubmit(fields);\n</script>\n\n<svelte:head>\n  <title>Join KinetsHub</title>\n</svelte:head>\n\n<AuthUI\n  {supabase}\n  isLogin={false}\n  {handleSubmit}\n  showOnlyContent={true}\n  isLoading={loading}\n  showLogo={true}\n  bind:formRef\n>\n  <div class=\"mt-4 w-full\">\n    <h3 class=\"dark:text-white text-xl font-semibold my-3\">New Password</h3>\n    <p class=\"dark:text-white text-sm mb-6\">Enter your new password details</p>\n    <TextField\n      label=\"Your Password\"\n      bind:value={fields.password}\n      type=\"password\"\n      placeholder=\"************\"\n      className=\"mb-6\"\n      inputClassName=\"w-full\"\n      isDisabled={loading}\n      errorMessage={errors.password}\n      helperMessage=\"Password must be more than 6 characters\"\n      isRequired\n    />\n    <TextField\n      label=\"Confirm Password\"\n      bind:value={fields.confirmPassword}\n      type=\"password\"\n      placeholder=\"************\"\n      className=\"mb-6\"\n      inputClassName=\"w-full\"\n      isDisabled={loading}\n      errorMessage={errors.confirmPassword}\n      isRequired\n    />\n    {#if submitError}\n      <p class=\"text-sm text-red-500\">{submitError}</p>\n    {/if}\n  </div>\n\n  <div class=\"my-4 w-full flex justify-end items-center\">\n    <PrimaryButton\n      label=\"Reset Password\"\n      type=\"submit\"\n      className=\"sm:w-full w-full\"\n      isDisabled={disableSubmit || loading}\n      isLoading={loading}\n    />\n  </div>\n</AuthUI>\n"],"names":["ctx","textfield0_props","textfield1_props","dirty","textfield0_changes","textfield1_changes","primarybutton_changes","supabase","getSupabase","fields","RESET_FIELDS","loading","disableSubmit","handleSubmit","e","errors","$$invalidate","data","error","formRef","goto","submitError","$$self","value","getConfirmPasswordError","getDisableSubmit"],"mappings":"06CA4EoB,aAAAA,EAAA,CAAA,EAAA,gFANFA,EAAA,CAAA,EAAA,WAAA,SAAAC,EAAA,MAAAD,EAAA,CAAA,EAAA,kNAkBE,aAAAA,EAAA,CAAA,EAAA,+BANFA,EAAA,CAAA,EAAA,kBAAA,SAAAE,EAAA,MAAAF,EAAA,CAAA,EAAA,0KAmBA,WAAAA,EAAA,CAAA,GAAAA,EAAA,CAAA,k7BAzBEG,EAAA,IAAAC,EAAA,aAAAJ,EAAA,CAAA,EAAA,yBANFI,EAAA,MAAAJ,EAAA,CAAA,EAAA,oEAkBEG,EAAA,IAAAE,EAAA,aAAAL,EAAA,CAAA,EAAA,gCANFK,EAAA,MAAAL,EAAA,CAAA,EAAA,gHAmBAG,EAAA,KAAAG,EAAA,WAAAN,EAAA,CAAA,GAAAA,EAAA,CAAA,w6BAxFZ,IAAAO,EAAAC,GAAA,EACAC,EAAA,OAAA,OAAA,CAAA,EAAAC,EAAA,EACAC,EAAA,UAIAC,EAAA,KAGW,eAAAC,EAAAC,EAAA,CAIT,gBAFJ,QAAA,IAAA,SAAAC,CAAA,EAEI,QAAA,KAAAA,CAAA,EAAA,WAKFC,EAAA,EAAAL,EAAA,EAAA,EACQ,KAAA,CAAA,KAAAM,EAAA,MAAAC,CAAA,EAAA,MAAAX,EAAA,KAAA,WAAA,CAAA,SAAAE,EAAA,QAAA,CAAA,EAIJ,GADJ,QAAA,IAAA,OAAAQ,CAAA,EACIC,EAAA,MAAAA,EAEJ,OAAAC,GAAA,MAAAA,EAAA,QAEOC,GAAA,QAAA,WAEPJ,EAAA,EAAAK,EAAAH,EAAA,mBAAAA,EAAA,OAAA,UAEAF,EAAA,EAAAL,EAAA,EAAA,iBA0BYW,EAAA,GAAA,UAAAb,EAAA,SAAAc,CAAA,IAAAd,EAAA,SAAAc,wBAYAD,EAAA,GAAA,UAAAb,EAAA,gBAAAc,CAAA,IAAAd,EAAA,gBAAAc,yEAlChBP,EAAA,EAAAD,EAAA,gBAAAS,GAAAf,CAAA,EAAAM,CAAA,gBACAC,EAAA,EAAAJ,EAAAa,GAAAhB,CAAA,CAAA"}