{"version":3,"file":"_page.svelte-035bf23f.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/lms/community/_slug_/_page.svelte.js"],"sourcesContent":[";\n!function() {\n  try {\n    var e = \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : {}, n = new Error().stack;\n    n && (e._sentryDebugIds = e._sentryDebugIds || {}, e._sentryDebugIds[n] = \"63083080-7284-4ed8-b541-fed3253067dc\", e._sentryDebugIdIdentifier = \"sentry-dbid-63083080-7284-4ed8-b541-fed3253067dc\");\n  } catch (e2) {\n  }\n}();\nimport { s as subscribe } from \"../../../../../chunks/utils.js\";\nimport { c as create_ssr_component, e as escape, v as validate_component } from \"../../../../../chunks/ssr.js\";\nimport { g as goto } from \"../../../../../chunks/navigation.js\";\nimport \"pluralize\";\n/* empty css                                                          *//* empty css                                                          */import \"../../../../../chunks/_sentry-release-injection-file.js\";\nimport \"../../../../../chunks/index9.js\";\nimport { a as currentOrg, i as isOrgAdmin } from \"../../../../../chunks/org.js\";\nimport { p as profile } from \"../../../../../chunks/user.js\";\nimport { s as supabase } from \"../../../../../chunks/supabase.js\";\nimport \"../../../../../chunks/validator.js\";\nimport { b as snackbar } from \"../../../../../chunks/store2.js\";\n/* empty css                                                             */import { D as DeleteModal } from \"../../../../../chunks/DeleteModal.js\";\n/* empty css                                                          */import \"../../../../../chunks/date.js\";\nimport { t as fetchCourses } from \"../../../../../chunks/index18.js\";\nimport { t } from \"../../../../../chunks/translations.js\";\nimport { a as courses } from \"../../../../../chunks/store5.js\";\nimport { S as SkeletonText } from \"../../../../../chunks/SkeletonText.js\";\nimport { S as SkeletonPlaceholder } from \"../../../../../chunks/SkeletonPlaceholder.js\";\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let $currentOrg, $$unsubscribe_currentOrg;\n  let $profile, $$unsubscribe_profile;\n  let $courses, $$unsubscribe_courses;\n  let $$unsubscribe_t;\n  let $$unsubscribe_isOrgAdmin;\n  $$unsubscribe_currentOrg = subscribe(currentOrg, (value) => $currentOrg = value);\n  $$unsubscribe_profile = subscribe(profile, (value) => $profile = value);\n  $$unsubscribe_courses = subscribe(courses, (value) => $courses = value);\n  $$unsubscribe_t = subscribe(t, (value) => value);\n  $$unsubscribe_isOrgAdmin = subscribe(isOrgAdmin, (value) => value);\n  let { data } = $$props;\n  let question;\n  let deleteComment = {\n    shouldDelete: false,\n    commentId: \"\",\n    isDeleting: false\n  };\n  let deleteQuestion = {\n    shouldDelete: false,\n    questionId: \"\",\n    isDeleting: false\n  };\n  async function getCourses(userId, orgId) {\n    if ($courses.length) {\n      [...$courses];\n      return;\n    }\n    const coursesResults = await fetchCourses(userId, orgId);\n    coursesResults?.allCourses || [];\n  }\n  async function handleDelete(isQuestion) {\n    if (!isQuestion) {\n      deleteComment.isDeleting = true;\n      const { error } = await supabase.from(\"community_answer\").delete().match({ id: deleteComment.commentId });\n      deleteComment.isDeleting = false;\n      if (error) {\n        snackbar.error(\"snackbar.community.error.deleting_comments\");\n        console.log(\"Error deleting comments\", error);\n        return;\n      }\n      snackbar.success(\"snackbar.community.success.success_delete\");\n      question.comments = question.comments.filter((c) => c.id !== deleteComment.commentId);\n      deleteComment.shouldDelete = false;\n      deleteComment.commentId = \"\";\n      return;\n    }\n    deleteQuestion.isDeleting = true;\n    const { error: commentDeleteError } = await supabase.from(\"community_answer\").delete().match({ question_id: deleteQuestion.questionId });\n    if (commentDeleteError) {\n      snackbar.error(\"snackbar.community.error.deleting_comments\");\n      console.log(\"Error deleting comments\", commentDeleteError);\n      deleteQuestion.isDeleting = false;\n      return;\n    }\n    const { error: questionDeleteError } = await supabase.from(\"community_question\").delete().match({ id: deleteQuestion.questionId });\n    if (questionDeleteError) {\n      snackbar.error(\"snackbar.community.error.deleting_question\");\n      console.log(\"Error deleting question\", questionDeleteError);\n      return;\n    }\n    snackbar.success(\"snackbar.community.success.success_delete\");\n    goto(`/lms/community`);\n    deleteQuestion.isDeleting = false;\n  }\n  if ($$props.data === void 0 && $$bindings.data && data !== void 0)\n    $$bindings.data(data);\n  let $$settled;\n  let $$rendered;\n  do {\n    $$settled = true;\n    {\n      {\n        if ($profile.id && $currentOrg.id) {\n          getCourses($profile.id, $currentOrg.id);\n        }\n      }\n    }\n    $$rendered = `${$$result.head += `<!-- HEAD_svelte-7qdk32_START -->${$$result.title = `<title>${escape(\"Question\")}</title>`, \"\"}<!-- HEAD_svelte-7qdk32_END -->`, \"\"} ${validate_component(DeleteModal, \"DeleteModal\").$$render(\n      $$result,\n      {\n        onCancel: () => {\n          deleteQuestion.shouldDelete = false;\n          deleteQuestion.questionId = \"\";\n        },\n        onDelete: () => handleDelete(true),\n        isQuestion: true,\n        open: deleteQuestion.shouldDelete,\n        isDeleting: deleteQuestion.isDeleting\n      },\n      {\n        open: ($$value) => {\n          deleteQuestion.shouldDelete = $$value;\n          $$settled = false;\n        },\n        isDeleting: ($$value) => {\n          deleteQuestion.isDeleting = $$value;\n          $$settled = false;\n        }\n      },\n      {}\n    )} ${validate_component(DeleteModal, \"DeleteModal\").$$render(\n      $$result,\n      {\n        isDeleting: deleteComment.isDeleting,\n        onCancel: () => {\n          deleteComment.shouldDelete = false;\n          deleteComment.commentId = \"\";\n        },\n        onDelete: () => handleDelete(false),\n        open: deleteComment.shouldDelete\n      },\n      {\n        open: ($$value) => {\n          deleteComment.shouldDelete = $$value;\n          $$settled = false;\n        }\n      },\n      {}\n    )} <section class=\"max-w-3xl mx-auto md:mx-10 lg:mb-20\">${`<div class=\"py-10 px-5 mb-3\">${validate_component(SkeletonText, \"SkeletonText\").$$render($$result, { style: \"width: 25%;\" }, {}, {})} ${validate_component(SkeletonText, \"SkeletonText\").$$render(\n      $$result,\n      {\n        style: \"width: 100%; margin-bottom: 2rem\"\n      },\n      {},\n      {}\n    )} ${validate_component(SkeletonPlaceholder, \"SkeletonPlaceholder\").$$render($$result, { style: \"width: 100%; height: 20rem;\" }, {}, {})}</div>`}</section>`;\n  } while (!$$settled);\n  $$unsubscribe_currentOrg();\n  $$unsubscribe_profile();\n  $$unsubscribe_courses();\n  $$unsubscribe_t();\n  $$unsubscribe_isOrgAdmin();\n  return $$rendered;\n});\nexport {\n  Page as default\n};\n//# sourceMappingURL=_page.svelte.js.map\n"],"names":["t","SkeletonText","SkeletonPlaceholder"],"mappings":"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"}