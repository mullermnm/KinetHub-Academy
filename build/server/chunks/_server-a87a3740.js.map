{"version":3,"file":"_server-a87a3740.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/completion/exerciseprompt/_server.js"],"sourcesContent":[";\n!function() {\n  try {\n    var e = \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : {}, n = new Error().stack;\n    n && (e._sentryDebugIds = e._sentryDebugIds || {}, e._sentryDebugIds[n] = \"2cd38e00-e7f3-49cc-886e-a781c9bb4edd\", e._sentryDebugIdIdentifier = \"sentry-dbid-2cd38e00-e7f3-49cc-886e-a781c9bb4edd\");\n  } catch (e2) {\n  }\n}();\nimport { Configuration, OpenAIApi } from \"openai-edge\";\nimport { O as OpenAIStream, S as StreamingTextResponse } from \"../../../../../chunks/index3.js\";\nimport { b as private_env } from \"../../../../../chunks/shared-server.js\";\nimport \"../../../../../chunks/_sentry-release-injection-file.js\";\nconst openAIConfig = new Configuration({\n  apiKey: private_env.OPENAI_API_KEY\n});\nconst openai = new OpenAIApi(openAIConfig);\nconst config = {\n  runtime: \"edge\"\n};\nasync function POST({ request }) {\n  const { prompt } = await request.json();\n  const { questionNumber, optionNumber, lessonNote } = JSON.parse(prompt);\n  const refinedPrompt = `\nPlease note this typescript interface:\n\ninterface Question_type {\n  id: number;\n  label: any;\n}\nconst QuestionTypes: Question_type[] = [\n  {\n    id: 1,\n    label: 'RADIO'\n  },\n  {\n    id: 2,\n    label: 'CHECKBOX'\n  },\n  {\n    id: 3,\n    label: 'TEXTAREA'\n  }\n];\n\ninterface ExerciseTemplate {\n  title: string;\n  description: string;\n  questionnaire: {\n    questions: {\n      title: string;\n      name: string;\n      points: number; // a number out of 10 to score the student if student gets the correct answer\n      order: number; // a unique number from 0 to n+1, that orders the question in ascending order\n      question_type: Question_type;\n      options: {\n        label: string;\n        is_correct: boolean;\n      };\n    }[]\n  };\n}\n\nI am a teacher and I need your help evaluating my students after I have taught a lesson. Please generate a test with ${questionNumber} questions and ${optionNumber} options. The sourse of this test should come from my lesson note in thripple quotes: \"\"\"${lessonNote}\"\"\". Format the quiz to match the ExerciseTemplate interface above and VERY IMPORTANTANTLY: ONLY RETURN JSON FORMAT AND DO NOT EXPLAIN ANTHING.\nNB: Ask a mixture of ${optionNumber} options and ${questionNumber} DIFFERENT Question Types(RADIO, CHECKBOX AND TEXTAREA), mark the correct answer.`;\n  const response = await openai.createChatCompletion({\n    model: \"gpt-4o\",\n    messages: [\n      {\n        role: \"system\",\n        content: \"You only spit out JSON and nothing else, dont give any explanation.\"\n      },\n      {\n        role: \"user\",\n        content: refinedPrompt\n      }\n    ],\n    stream: true\n  });\n  const stream = OpenAIStream(response);\n  return new StreamingTextResponse(stream);\n}\nexport {\n  POST,\n  config\n};\n//# sourceMappingURL=_server.js.map\n"],"names":[],"mappings":";;;;;AACA,CAAC,WAAW;AACZ,EAAE,IAAI;AACN,IAAI,IAAI,CAAC,GAAG,WAAW,IAAI,OAAO,MAAM,GAAG,MAAM,GAAG,WAAW,IAAI,OAAO,MAAM,GAAG,MAAM,GAAG,WAAW,IAAI,OAAO,IAAI,GAAG,IAAI,GAAG,EAAE,EAAE,CAAC,GAAG,IAAI,KAAK,EAAE,CAAC,KAAK,CAAC;AAC1J,IAAI,CAAC,KAAK,CAAC,CAAC,eAAe,GAAG,CAAC,CAAC,eAAe,IAAI,EAAE,EAAE,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,sCAAsC,EAAE,CAAC,CAAC,wBAAwB,GAAG,kDAAkD,CAAC,CAAC;AACvM,GAAG,CAAC,OAAO,EAAE,EAAE;AACf,GAAG;AACH,CAAC,EAAE,CAAC;AAKJ,MAAM,YAAY,GAAG,IAAI,aAAa,CAAC;AACvC,EAAE,MAAM,EAAE,WAAW,CAAC,cAAc;AACpC,CAAC,CAAC,CAAC;AACH,MAAM,MAAM,GAAG,IAAI,SAAS,CAAC,YAAY,CAAC,CAAC;AACtC,MAAC,MAAM,GAAG;AACf,EAAE,OAAO,EAAE,MAAM;AACjB,EAAE;AACF,eAAe,IAAI,CAAC,EAAE,OAAO,EAAE,EAAE;AACjC,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE,CAAC;AAC1C,EAAE,MAAM,EAAE,cAAc,EAAE,YAAY,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;AAC1E,EAAE,MAAM,aAAa,GAAG,CAAC;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qHAAqH,EAAE,cAAc,CAAC,eAAe,EAAE,YAAY,CAAC,yFAAyF,EAAE,UAAU,CAAC;AAC1Q,qBAAqB,EAAE,YAAY,CAAC,aAAa,EAAE,cAAc,CAAC,iFAAiF,CAAC,CAAC;AACrJ,EAAE,MAAM,QAAQ,GAAG,MAAM,MAAM,CAAC,oBAAoB,CAAC;AACrD,IAAI,KAAK,EAAE,QAAQ;AACnB,IAAI,QAAQ,EAAE;AACd,MAAM;AACN,QAAQ,IAAI,EAAE,QAAQ;AACtB,QAAQ,OAAO,EAAE,qEAAqE;AACtF,OAAO;AACP,MAAM;AACN,QAAQ,IAAI,EAAE,MAAM;AACpB,QAAQ,OAAO,EAAE,aAAa;AAC9B,OAAO;AACP,KAAK;AACL,IAAI,MAAM,EAAE,IAAI;AAChB,GAAG,CAAC,CAAC;AACL,EAAE,MAAM,MAAM,GAAG,YAAY,CAAC,QAAQ,CAAC,CAAC;AACxC,EAAE,OAAO,IAAI,qBAAqB,CAAC,MAAM,CAAC,CAAC;AAC3C;;;;"}