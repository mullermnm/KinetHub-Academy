{"version":3,"file":"index14-890f60bc.js","sources":["../../../.svelte-kit/adapter-node/chunks/index14.js"],"sourcesContent":[";\n!function() {\n  try {\n    var e = \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : {}, n = new Error().stack;\n    n && (e._sentryDebugIds = e._sentryDebugIds || {}, e._sentryDebugIds[n] = \"613c1abb-a688-44fa-9302-c9caa1fc61d8\", e._sentryDebugIdIdentifier = \"sentry-dbid-613c1abb-a688-44fa-9302-c9caa1fc61d8\");\n  } catch (e2) {\n  }\n}();\nimport { s as subscribe } from \"./utils.js\";\nimport { c as create_ssr_component } from \"./ssr.js\";\nimport { p as profile } from \"./user.js\";\nimport { g as group } from \"./store4.js\";\nimport { i as isOrgAdmin, R as ROLE } from \"./org.js\";\nconst RoleBasedSecurity = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let show;\n  let $isOrgAdmin, $$unsubscribe_isOrgAdmin;\n  let $group, $$unsubscribe_group;\n  let $profile, $$unsubscribe_profile;\n  $$unsubscribe_isOrgAdmin = subscribe(isOrgAdmin, (value) => $isOrgAdmin = value);\n  $$unsubscribe_group = subscribe(group, (value) => $group = value);\n  $$unsubscribe_profile = subscribe(profile, (value) => $profile = value);\n  let { allowedRoles = [] } = $$props;\n  let { onDenied = () => {\n  } } = $$props;\n  let { onlyStudent = false } = $$props;\n  let userRole = 0;\n  function isAllowed(userRole2) {\n    return allowedRoles.includes(userRole2);\n  }\n  if ($$props.allowedRoles === void 0 && $$bindings.allowedRoles && allowedRoles !== void 0)\n    $$bindings.allowedRoles(allowedRoles);\n  if ($$props.onDenied === void 0 && $$bindings.onDenied && onDenied !== void 0)\n    $$bindings.onDenied(onDenied);\n  if ($$props.onlyStudent === void 0 && $$bindings.onlyStudent && onlyStudent !== void 0)\n    $$bindings.onlyStudent(onlyStudent);\n  {\n    {\n      const user = $group.people.find((person) => person.profile_id === $profile.id);\n      userRole = user ? user.role_id : userRole;\n      if (!$isOrgAdmin && $group.people.length && !isAllowed(userRole)) {\n        onDenied();\n      }\n    }\n  }\n  show = onlyStudent ? isAllowed(ROLE.STUDENT) : isAllowed(userRole) || $isOrgAdmin;\n  $$unsubscribe_isOrgAdmin();\n  $$unsubscribe_group();\n  $$unsubscribe_profile();\n  return `${show ? `${slots.default ? slots.default({}) : ``}` : ``}`;\n});\nexport {\n  RoleBasedSecurity as R\n};\n//# sourceMappingURL=index14.js.map\n"],"names":[],"mappings":"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"}